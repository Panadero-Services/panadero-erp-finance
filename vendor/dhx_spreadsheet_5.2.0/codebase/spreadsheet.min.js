/*
@license

dhtmlxSpreadsheet v.5.2.0 Professional

This software is covered by DHTMLX Individual License.
Usage without proper license is prohibited.

(c) XB Software.

*/
if(window.dhx&&(window.dhx_legacy=dhx,delete window.dhx),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.dhx=t():e.dhx=t()}(window,(function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/codebase/",i(i.s=111)}([function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.getTextLines=t.getCloneObject=t.rgbToHex=t.getStringWidth=t.getMinArrayNumber=t.getMaxArrayNumber=t.isEmptyObj=t.isType=t.compare=t.debounce=t.downloadFile=t.isNumeric=t.range=t.isId=t.isDefined=t.wrapBox=t.unwrapBox=t.detectWidgetClick=t.singleOuterClick=t.isExistValue=t.findIndex=t.naturalSort=t.copy=t.extend=t.extendComponent=t.uid=void 0;var o=i(3),r=(new Date).valueOf();function a(e,t,i){"function"==typeof t[i]?e[i]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t[i].apply(t,e)}:Object.defineProperty(e,i,{get:function(){return t[i]},set:function(e){return t[i]=e},enumerable:!0,configurable:!0})}t.uid=function(){return"u"+r++},t.extendComponent=function(e,t){if(!t)return e;for(var i=0,n=Object.keys(t);i<n.length;i++){a(e,t,l=n[i])}for(var o=Object.getPrototypeOf(t);o&&o!==Object.prototype;){for(var r=0,s=Object.getOwnPropertyNames(o);r<s.length;r++){var l=s[r];e.hasOwnProperty(l)||a(e,t,l)}o=Object.getPrototypeOf(o)}return e},t.extend=function e(t,i,n){if(void 0===n&&(n=!0),i)for(var o in i){var r=i[o],a=t[o];void 0===r?delete t[o]:!n||"object"!=typeof a||a instanceof Date||a instanceof Array?t[o]=r:e(a,r)}return t},t.copy=function(e,t){var i={};for(var n in e)t&&n.startsWith("$")||(i[n]=e[n]);return i},t.naturalSort=function(e){return e.sort((function(e,t){return"string"==typeof e?e.localeCompare(t):e-t}))},t.findIndex=function(e,t){for(var i=e.length,n=0;n<i;n++)if(t(e[n]))return n;return-1},t.isExistValue=function(e,t){var i=t.toString(),n=e.toString();return!(i.length>n.length)&&n.toLowerCase().includes(i.toLowerCase())},t.singleOuterClick=function(e){var t=function(i){e(i)&&document.removeEventListener("click",t)};document.addEventListener("click",t)},t.detectWidgetClick=function(e,t){var i=function(i){return t((0,o.locate)(i,"data-dhx-widget-id")===e)};return document.addEventListener("click",i),function(){return document.removeEventListener("click",i)}},t.unwrapBox=function(e){return Array.isArray(e)?e[0]:e},t.wrapBox=function(e){return Array.isArray(e)?e:[e]},t.isDefined=function(e){return null!=e},t.isId=function(e){return"number"==typeof e||"string"==typeof e&&""!==e},t.range=function(e,t){if(e>t)return[];for(var i=[];e<=t;)i.push(e++);return i},t.isNumeric=function(e){return!isNaN(e-parseFloat(e))},t.downloadFile=function(e,t,i){void 0===i&&(i="text/plain");var n=new Blob([e],{type:i});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,t);else{var o=document.createElement("a"),r=URL.createObjectURL(n);o.href=r,o.download=t,document.body.appendChild(o),o.click(),setTimeout((function(){document.body.removeChild(o),window.URL.revokeObjectURL(r)}),0)}},t.debounce=function(e,t,i){var n;return function(){for(var o=this,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var s=i&&!n;clearTimeout(n),n=setTimeout((function(){n=null,i||e.apply(o,r)}),t),s&&e.apply(this,r)}},t.compare=function e(t,i){for(var n in t){if(t.hasOwnProperty(n)!==i.hasOwnProperty(n))return!1;switch(typeof t[n]){case"object":if(!e(t[n],i[n]))return!1;break;case"function":if(void 0===i[n]||"compare"!==n&&t[n].toString()!==i[n].toString())return!1;break;default:if(t[n]!==i[n])return!1}}for(var n in i)if(!t.hasOwnProperty(n))return!1;return!0};t.isType=function(e){return((Object.prototype.toString.call(e).match(/^\[object (\S+?)\]$/)||[])[1]||"undefined").toLowerCase()};t.isEmptyObj=function(e){for(var t in e)return!1;return!0};t.getMaxArrayNumber=function(e){if(e.length){for(var t=-1/0,i=0,n=e.length;i<n;i++)e[i]>t&&(t=e[i]);return t}};t.getMinArrayNumber=function(e){if(e.length){for(var t=1/0,i=0,n=e.length;i<n;i++)e[i]<t&&(t=e[i]);return t}};t.getStringWidth=function(e,t){t=n({font:"normal 14px Roboto",lineHeight:20},t);var i=document.createElement("canvas"),r=i.getContext("2d");t.font&&(r.font=t.font);var a=r.measureText(e).width;return(0,o.isIE)()||i.remove(),a};t.rgbToHex=function(e){if("#"===e.substr(0,1))return e;if("rgb"===e.substr(0,3)){var t=/(.*?)rgb[a]?\((\d+), *(\d+), *(\d+),* *([\d+.]*)\)/.exec(e),i=parseInt(t[2],10).toString(16).padStart(2,"0"),n=parseInt(t[3],10).toString(16).padStart(2,"0"),o=parseInt(t[4],10).toString(16).padStart(2,"0");return"#".concat(i).concat(n).concat(o)}},t.getCloneObject=function e(t){if(!t)return t;var i=Array.isArray(t)?[]:{};for(var n in t){var o=t[n];o instanceof Date?i[n]=new Date(o):i[n]="object"==typeof o?e(o):o}return i};var s=function(e){var t=e.text;return e.ctx.measureText(t).width},l=function(e){for(var t=e.ctx,i=e.word,n=e.maxWidth,o=[],r="",a=0;a<i.length;a++)r+=i[a],s({text:r,ctx:t})>n&&(o.push(r.slice(0,-1)),r=i[a]);return r&&o.push(r),o};t.getTextLines=function(e){for(var t=e.ctx,i=e.text,n=e.maxWidth,o=i.split(" "),r="",a="",c=[],u=0;u<o.length;u++){var d=o[u];if(s({text:d,ctx:t})>n)for(var h=0,f=l({word:d,ctx:t,maxWidth:n});h<f.length;h++){var p=f[h];a+="".concat(p," "),s({text:a.trimEnd(),ctx:t})>n&&u>0?(c.push(r.trimEnd()),r="".concat(p," "),a="".concat(p," ")):r+="".concat(p," ")}else a+="".concat(d," "),s({text:a.trimEnd(),ctx:t})>n&&u>0?(c.push(r.trimEnd()),r="".concat(d," "),a="".concat(d," ")):r+="".concat(d," ");u===o.length-1&&c.push(r.trimEnd())}return c}},function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.getViewHeight=t.setTheme=t.awaitRedraw=t.resizeHandler=t.resizer=t.disableHelp=t.KEYED_LIST=t.inject=t.create=t.view=t.sv=t.el=void 0;var n=i(126),o=i(3);function r(e){var i=window.ResizeObserver,n=function(t){var i=t.el.offsetHeight,n=t.el.offsetWidth;e(n,i)};return i?(0,t.el)("div.dhx-resize-observer",{_hooks:{didInsert:function(e){new i((function(){return n(e)})).observe(e.el)}}}):(0,t.el)("iframe.dhx-resize-observer",{_hooks:{didInsert:function(e){e.el.contentWindow.onresize=function(){return n(e)},n(e)}}})}t.el=n.defineElement,t.sv=n.defineSvgElement,t.view=n.defineView,t.create=n.createView,t.inject=n.injectView,t.KEYED_LIST=n.KEYED_LIST,t.disableHelp=function(){n.DEVMODE.mutations=!1,n.DEVMODE.warnings=!1,n.DEVMODE.verbose=!1,n.DEVMODE.UNKEYED_INPUT=!1},t.resizer=r,t.resizeHandler=function(e,i){return(0,t.create)({render:function(){return r(i)}}).mount(e)},t.awaitRedraw=function(){return new e((function(e){requestAnimationFrame((function(){e()}))}))},t.setTheme=function(e,t){void 0===e&&(e="light");var i="data-dhx-theme";t||document.querySelectorAll("[".concat(i,"]")).forEach((function(e){return e.removeAttribute(i)})),t=t||document.documentElement,(0,o.toNode)(t).setAttribute(i,e)},t.getViewHeight=function(e,i){var n=(0,t.create)({render:function(){return(0,t.el)("div",{style:{position:"absolute",visibility:"hidden",width:i}},[e])}});n.mount(document.body);var o=n.node.el.offsetHeight;return n.unmount(),o}}).call(this,i(15))},function(e,t,i){"use strict";(function(e){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.showAlert=t.isCellSpaned=t.isCellFixed=t.checkSpanByNames=t.checkSpan=t.getStylesObject=t.doesContainUrl=t.isURL=t.getCellNode=t.isMac=t.convertStyles=t.getTextHeight=t.parseFromText=t.parseHtmlTable=t.analyzeMSOFormat=t.getSeparatorsFromMSO=t.fetchFile=t.isWasmSupported=t.cleanActionConfig=t.extendConfig=t.getCellsArray=t.getPrevRangeCell=t.getNextRangeCell=t.getRangeMatrix=t.getRangeArray=t.isRangeId=t.getCellInfo=t.getCellNameById=t.getCellNameByIndex=t.getCellIds=t.parseCellByRowAnColl=t.getNumberFromLetter=t.getLetterFromNumber=void 0;var r=i(0),a=i(24),s=i(19),l=i(12),c=i(13),u=i(29);function d(e){if(!e)return"";var t=(e=--e)%26,i=String.fromCharCode(65+t),n=Math.floor(e/26);return n>0?d(n)+i:i}function h(e){return e?(e=e.toUpperCase()).split("").reduce((function(e,t,i,n){return e+=(t.charCodeAt(0)-64)*Math.pow(26,n.length-(i+1))}),0):-1}function f(e){if(!e)return{};var t=e.match(/([a-zA-Z]*\d*):([a-zA-Z]*\d*)/);if(t){var i=f(t[1]),n=f(t[2]),o=+i.row<=n.row?i.row:n.row,r=+i.col<=n.col?i.col:n.col;return{start:{row:o,col:r},end:{row:o===n.row?i.row:n.row,col:r===n.col?i.col:n.col}}}var s=(0,a.str2pos)(e),l=s[0];return{col:s[1],row:l}}function p(e,t){var i=e+1;return"".concat(d(t)).concat(i)}function v(e,t){if(!(0,r.isDefined)(e)&&!(0,r.isDefined)(t))return"";var i=+e,n=+t;return i<0||n<0?"":"".concat(d(n)).concat(i)}function g(e){return new RegExp(/([A-Z]+\d+:[A-Z]+\d+)|(?:,)([A-Z]+\d+)/).test(e)}function _(e,t){void 0===t&&(t="row");var i=[],n="row"===t?"col":"row";if(e)for(var o=f(e),r=o.start,a=o.end,s=r[t];s<=a[t];s++)for(var l=r[n];l<=a[n];l++){var c="row"===t?v(s+1,l+1):v(l+1,s);i.push(c)}return i}function m(e){var t={decimal:".",thousands:","};function i(t){return y(e.split(t)[1].split(";")[0])}return e.includes("mso-displayed-decimal-separator")&&(t.decimal=i("mso-displayed-decimal-separator:")),e.includes("mso-displayed-thousand-separator")&&(t.thousands=i("mso-displayed-thousand-separator:")),t}function y(e){return e.replace(/[\"&\\]/g,"")}function b(e,t){var i=e.split(";")[0];t||(t=(0,c.getSeparators)());var n=y(i);return n.includes("[$")&&(n.includes("d")||n.includes("m")||n.includes("y")||n.includes("h")||n.includes("s"))&&(n=n.substr(n.indexOf("]")+1)),(0,u.isDateFormat)(n)&&n.includes("[")&&(n=n.replace("[","").replace("]","")),!n.includes("0")&&n.includes("#"),n=n.replace(",",t.thousands).replace(".",t.decimal)}function w(e){if(e){for(var t={},i=0,n=e.split(";");i<n.length;i++){var o=n[i];if(o){var r=o.trim().split(":");"height"!==r[0]&&"width"!==r[0]&&(t[r[0]]=r[1])}}return t}}function x(e){if("string"!=typeof e||e.includes(" "))return!1;return/^(https?:\/\/)?((localhost|(\d{1,3}\.){3}\d{1,3})|([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,})(:\d+)?(\/\S*)?$/.test(e)}function C(e,t,i){var n=e.split(":"),o=n[0],a=n[1];return(0,r.compare)(E(o,t,i),E(a,t,i))}function E(e,t,i){var n=f(e),o=n.col,r="number"==typeof t;return{isTopFixed:(null!=i?i:-1)>n.row,isLeftFixed:(t||r?r?t:h(t):-1)>o}}t.getLetterFromNumber=d,t.getNumberFromLetter=h,t.parseCellByRowAnColl=function(e){var t=e.match(/([a-zA-Z]*)(\d*)/);if(t&&t[1]&&t[2]){var i=parseInt(t[2],10);return{col:t[1],row:i}}},t.getCellIds=f,t.getCellNameByIndex=p,t.getCellNameById=v,t.getCellInfo=function(e,t){var i=f(e);if(i.start&&(i=i.start),!i||!e)return{locked:!1};var o=t.getCell(i.row,i.col)||{};return n(n({},o),{value:t.getValue(i.row,i.col,!0)})},t.isRangeId=g,t.getRangeArray=_,t.getRangeMatrix=function(e,t,i){void 0===i&&(i="row");var n=[],o="row"===i?"col":"row";if(e)for(var r=t.getRangeIndexes(e),a=r.start,s=r.end,l=a[i];l<=s[i];l++){for(var c=[],u=a[o];u<=s[o];u++){var d="row"===i?p(l,u):p(u,l);c.push(d)}n.push(c)}return n},t.getNextRangeCell=function(e,t,i){void 0===i&&(i="row");var n=_(e,i);return n[n.indexOf(t)+1]||n[0]},t.getPrevRangeCell=function(e,t,i){void 0===i&&(i="row");var n=_(e,i);return n[n.indexOf(t)-1]||n[n.length-1]},t.getCellsArray=function(e){if(e)return e.split(",").reduce((function(e,t){return g(t=t.toUpperCase())?e=e.concat(_(t)):e.push(t),e}),[])},t.extendConfig=function(e,t,i){for(var n in void 0===e&&(e={}),void 0===t&&(t={}),void 0===i&&(i=!0),e){var o=t[n],a=e[n];a&&"validate"in a&&(t[n]=a.validate(o)?o:a.default,e[n]=a.default)}return(0,r.extend)(e,t,i)},t.cleanActionConfig=function(e){return e.dataStore,e.sheets,e.editLine,e.grid,e.activePage,e.spreadsheet,e.mouseEvent,e.events,o(e,["dataStore","sheets","editLine","grid","activePage","spreadsheet","mouseEvent","events"])},t.isWasmSupported=function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){return!1}return!1},t.fetchFile=function(t,i,n){return new e((function(e,o){var r=new XMLHttpRequest;r.open(i,t,!0),r.responseType=n,r.onload=function(){var t=r.response;t?e(t):o(r)},r.onerror=function(){return o(r)},r.send(null)}))},t.getSeparatorsFromMSO=m,t.analyzeMSOFormat=b,t.parseHtmlTable=function(e){var t,i,o=e.substring(e.indexOf("<style"),e.indexOf("</style>")),a={},s={};if(o.includes(".x")){var l=o.substring(o.indexOf(".x"),o.indexOf("--\x3e")).split("\r\n.");l[0]=l[0].substr(1);for(var u=0,d=l;u<d.length;u++){var h=d[u];if(h){var f=h.substring(0,h.indexOf("\r\n\t"));if(h.includes("mso-number-format")){var p=h.indexOf("mso-number-format"),v=h.split("mso-number-format")[1],g=v.indexOf('";');v=v.substring(0,g>-1?g:v.indexOf(";")),s[f]=v.split(v.indexOf(':"')>-1?':"':":")[1],h=h.substring(0,p)+h.substring(g+1)}a[f]=w(h.substring(h.indexOf("{")+1,h.indexOf("}")).trim())}}}var _=e.substring(e.indexOf("<table"),e.indexOf("</table>")+8),y=document.createElement("div");y.innerHTML=_;for(var x=y.querySelector("table"),C=(y.querySelector("col"),x.rows.length),E=0,S=0;S<C;S++){var I=(null===(i=null===(t=x.rows[S])||void 0===t?void 0:t.cells)||void 0===i?void 0:i.length)||0;E=Math.max(E,I)}var k=new Array(C);for(S=0;S<C;S++)k[S]=new Array(E);var O=(0,c.getSeparators)();s&&(O=m(e));var M=[],R=[];for(S=0;S<x.rows.length;S++)for(var A=x.rows[S],P=0,T=0;T<A.cells.length;T++){for(;void 0!==k[S][P];)P++;var D=A.cells[T],F=D.rowSpan,V=D.colSpan,L=D.innerText,N=D.classList;if(F>1||V>1){var H={id:(0,r.uid)(),cell:{row:S,column:P},colspan:V-1,rowspan:F-1};M.push(H);for(var j=P;j<V+P-1;j++)k[S][j+1]={val:"",style:{},format:""},M.push(null);for(var z=1;z<F;z++){S+z<C&&(k[S+z][P]={val:"",style:{},format:""},M.push(null));for(j=P;j<P+V-1;j++)k[S+z][P+1]={val:"",style:{},format:""},M.push(null)}}else M.push(null);var $=L.trim().replace(/\n/,""),B=D.querySelector("a");B?R.push({link:{text:$,href:B.href}}):R.push(null);for(var q={},W="",G=0;G<N.length;G++){var U=N[G];a[U]&&(q=n(n({},q),a[U])),s[U]&&(W=b(s[U],O))}q=n(n({},q),w(D.getAttribute("style"))),k[S][P]={val:$,style:q,format:W},P++}var X=[],Y=[],K=[];return k.forEach((function(e){e.forEach((function(e){X.push(e.val),Y.push(e.style),K.push(e.format)}))})),{values:X,styles:Y,rowsCount:C,colsCount:E,formats:K,spans:M,meta:R}},t.parseFromText=function(e){for(var t=e.split(/\n/),i=[],n=0,o=t;n<o.length;n++){var r=o[n].split(/\t/);i=i.concat(r)}return{values:i,rowsCount:t.length,colsCount:t[0].split("\t").length,formats:[""]}},t.getTextHeight=function(e,t){var i=document.createElement("div");i.style.width="".concat(t,"px"),i.innerText=e,i.classList.add("dhx-spreadsheet-height-detector"),document.body.appendChild(i);var n=i.scrollHeight;return i.remove(),n},t.convertStyles=function(e){if(!e)return{};var t,i=null,o="nowrap",a="normal",s=n({},e),l=s.textAlign||s["text-align"],c=s.verticalAlign||s["vertical-align"];if(l){switch(l){case"left":i="flex-start";break;case"center":i="center";break;case"right":i="flex-end"}s["justify-content"]=i}if(c){switch(c){case"top":t="flex-start";break;case"center":t="center";break;case"bottom":t="flex-end"}s["align-items"]="".concat(t," !important")}var u=e.multiline,d=e.color,h=e.background,f=e["background-color"];return u&&(o="wrap"===u?"normal":"nowrap",a="wrap"===u?"break-all":"normal",s["white-space"]=o,s["word-break"]=a),d&&(s.color=d.startsWith("#")?(0,r.rgbToHex)(d):d),f&&(s["background-color"]=f.startsWith("#")?(0,r.rgbToHex)(f):f),h&&(s.background=h.startsWith("#")?(0,r.rgbToHex)(h):h),s},t.isMac=function(){var e;return!!(null===(e=navigator.userAgentData)||void 0===e?void 0:e.platform.match(/(Mac)/i))},t.getCellNode=function(e,t,i,n){void 0===n&&(n=!1);var o=i.getCellIndex(e,n),r=o.row,a=o.col,s=t.getRootNode();return null==s?void 0:s.querySelector(".dhx_grid-row[data-dhx-id='".concat(r+1,"'] .dhx_grid-cell[data-dhx-col-id='").concat(a,"'] .dhx_spreadsheet_cell"))},t.isURL=x,t.doesContainUrl=function(e){if("string"==typeof e)return e.split(" ").find((function(e){return x(e)}))},t.getStylesObject=function(e){void 0===e&&(e="");var t=(e||"").split(" ")||[],i={};return t.forEach((function(e){i=n(n({},i),dhx.css.get(e))})),i},t.checkSpan=function(e,t,i){var n=e.cell,o=e.colspan,r=e.rowspan,a=n.column,s=n.row,l=a+o,c=s+r,u=p(s,a+1),d=p(c,l+1);return C("".concat(u,":").concat(d),t,i)},t.checkSpanByNames=C,t.isCellFixed=E,t.isCellSpaned=function(e,t){if((null==t?void 0:t.size)&&(null==e?void 0:e.spanId))return t.get(e.spanId)},t.showAlert=function(e){(0,s.alert)({header:l.default.alertTitle,text:e,buttons:[l.default.ok],buttonsAlignment:"right"})}}).call(this,i(15))},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};function o(e,t,i){for(void 0===t&&(t="data-dhx-id"),void 0===i&&(i="target"),e instanceof Event&&(e=e[i]);e;){if(e.getAttribute&&e.getAttribute(t))return e;e=e.parentNode}}Object.defineProperty(t,"__esModule",{value:!0}),t.getNodeOffset=t.getElementFromPoint=t.getPageLinksCss=t.getLabelStyle=t.getPageInlineCss=t.fitPosition=t.calculatePosition=t.getRealPosition=t.isFirefox=t.isSafari=t.isIE=t.getScrollbarHeight=t.getScrollbarWidth=t.getBox=t.locateNodeByClassName=t.locate=t.locateNode=t.eventHandler=t.toNode=void 0,t.toNode=function(e){var t;return"string"==typeof e?document.getElementById(e)||document.querySelector("[data-cell-id=".concat(e,"]"))||document.querySelector(e)||(null===(t=document.querySelector("[data-dhx-root-id=".concat(e,"]")))||void 0===t?void 0:t.parentElement)||document.body:e||document.body},t.eventHandler=function(e,t,i){var n=Object.keys(t);return function(o){var r=e(o);if(void 0!==r){var a=o.target;e:for(;a;){var s=a.getAttribute&&a.getAttribute("class")||"";if(s.length)for(var l=s.split(" "),c=0;c<n.length;c++)if(l.includes(n[c])){if(!1===t[n[c]](o,r)||o.cancelBubble)return!1;break e}a=a.parentNode}}return"function"==typeof i&&i(o),!0}},t.locateNode=o,t.locate=function(e,t){void 0===t&&(t="data-dhx-id");var i=o(e,t);return i?i.getAttribute(t):""},t.locateNodeByClassName=function(e,t){for(e instanceof Element||(e=e.target);e;){if(t){if(e.classList&&e.classList.contains(t))return e}else if(e.getAttribute&&e.getAttribute("data-dhx-id"))return e;e=e.parentNode}},t.getBox=function(e){var t=e.getBoundingClientRect(),i=document.body,n=window.pageYOffset||i.scrollTop,o=window.pageXOffset||i.scrollLeft;return{top:t.top+n,left:t.left+o,right:i.offsetWidth-t.right,bottom:i.offsetHeight-t.bottom,width:t.right-t.left,height:t.bottom-t.top}};var r=-1;t.getScrollbarWidth=function(){if(r>-1)return r;var e=document.createElement("div");return document.body.appendChild(e),e.style.cssText="position: absolute;left: -99999px;overflow:scroll;width: 100px;height: 100px;",r=e.offsetWidth-e.clientWidth,document.body.removeChild(e),r};var a=-1;function s(e){var t=e.getBoundingClientRect();return{left:t.left+window.pageXOffset,right:t.right+window.pageXOffset,top:t.top+window.pageYOffset,bottom:t.bottom+window.pageYOffset}}function l(){return{rightBorder:window.pageXOffset+window.innerWidth,bottomBorder:window.pageYOffset+window.innerHeight}}function c(e,t){var i,o,r=l(),a=r.rightBorder,s=r.bottomBorder-e.bottom-t.height,c=e.top-t.height;if("bottom"===t.mode?s>=0?o=e.bottom:c>=0&&(o=c):c>=0?o=c:s>=0&&(o=e.bottom),s<0&&c<0){if(t.auto)return u(e,n(n({},t),{mode:"right",auto:!1}));o=s>c?e.bottom:c}if(t.centering)i=function(e,t,i){var n=(t-(e.right-e.left))/2,o=e.left-n,r=e.right+n;return o>=0&&r<=i?o:o<0?0:i-t}(e,t.width,a);else{var d=a-e.left-t.width,h=e.right-t.width;i=d>=0?e.left:h>=0?h:h>d?e.left:h}return{left:i,top:o}}function u(e,t){var i,o,r=l(),a=r.rightBorder,s=r.bottomBorder,u=a-e.right-t.width,d=e.left-t.width;if("right"===t.mode?u>=0?i=e.right:d>=0&&(i=d):d>=0?i=d:u>=0&&(i=e.right),d<0&&u<0){if(t.auto)return c(e,n(n({},t),{mode:"bottom",auto:!1}));i=d>u?d:e.right}if(t.centering)o=function(e,t,i){var n=(t-(e.bottom-e.top))/2,o=e.top-n,r=e.bottom+n;return o>=0&&r<=i?o:o<0?0:i-t}(e,t.height,s);else{var h=e.bottom-t.height,f=s-e.top-t.height;o=f>=0?e.top:h>0||h>f?h:e.top}return{left:i,top:o}}function d(e,t){var i="bottom"===t.mode||"top"===t.mode?c(e,t):u(e,t),n=i.left,o=i.top;return{left:Math.round(n)+"px",top:Math.round(o)+"px",minWidth:Math.round(t.width)+"px",position:"absolute"}}t.getScrollbarHeight=function(){if(a>-1)return a;var e=document.createElement("div");return document.body.appendChild(e),e.style.cssText="position: absolute;left: -99999px;overflow:scroll;width: 100px;height: 100px;",a=e.offsetHeight-e.clientHeight,document.body.removeChild(e),a},t.isIE=function(){var e=window.navigator.userAgent;return e.includes("MSIE ")||e.includes("Trident/")},t.isSafari=function(){var e=function(e){return e.test(window.navigator.userAgent)},t=e(/Chrome/),i=e(/Firefox/);return!t&&!i&&e(/Safari/)},t.isFirefox=function(){var e=function(e){return e.test(window.navigator.userAgent)},t=e(/Chrome/),i=e(/Safari/);return!t&&!i&&e(/Firefox/)},t.getRealPosition=s,t.calculatePosition=d,t.fitPosition=function(e,t){return d(s(e),t)};var h=function(e){return e.href&&-1===e.ownerNode.outerHTML.indexOf(window.location.origin)&&(-1!==e.ownerNode.outerHTML.indexOf("http")||-1!==e.ownerNode.outerHTML.indexOf("https")||-1!==e.ownerNode.outerHTML.indexOf('href="//'))};t.getPageInlineCss=function(){for(var e=[],t=0;t<document.styleSheets.length;t++){var i=document.styleSheets[t];if(!h(i))for(var n=("cssRules"in i&&i.cssRules.length?i.cssRules:i.rules),o=0;o<n.length;o++){var r=n[o];"cssText"in r?e.push(r.cssText):e.push("".concat(r.selectorText," {\n").concat(r.style.cssText,"\n}\n"))}}return e.join("\n")},t.getLabelStyle=function(e){var t=e.helpMessage,i=e.type,n=e.labelWidth,o=e.label,r=n&&n.toString().startsWith("0"),a="text"!==i&&e.required;return!!(t||a||!(!o||o&&r)||n&&!r)&&{style:(o||n)&&!r&&{width:n,"max-width":"100%"},label:o&&r?null:o}},t.getPageLinksCss=function(e){var t=[];if(e)e.forEach((function(e){return t.push('<link href="'.concat(e,'" rel="stylesheet"/>'))}));else for(var i=0;i<document.styleSheets.length;i++){var n=document.styleSheets[i];h(n)&&t.push('<link href="'.concat(n.href,'" rel="stylesheet"/>'))}return t.join("\n")},t.getElementFromPoint=function(e){var t,i,n=e.targetTouches?(null===(t=e.targetTouches[0])||void 0===t?void 0:t.clientX)||0:e.clientX,o=e.targetTouches?(null===(i=e.targetTouches[0])||void 0===i?void 0:i.clientY)||0:e.clientY,r=document.elementFromPoint(n,o);return(null==r?void 0:r.shadowRoot)?r.shadowRoot.elementFromPoint(n,o):r},t.getNodeOffset=function(e,t){var i=e.getBoundingClientRect(),n=t.getBoundingClientRect();return{left:i.left-n.left,top:i.top-n.top}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventsMixin=t.EventSystem=void 0;var n=function(){function e(e){this.events={},this.context=e||this}return e.prototype.on=function(e,t,i){var n=e.toLowerCase();this.events[n]=this.events[n]||[],this.events[n].push({callback:t,context:i||this.context})},e.prototype.detach=function(e,t){var i=e.toLowerCase(),n=this.events[i];if(t&&n&&n.length)for(var o=n.length-1;o>=0;o--)n[o].context===t&&n.splice(o,1);else this.events[i]=[]},e.prototype.fire=function(e,t){void 0===t&&(t=[]);var i=e.toLowerCase();return!this.events[i]||!this.events[i].map((function(e){return e.callback.apply(e.context,t)})).includes(!1)},e.prototype.clear=function(){this.events={}},e}();t.EventSystem=n,t.EventsMixin=function(e){var t=new n(e=e||{});e.detachEvent=t.detach.bind(t),e.attachEvent=t.on.bind(t),e.callEvent=t.fire.bind(t)}},function(e,t,i){"use strict";var n,o,r,a;Object.defineProperty(t,"__esModule",{value:!0}),t.FilterConditions=t.Actions=t.SpreadsheetEvents=t.SpreadsheetServiceEvents=void 0,function(e){e.updateGridState="updateGridState",e.updateGridSizes="updateGridSizes",e.redraw="redraw",e.recalculate="recalculate",e.setGridWidgetFocus="setGridWidgetFocus",e.applyFilter="applyFilter",e.setSelectedCell="setSelectedCell",e.removeSearchCell="removeSearchCell",e.setSearchedArray="setSearchedArray",e.setSearchedCell="setSearchedCell",e.changeSheet="changeSheet",e.callAction="callAction",e.startEdit="startEdit",e.fitColumn="fitColumn",e.endEdit="endEdit",e.resetFocus="resetFocus",e.setCellMath="setCellMath",e.editLineFocus="editLineFocus",e.applyStyles="applyStyles"}(n||(t.SpreadsheetServiceEvents=n={})),function(e){e.beforeValueChange="beforeValueChange",e.afterValueChange="afterValueChange",e.beforeStyleChange="beforeStyleChange",e.afterStyleChange="afterStyleChange",e.beforeFormatChange="beforeFormatChange",e.afterFormatChange="afterFormatChange",e.beforeSelectionSet="beforeSelectionSet",e.afterSelectionSet="afterSelectionSet",e.beforeSelectionRemove="beforeSelectionRemove",e.afterSelectionRemove="afterSelectionRemove",e.beforeRowAdd="beforeRowAdd",e.afterRowAdd="afterRowAdd",e.beforeRowDelete="beforeRowDelete",e.afterRowDelete="afterRowDelete",e.beforeColumnAdd="beforeColumnAdd",e.afterColumnAdd="afterColumnAdd",e.beforeColumnDelete="beforeColumnDelete",e.afterColumnDelete="afterColumnDelete",e.beforeFocusSet="beforeFocusSet",e.afterFocusSet="afterFocusSet",e.beforeEditStart="beforeEditStart",e.afterEditStart="afterEditStart",e.beforeAction="beforeAction",e.afterAction="afterAction",e.beforeEditEnd="beforeEditEnd",e.afterEditEnd="afterEditEnd",e.groupFill="groupFill",e.afterDataLoaded="afterDataLoaded",e.beforeSheetAdd="beforeSheetAdd",e.afterSheetAdd="afterSheetAdd",e.beforeSheetRemove="beforeSheetRemove",e.afterSheetRemove="afterSheetRemove",e.beforeSheetRename="beforeSheetRename",e.afterSheetRename="afterSheetRename",e.beforeSheetChange="beforeSheetChange",e.afterSheetChange="afterSheetChange",e.beforeSheetClear="beforeSheetClear",e.afterSheetClear="afterSheetClear",e.beforeClear="beforeClear",e.afterClear="afterClear",e.editLineInput="editLineInput",e.editLineFocus="editLineFocus",e.editLineBlur="editLineBlur",e.cellInput="cellInput",e.gridRedraw="gridRedraw",e.afterPopupHide="afterPopupHide"}(o||(t.SpreadsheetEvents=o={})),function(e){e.setCellStyle="setCellStyle",e.setCellValue="setCellValue",e.setCellFormat="setCellFormat",e.removeCellStyles="removeCellStyles",e.lockCell="lockCell",e.deleteRow="deleteRow",e.addRow="addRow",e.deleteColumn="deleteColumn",e.addColumn="addColumn",e.groupAction="groupAction",e.groupRowAction="groupRowAction",e.groupColAction="groupColAction",e.addSheet="addSheet",e.deleteSheet="deleteSheet",e.renameSheet="renameSheet",e.clearSheet="clearSheet",e.clear="clear",e.resizeCol="resizeCol",e.resizeRow="resizeRow",e.setValidation="setValidation",e.sortCells="sortCells",e.insertLink="insertLink",e.fitColumn="fitColumn",e.filter="filter",e.merge="merge",e.unmerge="unmerge",e.toggleFreeze="toggleFreeze",e.toggleVisibility="toggleVisibility"}(r||(t.Actions=r={})),function(e){e.e="e",e.ne="ne",e.tc="tc",e.tdc="tdc",e.ts="ts",e.te="te",e.tex="tex",e.d="d",e.db="db",e.da="da",e.gt="gt",e.geq="geq",e.lt="lt",e.leq="leq",e.eq="eq",e.neq="neq",e.ib="ib",e.inb="inb"}(a||(t.FilterConditions=a={}))},function(e,t,i){"use strict";var n,o,r,a;Object.defineProperty(t,"__esModule",{value:!0}),t.ItemEvent=t.ValidationStatus=t.FormEvents=t.ClearMethod=void 0,function(e){e.value="value",e.validation="validation"}(n||(t.ClearMethod=n={})),function(e){e.beforeChange="beforeChange",e.change="change",e.click="click",e.focus="focus",e.blur="blur",e.keydown="keydown",e.beforeShow="beforeShow",e.afterShow="afterShow",e.beforeHide="beforeHide",e.afterHide="afterHide",e.afterValidate="afterValidate",e.beforeValidate="beforeValidate",e.beforeChangeProperties="beforeChangeProperties",e.afterChangeProperties="afterChangeProperties",e.beforeSend="beforesend",e.afterSend="aftersend",e.buttonClick="buttonClick",e.validationFail="validationfail"}(o||(t.FormEvents=o={})),function(e){e[e.pre=0]="pre",e[e.error=1]="error",e[e.success=2]="success"}(r||(t.ValidationStatus=r={})),function(e){e.click="click",e.beforeChange="beforeChange",e.change="change",e.input="input",e.focus="focus",e.blur="blur",e.keydown="keydown",e.beforeChangeOptions="beforeChangeOptions",e.changeOptions="changeOptions",e.beforeShow="beforeShow",e.afterShow="afterShow",e.beforeHide="beforeHide",e.afterHide="afterHide",e.beforeValidate="beforeValidate",e.afterValidate="afterValidate",e.beforeUploadFile="beforeUploadFile",e.uploadFile="uploadfile",e.uploadBegin="uploadBegin",e.uploadComplete="uploadComplete",e.uploadFail="uploadFail",e.uploadProgress="uploadProgress",e.beforeChangeProperties="beforeChangeProperties",e.afterChangeProperties="afterChangeProperties"}(a||(t.ItemEvent=a={}))},function(e,t,i){"use strict";var n,o=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.setAttacments=t.widgetConfig=t.baseProps=t.isVerify=t.isTimeFormat=t.baseInputValidate=t.validateInput=t.isBlock=t.validateTemplate=t.getValidationMessage=t.getFormItemCss=void 0;var r=i(6),a=i(44),s=i(0);t.getFormItemCss=function(e,t,i){var n;void 0===i&&(i=!1);var o=e.labelPosition,a=e.required,s=e.disabled,l=e.hiddenLabel,c=e.$validationStatus,u=(n={},n[r.ValidationStatus.pre]="",n[r.ValidationStatus.error]=" dhx_form-group--state_error",n[r.ValidationStatus.success]=" dhx_form-group--state_success",n)[c]||"",d="left"===o?" dhx_form-group--inline":"",h=s?" dhx_form-group--disabled":"",f=l?" dhx_form-group--label_sr":"";return t?d+(i?"":u)+(a?" dhx_form-group--required":"")+h+f:d+h+f};var l=((n={})[a.Validation.validAlphaNumeric]=/^[a-zA-Z0-9_]+$/,n[a.Validation.validEmail]=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,n[a.Validation.validInteger]=/^-?\d+$/,n[a.Validation.validIPv4]=/\b((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\.|$)){4}\b/,n[a.Validation.validNumeric]=/^-?\d+(\.\d+)?$/,n);function c(e){return"fieldset"!==e.type&&(Boolean(e.rows)||Boolean(e.cols))}t.getValidationMessage=function(e){var t;return(t={undefined:e.preMessage},t[r.ValidationStatus.pre]=e.preMessage,t[r.ValidationStatus.error]=e.errorMessage,t[r.ValidationStatus.success]=e.successMessage,t)[e.$validationStatus]||""},t.validateTemplate=function(e,t){return!l[e]||l[e].test(t)},t.isBlock=c,t.validateInput=function(e,t){var i=!0;if("function"==typeof t)i=t(e);else{var n=l[t];n&&(i=n.test(e.toString()))}return i},t.baseInputValidate=function(e,t){var i=null!=e?e:"";if(t.required){if(!String(i).trim())return!1}else if(""===i)return!0;var n=function(e,t,i){var n=(0,s.isDefined)(t),o=(0,s.isDefined)(i);return n&&o?Number(t)<=Number(i)&&Number(t)<=e&&Number(i)>=e:n?Number(t)<=e:!o||Number(i)>=e};return"number"===t.inputType?n(Number(i),t.min,t.max):n(String(i).length,t.minlength,t.maxlength)},t.isTimeFormat=function(e,t){return 12===t?/(^0?([1-9][0-2]?):[0-5][0-9]?([AP][M]?)$)/i.test(e):/(^(0[0-9]|1[0-9]|2[0-3]|[0-9]):[0-5][0-9]$)/i.test(e)},t.isVerify=function(e){return["required","validation","minlength","maxlength","min","max"].some((function(t){switch(t){case"required":return!!e[t];case"validation":return"function"==typeof e[t]||"email"===e[t]||"integer"===e[t]||"numeric"===e[t]||"alphanumeric"===e[t]||"IPv4"===e[t];case"minlength":case"maxlength":return"number"==typeof e[t]||"string"==typeof e[t];case"min":case"max":return("number"==typeof e[t]||"string"==typeof e[t])&&"number"===e.inputType}}))},t.baseProps=["width","height","padding","css"];function u(e,t,i){void 0===e&&(e=[]);for(var n=[],o=0;o<e.length;o++){var r=e[o];r.type&&(t[r.name].parent=i,n.push(t[r.name])),c(r)&&n.push.apply(n,u(r.rows||r.cols,t,i))}return n}t.widgetConfig=function(e){e.width,e.type,e.id,e.name,e.hidden,e.editable,e.css,e.required,e.helpMessage,e.preMessage,e.successMessage,e.errorMessage,e.label,e.labelWidth,e.labelPosition,e.hiddenLabel,e.validation,e.icon;return o(e,["width","type","id","name","hidden","editable","css","required","helpMessage","preMessage","successMessage","errorMessage","label","labelWidth","labelPosition","hiddenLabel","validation","icon"])},t.setAttacments=function(e,t){var i;for(var n in e){var o=e[n];"fieldset"===o.config.type?(o.setAttachments(u(o.config.rows||o.config.cols,e,o)),o.setCell(t.getCell(n))):null===(i=t.getCell(n))||void 0===i||i.attach(o)}}},function(e,t,i){"use strict";var n,o,r,a;Object.defineProperty(t,"__esModule",{value:!0}),t.Split=t.HeaderFilterEvent=t.GridSystemEvents=t.GridEvents=void 0,function(e){e.scroll="scroll",e.expand="expand",e.filterChange="filterChange",e.beforeFilter="beforeFilter",e.beforeResizeStart="beforeResizeStart",e.resize="resize",e.afterResizeEnd="afterResizeEnd",e.cellClick="cellClick",e.cellRightClick="cellRightClick",e.cellMouseOver="cellMouseOver",e.cellMouseDown="cellMouseDown",e.cellDblClick="cellDblClick",e.headerCellClick="headerCellClick",e.footerCellClick="footerCellClick",e.headerCellMouseOver="headerCellMouseOver",e.footerCellMouseOver="footerCellMouseOver",e.headerCellMouseDown="headerCellMouseDown",e.footerCellMouseDown="footerCellMouseDown",e.headerCellDblClick="headerCellDblClick",e.footerCellDblClick="footerCellDblClick",e.headerCellRightClick="headerCellRightClick",e.footerCellRightClick="footerCellRightClick",e.beforeEditStart="beforeEditStart",e.afterEditStart="afterEditStart",e.beforeEditEnd="beforeEditEnd",e.afterEditEnd="afterEditEnd",e.beforeKeyDown="beforeKeyDown",e.afterKeyDown="afterKeyDown",e.beforeColumnHide="beforeColumnHide",e.afterColumnHide="afterColumnHide",e.beforeColumnShow="beforeColumnShow",e.afterColumnShow="afterColumnShow",e.beforeRowHide="beforeRowHide",e.afterRowHide="afterRowHide",e.beforeRowShow="beforeRowShow",e.afterRowShow="afterRowShow",e.beforeCollapse="beforeCollapse",e.afterCollapse="afterCollapse",e.beforeExpand="beforeExpand",e.afterExpand="afterExpand",e.beforeRowDrag="beforeRowDrag",e.dragRowStart="dragRowStart",e.dragRowOut="dragRowOut",e.dragRowIn="dragRowIn",e.canRowDrop="canRowDrop",e.cancelRowDrop="cancelRowDrop",e.beforeRowDrop="beforeRowDrop",e.afterRowDrop="afterRowDrop",e.afterRowDrag="afterRowDrag",e.beforeColumnDrag="beforeColumnDrag",e.dragColumnStart="dragColumnStart",e.dragColumnOut="dragColumnOut",e.dragColumnIn="dragColumnIn",e.canColumnDrop="canColumnDrop",e.cancelColumnDrop="cancelColumnDrop",e.beforeColumnDrop="beforeColumnDrop",e.afterColumnDrop="afterColumnDrop",e.afterColumnDrag="afterColumnDrag",e.beforeRowResize="beforeRowResize",e.afterRowResize="afterRowResize",e.beforeSort="beforeSort",e.afterSort="afterSort",e.groupPanelItemClick="groupPanelItemClick",e.groupPanelItemMouseDown="groupPanelItemMouseDown"}(n||(t.GridEvents=n={})),function(e){e.cellTouchMove="cellTouchMove",e.cellTouchEnd="cellTouchEnd",e.headerCellTouchMove="headerCellTouchMove",e.headerCellTouchEnd="headerCellTouchEnd",e.groupPanelItemTouchMove="groupPanelItemTouchMove",e.groupPanelItemItemTouchEnd="groupPanelItemItemTouchEnd"}(o||(t.GridSystemEvents=o={})),function(e){e.change="change"}(r||(t.HeaderFilterEvent=r={})),function(e){e.left="leftSplit",e.right="rightSplit",e.top="topSplit",e.bottom="bottomSplit"}(a||(t.Split=a={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toViewLike=t.View=void 0;var n=i(0),o=i(3),r=function(){function e(e,t){var i;this.config=t||{},this._uid=null!==(i=this.config.rootId)&&void 0!==i?i:(0,n.uid)()}return e.prototype.mount=function(e,t){t&&(this._view=t),e&&this._view&&this._view.mount&&(this._container=(0,o.toNode)(e),this._container.tagName?this._view.mount(this._container):this._container.attach&&this._container.attach(this))},e.prototype.unmount=function(){var e=this.getRootView();e&&e.node&&(this.getRootNode()&&e.unmount(),this._view=null)},e.prototype.getRootView=function(){return this._view},e.prototype.getRootNode=function(){return this._view&&this._view.node&&this._view.node.el},e.prototype.paint=function(){this._view&&(this._view.node||this._container)&&(this._doNotRepaint=!1,this._view.redraw())},e}();t.View=r,t.toViewLike=function(e){return{getRootView:function(){return e},paint:function(){return e.node&&e.redraw()},mount:function(t){return e.mount(t)}}}},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(147),t),o(i(78),t)},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(26),t),o(i(66),t),o(i(71),t),o(i(133),t),o(i(33),t),o(i(135),t),o(i(27),t),o(i(69),t),o(i(68),t),o(i(136),t),o(i(67),t),o(i(51),t),o(i(70),t)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formulas=void 0;var n=i(24);t.formulas=(0,n.getMethodParams)(),t.default={undo:"Undo",redo:"Redo",textColor:"Text color",backgroundColor:"Background color",bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",link:"Link",halign:"Horizontal align",valign:"Vertical align",left:"Left",right:"Right",center:"Center",top:"Top",bottom:"Bottom",multiline:"Text wrapping",clip:"Clip",wrap:"Wrap",merge:"Merge",unmerge:"Unmerge",lockCell:"Lock cell",unlockCell:"Unlock cell",clear:"Clear",clearValue:"Clear value",clearStyles:"Clear styles",clearAll:"Clear all",columns:"Columns",rows:"Rows",addColumn:"Add column left",removeColumn:"Remove column",fitToData:"Fit to data",addRow:"Add row above",removeRow:"Remove row",row:"row",col:"col",freeze:"Freeze",freezeToCol:"Freeze up to column {col}",freezeToRow:"Freeze up to row {row}",unfreezeRows:"Unfreeze rows",unfreezeCols:"Unfreeze columns",hideCol:"Hide column {col}",hideCols:"Hide columns {col}",showCols:"Show columns",hideRows:"Hide rows {row}",hideRow:"Hide row {row}",showRows:"Show rows",format:"Format",common:"Common",number:"Number",currency:"Currency",percent:"Percent",text:"Text",date:"Date",time:"Time",filter:"Filter",help:"Help",custom:"Custom",border:"Border",border_all:"All borders",border_inner:"Inner borders",border_horizontal:"Horizontal borders",border_vertical:"Vertical borders",border_outer:"Outer borders",border_color:"Border color",border_left:"Left border",border_top:"Top border",border_right:"Right border",border_bottom:"Bottom border",border_clear:"Clear borders",border_style:"Border style",deleteSheet:"Delete",renameSheet:"Rename",renameSheetAlert:"A sheet with the name $name already exists. Please enter another name. ",file:"File",import:"Import",export:"Export",downloadAs:"Download as...",importAs:"Import as...",data:"Data",validation:"Data validation",search:"Search",sort:"Sort",ascSort:"Sort A to Z",descSort:"Sort Z to A",copy:"Copy",edit:"Edit",insert:"Insert",remove:"Remove",linkCopied:"Link copied to clipboard",e:"Is empty",ne:"Is not empty",tc:"Text contains",tdc:"Text doesn't contain",ts:"Text starts with",te:"Text ends with",tex:"Text is exactly",d:"Date is",db:"Date is before",da:"Date is after",gt:"Greater than",geq:"Greater or equal to",lt:"Less than",leq:"Less or equal to",eq:"Is equal to",neq:"Is not equal to",ib:"Is between",inb:"Is not between",none:"None",value:"Value",values:"By values",condition:"By condition",and:"And",blank:"(Blank)",cancel:"Cancel",save:"Save",removeValidation:"Remove validation",selectAll:"Select all",unselectAll:"Unselect all",apply:"Apply",ok:"Ok",alertTitle:"There was a problem!",mergeAlertMessage:"You can't $action a range containing merges!",spanMergeAlert:"You can't merge frozen and non-frozen cells!",dontShowAgain:"Don't show again",spanPasteError:"You can't paste merges that cross the boundary of a frozen region",spanMergeLockedError:"You can't merge locked cells!",spanUnmergeLockedError:"You can't unmerge locked cells!",spanOverFilteredRow:"You can't merge cells over a filtered row.",removeAlert:"You can't remove last $name!"}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.addNewFormat=t.getFormattedFormula=t.getFormattedValue=t.getCleanValue=t.detectFormat=t.getPureNumber=t.getDefaultFormatsMap=t.initFormat=t.getFormatRule=t.isNumeric=t.getFormat=t.getDefaultFormats=t.getSeparators=t.formatsByMask=t.formatsById=void 0;var o=i(0),r=i(21),a=i(12),s=i(29),l=i(24),c=[],u={decimal:".",thousands:","},d="(\\[\\$[\\w\\W]*?\\]|[\\$]{0,1})",h="([,. ]{0,1})",f="([#0]*)",p=new RegExp("\\[\\$(\\D*[^\\]])|(\\$)"),v=new RegExp("".concat(d).concat(f).concat(h).concat(f).concat(h).concat(f).concat("([%]{0,1})","\\s?").concat(d)),g={};function _(){return c}function m(e){return!isNaN(e-parseFloat(e))}function y(e){if(e&&"string"==typeof e){if(g[e])return g[e];var t=function(e){return{currencyBefore:e[1],digits:e[2],thousandsSeparator:e[3],optionalDigits:e[4],decimalSeparator:e[5],decimalDigits:e[6],percent:e[7],currencyAfter:e[8],decimalLength:0}}(e.match(v));if(!t.decimalSeparator&&t.thousandsSeparator&&(t.decimalSeparator=t.thousandsSeparator,t.decimalDigits=t.optionalDigits,t.thousandsSeparator="",t.optionalDigits=""),t.decimalSeparator||(t.decimalSeparator=u.decimal),t.currencyBefore){var i=t.currencyBefore.match(p);t.currencyBefore=i[1]||i[2]}if(t.currencyAfter){i=t.currencyAfter.match(p);t.currencyAfter=i[1]||i[2]}return t.percent&&(t.currencyBefore="",t.currencyAfter=""),t.decimalDigits&&(t.decimalLength=t.decimalDigits.split("0").length-1),"common"===e&&(t.decimalSeparator=".",t.decimalLength="",t.thousandsSeparator=","),g[e]=t,t}}function b(e,t,i){var n=m(e);if(!t)return e;if(!n)return e;var o="";t.currencyBefore&&(o+=t.currencyBefore);var r=parseFloat(e);t.percent&&(r*=100);var a=r<0;a&&(r=Math.abs(r));var s=function(e,t){var i=Math.pow(10,t);return Math.round(e*i)/i}(r,t.decimalDigits.length||0).toString();t.percent&&(r*=100);var l="common"===i,c=(null==t?void 0:t.digits)+(null==t?void 0:t.optionalDigits),u=s.split(".");if(c&&c.length>u[0].length){for(var d=u[0].split(""),h=u[0],f=0,p=c.length-1;p>-1;p--){var v=c[p],g=d[f];"0"!==v||g||(h="0"+h),f++}s=h+(u.length>1?".".concat(u[1]):"")}return o+=t.digits?function(e,t,i,n,o,r){void 0===t&&(t=""),void 0===n&&(n=3),void 0===o&&(o=""),void 0===r&&(r=!1);for(var a=e.toString().split("."),s=a[0],l=a[1],c=void 0===l?"":l,u=[],d=o?[]:[""],h=1,f=o.length-1;f>-1;f--){var p=c[f],v=o[f];"#"===v&&p&&d.push(p),"0"===v&&d.push(p||"0")}for(f=s.length-1;f>-1;f--)u.push(s[f]),h===n&&f?(u.push(t),h=1):h++;return d=r?c:d.reverse().join(""),s=u.reverse().join(""),d?"".concat(s).concat(i).concat(d):s}(s,t.thousandsSeparator,t.decimalSeparator,t.optionalDigits.length,t.decimalDigits,l):s,o+=t.percent,t.currencyAfter&&(o+=t.currencyAfter),a&&(o="-".concat(o)),o}t.formatsById=Object.create(null),t.formatsByMask=Object.create(null),t.getSeparators=function(){return u},t.getDefaultFormats=_,t.getFormat=function(e){return c[(0,o.findIndex)(c,(function(t){return t.id===e}))]},t.isNumeric=m,t.getFormatRule=y;var w="15.0031",x="44490.5625";function C(e){var t="string"==typeof e&&e.includes("%"),i=parseFloat("".concat(e).replace(/[^.\d]/g,""));return t?i/100:i}t.initFormat=function(e,i){var r,l=i.dateFormat,d=i.timeFormat,h=void 0===d?12:d,f=i.currency,p=i.decimal,v=i.thousands;c=[{name:a.default.common,id:"common",mask:"#".concat(v,"##0").concat(p,"##"),example:"15"},{name:a.default.number,id:"number",mask:"#".concat(v,"##0").concat(p,"00"),example:w},{name:a.default.percent,id:"percent",mask:"#".concat(v,"##0").concat(p,"00%"),example:w},{name:a.default.currency,id:"currency",mask:"[$".concat(f,"]#").concat(v,"##0").concat(p,"00"),example:w},{name:a.default.date,id:"date",mask:(0,s.getExcelFormatFromDHX)(l),example:x},{name:a.default.time,id:"time",mask:"h:mm ".concat(h>12?"":"am/pm"),example:x,timeFormat:h},{name:a.default.text,id:"text",mask:"@",example:"some text"}],null===(r=e.formats)||void 0===r||r.forEach((function(e){var t=(0,o.findIndex)(c,(function(t){return t.id===e.id}));if(t>=0)c[t]=e;else{var i=e;(0,s.isDateFormat)(e.mask)&&(i=n(n({},e),{mask:(0,s.getExcelFormatFromDHX)(e.mask)})),c.push(i)}})),u={decimal:p,thousands:v},e.formats=c,c.forEach((function(e){y(e.mask)})),function(){for(var e=0,i=c;e<i.length;e++){var n=i[e];t.formatsById[n.id]=n,t.formatsByMask[n.mask]=n}}()},t.getDefaultFormatsMap=function(){return c.reduce((function(e,t){return e[t.mask]=t.id,e}),{})},t.getPureNumber=C;var E=/[a-z]/i,S=new Map;function I(e,i){if(!(0,o.isDefined)(e)||""===e||"boolean"==typeof e||"".concat(e).startsWith("="))return e;var n=t.formatsById.common,a=i||n,l=a.id,c=a.mask;if("text"===l||!l)return e;if(l.includes("date")||l.includes("time")){if(m(e))return+e;var u=(0,s.getDHXDateFormat)(c),d=e;if("object"==typeof d&&d.valueOf())return(0,s.getExcelDateFromJs)(d);var h=d.replace(/\n/g," ").replace(/\s+/g," ").trim();return(0,r.stringToDate)(h,u,!0)&&(d=(0,s.getExcelDateFromJs)((0,r.stringToDate)(h,u))),d}return"percent"===l||c.endsWith("%")?C(e):k(e,c)}function k(e,i){var n;if(!(0,o.isDefined)(e)||""===e)return e;if("string"!=typeof e||e.startsWith("="))return e;var r=null===(n=t.formatsById.number)||void 0===n?void 0:n.mask;if(!i&&!r)return e;var a=y(i||r),s=a.currencyBefore,l=a.currencyAfter,c=a.decimalSeparator,u=a.thousandsSeparator;if(s&&(e=e.replace(s,"")),l&&(e=e.replace(l,"")),i){var d=e.split(u),h=d.length-1,f=d[h].split(c),p=f[0],v=f[1];if(d[h]=p,d.some((function(e,t){return t&&3!==e.length||!/^-?\d+$/.test(e)})))return e;e="".concat(d.join("")).concat(v?".".concat(v):"")}var g=parseFloat(e);return g||0===g?g:e}function O(e,t){var i;if(!(0,o.isDefined)(e))return"";if("boolean"==typeof e)return"".concat(e).toUpperCase();if(!(null==t?void 0:t.id)||"@"===t.mask)return e;if("common"===t.id)return null!==(i=t.$value||e)&&void 0!==i?i:"";var n=t.mask,a=t.id;return a.includes("date")||a.includes("time")?m(e)?(0,r.getFormattedDate)((0,s.getDHXDateFormat)(n),(0,s.excelDateToJSDate)(+e)):e:b(e,y(n),a)}t.detectFormat=function(e){if(S.has(e))return S.get(e);var i="".concat(e),n="".concat(e).startsWith("http");if(!i.includes("%")&&!E.test(i)&&(m(e)||m(k(e,t.formatsById.number.mask))))return S.set(e,t.formatsById.number),t.formatsById.number;if(!n){if(e instanceof Date||m(I(e,t.formatsById.date)))return S.set(e,t.formatsById.date),t.formatsById.date;if(m(I(e,t.formatsById.time)))return S.set(e,t.formatsById.time),t.formatsById.time}return m(k(e,t.formatsById.percent.mask))||i.endsWith("%")?(S.set(e,t.formatsById.percent),t.formatsById.percent):(S.set(e,t.formatsById.common),t.formatsById.common)},t.getCleanValue=I,t.getFormattedValue=O,t.getFormattedFormula=function(e){var t=e.formula,i=e.store,n=e.format;if(!t||!t.startsWith("="))return t;n=n||_().find((function(e){return"common"===e.id}));for(var o=i.parse(t).code,r="",a=0,s=0;s<o.length;s+=3){var c=o[s];if(c!==l.T_DATA)if(13!==c){var u=t.substr(o[s+1],o[s+2]),d=t.substr(o[s+4],o[s+5]);c===l.T_NUMBER&&o[s+6]===l.T_NUMBER&&"."===d&&(u=O(u="".concat(u).concat(d).concat(t.substr(o[s+7],o[s+8])),n),s+=6),(c!==l.T_PAGE||o[s+3]!==l.T_RANGE&&o[s+3]!==l.T_ARG)&&(r+=u,a&&(r+=--a?",":"}"))}else r+="{",a=o[s+1]}return r},t.addNewFormat=function(e,t,i){var n=i.find((function(t){return t.mask===e}));if(n)return n;var r=(0,s.isDateFormat)(e),l=(0,o.uid)(),c="".concat(a.default.custom," ").concat(l),u={id:r?"".concat(r,"_").concat(l):l,mask:e,example:r?x:w,name:c};return i.push(u),u}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Label=void 0;var a=i(1),s=i(3),l=i(9),c=i(10),u=i(6),d=function(e){function t(t,i){void 0===i&&(i={});var n=e.call(this,t,i)||this;n._handlers=r({showHelper:function(e){e.preventDefault(),e.stopPropagation(),n._helper.show(e.target,{mode:"left"===n.config.labelPosition?"bottom":"right",theme:e.target})},hideHelper:function(e){e.preventDefault(),e.stopPropagation(),n._helper.hide()}},n._getHandlers());return n.mount(t,(0,a.create)({render:function(){return n.config&&n._draw()}})),n}return o(t,e),t.prototype.setValidationStatus=function(e){void 0===e&&(e="pre"),this.config.$validationStatus=u.ValidationStatus[e]},t.prototype._destructor=function(){this._helper&&this._helper.destructor(),this.config=this._handlers=this._helper=null,this.unmount()},t.prototype._getHandlers=function(){return{}},t.prototype._init=function(){},t.prototype._draw=function(){return this._drawLabel()},t.prototype._drawLabel=function(){var e=this.config,t=e.id,i=e.helpMessage,n=e.required;this.config.helpMessage&&(this._helper||(this._helper=new c.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"})),this._helper.attachHTML(this.config.helpMessage));var o=(0,s.getLabelStyle)(this.config);return o&&(0,a.el)("".concat(this.config.type.includes("group")?"legend":"label",".dhx_label"),{for:t||this._uid,class:i?"dhx_label--with-help":"",style:o.style},i?[(o.label||n)&&(0,a.el)("span.dhx_label__holder",o.label),(0,a.el)("span.dhx_label-help.dxi.dxi-help-circle-outline",{tabindex:"0",role:"button",onclick:this._handlers.showHelper,onfocus:this._handlers.showHelper,onblur:this._handlers.hideHelper,id:"dhx_label__help_".concat(t||this._uid)})]:o.label)},t}(l.View);t.Label=d},function(e,t,i){(function(t,i){!function(){t="undefined"!=typeof window?window:this;var n=1,o={},r=!1;function a(e){t.setImmediate?i(e):t.importScripts?setTimeout(e):(n++,o[n]=e,t.postMessage(n,"*"))}function s(e){"use strict";if("function"!=typeof e&&null!=e)throw TypeError();if("object"!=typeof this||this&&this.then)throw TypeError();var t,i,n=this,o=0,r=0,l=[];n.promise=n,n.resolve=function(e){return t=n.fn,i=n.er,o||(r=e,o=1,a(d)),n},n.reject=function(e){return t=n.fn,i=n.er,o||(r=e,o=2,a(d)),n},n._d=1,n.then=function(e,t){if(1!=this._d)throw TypeError();var i=new s;return i.fn=e,i.er=t,3==o?i.resolve(r):4==o?i.reject(r):l.push(i),i},n.catch=function(e){return n.then(null,e)};var c=function(e){o=e||4,l.map((function(e){3==o&&e.resolve(r)||e.reject(r)}))};try{"function"==typeof e&&e(n.resolve,n.reject)}catch(e){n.reject(e)}return n;function u(e,t,i,n){if(2==o)return n();if("object"!=typeof r&&"function"!=typeof r||"function"!=typeof e)n();else try{var a=0;e.call(r,(function(e){a++||(r=e,t())}),(function(e){a++||(r=e,i())}))}catch(e){r=e,i()}}function d(){var e;try{e=r&&r.then}catch(e){return r=e,o=2,d()}u(e,(function(){o=1,d()}),(function(){o=2,d()}),(function(){try{1==o&&"function"==typeof t?r=t(r):2==o&&"function"==typeof i&&(r=i(r),o=1)}catch(e){return r=e,c()}r==n?(r=TypeError(),c()):u(e,(function(){c(3)}),c,(function(){c(1==o&&3)}))}))}}t.setImmediate||t.addEventListener("message",(function(e){if(e.source==t)if(r)a(o[e.data]);else{r=!0;try{o[e.data]()}catch(e){}delete o[e.data],r=!1}})),s.resolve=function(e){if(1!=this._d)throw TypeError();return e instanceof s?e:new s((function(t){t(e)}))},s.reject=function(e){if(1!=this._d)throw TypeError();return new s((function(t,i){i(e)}))},s.all=function(e){if(1!=this._d)throw TypeError();if(!(e instanceof Array))return s.reject(TypeError());var t=new s;return function i(n,o){if(o)return t.resolve(o);if(n)return t.reject(n);0==e.reduce((function(e,t){return t&&t.then?e+1:e}),0)&&t.resolve(e),e.map((function(t,n){t&&t.then&&t.then((function(t){return e[n]=t,i(),t}),i)}))}(),t},s.race=function(e){if(1!=this._d)throw TypeError();if(!(e instanceof Array))return s.reject(TypeError());if(0==e.length)return new s;var t=new s;return function i(n,o){if(o)return t.resolve(o);if(n)return t.reject(n);0==e.reduce((function(e,t){return t&&t.then?e+1:e}),0)&&t.resolve(e),e.map((function(e,t){e&&e.then&&e.then((function(e){i(null,e)}),i)}))}(),t},s._d=1,e.exports=s}()}).call(this,i(50),i(122).setImmediate)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.focusManager=void 0;var n=i(3),o=function(){function e(){var e=this;this._initHandler=function(t){return e._activeWidgetId=(0,n.locate)(t,"data-dhx-widget-id")},this._removeFocusClass=function(e){var t=document.body.classList;t.contains("utilityfocus")&&t.remove("utilityfocus")},this._addFocusClass=function(e){var t=document.body.classList;"Tab"===e.code?t.contains("utilityfocus")||t.add("utilityfocus"):t.contains("utilityfocus")&&t.remove("utilityfocus")},document.addEventListener("focusin",this._initHandler),document.addEventListener("pointerdown",this._initHandler),document.addEventListener("mousedown",this._removeFocusClass),document.addEventListener("keydown",this._addFocusClass)}return e.prototype.getFocusId=function(){return this._activeWidgetId},e.prototype.setFocusId=function(e){this._activeWidgetId=e},e}();t.focusManager=new o},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.getEditorValue=t.getValueForNumberColumn=t.getEditorOptions=t.applyPattern=t.getMaxColsWidth=t.getTreeCellWidthOffset=t.getCalculatedRowHeight=t.getMaxRowHeight=t.getUnique=t.calculateVisibleRange=t.countColumns=t.measureTextHeight=t.normalizeArray=t.getTotalRowHeight=void 0;var r=i(0),a=i(20),s=i(21),l=i(40),c=i(23);function u(e){return(null==e?void 0:e.$height)+((null==e?void 0:e.$opened)&&(null==e?void 0:e.$subRowHeight)||0)||0}function d(e,t,i,n){void 0===i&&(i=[]);for(var o=-1,r=-1,a=0,s=0,l=0;l<i.length;l++)if(!i[l].hidden){var c="$width"===n?i[l][n]:u(i[l]);if(a+c>=t&&-1===o&&(o=s),a>=t+e){r=s;break}a+=c,s++}return-1===r&&(r=s),{start:o,end:r}}t.getTotalRowHeight=u,t.normalizeArray=function(e,t){e[t]&&("string"==typeof e[t]?e[t]=[{text:"".concat(e[t])}]:e[t]=e[t].map((function(e){return"string"==typeof e&&(e={text:e}),e})))},t.measureTextHeight=function(e){var t=e.text,i=void 0===t?"":t,n=e.width,o=void 0===n?0:n,s=e.lineHeight,l=void 0===s?20:s,c=e.font,u=void 0===c?"14.4px Arial":c,d=e.htmlEnable,h=void 0!==d&&d,f=document.createElement("canvas"),p=f.getContext("2d",{alpha:!1});p.font=u;var v=[],g=[];h&&(i=(0,a.removeHTMLTags)(i));var _=Math.ceil(p.measureText(i).width/o);_>1&&(_=(0,r.getTextLines)({ctx:p,text:i,maxWidth:o}).length),g.push(_),v.push(i.split("\n").length);var m=Math.max((0,r.getMaxArrayNumber)(v),(0,r.getMaxArrayNumber)(g));return f.remove(),m*l},t.countColumns=function(e,t){var i=0,n=0,o=0,a=!1,s=0,l=!1;return t.forEach((function(e){if(i=Math.max(i,e.header.length),o+=e.$width,e.footer&&(n=Math.max(n,e.footer.length),l||(l=!0)),!a)for(var t=0,r=e.header;t<r.length;t++){if(r[t].colspan)return void(a=!0)}})),t.forEach((function(e){if(l&&(e.footer=e.footer||[]),e.header.length<i)for(var t=0;t<i;t++)e.header[t]=e.header[t]||{text:""};if(e.footer){if(e.footer.length<n)for(t=0;t<n;t++)e.footer[t]=e.footer[t]||{text:""};for(t=0;t<e.footer.length;t++)e.footer[t].id||(e.footer[t].id=(0,r.uid)())}e.header=e.header.map((function(e){return"object"!=typeof e&&(e={text:e}),e.css=e.css||"",e.text||e.css.includes("dhx_cell-empty")||(e.css+=" dhx_cell-empty"),e.id||(e.id=(0,r.uid)()),e})),""===e.header[0].text&&s++})),e.$totalWidth=o,e.$colspans=a,e.$footer=l,s},t.calculateVisibleRange=function(e,t,i,n){var o={xStart:0,xEnd:0,yStart:0,yEnd:0},r=e.height-(i.$headerHeight||0)-(i.$footerHeight||0),a=e.width,s=d(r,t.top,n,"$height"),l=d(a,t.left,i.columns,"$width"),c=s.start,u=s.end,h=l.start,f=l.end;if(i.topSplit&&c<i.topSplit&&(c=i.topSplit),i.bottomSplit&&u>n.length-i.bottomSplit&&(u=Math.max(u-i.bottomSplit,c)),i.leftSplit){var p=i.leftSplit?i.columns.slice(0,i.leftSplit).filter((function(e){return!e.hidden})).length:0;h<p&&(h=p)}if(i.rightSplit){var v=i.rightSplit?i.columns.slice(-i.rightSplit).filter((function(e){return!e.hidden})).length:0;f>v&&(f=Math.max(f-v,h))}return o.xStart=h,o.xEnd=f,o.yStart=c,o.yEnd=u,o},t.getUnique=function(e,t,i,n){var o=e.map((function(e){return e[t]}));return i&&"multiselect"===n&&o.forEach((function(e,t){"string"==typeof e&&e.includes(", ")&&(e.split(", ").forEach((function(e){return o.push(e)})),delete o[t])})),o.filter((function(e,t,i){return i.indexOf(e)===t&&(0,r.isDefined)(e)})).sort((function(e,t){var i=parseFloat(e),n=parseFloat(t);return isNaN(i)||isNaN(n)?(e="boolean"==typeof e?e.toString():e,t="boolean"==typeof t?t.toString():t,isNaN(e)&&isNaN(t)?e.localeCompare(t):""===e?-1:""===t||isNaN(e)?1:-1):i===n?e.toString().localeCompare(t.toString()):i-n}))};t.getMaxRowHeight=function(e){var t,i,n=e.cols,o=e.row,s=e.config,l=void 0===s?{font:"14.4px Arial",lineHeight:20}:s,u=24+c.BORDERS,d=document.createElement("canvas"),f=d.getContext("2d",{alpha:!1});f.font=l.font;for(var v={},g=n.length,_=0;_<g;_++)v[n[_].id]={width:n[_].$width-u||0,col:n[_]};for(var m=[],y=[],b=0,w=Object.entries(o);b<w.length;b++){var x=w[b],C=x[0],E=x[1],S=null===(t=v[C])||void 0===t?void 0:t.col;if(S&&"height"!==C&&!C.startsWith("$")&&("string"==typeof E||"number"==typeof E||E instanceof Date||Array.isArray(E))){E="combobox"===S.editorType||"multiselect"===S.editorType?p(E,S,o):h(E,S);var I="";if("function"==typeof S.template){var k=S.template(E,o,v[C].col);I=S.htmlEnable?(0,a.removeHTMLTags)(k):k.toString()}else I="string"==typeof E?S.htmlEnable?(0,a.removeHTMLTags)(E):E:E.toString();var O=Math.ceil(f.measureText(I).width/v[C].width);O>1&&(O=(0,r.getTextLines)({ctx:f,text:I,maxWidth:null===(i=v[C])||void 0===i?void 0:i.width}).length),y.push(O),m.push(I.split("\n").length)}}var M=Math.max((0,r.getMaxArrayNumber)(m),(0,r.getMaxArrayNumber)(y));return d.remove(),M*l.lineHeight};t.getCalculatedRowHeight=function(e,t){var i=(t=n({rowHeight:40,verticalOffset:10},t)).rowHeight<40?e:e+2*t.verticalOffset;return e<t.rowHeight?t.rowHeight:i};t.getTreeCellWidthOffset=function(e,t){return void 0===t&&(t=!1),20+20*e.$level-(t&&e.$items?20:0)};function h(e,t){if(!(0,r.isDefined)(e)||"boolean"==typeof e||""===e)return e;if("date"===t.type){var i=t.dateFormat||"%M %d %Y";if("string"==typeof e){if(!(0,s.stringToDate)(e,i,!0)){var o=new Date(e);(null==o?void 0:o.valueOf())&&(e=(0,s.getFormattedDate)(i,o))}}else"object"==typeof e&&(e=(0,s.getFormattedDate)(i,e));return e}if(("number"===t.type||t.numberMask)&&(e=parseFloat(e),isNaN(e)))return e;if(t.numberMask){var a=t.numberMask.maxDecLength;return(0,r.isDefined)(a)&&(e=+e.toFixed(a)),(0,l.numberMask)(e,n(n({},t.numberMask),{onlyView:!0}))}return t.patternMask?(0,l.patternMask)(e,t.patternMask):e}function f(e,t){return o(o([],("function"==typeof e.options?e.options(e,t):e.options)||[],!0),e.$customOptions||[],!0)}function p(e,t,i){var n=f(t,i);return"multiselect"===t.editorType&&"string"==typeof e?e.split(",").map((function(e){return v(e.trim(),n)})).join(", "):v(e,n)}function v(e,t){var i=t.find((function(t){return t instanceof Object&&t.id==e}));return i?i.value:e}t.getMaxColsWidth=function(e,t,i,n){var o;if(void 0===i&&(i={font:"normal 14.4px Arial"}),!e.length||!t.length)return{};var r={},s=t.length,l=e.length,c=document.createElement("canvas"),u=c.getContext("2d",{alpha:!1});u.font=i.font;for(var d=0;d<s;d++)r[t[d].id]={width:20,col:t[d]};for(d=0;d<l;d++)for(var f=0,v=Object.entries(e[d]);f<v.length;f++){var g=v[f],_=g[0],m=g[1],y=null===(o=r[_])||void 0===o?void 0:o.col;if(y&&"height"!==_&&!_.startsWith("$")&&("string"==typeof m||"number"==typeof m||m instanceof Date||Array.isArray(m))){m="combobox"===y.editorType||"multiselect"===y.editorType?p(m,y,e[d]):m,"header"!==n&&(m=h(m,y));var b=void 0;if("function"==typeof(null==y?void 0:y.template)&&"data"===n){var w=y.template(m,e[d],y);b=y.htmlEnable?(0,a.removeHTMLTags)(w):w}else b=y.htmlEnable?(0,a.removeHTMLTags)(m):m.toString();var x=u.measureText(b).width;x>r[_].width&&(r[_].width=x)}}c.remove();for(var C={},E=0,S=Object.entries(r);E<S.length;E++){var I=S[E];_=I[0],m=I[1];C[_]=Math.ceil(m.width)}return C},t.applyPattern=h,t.getEditorOptions=f,t.getValueForNumberColumn=function(e,t){return!(0,r.isDefined)(t)||""===t||"number"==typeof t||["select","combobox","multiselect"].includes(e.editorType)?t:"string"==typeof t?parseFloat(t):NaN},t.getEditorValue=v},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(54),t),o(i(75),t),o(i(55),t)},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(120),t),o(i(121),t),o(i(125),t),o(i(65),t),o(i(49),t)},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.scrollFixedColsAndRows=t.getTotalHeight=t.getTotalWidth=t.isHtmlEnable=t.isTooltip=t.getTooltipConfig=t.isContentTooltip=t.showTooltip=t.isAutoWidth=t.isSortable=t.isRowEmpty=t.isCssSupport=t.removeHTMLTags=t.getStyleByClass=t.transpose=void 0;var o=i(0),r=i(3),a=i(19),s=i(17);t.transpose=function(e,t){for(var i=[],n=0;n<e.length;n++)for(var o=e[n],r=0;r<o.length;r++){i[r]=i[r]||[];var a=t?t(o[r]):o[r];i[r].push(a)}return i},t.getStyleByClass=function(e,t,i,n){void 0===n&&(n=document.body);var r,a,s,l=n.querySelector("."+t.trim().replace(/\s/g,".")),c=(r=l,"string"==typeof(a='<div class="'.concat(e,'"></div>'))?(r.insertAdjacentHTML("beforeend",a),r.lastChild):(r.appendChild(a),a)),u=window.getComputedStyle(c),d="rgba(0, 0, 0, 0)";if(u.backgroundColor===d){var h=window.getComputedStyle(l);s=h.backgroundColor===d?i.background:(0,o.rgbToHex)(h.backgroundColor)}else s=(0,o.rgbToHex)(u.backgroundColor);var f={color:"rgb(0, 0, 0)"===u.color?i.color:(0,o.rgbToHex)(u.color),background:s,fontSize:Math.round(parseFloat(u.fontSize)),bold:["bold","700","600","500"].includes(u.fontWeight)};return l.removeChild(c),(0,o.compare)(f,i)?null:f},t.removeHTMLTags=function(e){return"string"!=typeof e&&"number"!=typeof e&&"boolean"!=typeof e?"":"".concat(null==e?"":e).replace(/<[^>]*>/g,"").replace(/["]/g,"&quot;").trim()},t.isCssSupport=function(e,t){try{return CSS.supports(e,t)}catch(n){var i=document.createElement("div");return i.style[e]=t,i.style[e]===t}},t.isRowEmpty=function(e){if(e)return Object.keys(e).reduce((function(t,i){return"id"===i||i.startsWith("$")?t:t&&void 0!==e[i]&&""!==e[i]?void 0:t}),!0)},t.isSortable=function(e,t){return!1!==t.sortable&&e.sortable||t.sortable},t.isAutoWidth=function(e,t){if(t)return!1!==t.autoWidth&&e.autoWidth||t.autoWidth;var i=!1;return e.columns.map((function(t){(!1!==t.autoWidth&&e.autoWidth||t.autoWidth)&&(i=!0)})),i},t.showTooltip=function(e,t){t.node&&(0,a.tooltip)(e.toString(),n(n({},t),{css:"dhx_grid_tooltip "+(t.css||"")}))},t.isContentTooltip=function(e,t,i,n){for(var o=!1,r="header"===n?e.headerTooltip:e.footerTooltip,a=[e.tooltip,r,t.tooltip,null==i?void 0:i.tooltip],s=0;s<a.length;s++)(a[s]||"boolean"==typeof a[s])&&(o=!!a[s]);return o},t.getTooltipConfig=function(e,t,i,n){return[null==i?void 0:i.tooltip,null==t?void 0:t.tooltip,n&&("header"===n?e.headerTooltip:e.footerTooltip),e.tooltip].find((function(e){return e instanceof Object}))||{}},t.isTooltip=function(e,t){return!1!==t.tooltip&&e.tooltip||t.tooltip},t.isHtmlEnable=function(e,t,i){var n,o;return!!(null!==(o=null!==(n=null==i?void 0:i.htmlEnable)&&void 0!==n?n:t.htmlEnable)&&void 0!==o?o:e.htmlEnable)},t.getTotalWidth=function(e){return e.reduce((function(e,t){return e+(t.$width||0)}),0)},t.getTotalHeight=function(e){return e.reduce((function(e,t){return e+(0,s.getTotalRowHeight)(t)}),0)},t.scrollFixedColsAndRows=function(e){var t=(0,r.locateNode)(e,"data-dhx-widget-id").querySelector(".dhx_grid-body"),i=e.deltaY,n=e.shiftKey?[i,0]:[0,i];null==t||t.scrollBy.apply(t,n)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateHelper=t.stringToDate=t.getFormattedDate=t.locale=void 0;var n=i(0),o=i(0);t.locale={monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Monday"],cancel:"Cancel"};var r,a={"%d":function(e){var t=e.getDate();return t<10?"0"+t:t},"%j":function(e){return e.getDate()},"%l":function(e){return t.locale.days[e.getDay()]},"%D":function(e){return t.locale.daysShort[e.getDay()]},"%m":function(e){var t=e.getMonth()+1;return t<10?"0"+t:t},"%n":function(e){return e.getMonth()+1},"%M":function(e){return t.locale.monthsShort[e.getMonth()]},"%F":function(e){return t.locale.months[e.getMonth()]},"%y":function(e){return e.getFullYear().toString().slice(2)},"%Y":function(e){return e.getFullYear()},"%h":function(e){var t=e.getHours()%12;return 0===t&&(t=12),t<10?"0"+t:t},"%g":function(e){var t=e.getHours()%12;return 0===t&&(t=12),t},"%H":function(e){var t=e.getHours();return t<10?"0"+t:t},"%G":function(e){return e.getHours()},"%i":function(e){var t=e.getMinutes();return t<10?"0"+t:t},"%s":function(e){var t=e.getSeconds();return t<10?"0"+t:t},"%a":function(e){return e.getHours()>=12?"pm":"am"},"%A":function(e){return e.getHours()>=12?"PM":"AM"},"%u":function(e){return e.getMilliseconds()}},s={"%d":function(e,t,i,n){var o=/(^([0-9][0-9])$)/i.test(t);if(n)return o;o?e.setDate(Number(t)):e.setDate(Number(1))},"%j":function(e,t,i,n){var o=/(^([0-9]?[0-9])$)/i.test(t);if(n)return o;o?e.setDate(Number(t)):e.setDate(Number(1))},"%m":function(e,t,i,n){var o=/(^([0-9][0-9])$)/i.test(t);if(n)return o;o?e.setMonth(Number(t)-1):e.setMonth(Number(0)),o&&e.getMonth()!==Number(t)-1&&e.setMonth(Number(t)-1)},"%n":function(e,t,i,n){var o=/(^([0-9]?[0-9])$)/i.test(t);if(n)return o;o?e.setMonth(Number(t)-1):e.setMonth(Number(0)),o&&e.getMonth()!==Number(t)-1&&e.setMonth(Number(t)-1)},"%M":function(e,i,n,r){var a=(0,o.findIndex)(t.locale.monthsShort,(function(e){return e===i}));if(r)return-1!==a;-1===a?e.setMonth(0):e.setMonth(a),-1!==a&&e.getMonth()!==a&&e.setMonth(a)},"%F":function(e,i,n,r){var a=(0,o.findIndex)(t.locale.months,(function(e){return e===i}));if(r)return-1!==a;-1===a?e.setMonth(0):e.setMonth(a),-1!==a&&e.getMonth()!==a&&e.setMonth(a)},"%y":function(e,t,i,n){var o=/(^([0-9][0-9])$)/i.test(t);if(n)return o;o?e.setFullYear(Number("20"+t)):e.setFullYear(Number("2000"))},"%Y":function(e,t,i,n){var o=/(^([0-9][0-9][0-9][0-9])$)/i.test(t);if(n)return o;o?e.setFullYear(Number(t)):e.setFullYear(Number("2000"))},"%h":function(e,t,i,n){var o=/(^0[1-9]|1[0-2]$)/i.test(t);if(n)return o;o&&("am"===i||"pm"===i)||"AM"===i||"PM"===i?e.setHours(Number(t)):e.setHours(Number(0))},"%g":function(e,t,i,n){var o=/(^[1-9]$)|(^0[1-9]|1[0-2]$)/i.test(t);if(n)return o;o&&("am"===i||"pm"===i)||"AM"===i||"PM"===i?e.setHours(Number(t)):e.setHours(Number(0))},"%H":function(e,t,i,n){var o=/(^[0-2][0-9]$)/i.test(t);if(n)return o;o?e.setHours(Number(t)):e.setHours(Number(0))},"%G":function(e,t,i,n){var o=/(^[1-9][0-9]?$)/i.test(t);if(n)return o;o?e.setHours(Number(t)):e.setHours(Number(0))},"%i":function(e,t,i,n){var o=/(^([0-5][0-9])$)/i.test(t);if(n)return o;o?e.setMinutes(Number(t)):e.setMinutes(Number(0))},"%s":function(e,t,i,n){var o=/(^([0-5][0-9])$)/i.test(t);if(n)return o;o?e.setSeconds(Number(t)):e.setSeconds(Number(0))},"%u":function(e,t,i,n){var o=/(^([0-9][0-9][0-9])$)/i.test(t);if(n)return o;o?e.setMilliseconds(Number(t)):e.setMilliseconds(Number(0))},"%a":function(e,t,i,n){if(n)return"pm"===t||"am"===t;"pm"===t&&e.setHours(e.getHours()+12)},"%A":function(e,t,i,n){if(n)return"PM"===t||"AM"===t;"PM"===t&&e.setHours(e.getHours()+12)}};function l(e){for(var t=[],i="",n=0;n<e.length;n++)"%"===e[n]?(i.length>0&&(t.push({type:r.separator,value:i}),i=""),t.push({type:r.datePart,value:e[n]+e[n+1]}),n++):i+=e[n];return i.length>0&&t.push({type:r.separator,value:i}),t}!function(e){e[e.separator=0]="separator",e[e.datePart=1]="datePart"}(r||(r={})),t.getFormattedDate=function(e,t){return l(e).reduce((function(e,i){return i.type===r.separator?e+i.value:a[i.value]?e+a[i.value](t):e}),"")};var c={"%Y":1,"%y":1,"%M":2,"%F":2,"%m":2,"%n":2};function u(e,t,i){if("string"==typeof e){t=t.replace(/([a-z])(%a)/i,(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e=e.replace(/(am|pm)/i," $&"),t[1]+" "+t[2]}));for(var n,o=l(t),a=new Array(2),u=0,d=null,h="Incorrect date, see docs: https://docs.dhtmlx.com/suite/calendar__api__calendar_dateformat_config.html",f=function(e){var t=c[e.formatter];t?a[t-1]=e:("%A"!==e.formatter&&"%a"!==e.formatter||(n=e.value),a.push(e))},p=0;p<o.length;p++)if(o[p].type===r.separator){var v=e.indexOf(o[p].value,u);if(-1===v){if(i)return!1;throw new Error(h)}d&&(f({formatter:d,value:e.slice(u,v)}),d=null),u=v+o[p].value.length}else if(o[p].type===r.datePart){if(o[p+1]&&o[p+1].type!==r.separator){if(i)return!1;throw new Error(h)}d=o[p].value}d&&f({formatter:d,value:e.slice(u)});for(var g=new Date(0),_=0,m=a;_<m.length;_++){var y=m[_];if(y&&s[y.formatter]){if(i&&!s[y.formatter](g,y.value,n,i))return!1;s[y.formatter](g,y.value,n)}}return!!i||g}}t.stringToDate=u;t.DateHelper=function(){function e(){}return e.copy=function(e){return new Date(e)},e.fromYear=function(e){return new Date(e,0,1)},e.fromYearAndMonth=function(e,t){return new Date(e,t,1)},e.weekStart=function(e,t){var i=(e.getDay()+7-t)%7;return new Date(e.getFullYear(),e.getMonth(),e.getDate()-i)},e.monthStart=function(e){return new Date(e.getFullYear(),e.getMonth(),1)},e.yearStart=function(e){return new Date(e.getFullYear(),0,1)},e.dayStart=function(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())},e.addDay=function(e,t){return void 0===t&&(t=1),new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)},e.addMonth=function(e,t){return void 0===t&&(t=1),new Date(e.getFullYear(),e.getMonth()+t)},e.addYear=function(e,t){return void 0===t&&(t=1),new Date(e.getFullYear()+t,e.getMonth())},e.withHoursAndMinutes=function(e,t,i,n){return void 0===n||!n&&12===t||n&&12!==t?new Date(e.getFullYear(),e.getMonth(),e.getDate(),t,i):n&&12===t?new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,i):new Date(e.getFullYear(),e.getMonth(),e.getDate(),t+12,i)},e.setMonth=function(e,t){e.setMonth(t)},e.setYear=function(e,t){e.setFullYear(t)},e.mergeHoursAndMinutes=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),t.getHours(),t.getMinutes())},e.isWeekEnd=function(e){return 0===e.getDay()||6===e.getDay()},e.getTwelweYears=function(e){var t=e.getFullYear(),i=t-t%12;return(0,n.range)(i,i+11)},e.getDayOrdinal=function(t){return(t.valueOf()-e.yearStart(t).valueOf())/864e5},e.getWeekNumber=function(t){var i=4===t.getDay()?t:e.addDay(t,4-t.getDay()),n=e.getDayOrdinal(i);return Math.trunc(n/7)+1},e.isSameDay=function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},e.toDateObject=function(e,t){return"string"==typeof e?u(e,t):new Date(e)},e.nullTimestampDate=new Date(0),e}()},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(174),t),o(i(175),t),o(i(42),t)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrFixedCols=t.calcScrollBarWidth=t.BORDERS=void 0;var n=i(3),o=i(8);t.BORDERS=2,t.calcScrollBarWidth=function(e,i,o){var r,a;void 0===i&&(i=!1);var s=e.$totalHeight+e.$headerHeight+e.$footerHeight+t.BORDERS>(null!==(r=null==o?void 0:o.height)&&void 0!==r?r:e.$height),l=!s||i?0:(0,n.getScrollbarWidth)(),c=e.$totalWidth+t.BORDERS+l>(null!==(a=null==o?void 0:o.width)&&void 0!==a?a:e.$width);return{x:!c||i?0:(0,n.getScrollbarWidth)(),y:l,xState:c,yState:s}},t.getCurrFixedCols=function(e,t){return e[t]?(t===o.Split.left?e.columns.slice(0,e.leftSplit):e.columns.slice(-e.rightSplit)).filter((function(e){return!e.hidden})):[]}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="#DIV/0!",o="#VALUE!",r="#NUM!",a="#N/A";function s(e){var t=new Date(e.getFullYear(),0,0),i=e.valueOf()-t.valueOf()+60*(t.getTimezoneOffset()-e.getTimezoneOffset())*1e3;return Math.floor(i/864e5)}function l(e){var t=new Date(Math.round(86400*(e-25569)*1e3));return new Date(t.getTime()+6e4*t.getTimezoneOffset())}function c(e){return 25569+(e.getTime()-6e4*e.getTimezoneOffset())/864e5}function u(e){return!(!e&&0!==e||(e*=1,isNaN(e)))&&e}function d(e){if(1===e.length){var t=e[0];return"object"==typeof t?t:[t]}for(var i=[],n=0;n<e.length;n++)i=i.concat(e[n]);return i}function h(e){return!e&&0!==e}function f(e){return"string"==typeof e?"TRUE"===e:!!e}function p(e){var t="string"==typeof e?new Date(e):l(e);if(t.getTime())return t;throw e+" is invalid date"}function v(e){var t=u(e);if("number"!=typeof t)throw e+" is not a number";return t}function g(e,t,i,n,a){var s=u(e);s<0&&8==a&&(t=null);var l,c=t?u(t):null;if("number"!=typeof s||"boolean"==typeof c)throw o;if(s<i&&(s=i),s>n&&(s=n),c<-1)throw r;c&&(c=Math.floor(+c));var d=e<0&&16===a?"FF":"";if(l=n<2147483648?(s>>>0&n-i).toString(a):(s>>>0).toString(a),c&&l.length>c)throw r;return(d+l).padStart(c,"0").toUpperCase()}function _(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return d(e).join("")}function m(e,t){return h(e)?"":e.toString().substring(0,t)}function y(e,t,i){return h(e)?"":e.toString().substring(t-1,t-1+i)}function b(e,t){return h(e)?"":e.toString().substring(e.length-t)}function w(e){return h(e)?"":e.toString().toLowerCase()}function x(e){return h(e)?"":e.toString().toUpperCase()}function C(e){if(h(e))return"";var t=e.toString().toLowerCase().split(" ");for(var i in e="",t)e+=(e?" ":"")+t[i].substring(0,1).toUpperCase()+t[i].substring(1);return e}function E(e){return h(e)?"":e.toString().trim()}function S(e){return h(e)?0:e.toString().length}var I=/[\0-\x1F]/g;function k(e,t,i){void 0===i&&(i=0);var n=u(i);if("number"==typeof n&&t)return(""+t).indexOf(""+e,n-1)+1;throw"index cannot be string"}function O(e,t,i){void 0===i&&(i=0);var n=u(i);if("number"==typeof n){var o=(""+t).toLowerCase().indexOf((""+e).toLowerCase(),n-1)+1;if(0!==o)return o;throw"not found"}}function M(e,t,i,n){if(!e||!t||!i&&""!==i)return""+e;if(void 0===n)return(""+e).replace(new RegExp(""+t,"g"),""+i);for(var o=0,r=0;(""+e).indexOf(""+t,o)>0;)if(o=(""+e).indexOf(""+t,o+1),++r===n)return(""+e).substring(0,o)+i+(""+e).substring(o+(""+t).length)}function R(e,t,i,n){var o=u(t),r=u(i);if("number"==typeof o&&"number"==typeof r){var a=e.toString(),s=n.toString();return a.replace(a.substr(o-1,r),s)}}var A=Object.freeze({__proto__:null,CONCATENATE:_,LEFT:m,MID:y,RIGHT:b,LOWER:w,UPPER:x,PROPER:C,TRIM:E,LEN:S,CHAR:function(e){var t=u(e);if("number"==typeof t)return String.fromCharCode(t)},CLEAN:function(e){return void 0===e&&(e=""),(""+e).replace(I,"")},CODE:function(e){return void 0===e&&(e=""),(""+e).charCodeAt(0)},EXACT:function(e,t){return e===t},FIND:k,FIXED:function(e,t,i){void 0===t&&(t=2),void 0===i&&(i=!1);var n=u(e),o=u(t);if("number"==typeof n&&"number"==typeof o){var r=n.toFixed(o);if(f(i))return""+r;var a=(""+r).split("."),s=a[0],l=a[1];return s.replace(/\B(?=(\d{3})+(?!\d))/g,",")+"."+l}},NUMBERVALUE:function(e,t,i){if(void 0===t&&(t="."),void 0===i&&(i=","),"string"==typeof e&&"string"==typeof t&&"string"==typeof i)return Number(e.replace(t,".").replace(i,""))},REGEXEXTRACT:function(e,t){if("string"==typeof e&&"string"==typeof t){var i=e.match(new RegExp(t));return i?i[i.length>1?i.length-1:0]:null}},REGEXMATCH:function(e,t){if("string"==typeof e&&"string"==typeof t)return!!e.match(new RegExp(t))},REGEXREPLACE:function(e,t,i){if("string"==typeof e&&"string"==typeof t)return e.replace(new RegExp(t),""+i)},REPT:function(e,t){var i=u(t);if("number"==typeof i)return new Array(i+1).join(""+e)},SEARCH:O,SUBSTITUTE:M,T:function(e){return"string"==typeof e&&"TRUE"!==e&&"FALSE"!==e?""+e:""},JOIN:function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=[];return t.forEach((function(t){"object"==typeof t?n.push(t.join(""+e)):n.push(t)})),n.join(""+e)},REPLACE:R,ARRAYTOTEXT:function(e,t){return t?"{"+e.map((function(e){return"string"==typeof e?'"'+e+'"':e})).join("; ")+"}":e.join("; ")}}),P=[[],[1,2,3,4,5,6,7],[7,1,2,3,4,5,6],[6,0,1,2,3,4,5],[],[],[],[],[],[],[],[7,1,2,3,4,5,6],[6,7,1,2,3,4,5],[5,6,7,1,2,3,4],[4,5,6,7,1,2,3],[3,4,5,6,7,1,2],[2,3,4,5,6,7,1],[1,2,3,4,5,6,7]],T=[void 0,0,1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,1,2,3,4,5,6,0],D=[[],[6,0],[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],void 0,void 0,void 0,[0,0],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6]];function F(e,t,i){return c(new Date(e,t-1,i))}function V(e,t,i){var n=c(new Date(1900,0,1,e,t,i,0));return n-Math.trunc(n)}function L(e){return l(e).getDate()}function N(e){return l(e).getMonth()+1}function H(e){return l(e).getFullYear()}function j(e){return l(e).getHours()}function z(e){return l(e).getMinutes()}function $(e){return l(e).getSeconds()}function B(){return c(new Date)}function q(e,t,i){var n=i.toLowerCase();if("d"===n)return t-e;var o=l(e),r=l(t);switch(n){case"y":return r.getFullYear()-o.getFullYear();case"m":return(c=12*(r.getFullYear()-o.getFullYear()))+r.getMonth()-o.getMonth();case"d":return Math.floor(t-e);case"md":if((u=r.getDate()-o.getDate())<0){var a=new Date(o.getFullYear(),o.getMonth()+1,0).getDate();return r.getDate()+a-o.getDate()}return u;case"ym":var c;return(c=r.getMonth()-o.getMonth())<0?12+c:c;case"yd":var u;return(u=s(r)-s(o))<0?365+u:u}}function W(e,t){var i=p(e),n=p(t);if(i&&n)return Math.round((i.getTime()-n.getTime())/864e5)}function G(e){var t=p(e);if(t){t.setHours(0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7));var i=new Date(t.getFullYear(),0,1);return Math.ceil(((t.getTime()-i.getTime())/864e5+1)/7)}}function U(e,t,i,n){var o=p(e),r=p(t);if(o&&r){for(var a=void 0===i?D[1]:D[i],s=n||[],c=0;c<s.length;c++){if((_=l(s[c]))instanceof Error)throw"The "+s[c]+" is not a  number";s[c]=_}var u=(r.getTime()-o.getTime())/864e5+1,d=Math.round(u),h=o;for(c=0;c<u;c++){var f=(new Date).getTimezoneOffset()>0?h.getUTCDay():h.getDay(),v=!1;f!==a[0]&&f!==a[1]||(v=!0);for(var g=0;g<s.length;g++){var _;if((_=s[g]).getDate()===h.getDate()&&_.getMonth()===h.getMonth()&&_.getFullYear()===h.getFullYear()){v=!0;break}}v&&d--,h.setDate(h.getDate()+1)}return d}}function X(e,t,i,n){var o=p(e),r=u(t);if(o&&"number"==typeof r){for(var a=void 0===i?D[1]:D[i],s=n||[],d=0;d<s.length;d++){if((g=l(s[d]))instanceof Error)throw"The "+s[d]+" is not a  number";s[d]=g}for(var h=0;h<r;){o.setDate(o.getDate()+1);var f=o.getDay();if(f!==a[0]&&f!==a[1]){for(var v=0;v<s.length;v++){var g;if((g=s[v]).getDate()===o.getDate()&&g.getMonth()===o.getMonth()&&g.getFullYear()===o.getFullYear()){h--;break}}h++}}return c(o)}}function Y(e){return 1===new Date(e,1,29).getMonth()}function K(e,t,i){void 0===i&&(i=0);var n=p(e),o=p(t);if(n&&o){var r=n.getDate(),a=n.getMonth()+1,s=n.getFullYear(),l=o.getDate(),c=o.getMonth()+1,u=o.getFullYear(),d=365,h=u-s+1,f=(new Date(u+1,0,1).getTime()-new Date(s,0,1).getTime())/1e3/60/60/24/h;switch(i){case 0:return 31===r&&31===l?(r=30,l=30):31===r?r=30:30===r&&31===l&&(l=30),(l+30*c+360*u-(r+30*a+360*s))/360;case 1:return s===u||s+1===u&&(a>c||a===c&&r>=l)?((s===u&&Y(s)||function(e,t){var i=e.getFullYear(),n=new Date(i,2,1);if(Y(i)&&e<n&&t>=n)return!0;var o=t.getFullYear(),r=new Date(o,2,1);return Y(o)&&t>=r&&e<r}(n,o)||1===c&&29===l)&&(d=366),W(o.toDateString(),n.toDateString())/d):W(o.toDateString(),n.toDateString())/f;case 2:return W(o.toDateString(),n.toDateString())/360;case 3:return W(o.toDateString(),n.toDateString())/365;case 4:return(l+30*c+360*u-(r+30*a+360*s))/360}}}var J={DATE:F,TIME:V,DAY:L,MONTH:N,YEAR:H,HOUR:j,MINUTE:z,SECOND:$,NOW:B,DATEDIF:q,DATEVALUE:function(e){if("string"==typeof e)return c(new Date(new Date(e).toDateString()))},DAYS:W,DAYS360:function(e,t,i){void 0===i&&(i=0);var n=p(e),o=p(t);if(n&&o){var r=n.getMonth(),a=o.getMonth(),s=void 0,l=void 0;if(f(i))s=31===n.getDate()?30:n.getDate(),l=31===o.getDate()?30:o.getDate();else{var c=new Date(n.getFullYear(),r+1,0).getDate(),u=new Date(o.getFullYear(),a+1,0).getDate();s=n.getDate()===c?30:n.getDate(),o.getDate()===u?s<30?(a++,l=1):l=30:l=o.getDate()}return 360*(o.getFullYear()-n.getFullYear())+30*(a-r)+(l-s)}},EDATE:function(e,t){var i=p(e),n=u(t);if(i&&"number"==typeof n)return i.setMonth(i.getMonth()+n),c(i)},EOMONTH:function(e,t){var i=p(e),n=u(t);if(i&&"number"==typeof n)return c(new Date(i.getFullYear(),i.getMonth()+n+1,0))},ISOWEEKNUM:G,NETWORKDAYS:function(e,t,i){return U(e,t,1,i)},"NETWORKDAYS.INTL":U,TIMEVALUE:function(e){if("string"==typeof e){var t=e.split(" "),i=t[1],n=t[0].split(":"),o=new Date;return o.setHours(+n[0]),i&&"PM"===i.toUpperCase()&&o.setHours(o.getHours()+12),o.setMinutes(+n[1]),n[2]&&o.setSeconds(+n[2]),(3600*o.getHours()+60*o.getMinutes()+o.getSeconds())/86400}},WEEKNUM:function(e,t){void 0===t&&(t=1);var i=p(e);if(21===t)return G(t);var n=T[t],o=new Date(i.getFullYear(),0,1),r=o.getDay()<n?1:0,a=o.getTime()-24*Math.abs(o.getDay()-n)*60*60*1e3;return Math.floor((i.getTime()-a)/864e5/7+1)+r},WEEKDAY:function(e,t){void 0===t&&(t=1);var i=p(e).getDay();return P[t][i]},WORKDAY:function(e,t,i){return X(e,t,1,i)},"WORKDAY.INTL":X,YEARFRAC:K};function Z(e,t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var r,a=v(e),s=v(t),l=v(i),c=v(n);if(0===a)r=(l+c)/s;else{var u=Math.pow(1+a,s);r=a*(l*u+c)/(u-1),1===o&&(r/=1+a)}return-r}function Q(e,t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var r,a=v(e),s=v(t),l=v(i),c=v(n);if(0!==a){var u=Math.pow(1+a,s);return r=c*u+l*(u-1)/a,1===o&&(r=c*u+l*(1+a)*(u-1)/a),-r}r=c+l*s}function ee(e,t,i,n,o,r){void 0===o&&(o=0),void 0===r&&(r=0);var a=v(e),s=v(i),l=v(t),c=v(n),u=Z(a,s,c,v(o),r);return(1===l?1===r?0:-c:1===r?Q(a,l-2,u,c,1)-u:Q(a,l-1,u,c,0))*a}var te=Object.freeze({__proto__:null,ACCRINT:function(e,t,i,n,o,r,a){void 0===o&&(o=0),void 0===a&&(a=0);var s=p(e),l=p(i),c=v(n),u=v(o),d=v(r),h=v(a);if(1!==d)throw"This function is only supported with frequency 1";if(-1===[0,1,2,3,4].indexOf(h))throw"Basis is "+a+". It's should be 0, 1, 2, 3 or 4";if(l<=s)throw"Settlement canot be before or equal to issue";return u*c*K(e,i,h)},PMT:Z,FV:Q,DB:function(e,t,i,n,o){void 0===o&&(o=12);var r=v(e),a=v(t),s=v(i),l=v(n),c=v(o);if(r<0||a<0||s<0||l<0)throw"Parameters cannot be negative";if(-1===[1,2,3,4,5,6,7,8,9,10,11,12].indexOf(c))throw"Month is "+o+". It's should be beetwen 1 and 12";if(l>s)throw"Period cannot be greater than life";if(a>=r)return 0;for(var u=+(1-Math.pow(a/r,1/s)).toFixed(3),d=r*u*c/12,h=d,f=0,p=n===s?s-1:n,g=2;g<=+p;g++)h+=f=(r-h)*u;return 1===n?d:n===s?(r-h)*u:f},DDB:function(e,t,i,n,o){void 0===o&&(o=2);var r=v(e),a=v(t),s=v(i),l=v(n),c=v(o);if(r<0||a<0||s<0||l<0||c<0)throw"Parameters cannot be negative";if(l>s)throw"Period cannot be greater than life";if(a>=r)return 0;for(var u=0,d=0,h=1;h<=+n;h++)u+=d=Math.min(c/s*(r-u),r-a-u);return d},DOLLAR:function(e,t){void 0===t&&(t=2);var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n){if(n>=0)return"$"+i.toFixed(n);var o=Math.pow(10,-n);return"$"+Math.trunc(i/o)*o}},DOLLARDE:function(e,t){var i=v(e),n=v(t);if(n<0)throw"Fraction cannot be negative";if(n>=0&&n<1)throw"Fraction cannot be zero";n=parseInt(""+n,10);var o=parseInt(""+e,10);o+=i%1*Math.pow(10,Math.ceil(Math.log(n)/Math.LN10))/n;var r=Math.pow(10,Math.ceil(Math.log(n)/Math.LN2)+1);return Math.round(o*r)/r},DOLLARFR:function(e,t){var i=v(e),n=v(t);if(n<0)throw"Fraction cannot be negative";if(n>=0&&n<1)throw"Fraction cannot be zero";return n=parseInt(""+n,10),parseInt(""+e,10)+i%1*Math.pow(10,-Math.ceil(Math.log(n)/Math.LN10))*n},EFFECT:function(e,t){var i=v(e),n=v(t);if(i<=0)throw"Rate cannot be less than or equal to zero";if(n<1)throw"Periods cannot be less than 1";return n=parseInt(""+n,10),Math.pow(1+i/n,n)-1},FVSCHEDULE:function(e,t){for(var i=v(e),n=t.map((function(e){return v(e)})),o=n.length,r=i,a=0;a<o;a++)r*=1+n[a];return r},IRR:function(e,t){void 0===t&&(t=0);for(var i=d(e).map((function(e){return v(e)})),n=v(t),o=function(e,t,i){for(var n=i+1,o=e[0],r=1;r<e.length;r++)o+=e[r]/Math.pow(n,(t[r]-t[0])/365);return o},r=function(e,t,i){for(var n=i+1,o=0,r=1;r<e.length;r++){var a=(t[r]-t[0])/365;o-=a*e[r]/Math.pow(n,a+1)}return o},a=[],s=!1,l=!1,c=0;c<i.length;c++)a[c]=0===c?0:a[c-1]+365,i[c]>0&&(s=!0),i[c]<0&&(l=!0);if(!s||!l)throw"Values should contain at least one positive value and one negative value";var u,h,f,p=n=void 0===t?.1:n,g=!0;do{u=p-(f=o(i,a,p))/r(i,a,p),h=Math.abs(u-p),p=u,g=h>1e-10&&Math.abs(f)>1e-10}while(g);return p},IPMT:ee,ISPMT:function(e,t,i,n){var o=v(e),r=v(t),a=v(i);return v(n)*o*(r/a-1)},NPV:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=d(e).map((function(e){return v(e)})),n=v(i[0]),o=0,r=1;r<i.length;r++)o+=i[r]/Math.pow(1+n,r);return o},NOMINAL:function(e,t){var i=v(e),n=v(t);if(i<=0)throw"Rate cannot be less then or equal to zero";if(n<1)throw"Periods cannot be less then 1";return n=parseInt(""+n,10),(Math.pow(i+1,1/n)-1)*n},NPER:function(e,t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var r=v(e),a=v(t),s=v(i),l=v(n),c=v(o),u=a*(1+r*c)-l*r,d=s*r+a*(1+r*c);return Math.log(u/d)/Math.log(1+r)},PDURATION:function(e,t,i){var n=v(e),o=v(t),r=v(i);if(n<=0)throw"Rate cannot be less then or equal to zero";return(Math.log(r)-Math.log(o))/Math.log(1+n)},PPMT:function(e,t,i,n,o,r){void 0===o&&(o=0),void 0===r&&(r=0);var a=v(e),s=v(t),l=v(i),c=v(n),u=v(o),d=v(r);return Z(a,l,c,u,d)-ee(a,s,l,c,u,d)},PV:function(e,t,i,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var r=v(e),a=v(t),s=v(i),l=v(n),c=v(o);return 0===r?-s*a-l:((1-Math.pow(1+r,a))/r*s*(1+r*c)-l)/Math.pow(1+r,a)},SYD:function(e,t,i,n){var o=v(e),r=v(t),a=v(i);return(o-r)*(a-v(n)+1)*2/(a*(a+1))},TBILLPRICE:function(e,t,i){var n=p(e),o=p(t),r=v(i);if("number"==typeof r&&o>n)return 100*(1-r*Math.round((o.getTime()-n.getTime())/864e5)/360)},TBILLYIELD:function(e,t,i){var n=p(e),o=p(t),r=v(i);if("number"==typeof r&&o>n)return(100-r)/r*360/Math.round((o.getTime()-n.getTime())/864e5)}}),ie=function(e,t){return ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},ie(e,t)
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */},ne=function(){return ne=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ne.apply(this,arguments)};!function(e){!function(e,t){function i(){this.constructor=e}ie(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}((function(){return null!==e&&e.apply(this,arguments)||this}),e)}(Array);var oe,re={1:"#ERROR",2:"#ERROR",3:"#REF!",4:"#SPILL!"};function ae(e,t,i){return i+64*t+64*e*4096}function se(e){return[e<2147483648?e>>18:e/262144&16777215,e>>6&4095,63&e]}function le(e){return e<2147483648?e>>18:e/262144&16777215}function ce(e){return e>>6&4095}function ue(e){return 63&e}function de(e,t,i){for(var n=se(e),o=n[0],r=n[1],a=se(t),s=a[0]-o,l=a[1]-r,c=0;c<=s;c++)for(var u=0;u<=l;u++)i(e+64*u+4096*c*64)}function he(e,t,i,n){for(var o=0,r=0;r<i;r++)for(var a=0;a<t;a++)n(e+64*a+4096*r*64,o),o++}function fe(e,t){for(var i,n,o,r,a,s,l,c,u=e.code,d=e.source,h="",f=u.length,p=0;p<f;p+=3)switch(u[p]){case 5:var v=void 0;9===u[p+6]&&(v=t.pageName(ue(u[p+7]))),h+=ve(v||e.source.substr(u[p+1],u[p+2]))+"!";break;case 7:r=(i=se(u[p+4]))[0],s=i[1],c=i[2],t.z!==c&&5!==u[p-3]&&(h+=ve(t.pageName(c))+"!"),h+=pe(r,s,u[p+5]);break;case 4:h+=d.substr(u[p+1],u[p+2]).toUpperCase();break;case 8:r=(n=se(u[p+4]))[0],s=n[1],c=n[2],a=(o=se(u[p+7]))[0],l=o[1],t.z!==c&&5!==u[p-3]&&(h+=ve(t.pageName(c))+"!"),h+=pe(r,s,u[p+5]),h+=":",h+=pe(a,l,u[p+8]);break;case 9:break;case 2:h+="{{"+d.substr(u[p+1],u[p+2])+"}}";break;case 3:h+="#REF!";break;case 1:h+='"'+d.substr(u[p+1],u[p+2])+'"';break;case 13:h+="{";var g=u[p+1],_=u[p+2];p+=3;for(var m=0;m<_;m++){for(var y=0;y<g;y++){y>0&&(h+=",");var b=u[p];1===b?h+='"'+d.substr(u[p+1],u[p+2])+'"':11===b&&(h+=d.substr(u[p+1],u[p+2])),p+=3}m<_-1&&(h+=";")}p-=3,h+="}";break;default:h+=d.substr(u[p+1],u[p+2])}return h}function pe(e,t,i){var n="";2&i&&(n+="$");var o="";for(t+=1;t>0;){var r=t%26;0===r&&(r=26),o=String.fromCharCode(64+r)+o,t=(t-r)/26}return n+=o,1&i&&(n+="$"),n+(e+1)}function ve(e){return-1!==e.indexOf(" ")?"'"+e+"'":e}function ge(e){return e<=122}function _e(e){return e<=122?e>=65&&94!=e||35===e||36===e||46===e:e>191}function me(e){return e>=97}function ye(e){var t=e.charCodeAt(0);return t>=48&&t<=57}function be(e,t){for(var i=t;i<e.length;i++){var n=e[i];if(","===n||";"===n||"}"===n)return i}return e.length}function we(e,t){var i;do{t++,i=e.charCodeAt(t)}while(i>=48&&i<=57);return t}function xe(e,t){var i;do{i=e[++t]}while('"'!==i);return t}function Ce(e){return" "===e||"\t"===e||"\n"===e||"\r"===e}function Ee(e,t){var i;do{i=e[++t]}while(Ce(i));return t}function Se(e,t){if("<"===e[t]){var i=e[t+1];">"!==i&&"="!==i||t++}else">"===e[t]&&"="===e[t+1]&&t++;return t+1}function Ie(e,t,i){for(var n=e.length,o=!0,r=t,a=!1,s=!1,l=!1,c=0;r<n;r++){var u=e[r];if("'"!==u){if(!a){l=!0;var d=u.charCodeAt(0);if(_e(d)){ge(d)?me(d)&&(s=!0):o=!1,1==c&&c++;continue}if(ye(u)){0==c&&c++;continue}break}}else{if(l)break;if(a){r++;break}a=!0}}var h=e[r],f=t,p=r-t;return a&&((p-=1+("'"===e[r-1]?1:0))<0&&(p=0),f++,i=5),0===i&&(":"===h&&o?1!==c?i=3:(i=8,s&&(oe=!0)):"!"===h?i="#"===e[f]?3:5:"("===h?(function(e,t,i){var n=e.substr(t,i);return n.toUpperCase()!==n}(e,f,p)&&(oe=!0),i=4):"}"===h&&"}"===e[r-1]?i=2:1===c&&o?(i=7,s&&(oe=!0)):i=6),[f,p,r,i]}function ke(e,t,i){for(var n=0,o=0,r=1,a=1,s=0,l=!1,c=t.length-1;c>=0;c--){var u=t[c].charCodeAt(0);36!==u?u<58?(o+=(u-48)*r,r*=10):(l||(r=1,n=o,o=0,l=!0,a+=1),o+=(u-(u>96?96:64))*r,r*=26):s+=a}o>4095?e.push(3,0,0):e.push(9,ae(n-1,o-1,i),s)}function Oe(e,t){var i,n,o=[];oe=!1;for(var r,a=-1,s=-1,l=0,c=0;c<e.length;c++){var u=e[c];if(s>-1)if("}"==u){var d=o[s+2]+=1,h=o[s+1]=l/d;h-Math.round(h)!=0&&o.push(3,0,0),s=-1}else if('"'===u){var f=xe(e,c);c++,o.push(1,c,f-c),l++,c=f}else if("-"===u){var p=we(e,c+1);o.push(11,c,p-c),l++,c=p-1}else if(ye(u)){var v=we(e,c);o.push(11,c,v-c),l++,c=v-1}else if(" "===u||"\t"===u||","===u);else if(";"===u)o[s+2]+=1;else{var g=be(e,c);o.push(3,c,g-c),l++,c=g-1}else if('"'!=u){if(!(a>-1))if("{"!=u)if("'"==u||((r=u.charCodeAt(0))<=122?r>=65&&94!=r||35===r||36===r:r>191)){var _=void 0,m=Ie(e,c,0),y=(P=m[0],g=m[1],m[2]),b=m[3],w=o.length;if(7!==b&&8!==b||5!==o[o.length-3])_=t.z,o.push(b,P,g);else{var x="'"===e[P-2]?1:0,C=o[w-2],E=o[w-1];void 0===(_=t.page(e.substr(C,E)))&&(o.push(3,0,0),_=0),o.push(b,P-E-2*x-1,g+E+2*x+1)}if(c=y-1,6===b)t.name(o,e,t);else if(8===b){var S=o.length;if(ke(o,e.substr(P,g),_),P=(i=Ie(e,c+2,0))[0],g=i[1],y=i[2],5===(b=i[3])&&(P=(n=Ie(e,y+1,0))[0],g=n[1],y=n[2],b=n[3]),7!==b){o[S-3]=7;continue}ke(o,e.substr(P,g),_);var I=o[S+1],k=o[S+4];(I>k||le(I)>le(k))&&(o[S+1]=k,o[S+4]=I),o[S-1]+=g+1,c=y-1}else 7===b?ke(o,e.substr(P,g),_):3!==b&&5!==b||c++}else if(Ce(u)){var O=Ee(e,c);o.push(12,c,O-c),c=O-1}else if(ye(u)){var M=we(e,c);o.push(11,c,M-c),c=M-1}else{var R=Se(e,c);o.push(10,c,R-c),c=R-1}else{if("{"==e[c+1]){var A=Ie(e,c+2,2),P=A[0],T=(g=A[1],A[2]);o.push(2,P,g),c=T+2-1;continue}s=o.length,l=0,o.push(13,0,0)}}else a>-1?(o.push(1,a+1,c-a-1),a=-1):a=c}var D={code:o,source:e,exec:null,broken:0,triggers:null};return oe&&(D.source=fe(D,t)),D}function Me(e){return"            ".substr(0,10-e.length)}var Re=[">","<","=","+"];function Ae(e,t){var i=function(e,t){for(var i=e.code,n=e.source,o="",r=0,a=[],s=i.length,l=0;l<s;l+=3)switch(i[l]){case 4:o+='ctx.m["'+n.substr(i[l+1],i[l+2]).toUpperCase()+'"]';break;case 1:o+='"'+n.substr(i[l+1],i[l+2])+'"';break;case 2:o+='ctx.p("'+n.substr(i[l+1],i[l+2])+'")';break;case 6:case 7:var c=void 0,u=void 0;if(10===i[l-3]?c=l-3:12===i[l-3]&&10===i[l-6]&&(c=l-6),10===i[l+6]?u=l+6:12===i[l+6]&&10===i[l+9]&&(u=l+9),c||u){var d=c?n[i[c+1]]:null,h=u?n[i[u+1]]:null;if("&"==d||"&"==h){o+="(ctx.v("+i[l+4]+') === null ? "" : ctx.v('+i[l+4]+"))";break}if(-1!=Re.indexOf(d)||-1!=Re.indexOf(h)){o+="(ctx.v("+i[l+4]+") === null ? 0 : ctx.v("+i[l+4]+"))";break}}o+="ctx.v("+i[l+4]+")";break;case 8:o+="ctx.r("+i[l+4]+", "+i[l+7]+")";break;case 10:if(1===i[l+2])"&"===(f=n[i[l+1]])?o+='+""+':t&&"+"==f?o+="*1+1*":"="===f?o+="==":";"===f?o+=",":"{"===f?o+="[":"}"===f?o+="]":"^"===f?o+="**":"%"===f?i[l+3]&&10!==i[l+3]?o+=t?"/0+":f:o+=("/"==a[r]?"*":"/")+"100":("("==f?(r++,a.push("+")):")"==f&&(r--,a.pop()),o+=f),"+"!=f&&"-"!=f&&"*"!=f&&"/"!=f&&"&"!=f||(a[r]=f);else if(2===i[l+2]){var f;o+="<>"===(f=n.substr(i[l+1],i[l+2]))?"!=":f}else o+=n.substr(i[l+1],i[l+2]);break;case 11:o+=n.substr(i[l+1],i[l+2]);break;case 3:return"";case 9:case 5:case 12:break;case 13:o+="ctx.a([";for(var p=i[l+1],v=i[l+2],g=(l+=3)+p*v*3,_=!1;l<g;l+=3){_&&(o+=",");var m=i[l];if(11===m)o+=n.substr(i[l+1],i[l+2]);else if(1===m)o+='"'+n.substr(i[l+1],i[l+2])+'"';else if(3===m)return e.broken=3,"";_=!0}l-=3,o+="],"+p+", "+v+")"}return o}(e,t);if(!i)return e.broken=3,void(e.exec=null);try{e.exec=new Function("ctx","return "+i)}catch(t){e.broken=1,e.exec=null}}function Pe(e,t){var i=+St(e),n=+It(e),o=+St(t),r=+It(t);return vt(i*o-n*r,i*r+n*o)}function Te(e,t){var i=+St(e),n=+It(e);return vt(i+ +St(t),n+ +It(t))}function De(e){return e>0?Math.floor(e):Math.ceil(e)}function Fe(e){return e<0?Math.floor(e):Math.ceil(e)}function Ve(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=d(e),o=0;o<n.length;o++){var r=u(n[o]);"number"==typeof r&&(i+=r)}return i}function Le(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=0,o=d(e),r=0;r<o.length;r++){var a=u(o[r]);"number"==typeof a&&(i+=a,n++)}return n?i/n:0}function Ne(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=d(e),n=0,o=0,r=0;r<i.length;r++){var a=i[r],s=u(i[r]);"number"==typeof s?(n+=s,o++):(!0===a&&n++,(a||!1===a)&&o++)}return o?n/o:0}function He(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=d(e),o=0;o<n.length;o++){"number"==typeof u(n[o])&&i++}return i}function je(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=d(e),o=0;o<n.length;o++)n[o]&&1*n[o]!=0&&i++;return i}function ze(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=-1/0,n=d(e),o=0;o<n.length;o++){var r=u(n[o]);"number"==typeof r&&r>i&&(i=r)}return i===-1/0?0:i}function $e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=1/0,n=d(e),o=0;o<n.length;o++){var r=u(n[o]);"number"==typeof r&&r<i&&(i=r)}return i===1/0?0:i}function Be(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=!1,n=1,o=d(e),r=0;r<o.length;r++){var a=u(o[r]);"number"==typeof a&&(i=!0,n*=a)}return i?n:null}function qe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0].length;for(var n in e)if(e[n].length!==i)return;var o=0;for(n=0;n<e[0].length;n++){var r=!1,a=1;for(var s in e){var l=u(e[s][n]);"number"==typeof l&&(a*=l,r=!0)}r&&(o+=a)}return o}function We(e,t,i){for(var n=d(e),o=t?0:-1,r=i?Ne.apply(void 0,e):Le.apply(void 0,e),a=0,s=0;s<n.length;s++){var l=n[s],c=u(n[s]);if("number"!=typeof c){if(!i||"boolean"!=typeof l&&!l)continue;c=!0===l?1:0}o++,a+=Math.pow(c-r,2)}return o?a/o:0}function Ge(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return We(e,!1,!1)}function Ue(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return We(e,!1,!0)}function Xe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return We(e,!0,!1)}function Ye(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return We(e,!0,!0)}function Ke(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.sqrt(Ge.apply(void 0,e))}function Je(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.sqrt(Xe.apply(void 0,e))}function Ze(e,t){var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n)return Math.pow(i,n)}function Qe(e){var t=u(e);if("number"==typeof t&&t>=0)return Math.sqrt(t)}function et(e){var t=u(e);if("number"==typeof t)return Math.abs(t)}function tt(){return Math.random()}function it(e){var t=u(e);if("number"==typeof t)return Math.floor(t)}function nt(e,t){var i=u(e),n=u(t)||0;if("number"==typeof i&&"number"==typeof n)return n<0?Math.round(i/Math.pow(10,Math.abs(n)))*Math.pow(10,Math.abs(n)):parseFloat(i.toFixed(n))}function ot(e,t){var i=u(e),n=u(t)||0;if("number"==typeof i&&"number"==typeof n)return Math.floor(i*Math.pow(10,n))/Math.pow(10,n)}function rt(e,t){var i=u(e),n=u(t)||0;if("number"==typeof i&&"number"==typeof n)return Math.ceil(i*Math.pow(10,n))/Math.pow(10,n)}var at={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1};function st(e,t,i){void 0===t&&(t=1),void 0===i&&(i=0);var n=u(e),o=u(t),r=u(i);if("number"==typeof n&&"number"==typeof o&&"number"==typeof r)return 0===o?0:(o=Math.abs(o),n>=0?Math.ceil(n/o)*o:0===i?-1*Math.floor(Math.abs(n)/o)*o:-1*Math.ceil(Math.abs(n)/o)*o)}var lt=[];function ct(e){var t=u(e);if("number"==typeof t&&t>-1){var i=Math.floor(t);return 0===i||1===i?1:(lt[i]>0||(lt[i]=ct(i-1)*i),lt[i])}}function ut(e,t){var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n)return ct(i)/(ct(n)*ct(i-n))}function dt(e,t){var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n){var o=Math.abs(n);return i>=0?Math.floor(i/o)*o:-1*Math.ceil(Math.abs(i)/o)*o}}function ht(e,t){void 0===t&&(t=10);var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n)return Math.log(i)/Math.log(n)}function ft(e,t){var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n)return i+Math.ceil((n-i+1)*Math.random())-1}var pt=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];function vt(e,t,i){void 0===i&&(i="i");var n=u(e),o=u(t);if("number"!=typeof n&&"number"!=typeof o)throw r;var a="",s="";return e&&(a=e.toString()),t&&1!==t?s=t+i:1===t&&(s=i),t>0?(a?a+"+":"")+s:a+s}function gt(e,t){return void 0===t&&(t=null),g(e,t,-512,511,2)}function _t(e,t){return void 0===t&&(t=null),g(e,t,-274877906944,274877906943,16)}function mt(e,t){return void 0===t&&(t=null),g(e,t,-536870912,536870911,8)}var yt=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17];function bt(e){for(var t,i=e<0,n=0,o=0,r=2/(2+(e=Math.abs(e))),a=4*r-2,s=yt.length-1;s>0;s--)t=a*n-o+yt[s],o=n,n=t;var l=r*Math.exp(-e*e+.5*(yt[0]+a*n)-o);return i?l-1:1-l}function wt(e,t){var i=u(e),n=u(t);if("number"==typeof i)return"number"==typeof n?bt(n)-bt(i):bt(i);throw o}function xt(e){var t=u(e);if("number"==typeof t)return Math.exp(t);throw o}var Ct=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],Et=Math.pow(2,39);function St(e){if("string"!=typeof e)throw o;if(["i","+i","1i","+1i","-i","-1i","j","+j","1j","+1j","-j","-1j"].indexOf(e)>=0)return 0;var t=e.indexOf("+"),i=e.indexOf("-");0===t&&(t=e.indexOf("+",1)),0===i&&(i=e.indexOf("-",1));var n=e.substring(e.length-1,e.length),a="i"===n||"j"===n;if(t>=0||i>=0){if(!a)throw r;if(t>=0){if(isNaN(+e.substring(0,t))||isNaN(+e.substring(t+1,e.length-1)))throw r;return Number(e.substring(0,t))}if(isNaN(+e.substring(0,i))||isNaN(+e.substring(i+1,e.length-1)))throw r;return Number(e.substring(0,i))}if(a){if(isNaN(+e.substring(0,e.length-1)))throw r;return 0}if(isNaN(+e))throw r;return+e}function It(e){if("string"!=typeof e)throw o;if(["i","j"].indexOf(e)>=0)return 1;var t=(e=e.replace("+i","+1i").replace("-i","-1i").replace("+j","+1j").replace("-j","-1j")).indexOf("+"),i=e.indexOf("-");0===t&&(t=e.indexOf("+",1)),0===i&&(i=e.indexOf("-",1));var n=e.substring(e.length-1,e.length),a="i"===n||"j"===n;if(t>=0||i>=0){if(!a)throw r;if(t>=0){if(isNaN(+e.substring(0,t))||isNaN(+e.substring(t+1,e.length-1)))throw r;return Number(e.substring(t+1,e.length-1))}if(isNaN(+e.substring(0,i))||isNaN(+e.substring(i+1,e.length-1)))throw r;return-Number(e.substring(i+1,e.length-1))}if(a){var s=+e.substring(0,e.length-1);if(isNaN(s))throw r;return s}if(isNaN(+e))throw r;return 0}function kt(e){var t=+St(e),i=+It(e);return vt(Math.cos(t)*Math.cosh(i),-Math.sin(t)*Math.sinh(i))}function Ot(e){var t=+St(e),i=+It(e);return vt(Math.cos(i)*(Math.exp(t)+Math.exp(-t))/2,Math.sin(i)*(Math.exp(t)-Math.exp(-t))/2)}function Mt(e,t){var i=+St(e),n=+It(e),o=+St(t),r=+It(t),a=Math.pow(o,2)+Math.pow(r,2);return vt((i*o+n*r)/a,(n*o-i*r)/a)}function Rt(e){var t=+St(e),i=+It(e);return vt(Math.sin(t)*Math.cosh(i),Math.cos(t)*Math.sinh(i))}function At(e){var t=+St(e),i=+It(e);return vt(Math.cos(i)*(Math.exp(t)-Math.exp(-t))/2,Math.sin(i)*(Math.exp(t)+Math.exp(-t))/2)}var Pt=Math.pow(2,29);function Tt(e,t,i){var n=u(t);if("number"!=typeof n||t<0||t>1||i&&(0===t||1===t))throw o;var r=d(e).sort((function(e,t){return e-t}));i&&(r=function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<i;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,o++)n[o]=r[a];return n}([0],r));var a=(r.length+(i?0:-1))*n,s=Math.floor(a);if(void 0===r[s+1])return r[s];var l=r[s+1]-r[s];return r[s]+l*(a-s)}function Dt(e,t,i){var n=u(t);if("number"!=typeof n)throw o;switch(n){case 0:if(i)throw o;return $e.apply(void 0,e);case 1:return Tt(e,.25,i);case 2:return Tt(e,.5,i);case 3:return Tt(e,.75,i);case 4:if(i)throw o;return ze.apply(void 0,e);default:throw r}}function Ft(e,t,i,n){var o=v(e),r=v(t),a=v(i);if(1==t)return 1/a;var s=Math.exp(-Math.pow(o/a,r));return n?1-s:r/Math.pow(a,r)*Math.pow(o,r-1)*s}function Vt(e,t,i,n){void 0===n&&(n=!1);var o=v(e),r=v(t),a=v(i),s=function(e,t,i){return ut(t,e)*Math.pow(i,e)*Math.pow(1-i,t-e)};if(!n)return s(o,r,a);for(var l=0,c=0;c<o+1;c++)l+=s(c,r,a);return l}function Lt(e,t,i){var o=e.filter((function(e){return"number"==typeof e})),r=t.filter((function(e){return"number"==typeof e}));if(o.length!==r.length)throw a;var s=o.length;if(0===s)throw n;for(var l=o.reduce((function(e,t){return e+t}),0)/s,c=r.reduce((function(e,t){return e+t}),0)/s,u=0,d=0;d<s;d++)u+=(o[d]-l)*(r[d]-c);return u/(i?s-1:s)}function Nt(e,t){return Lt(e,t,!1)}var Ht={ABS:et,ACOS:function(e){var t=u(e);if("number"==typeof t)return Math.acos(t)},ACOSH:function(e){var t=u(e);if("number"==typeof t)return Math.acosh(t)},ACOT:function(e){var t=u(e);if("number"==typeof t)return Math.atan(1/t)},ACOTH:function(e){var t=u(e);if("number"==typeof t)return.5*Math.log((t+1)/(t-1))},ADD:function(e,t){var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n)return i+n},ARABIC:function(e){if(!u(e)&&/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(""+e)){var t=0;return(""+e).replace(/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,(function(e){return t+=at[e],e})),+t}},ASIN:function(e){var t=u(e);if("number"==typeof t)return Math.asin(t)},ASINH:function(e){var t=u(e);if("number"==typeof t)return Math.asinh(t)},ATAN:function(e){var t=u(e);if("number"==typeof t)return Math.atan(t)},ATAN2:function(e,t){var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n)return Math.atan2(n,i)},ATANH:function(e){var t=u(e);if("number"==typeof t)return Math.log((1+t)/(1-t))/2},AVEDEV:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=d(e).filter((function(e){return"number"==typeof e})),o=i.length;if(0===o)throw n;var r=i.reduce((function(e,t){return e+t}),0)/o,a=i.reduce((function(e,t){return e+Math.abs(t-r)}),0);return a/o},AVERAGE:Le,AVERAGEA:Ne,BASE:function(e,t,i){void 0===i&&(i=0);var n=u(e),o=u(t),r=u(i);if("number"==typeof n&&"number"==typeof o&&"number"==typeof r){var a=n.toString(o);return new Array(Math.max(r+1-a.length,0)).join("0")+a.toUpperCase()}},BINOMDIST:Vt,"BINOM.INV":function(e,t,i){for(var n=v(e),o=v(t),r=v(i),a=0;a<=n;a++)if(Vt(a,n,o,!0)>=r)return a},"BINOM.DIST.RANGE":function(e,t,i,n){var o=v(e),r=v(t),a=v(i),s=u(n);"number"!=typeof s&&(s=a);for(var l=0,c=a;c<=s;c++)l+=ut(o,c)*Math.pow(r,c)*Math.pow(1-r,o-c);return l},"BINOM.DIST":Vt,BITAND:function(e,t){var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n)return i&n;throw o},BITLSHIFT:function(e,t){var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n)return n>0?i<<n:i>>-n;throw o},BITOR:function(e,t){var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n)return i|n;throw o},BITRSHIFT:function(e,t){var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n)return n>0?i>>n:i<<-n;throw o},BITXOR:function(e,t){var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n)return i^n;throw o},CEILING:st,COMBIN:ut,COMBINA:function(e,t){var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n)return 0===i&&0===n?1:ut(i+n-1,i-1)},COMPLEX:vt,CORREL:function(e,t){if(e.length!==t.length)throw a;for(var i=e.filter((function(e){return"number"==typeof e})),o=t.filter((function(e){return"number"==typeof e})),r=i.length,s=i.reduce((function(e,t){return e+t}),0)/r,l=o.reduce((function(e,t){return e+t}),0)/r,c=0,u=0,d=0,h=0;h<r;h++)c+=(i[h]-s)*(o[h]-l),u+=Math.pow(i[h]-s,2),d+=Math.pow(o[h]-l,2);var f=Math.sqrt(u*d);if(!f)throw n;return c/f},COS:function(e){var t=u(e);if("number"==typeof t)return Math.cos(t)},COSH:function(e){var t=u(e);if("number"==typeof t)return Math.cosh(t)},COT:function(e){var t=u(e);if("number"==typeof t)return 1/Math.tan(t)},COTH:function(e){var t=u(e);if("number"==typeof t){var i=Math.exp(2*t);return(i+1)/(i-1)}},COUNT:He,COUNTA:je,COUNTBLANK:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=d(e),o=0;o<n.length;o++)0===n[o]||n[o]||i++;return i},COVAR:Nt,"COVARIANCE.P":Nt,"COVARIANCE.S":function(e,t){return Lt(e,t,!0)},CSC:function(e){var t=u(e);if("number"==typeof t)return 1/Math.sin(t)},CSCH:function(e){var t=u(e);if("number"==typeof t)return 2/(Math.exp(t)-Math.exp(-t))},DEC2BIN:gt,DEC2HEX:_t,DEC2OCT:mt,DECIMAL:function(e,t){var i=u(e),n=u(t);if(!(""+i).match("/[2-9]/")&&"number"==typeof i&&"number"==typeof n&&n>1&&n<37)return parseInt(""+i,n)},DEGREES:function(e){var t=u(e);if("number"==typeof t)return 180*t/Math.PI},DELTA:function(e,t){var i=u(e),n=u(t);if("number"==typeof i||"number"==typeof i)return+(i===n);throw o},DEVSQ:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=d(e),n=[];i.forEach((function(e){"number"==typeof e&&n.push(e)}));var o=n.reduce((function(e,t){return e+t}),0)/n.length;return n.reduce((function(e,t){return e+Math.pow(t-o,2)}),0)},DIVIDE:function(e,t){var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n&&0!==n)return i/n},EQ:function(e,t){return typeof e==typeof t&&e==t},ERF:wt,ERFC:function(e,t){var i=u(e);if("number"==typeof i)return 1-wt(i,t);throw o},EVEN:function(e){var t=u(e);if("number"==typeof t){var i=Fe(t);return i%2?i+Math.sign(t):i}},EXP:xt,FACT:ct,FACTDOUBLE:function e(t){var i=u(t);if("number"==typeof i){var n=Math.floor(i);return n<=0?1:n*e(n-2)}},FISHER:function(e){var t=u(e);if("number"==typeof t&&t>-1&&t<1)return.5*Math.log((1+t)/(1-t));throw o},FISHERINV:function(e){var t=u(e);if("number"==typeof t){var i=Math.exp(2*t);return(i-1)/(i+1)}throw o},FLOOR:dt,GAMMA:function e(t){var i=u(t);if("number"!=typeof i)throw o;if(!(Number.isInteger(i)&&i<=0)){if(i<.5)return Math.PI/(Math.sin(Math.PI*i)*e(1-i));i-=1;for(var n=Ct[0],a=1;a<9;a++)n+=Ct[a]/(i+a);var s=i+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(s,i+.5)*Math.exp(-s)*n}throw r},GCD:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=d(e),n=i.length;if(!n)return 1;for(var o=i[0],r=1;"number"!=typeof o;){if(o=i[r],r>i.length)throw"The arguments should contain at least one numeric value";r++}for(var a=o<0?-o:o;r<n;r++){var s=u(i[r]);if("number"==typeof s){for(var l=s<0?-s:s;a&&l;)a>l?a%=l:l%=a;a+=l}}return a},GEOMEAN:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=d(e);if(i.some((function(e){return!Number.isFinite(e)||e<=0})))throw r;return Math.pow(i.reduce((function(e,t){return t*e}),1),1/i.length)},GESTEP:function(e,t){void 0===t&&(t=0);var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n)return+(e>=t);throw o},GT:function(e,t){var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n)return i>n},GTE:function(e,t){var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n)return i>=n},HARMEAN:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=d(e);if(i.some((function(e){return!Number.isFinite(e)||e<=0})))throw r;var n=i.reduce((function(e,t){return e+1/t}),0);return 1/(1/i.length*n)},HEX2BIN:function(e,t){return gt(parseInt(e.toString(),16),t)},HEX2DEC:function(e,t){var i=parseInt(e.toString(),16);if(!Number.isFinite(i))throw o;var n=i>Et;n&&(i=-(i-2*Et));var r=t?u(t):null,a=i.toString();return(n?"-":"")+(r?a.padStart(r,"0"):a)},HEX2OCT:function(e,t){void 0===t&&(t=null);var i=parseInt(e.toString(),16);return i>Et&&(i^=Et),mt(i,t)},IMABS:function(e){var t=St(e),i=It(e);if(!Number.isFinite(+t)||!Number.isFinite(+i))throw o;return Math.sqrt(Math.pow(+t,2)+Math.pow(+i,2))},IMAGINARY:It,IMCONJUGATE:function(e){return vt(+St(e),-+It(e))},IMCOS:kt,IMCOSH:Ot,IMCOT:function(e){return Mt(kt(e),Rt(e))},IMCSC:function(e){return Mt("1",Rt(e))},IMCSCH:function(e){return Mt("1",At(e))},IMDIV:Mt,IMEXP:function(e){var t=+St(e),i=+It(e),n=Math.exp(t);return vt(n*Math.cos(i),n*Math.sin(t))},IMLN:function(e){var t=+St(e),i=+It(e);return vt(Math.log(Math.sqrt(t*t+i*i)),Math.atan(i/t))},IMPOWER:function(e,t){var i=u(t);if("number"!=typeof i)throw o;var n=+St(e),r=+It(e),a=Math.sqrt(n*n+r*r),s=Math.pow(a,i),l=Math.atan(r/n);return vt(s*Math.cos(i*l),s*Math.sin(i*l))},IMPRODUCT:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw o;for(var i=e[0],n=0,r=e.slice(1);n<r.length;n++){var a=r[n];i=Pe(i.toString(),a.toString())}return i.toString()},IMREAL:St,IMSEC:function(e){return Mt("1",kt(e))},IMSECH:function(e){return Mt("1",Ot(e))},IMSIN:Rt,IMSINH:At,IMSQRT:function(e){var t=+St(e),i=+It(e),n=Math.sqrt(Math.sqrt(t*t+i*i)),o=Math.atan(i/t)/2;return vt(n*Math.cos(o),n*Math.sin(o))},IMSUB:function(e,t){var i=+St(e),n=+It(e);return vt(i-+St(t),n-+It(t))},IMSUM:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw o;for(var i=e[0],n=0,r=e.slice(1);n<r.length;n++){var a=r[n];i=Te(i.toString(),a.toString())}return i.toString()},IMTAN:function(e){return Mt(Rt(e),kt(e))},INT:it,LARGE:function(e,t){var i=u(t),n=e.sort((function(e,t){return e-t}));if("number"==typeof i&&!e.some((function(e){return"number"!=typeof u(e)})))return n[n.length-i];throw o},LN:function(e){var t=u(e);if("number"==typeof t)return Math.log(t)},LOG:ht,LOG10:function(e){var t=u(e);if("number"==typeof t)return Math.log(t)/Math.log(10)},LT:function(e,t){var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n)return i<n},LTE:function(e,t){var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n)return i<=n},MAX:ze,MEDIAN:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=d(e);i.sort((function(e,t){return e-t}));var n=Math.floor(i.length/2);return i.length%2?i[n]:(i[n-1]+i[n])/2},MIN:$e,MINUS:function(e,t){var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n)return i-n},MOD:function(e,t){var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n&&0!==n){var o=Math.abs(i%n);return t>0?o:-o}},MROUND:function(e,t){var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n&&i*n>-1)return Math.round(i/n)*n},MULTINOMIAL:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=d(e),n=0,o=1,r=0;r<i.length;r++){var a=u(i[r]);"number"==typeof a&&(n+=a,o*=ct(i[r]))}return ct(n)/o},MULTIPLY:function(e,t){var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n)return i*n},NE:function(e,t){return typeof e!=typeof t||e!=t},OCT2BIN:function(e,t){void 0===t&&(t=null);var i=parseInt(e.toString(),8);return i&Pt&&(i=-(2*Pt-i)),gt(i,t)},OCT2DEC:function(e,t){void 0===t&&(t=null);var i=t?u(t):null,n=parseInt(e.toString(),8);if(n&Pt&&(n=-(2*Pt-n)),!Number.isFinite(n)||"boolean"==typeof i)throw o;return n.toString().padStart(i||0,"0")},OCT2HEX:function(e,t){void 0===t&&(t=null);var i=parseInt(e.toString(),8);return i&Pt&&(i=-(2*Pt-i)),_t(i,t)},ODD:function(e){var t=u(e);if("number"==typeof t){var i=Fe(t);return i%2?i:i+Math.sign(t)}},PERCENTILE:Tt,"PERCENTILE.INC":Tt,"PERCENTILE.EXC":function(e,t){return Tt(e,t,!0)},PERMUT:function(e,t){var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n)return ct(i)/ct(i-n);throw o},PI:function(){return Math.PI},POW:function(e,t){var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n)return Ze(e,t)},POWER:Ze,PRODUCT:Be,QUARTILE:Dt,"QUARTILE.INC":Dt,"QUARTILE.EXC":function(e,t){return Dt(e,t,!0)},QUOTIENT:function(e,t){var i=u(e),n=u(t);if("number"==typeof i&&"number"==typeof n)return De(i/n)},RADIANS:function(e){var t=u(e);if("number"==typeof t)return t*Math.PI/180},RAND:tt,RANDBETWEEN:ft,ROMAN:function(e){var t=u(e);if("number"==typeof t){for(var i=String(t).split(""),n="",o=3;o--;)n=(pt[+i.pop()+10*o]||"")+n;return new Array(+i.join("")+1).join("M")+n}},ROUND:nt,ROUNDDOWN:ot,ROUNDUP:rt,SEC:function(e){var t=u(e);if("number"==typeof t)return 1/Math.cos(t)},SECH:function(e){var t=u(e);if("number"==typeof t)return 2/(Math.exp(t)+Math.exp(-t))},SIGN:function(e){var t=u(e);if("number"==typeof t)return 0===t?0:t/Math.abs(t);throw o},SIN:function(e){var t=u(e);if("number"==typeof t)return Math.sin(t)},SINH:function(e){var t=u(e);if("number"==typeof t)return Math.sinh(t)},SMALL:function(e,t){var i=u(t),n=e.sort((function(e,t){return e-t}));if("number"==typeof i&&!e.some((function(e){return"number"!=typeof u(e)})))return n[i-1];throw o},SQRT:Qe,SQRTPI:function(e){var t=u(e);if("number"==typeof t&&t>-1)return Math.sqrt(t*Math.PI)},STDEV:Ke,"STDEV.S":Ke,"STDEV.P":Je,STDEVA:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.sqrt(Ue.apply(void 0,e))},STDEVP:Je,STDEVPA:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Math.sqrt(Ye.apply(void 0,e))},STEYX:function(e,t){if(e.length!==t.length)throw a;var i=e.filter((function(e){return"number"==typeof e})),o=t.filter((function(e){return"number"==typeof e})),r=i.length;if(2===r)throw n;for(var s=i.reduce((function(e,t){return e+t}),0)/r,l=o.reduce((function(e,t){return e+t}),0)/r,c=0,u=0,d=0,h=0;h<r;h++)c+=(i[h]-s)*(o[h]-l),u+=Math.pow(i[h]-s,2),d+=Math.pow(o[h]-l,2);if(2===d)throw n;return Math.sqrt((u-Math.pow(c,2)/d)/(r-2))},SUBTOTAL:function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=u(e),o=d(t);if("number"==typeof n)switch(n){case 1:case 101:return Le.apply(void 0,o);case 102:case 2:return He.apply(void 0,o);case 103:case 3:return je.apply(void 0,o);case 104:case 4:return ze.apply(void 0,o);case 105:case 5:return $e.apply(void 0,o);case 106:case 6:return Be.apply(void 0,o);case 107:case 7:case 110:case 10:return;case 108:case 8:return Je.apply(void 0,o);case 109:case 9:return Ve.apply(void 0,o);case 111:case 11:return Xe.apply(void 0,o)}},SUM:Ve,SUMPRODUCT:qe,SUMSQ:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=d(e),o=0;o<n.length;o++){var r=u(n[o]);"number"==typeof r&&(i+=Math.pow(r,2))}return i},SUMX2MY2:function(e,t){if(!e.find((function(e){return"number"!=typeof u(e)}))&&!t.find((function(e){return"number"!=typeof u(e)}))){for(var i=0,n=0;n<e.length;n++)i+=e[n]*e[n]-t[n]*t[n];return i}},SUMX2PY2:function(e,t){if(!e.find((function(e){return"number"!=typeof u(e)}))&&!t.find((function(e){return"number"!=typeof u(e)}))){for(var i=0,n=0;n<e.length;n++)i+=e[n]*e[n]+t[n]*t[n];return i}},SUMXMY2:function(e,t){if(!e.find((function(e){return"number"!=typeof u(e)}))&&!t.find((function(e){return"number"!=typeof u(e)}))){for(var i=0,n=0;n<e.length;n++)i+=Math.pow(e[n]-t[n],2);return i}},TAN:function(e){var t=u(e);if("number"==typeof t)return Math.tan(t)},TANH:function(e){var t=u(e);if("number"==typeof t)return Math.tanh(t)},TRUNC:function(e){var t=u(e);if("number"==typeof t)return De(t)},VAR:Ge,"VAR.S":Ge,"VAR.P":Xe,VARA:Ue,VARP:Xe,VARPA:Ye,WEIBULL:Ft,"WEIBULL.DIST":Ft};function jt(e){return void 0===e?null:e}function zt(e,t,i,n){void 0===i&&(i=0);var o=-1;if(0===i)o=t.indexOf(e);else{var r="string"==typeof e?"":-1/0*i;1===i?t.forEach((function(t,i){t<=e&&t>r&&(r=t,o=i)})):-1===i&&t.forEach((function(t,i){t>=e&&t<r&&(r=t,o=i)}))}return o+1}var $t={LOOKUP:function(e,t,i){var n=zt(e,t,1);if(0===n)throw"#N/A";return(i||t)[n-1]},HLOOKUP:function(e,t,i,n){var o=!0;void 0!==n&&(o=f(n));var r=t.$width?t.$width:t.length,a=zt(e,t.slice(0,r),o?1:0);if(0===a)throw"#N/A";return jt(t[r*((i||1)-1)+a-1])},VLOOKUP:function(e,t,i,n){var o=!0;void 0!==n&&(o=f(n));var r,a=t.$width?t.$width:1,s=t.length/a;if(1===s)r=t;else{r=[];for(var l=0;l<s;l++)r.push(t[a*l])}var c=i,u=zt(e,r,o?1:0);if(0===u)throw"#N/A";return jt(t[a*(u-1)+(c||1)-1])},XLOOKUP:function(e,t,i,n,o,r){var a=zt(e,t,o);if(0===a){if(void 0!==n)return n;throw"#N/A"}return(i||t)[a-1]},INDEX:function(e,t,i){var n=t,o=i;return jt(e[(e.$width?e.$width:1)*(n-1)+(o||1)-1])},MATCH:function(e,t,i){var n=i;void 0===i&&(n=1);var o=zt(e,t,n);if(0===o)throw"#N/A";return o},XMATCH:function(e,t,i,n){var o=zt(e,t,i);if(0===o)throw"#N/A";return o},CHOOSE:function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=u(e);if(t.length>1&&"number"==typeof n){if(t.length<n)throw"the index number is greater than the length of the array of values";if(n<=0)throw"index cannot be less than or equal to 0";return t[--n]}}},Bt=Object.freeze({__proto__:null,IF:function(e,t,i){return e?t:i},AND:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0;i<e.length;i++)if(!f(e[i]))return!1;return!0},NOT:function(e){return!f(e)},OR:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0;i<e.length;i++)if(e[i])return!0;return!1},FALSE:function(){return!1},TRUE:function(){return!0}}),qt=Object.freeze({__proto__:null,ISBLANK:function(e){return h(e)},ISBINARY:function(e){return/^[01]{1,10}$/.test(""+e)},ISEVEN:function(e){var t=u(e);return"number"==typeof t&&t%2==0},ISODD:function(e){var t=u(e);return"number"==typeof t&&t%2!=0},ISNONTEXT:function(e){return"string"!=typeof e},ISNUMBER:function(e){return"number"==typeof u(e)},ISTEXT:function(e){return"string"==typeof e},N:function(e){var t=u(e);if("number"==typeof t)return t;var i=new Date(e);return i.getTime()?c(i):"TRUE"===e||!0===e?1:0}}),Wt={CONCATENATE:_,MID:y,LEFT:m,RIGHT:b,LOWER:w,UPPER:x,PROPER:C,TRIM:E,LEN:S,SEARCH:O,FIND:k,REPLACE:R,SUBSTITUTE:M,NOW:B},Gt={DATE:F,TIME:V,YEAR:H,MONTH:N,DAY:L,HOUR:j,MINUTE:z,SECOND:$,DATEDIF:q},Ut=ne(ne(ne(ne(ne(ne({},{SUM:Ve,AVERAGE:Le,AVERAGEA:Ne,COUNT:He,COUNTA:je,MIN:$e,MAX:ze,SQRT:Qe,POWER:Ze,LOG:ht,EXP:xt,PRODUCT:Be,SUMPRODUCT:qe,ABS:et,RAND:tt,RANDBETWEEN:ft,ROUND:nt,ROUNDUP:rt,ROUNDDOWN:ot,INT:it,CEILING:st,FLOOR:dt}),Wt),Gt),$t),qt),Bt),Xt=ne({},Ut);function Yt(e,t,i,n,o,r){var a=se(e),s=a[0],l=a[1],c=a[2],u=se(n),d=u[0],h=u[1];return!(c!==u[2]||s>=d+o||s+t<=d||l>=h+r||l+i<=h)}var Kt=Math.pow(10,8);function Jt(e,t,i){i.add?e.has(t)||i.add(t):e.add(t)}function Zt(e){if(e.keys)return Array.from(e.keys());var t=[];return e.forEach((function(e,i){return t.push(i)})),t}function Qt(e){if(e.values)return e.values();var t=[];e.forEach((function(e,i){return t.push(i)}));var i=0;return{add:function(e){t.push(e)},next:function(){var e=t[i];return{done:++i>t.length,value:e}}}}var ei=function(){function e(e){var t=this;(e=e||{get:null,set:null,strict:!1})&&(this._getter=e.get,this._setter=e.set,this._strict=e.strict),this._parser=Oe,this._printer=Ae,this._parseContext={name:function(){},pageName:function(){return""},pageObj:function(){return null},page:function(){return 0},z:0},this.$count=0,this._data=new Map,this._triggers=new Map,this._holders={},this._context={a:function(e,t,i){return e.$width=t,e.$height=i,e},v:function(e){if(-1===e)throw new Error;var i=t._getter(e);return void 0===i?null:i},r:function(e,i){var n=se(e),o=n[0],r=n[1],a=se(i),s=a[0]-o,l=a[1]-r+1,c=[];c.$width=l,c.$height=s+1;for(var u=0;u<=s;u++)for(var d=0;d<l;d++)c[u*l+d]=t._getter(e+64*d+4096*u*64);return c},m:Xt,e:function(e){throw e},p:function(e){return t.getPlaceholder(e)}}}return e.prototype.getTriggerList=function(e){return this._triggers.get(e)},e.prototype.setValue=function(e,t,i,n){""===t&&(t=null),this._removeTriggers(e,null),this._setter(e,t,i)&&(n||this.trigger(e))},e.prototype.clean=function(e){this._removeTriggers(e,null)},e.prototype.getValue=function(e){return this._getter(e)},e.prototype.getMeta=function(){return this._meta},e.prototype.setMeta=function(e){this._meta=ne(ne({},this._meta),e)},e.prototype.setPlaceholder=function(e,t){var i=this;"*"===e?Object.entries(t).forEach((function(e){return i.setPlaceholder(e[0],e[1])})):(null===t?delete this._holders[e]:this._holders[e]=t,this.each((function(t,n){(function(e,t,i){for(var n=0;n<e.length;n+=3)if(2===e[n]&&t.substr(e[n+1],e[n+2])==i)return!0;return!1})(n.code,n.source,e)&&i.setMath(t,n.source,i._parseContext)})))},e.prototype.getPlaceholder=function(e){if("*"===e)return this._holders;var t=this._holders[e];return void 0===t?null:t},e.prototype.setMath=function(e,t,i,n){var o=this._generate(t,i),r=this._setMathAt(e,o);n||this._execAndTrigger(r)},e.prototype.refresh=function(e){this._execAndTrigger(e)},e.prototype.getMath=function(e){return this._data.get(e)},e.prototype.trigger=function(e,t){var i=this._triggers.get(e);if(i){var n=!t;t||(t=new Set);for(var o=0;o<i.length;o++)t.add(i[o]);n&&this.triggerSet(t)}return null},e.prototype.triggerSet=function(e){for(var t=this,i=new Map;e.size;){var n=Qt(e),o=!1;e:for(var r=n.next();!r.done;r=n.next()){var a=this._data.get(r.value),s=i.get(r.value);if(!s||(1==s&&(s=this._check_for_loops(r.value,a.triggers,i)),2!=s)){var l=a.triggers;if(l)for(var c=0;c<l.length;c++)if(e.has(l[c]))continue e;this._execAndTrigger(r.value,e),s||i.set(r.value,1),e.delete(r.value),o=!0}}if(!o)return void e.forEach((function(i){return t._errorAndTrigger(i,e)}))}},e.prototype.getStats=function(){return{math:this._data.size,trigger:this._triggers.size}},e.prototype._check_for_loops=function(e,t,i){var n=new Set;t.forEach((function(e){return n.add(e)}));for(var o=Qt(n),r=o.next();!r.done;r=o.next()){if(r.value==e)return i.set(e,2),2;var a=i.get(r.value);if(a&&a>1)return i.set(e,a),a;var s=this._data.get(r.value);s&&s.triggers&&s.triggers.forEach((function(e){return Jt(n,e,o)}))}return i.set(e,3),3},e.prototype._setMathAt=function(e,t){if(this._removeTriggers(e,t)){if(t.triggers)if(-1===t.triggers.indexOf(e)&&3!==t.broken)for(var i=0;i<t.triggers.length;i++){var n=t.triggers[i],o=this._triggers.get(n);void 0===o&&(o=[],this._triggers.set(n,o)),o.push(e)}else t=ne(ne({},t),{broken:3});return this._data.set(e,t),e}},e.prototype._removeTriggers=function(e,t){var i=this._data.get(e);if(!i)return!0;if(i===t)return!1;i.$width&&this._clearArea(e,!1);var n=i.triggers;if(n&&3!==i.broken)for(var o=0;o<n.length;o++){var r=n[o],a=this._triggers.get(r);if(a){var s=a.filter((function(t){return t!==e}));s.length?this._triggers.set(r,s):this._triggers.delete(r)}}return this._data.delete(e),!0},e.prototype.parse=function(e,t){return this._parser(e,t||this._parseContext)},e.prototype.exec=function(e,t){var i=this._generate(e,t);return this._exec(i)},e.prototype.each=function(e){var t=this;Zt(this._data).forEach((function(i){return e(i,t._data.get(i))}))},e.prototype.setLogger=function(e){this._err_handler=e},e.prototype._setErr=function(e,t){return e.broken=2,t&&this._err_handler&&this._err_handler(t),re[e.broken]},e.prototype._exec=function(e){if(e.broken>0&&2!==e.broken)return re[e.broken];try{var t=e.exec(this._context);return e.broken=0,"number"==typeof t?isFinite(t)?Math.round(t*Kt)/Kt:this._setErr(e):t}catch(t){return this._setErr(e,t)}},e.prototype.toString=function(e,t){return fe(e,t||this._parseContext)},e.prototype.regenerate=function(e,t,i){var n=this;i=ne({},i||this._parseContext),Zt(this._data).forEach((function(o){var r=!1,a=n._data.get(o),s=ue(o);if(t&&s===e)n._removeTriggers(o,null);else{for(var l=0;l<a.code.length;l+=3)if(9===a.code[l]&&ue(a.code[l+1])===e){r=!0;break}r&&(i.z=s,t?n.setMath(o,a.source,i):(a.source=fe(a,i),a.code=n._parser(a.source,i).code))}}))},e.prototype.recalculate=function(e,t){var i=this;t=ne({},t||this._parseContext);var n=new Set;this.each((function(o){if(e){var r=i._data.get(o);if(r.broken&&2!==r.broken)return t.z=ue(o),void i.setMath(o,r.source,t)}n.add(o)})),this.triggerSet(n)},e.prototype._generate=function(e,t,i){var n=i||this._parser(e,t||this._parseContext);return this._printer(n,this._strict),n.triggers=function(e){for(var t=[],i=e.code,n=i.length,o=0;o<n;o+=3)switch(i[o]){case 7:case 6:var r=i[o+4];t.push(r);break;case 8:de(i[o+4],i[o+7],(function(e){return t.push(e)}))}if(t.length>10){var a=new Set;t=t.filter((function(e){return!a.has(e)&&(a.add(e),!0)}))}return t.length?t:null}(n),n},e.prototype._execAndTrigger=function(e,t){this.$count+=1;var i=this._data.get(e);if(i){var n=this._exec(i);if(Array.isArray(n)&&63!==ue(e))return void this._complexSetter(e,n,t);this._setter(e,n,2)&&this.trigger(e,t)}},e.prototype._complexSetter=function(e,t,i){var n=this,o=t.$width,r=t.$height,a=this._data.get(e);a.$width=o,a.$height=r;try{he(e,o,r,(function(o,r){n._setter(o,t[r],2,0===r?null:e)&&n.trigger(o,i)}))}catch(t){this._clearArea(e,!0)}},e.prototype._clearArea=function(e,t){var i=this,n=this._data.get(e),o=n.$width,r=n.$height;he(e,o,r,(function(n,o){0===o&&t?i._setter(n,re[4],1)&&i.trigger(n):(t?i._setter(n,null,3,e):i._setter(n,null,3,-1))&&i.trigger(n)}))},e.prototype._errorAndTrigger=function(e,t){var i=this._data.get(e),n=this._setErr(i);this._setter(e,n,2)&&this.trigger(e,t)},e.prototype.debug=function(e,t){void 0===t&&(t=!1);var i=function(e){for(var t=e.code,i=e.source,n="",o=t.length,r=0;r<o;r+=3){var a=t[r],s=void 0;switch(a){case 4:s="method";break;case 1:s="text";break;case 5:s="page";break;case 2:s="holder";break;case 6:s="name";break;case 7:s="arg";break;case 8:s="range";break;case 9:s="data";break;case 10:s="op";break;case 11:s="number";break;case 3:s="error";break;case 12:s="extra";break;case 13:s="arr"}n+=9===a?"            "+t[r+1]+"."+t[r+2]+"\n":13===a?"["+s+"]"+Me(s)+t[r+1]+" x "+t[r+2]+"\n":"["+s+"]"+Me(s)+i.substr(t[r+1],t[r+2])+"\n"}return n}(this.parse(e));if(t)return i;console.log(i)},e.prototype.transpose=function(e,t,i,n){var o=this;n=n||this._parseContext;var r=se(e),a=r[0],s=r[1],l=r[2],c=new Map,u=new Map,d=new Set;Zt(this._data).forEach((function(e){var r=se(e),h=r[0],f=r[1],p=r[2],v=o._data.get(e),g=p===n.z?n:ne(ne({},n),{z:p}),_=o._transpose(v,a,s,t,i,n,g),m=e;if(p===l&&(f>=s||h>=a)&&(m=ae(h>=a?h+t:h,f>=s?f+i:f,p)),v!==_||e!==m){if(u.set(e,_),p===l&&(i<0&&f>=s&&f<s-i||t<0&&h>=a&&h<a-t))return;c.set(m,_),v.broken!==_.broken&&d.add(m)}})),Zt(c).forEach((function(e){return o._setMathAt(e,c.get(e))})),Array.from(u.keys()).forEach((function(e){c.has(e)||o._removeTriggers(e,null)})),t>0&&this._triggerRow(a,t,d),i>0&&this._triggerColumn(s,i,d),t<0&&this._triggerColumn(a-1,2,d),i<0&&this._triggerColumn(s-1,2,d),this.triggerSet(d)},e.prototype._triggerColumn=function(e,t,i){var n=this,o=t?e+t:e;Zt(this._triggers).forEach((function(t){var r=ce(t);r>=e&&r<o&&n.trigger(t,i)}))},e.prototype._triggerRow=function(e,t,i){var n=this,o=t?e+t:e;Zt(this._triggers).forEach((function(t){var r=le(t);r>=e&&r<o&&n.trigger(t,i)}))},e.prototype.moveMath=function(e,t,i,n,o,r,a){return"string"==typeof e&&(e=this.parse(e,r)),this._moveMath(e,t,i,n,o,a||r).source},e.prototype._moveMath=function(e,t,i,n,o,r){for(var a=e.code,s=0;s<a.length;s+=3)if(7===a[s]){var l=se(a[s+4]),c=l[0],u=l[1];Yt(o.id,o.h,o.w,a[s+4],1,1)&&(c+=t,u+=i,a[s+4]=ae(c,u,n)),s+=3}else if(8===a[s]){var d=se(a[s+4]),h=d[0],f=d[1],p=se(a[s+7]),v=p[0],g=p[1];Yt(o.id,o.h,o.w,a[s+4],v-h+1,g-f+1)&&(h+=t,f+=i,v+=t,g+=i,a[s+4]=ae(h,f,n),a[s+7]=ae(v,g,n)),s+=6}var _={code:a,broken:e.broken,source:e.source,triggers:null,exec:null};return _=this._parser(fe(_,r),r),this._generate(_.source,r,_)},e.prototype.transposeMath=function(e,t,i,n){return"string"==typeof e&&(e=this.parse(e,n)),n=n||this._parseContext,this._transpose(e,-1,-1,t,i,n,n).source},e.prototype._transpose=function(e,t,i,n,o,r,a){for(var s=!0,l=e.code,c=!(t<0||i<0),u=0;u<l.length;u+=3)if(7===l[u]){var d=se(l[u+4]),h=d[0],f=d[1],p=d[2];if(r.z!==p)continue;var v=l[u+5];if(!c&&3==v)continue;(c||0==(1&v))&&0!==n&&h>=t&&(s&&(l=[].concat(l),s=!1),((h+=n)<t||h<0)&&(l[u]=3)),(c||0==(2&v))&&0!==o&&f>=i&&(s&&(l=[].concat(l),s=!1),((f+=o)<i||f<0)&&(l[u]=3)),s||(l[u+4]=ae(h,f,p)),u+=3}else if(8===l[u]){var g=l[u+5],_=l[u+8];if(!c&&3===g&&3===_)continue;var m=se(l[u+4]),y=m[0],b=m[1],w=(p=m[2],se(l[u+7])),x=w[0],C=w[1];if(r.z!==p)continue;0!==n&&((c||0==(1&g))&&(n>0?y>=t:y>t)&&(s&&(l=[].concat(l),s=!1),(y+=n)<0&&(l[u]=3)),(c||0==(1&_))&&x>=t&&(s&&(l=[].concat(l),s=!1),(x+=n)<y&&(l[u]=3))),0!==o&&((c||0==(2&g))&&(o>0?b>=i:b>i)&&(s&&(l=[].concat(l),s=!1),(b+=o)<0&&(l[u]=3)),(c||0==(2&_))&&C>=i&&(s&&(l=[].concat(l),s=!1),(C+=o)<b&&(l[u]=3))),s||(l[u+4]=ae(y,b,p),l[u+7]=ae(x,C,p)),u+=6}if(s)return e;var E={code:l,broken:e.broken,source:e.source,triggers:null,exec:null};return E=this._parser(fe(E,a),a),this._generate(E.source,a,E)},e}(),ti=function(){function e(e,t,i){this._id=e,this._store=t,this._meta={},this._parseContext=ne(ne({},i),{z:e}),this.reset(),this._parseMode=!1}return e.prototype.reset=function(){this._data=[],this._rows=[],this._cols=[],this._spans=[]},e.prototype.getMeta=function(){return this._meta},e.prototype.setMeta=function(e){this._meta=ne(ne({},this._meta),e)},e.prototype.getID=function(){return this._id},e.prototype.cellID=function(e,t){return ae(e,t,this._id)},e.prototype.getSize=function(){var e=this._data.length,t=0;return this._data.forEach((function(e){e&&e.length>t&&(t=e.length)})),[e,t]},e.prototype.getContext=function(){return this._parseContext},e.prototype.addRow=function(e,t){this._data.splice.apply(this._data,ii(e,t)),this._store.transpose(ae(e,0,this._id),t,0,this._parseContext),this._rows.splice.apply(this._rows,ii(e,t)),this._recalculateSpans(e,t,0)},e.prototype.removeRow=function(e,t){return this._data.splice(e,t),this._store.transpose(ae(e,0,this._id),-t,0,this._parseContext),this._rows.splice(e,t),this._recalculateSpans(e,-t,0)},e.prototype.addColumn=function(e,t){var i=ii(e,t);this._data.forEach((function(e){e&&e.splice.apply(e,i)})),this._store.transpose(ae(0,e,this._id),0,t,this._parseContext),this._cols.splice.apply(this._cols,ii(e,t)),this._recalculateSpans(e,0,t)},e.prototype.removeColumn=function(e,t){this._data.forEach((function(i){i&&i.splice(e,t)})),this._store.transpose(ae(0,e,this._id),0,-t,this._parseContext),this._cols.splice(e,t),this._recalculateSpans(e,0,-t)},e.prototype.setCell=function(e,t,i){var n=this._data[e];n||(n=this._data[e]=[]);var o=n[t];n[t]=o?ne(ne(ne({},o),i),{value:o.value}):i,void 0!==i.value&&this.setValue(e,t,i.value)},e.prototype.clearCell=function(e,t){var i=this._data[e];i&&i[t]&&(i[t]=null,this._store.setValue(ae(e,t,this._id),""))},e.prototype.setValue=function(e,t,i,n){var o=ae(e,t,this._id);"string"==typeof i&&i.length>1&&"="===i[0]?this._store.setMath(o,i.substr(1),this._parseContext):this._store.setValue(o,i,n)},e.prototype.getCell=function(e,t,i){var n=this._data[e],o=n?n[t]:null;return o||!i||(n||(n=this._data[e]=[]),(o=n[t])||(o=n[t]={value:null})),o},e.prototype.getValue=function(e,t,i){if(i){var n=this._store.getMath(ae(e,t,this._id));if(n)return"="+n.source}var o=this.getCell(e,t,!1);return o?o.value:null},e.prototype.getRange=function(e,t,i,n){for(var o=[],r=e;r<=i;r++)for(var a=t;a<=n;a++)o.push(this.getValue(r,a,!1));return o},e.prototype.getCellRange=function(e,t,i,n){for(var o=[],r=e;r<=i;r++)for(var a=t;a<=n;a++)o.push(this.getCell(r,a));return o},e.prototype.eachCell=function(e){this._data.forEach((function(t,i){t&&t.forEach((function(t,n){t&&e(i,n,t)}))}))},e.prototype.serialize=function(e){var t=this,i=[];return this.eachCell((function(n,o,r){if(r=ne({},r),e){var a=t._store.getMath(ae(n,o,t.getID()));a&&(r.value="="+a.source)}i.push([n,o,r])})),i},e.prototype.parse=function(e,t){var i=this;this.reset(),this._store.each((function(e){ue(e)===i._id&&i._store.clean(e)})),this.parseBlock(e,t,!0)},e.prototype.parseBlock=function(e,t,i){var n=this,o=new Set;this._parseMode=!0,e.forEach((function(e){var r=e[0],a=e[1],s=e[2],l=ae(r,a,n._id);i||n._store.clean(l);var c=n._data[r];c||(c=n._data[r]=[]);var u=(s=c[a]=ne({},s)).value;if(u)if("string"==typeof u&&u.length>1&&"="===u[0]){var d=u.substr(1);n._store.setMath(l,d,n.getContext(),!0),o.add(l)}else t&&(s.value=null,n._store.setValue(l,u,null,!0),n._store.trigger(l,o))})),this._store.triggerSet(o),this._parseMode=!1},e.prototype.throwError=function(e){if(!this._parseMode)throw e},e.prototype.setRowMeta=function(e,t){var i=this._rows[e]||{};this._rows[e]=i?ne(ne({},i),t):t},e.prototype.getRowMeta=function(e,t){var i=this._rows[e];if(t&&!i){var n={};return this._rows[e]=n,n}return i||null},e.prototype.setColumnMeta=function(e,t){var i=this._cols[e]||{};this._cols[e]=i?ne(ne({},i),t):t},e.prototype.getColumnMeta=function(e,t){var i=this._cols[e];if(t&&!i){var n={};return this._cols[e]=n,n}return i||null},e.prototype.sort=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n="asc");for(var o=se(e),r=o[0],a=o[1],s=se(t),l=s[0],c=s[1],u="asc"===n,d=[],h=[],f=r;f<=l;f++){for(var p=[],v=a;v<=c;v++){var g=this._store.getMath(this.cellID(f,v));p.push({value:this.getValue(f,v),row:f,math:g||null})}d.push(p)}for(d.sort((function(e,t){var n=e[i].value,o=t[i].value;return"string"==typeof n&&"string"==typeof o||"number"==typeof n&&"number"==typeof o?n<o?u?-1:1:n>o?u?1:-1:0:"number"==typeof n?-1:1})),f=r;f<=l;f++)for(v=a;v<=c;v++){var _=d[f-r][v-a];if(_.math){var m=_.row-f,y=this._store.transposeMath(_.math,-m,0,this._parseContext);_.value="="+y}h.push([f,v,{value:_.value}])}this.parseBlock(h)},e.prototype.addSpan=function(e,t,i){var n;if(t>1||i>1){for(var o=0;o<=this._spans.length-1;o++){var r=this._spans[o];Yt(e,t,i,r.id,r.info.width,r.info.height)&&this._spans.splice(o,1)}this._spans.push({id:e,info:{width:t,height:i}})}else-1!==(n=this._spans.findIndex((function(t){return t.id===e})))&&this._spans.splice(n,1)},e.prototype.getSpan=function(e){return this._spans.find((function(t){return t.id===e}))||null},e.prototype.getSpans=function(){return this._spans},e.prototype._recalculateSpans=function(e,t,i){var n,o;if(this._spans.length)for(var r=this._spans.length-1;r>=0;r--){var a=this._spans[r],s=a.info,l=s.height,c=s.width,u=se(a.id),d=u[0],h=u[1];t&&(d=(n=this._adjustSpan(d,l,e,t))[0],l=n[1]),i&&(h=(o=this._adjustSpan(h,c,e,i))[0],c=o[1]),c<1||l<1||c+l<=2?this._spans.splice(r,1):(a.id=ae(d,h,this._id),a.info.height=l,a.info.width=c)}},e.prototype._adjustSpan=function(e,t,i,n){var o=e+t;if(n<0){var r=i+(n=-n);i>e?i<=o&&(t-=Math.min(n,e+t-i)):r>e?(t-=r-e,e=n-(r-e)):e-=n}else i<=e?e+=n:i<=o&&(t+=n);return[e,t]},e}();function ii(e,t){for(var i=[e,0],n=0;n<t;n++)i.push(null);return i}var ni=function(){function e(e,t,i){this._ranges=new Map,this._counter=1,this._rangeOrder=[],this._store=e,this._page=t,this._pageGetter=i}return e.prototype.get=function(e){return this._store.getMath(this._ranges.get(e))},e.prototype.toId=function(e){return this._ranges.get(e)},e.prototype.add=function(e,t){var i=this._ranges.get(e)||this._next_id();this._store.setMath(i,t,this._page.getContext()),this._ranges.set(e,i),this._refresh(e)},e.prototype.remove=function(e){this._ranges.delete(e),this._counter=1,this._refresh(e)},e.prototype.serialize=function(){var e=this;return Array.from(this._ranges.keys()).map((function(t){return[t,e.get(t).source]}))},e.prototype.parse=function(e){var t=this;e.forEach((function(e){return t.add(e[0],e[1])}))},e.prototype._refresh=function(e){var t=this,i=e.indexOf("!"),n="";-1!==i&&(n=e.substr(0,i),e=e.substr(i+1)),this._store.each((function(i,o){if(function(e,t,i,n){for(var o=0;o<e.length;o+=3)if(6===e[o]){if(""!==i){if(5===e[o-3]&&t.substr(e[o-2],e[o-1])!==i)continue;return!0}if(t.substr(e[o+1],e[o+2])===n)return!0}return!1}(o.code,o.source,n,e)){var r=ue(i);t._store.setMath(i,o.source,t._pageGetter(r).getContext())}}))},e.prototype._next_id=function(){for(;this._rangeOrder[this._counter];)this._counter++;return this._rangeOrder[this._counter]=!0,ae(this._counter,0,this._page.getID())},e.prototype.renamePage=function(e,t){var i=this;e+="!",t&&(t+="!"),this._ranges.forEach((function(n,o,r){0===o.indexOf(e)&&(t?r.set(o.replace(e,t),n):i._store.clean(n),r.delete(o))}))},e}(),oi=function(){function e(e,t){this._store=e,this._pageGetter=t}return e.prototype.copy=function(e,t){t||(t=e);var i=this._serialize(e,t);return this._store.setMeta({$clipboard:i}),i},e.prototype.paste=function(e,t,i,n,o){var r;if(void 0===o&&(o=this._updateCurrentCell),n=n||0,null===(r=i=i||this._store.getMeta().$clipboard)||void 0===r?void 0:r.data.length){var a=se(e),s=a[0],l=a[1],c=a[2],u=se(t),d=u[0],h=u[1],f=this._pageGetter(c),p=se(i.from||0),v=p[0],g=p[1],_=i.data,m=[],y=s-v,b=l-g;if(0===n)for(var w=_[0].length-1,x=0;x<=_.length-1;x++)for(var C=0;C<=w;C++){var E=_[x][C],S=s+x,I=l+C;(k=this._updateCell(S,I,c,E,y,b,o))&&m.push(k)}if(1===n)for(x=s;x<=d;x++)for(C=l;C<=h;C++)I=C-l,E=_[S=x-s][I],(k=this._updateCell(x,C,c,E,y,b,o))&&m.push(k);if(2===n)for(S=0,x=s;x<=d;x++){for(I=0,S===_.length&&(S=0),C=l;C<=h;C++){I===_[0].length&&(I=0),E=_[S][I];var k,O=x-(v+S),M=C-(g+I);(k=this._updateCell(x,C,c,E,O,M,o))&&m.push(k),I++}S++}f.parseBlock(m)}},e.prototype.clean=function(e,t,i){i=i||255;for(var n=se(e),o=n[0],r=n[1],a=n[2],s=se(t),l=s[0],c=s[1],u=this._pageGetter(a),d=[],h=[],f=o;f<=l;f++)for(var p=r;p<=c;p++){var v=u.getCell(f,p),g=ae(f,p,a),_=255===i?{}:ne({},v);if(1&i){var m=this._store.getTriggerList(g);m&&h.push.apply(h,m),delete _.value}d.push([f,p,_])}u.parseBlock(d),this._refreshRelatedFormulas(h)},e.prototype._refreshRelatedFormulas=function(e){var t=this;ri(e).forEach((function(e){return t._store.refresh(e)}))},e.prototype._serialize=function(e,t){for(var i=se(e),n=i[0],o=i[1],r=i[2],a=se(t),s=a[0],l=a[1],c=this._pageGetter(r),u={from:e,data:[]},d=n;d<=s;d++){for(var h=[],f=o;f<=l;f++){var p=c.getCell(d,f),v=this._store.getMath(ae(d,f,r)),g=void 0;v&&(g=v.source);var _=[p?ne({},p):null];g&&_.push(g),h.push(_)}u.data.push(h)}return u},e.prototype.reset=function(){this._store.setMeta({$clipboard:null})},e.prototype.move=function(e,t){for(var i=t||this._store.getMeta().$clipboard,n=i.data,o=i.from,r=se(o),a=r[0],s=r[1],l=r[2],c=n.length,u=n[0].length,d=se(e),h=d[0],f=d[1],p=d[2],v=[],g=[],_=this._pageGetter(p),m={id:o,h:c,w:u},y=0;y<c;y++)for(var b=0;b<u;b++){var w=n[y][b],x=w[0],C=w[1],E=ae(a+y,s+b,l),S=this._store.getTriggerList(E);if(S){var I=this._getTriggersOutsideCutRange(S,o,c,u);I.length&&v.push.apply(v,I)}var k=h+y,O=f+b;if(x){if(C){var M=this._pageGetter(l).getContext(),R=this._store.moveMath(C,h-a,f-s,p,m,M,_.getContext());x.value="="+R}g.push([k,O,x])}else g.push([k,O,{}])}_.parseBlock(g),this._updateRelatedFormulas(v,h-a,f-s,p,m)},e.prototype._updateRelatedFormulas=function(e,t,i,n,o){var r=this;ri(e).forEach((function(e){var a=se(e)[2],s=r._store.getMath(e),l=r._pageGetter(a).getContext(),c=r._store.moveMath(s,t,i,n,o,l);r._store.setMath(e,c,l)}))},e.prototype._getTriggersOutsideCutRange=function(e,t,i,n){var o=[];return e.forEach((function(e){Yt(t,i,n,e,1,1)||o.push(e)})),o},e.prototype._updateCell=function(e,t,i,n,o,r,a){var s=n[0],l=n[1],c=this._pageGetter(i),u=s?ne({},s):{value:null};u.formula=l?"="+this._store.transposeMath(l,o,r):null;var d=a(c.getCell(e,t)||{},u);return d?[e,t,d]:null},e.prototype._updateCurrentCell=function(e,t){return t.formula&&(t.value=t.formula),t},e.prototype.fromCSV=function(e,t,i){return void 0===t&&(t="\n"),void 0===i&&(i="\t"),{data:e.split(t).map((function(e){return e.split(i).map((function(e){return[{value:e}]}))}))}},e}();function ri(e){var t=new Set(e);return Array.from(t)}var ai=function(){function e(e){var t=this;this._cfg=e||{strict:!1},this._pages=[],this._pageNames=[],this._pageName2ID=new Map,this._pCounter=0,this._parseContext={page:function(e){return t._pageName2ID.get(e)},pageName:function(e){return t._pageNames[e]},pageObj:function(e){return t._pages[e]},name:function(e,i,n){var o,r=e.length,a=i.substr(e[r-2],e[r-1]);if(5===e[r-6]){var s=i.substr(e[r-5],e[r-4]);o=t._ranges.toId(s+"!"+a)||t._ranges.toId(a)}else o=t._ranges.toId(n.pageName(n.z)+"!"+a)||t._ranges.toId(a);e.push(9,o||-1,0)},z:0};var i=this._store=new ei(ne(ne({},this._cfg),{get:function(e){var i=se(e),n=i[0],o=i[1],r=i[2];return t._pages[r].getValue(n,o)},set:function(e,n,o,r){var a=se(e),s=a[0],l=a[1],c=a[2],u=t._pages[c].getCell(s,l,!0),d=r?null:"number"==typeof u.spill?u.spill:n||0===n?u.source:null;if(3===o){if(r>=0&&(u.spill=r,u.source!==r))return!1;u.source=r=null}else if(null===n&&!r&&u.source)return!1;r&&e!==r&&u.source!==r&&(u.value||0===u.value||"number"==typeof u.source&&u.source!==r)&&t._pages[c].throwError("spill error"),u.source!==r&&(u.source=r);var h=2===o||3===o;if((null==o||h)&&(o=u.$format||0),u.$format=o,"string"==typeof n&&1!=o&&n){var f=parseFloat(n);h&&(f=f.toString()),f!=n||"0"===n[0]&&"e"!==n[1]&&n[1]>"9"||(n=parseFloat(n))}var p=u.value!==n;return p&&(u.value=n),"number"==typeof d&&i.triggerSet(new Set([d])),p}})),n=this._pages[63]=new ti(63,this._store,this._parseContext);this._ranges=new ni(this._store,n,this.getPage.bind(this)),this._cm=new oi(this._store,this.getPage.bind(this))}return e.prototype.addPage=function(e){for(;this._pages[this._pCounter];)this._pCounter++;var t=this._pCounter,i=new ti(t,this._store,this._parseContext);return this._pageName2ID.set(e,t),this._pages[t]=i,this._pageNames[t]=e,i},e.prototype.renamePage=function(e,t){if(e!==t){var i=this._pageName2ID.get(e);this._pageName2ID.delete(e),this._pageName2ID.set(t,i),this._pageNames[i]=t,this._ranges.renamePage(e,t);var n=this._pages[i].getContext();this._store.regenerate(i,!1,n)}},e.prototype.removePage=function(e){var t=this._pageName2ID.get(e),i=this._pages[t].getContext();this._pageName2ID.delete(e),this._pages[t]=this._pageNames[t]=null,this._pCounter=0,this._ranges.renamePage(e,null),this._store.regenerate(t,!0,i)},e.prototype.getPage=function(e){return"string"==typeof e&&(e=this._pageName2ID.get(e)),this._pages[e]},e.prototype.getRanges=function(){return this._ranges},e.prototype.getStore=function(){return this._store},e.prototype.find=function(e,t){var i=t.firstOnly,n=t.resultsLimit,o=void 0===n?100:n,r=[];return this._pages.forEach((function(t,n){t.eachCell((function(t,a,s){var l=s.value;e(l)&&(i&&0===r.length||!i&&r.length<o)&&r.push({id:ae(t,a,n),value:l})}))})),r},e.prototype.getCopyManager=function(){return this._cm},e}();t.CLEAN_MODE_ALL=255,t.CLEAN_MODE_DATA=1,t.D_COMMON=0,t.D_STRING=1,t.DataPage=ti,t.DataStore=ai,t.PASTE_MODE_OVERLAP=0,t.PASTE_MODE_RANGE=1,t.PASTE_MODE_REPEAT=2,t.Store=ei,t.T_ARG=7,t.T_DATA=9,t.T_ERROR=3,t.T_METHOD=4,t.T_NAME=6,t.T_NUMBER=11,t.T_OPERATOR=10,t.T_PAGE=5,t.T_PLACEHOLDER=2,t.T_RANGE=8,t.T_SPACE=12,t.T_TEXT=1,t.addMethod=function(e,t){Xt[e]=t},t.addMethodBatch=function(e){Object.assign(Xt,e)},t.column=ce,t.dateMethods=J,t.financialMethods=te,t.fromId=se,t.getMethodParams=function(){return{SUM:[["Number1","Required. The first value to sum."],["Number2","Optional. The second value to sum."],["Number3","Optional. The third value to sum."]],AVERAGE:[["Number1","Required. A number or cell reference that refers to numeric values."],["Number2","Optional. A number or cell reference that refers to numeric values."]],AVERAGEA:[["Value1","Required. A value or reference to a value that can be evaluated as a number."],["Value2","Optional. A value or reference to a value that can be evaluated as a number."]],COUNT:[["Value1","Required. An item, cell reference, or range."],["Value2","Optional. An item, cell reference, or range."]],COUNTA:[["Value1","Required. An item, cell reference, or range."],["Value2","Optional. An item, cell reference, or range."]],MIN:[["Number1","Required. Number, reference to numeric value, or range that contains numeric values."],["Number2","Optional. Number, reference to numeric value, or range that contains numeric values."]],MAX:[["Number1","Required. Number, reference to numeric value, or range that contains numeric values."],["Number2","Optional. Number, reference to numeric value, or range that contains numeric values."]],SQRT:[["Number","Required. The number to get the square root of."]],POWER:[["Number","Required. Number to raise to a power."],["Power","Required. Power to raise number to (the exponent)."]],LOG:[["Number","Required. Number for which you want the logarithm."],["Base","Optional. Base of the logarithm. Defaults to 10."]],EXP:[["Number","Required. The power that e is raised to."]],PRODUCT:[["Number1","Required. The first number or range to multiply."],["Number2","Optional. The second number or range to multiply."]],SUMPRODUCT:[["Array1","Required. The first array or range to multiply, then add."],["Array2","Optional. The second array or range to multiply, then add."]],ABS:[["Number","Required. The number to get the absolute value of."]],RAND:[],RANDBETWEEN:[["Bottom","Required. An integer representing the lower value of the range."],["Top","Required. An integer representing the upper value of the range."]],ROUND:[["Number","Required. The number to round."],["Num_digits","Required. The place at which number should be rounded."]],ROUNDUP:[["Number","Required. The number to round up."],["Num_digits","Required. The place at which number should be rounded."]],ROUNDDOWN:[["Number","Required. The number to round down."],["Num_digits","Required. The place at which number should be rounded."]],INT:[["Number","Required. The number from which you want an integer."]],CEILING:[["Number","Required. The number that should be rounded."],["Significance","Required. The multiple to use when rounding."]],FLOOR:[["Number","Required. The number that should be rounded."],["Significance","Required. The multiple to use when rounding."]],CONCATENATE:[["Text1","Required. The first text value to join together."],["Text2","Required. The second text value to join together."],["Text3","Optional. The third text value to join together."]],MID:[["Text","Required. The text to extract from."],["Start_num","Required. The location of the first character to extract."],["Num_chars","Required. The number of characters to extract."]],LEFT:[["Text","Required. The text from which to extract characters."],["Num_chars","Optional. The number of characters to extract, starting on the left side of text. Default = 1."]],RIGHT:[["Text","Required. The text from which to extract characters on the right."],["Num_chars","Optional. The number of characters to extract, starting on the right. Optional, default = 1."]],LOWER:[["Text","Required. The text that should be converted to lower case."]],UPPER:[["Text","Required. The text thatto convert to upper case."]],PROPER:[["Text","Required. The text that should be converted to proper case."]],TRIM:[["Text","Required. The text from which to remove extra space."]],LEN:[["Text","Required. The text for which to calculate length."]],SEARCH:[["Find_text","Required. The substring to find."],["Within_text","Required. The text to search within."],["Start_num","Optional. Starting position. Optional, defaults to 1."]],FIND:[["Find_text","Required. The substring to find."],["Within_text","Required. The text to search within."],["Start_num","Optional. The starting position in the text to search. Optional, defaults to 1."]],REPLACE:[["Old_text","Required. The text to replace."],["Start_num","Required. The starting location in the text to search."],["Num_chars","Required. The number of characters to replace."],["New_text","Required. The text to replace old_text with."]],SUBSTITUTE:[["Text","Required. The text to change."],["Old_text","Required. The text to replace."],["New_text","Required. The text to replace with."],["Instance","Optional. The instance to replace. If not supplied, all instances are replaced."]],NOW:[],DATE:[["Year","Required. Number for year."],["Month","Required. Number for month."],["Day","Required. Number for day."]],TIME:[["Hour","Required. The hour for the time you wish to create."],["Minute","Required. The minute for the time you wish to create."],["Second","Required. The second for the time you wish to create."]],YEAR:[["Date","Required. A valid Excel date."]],MONTH:[["Serial_number","Required. A valid Excel date."]],DAY:[["Date","Required. A valid Excel date."]],HOUR:[["Serial_number","Required. A valid Excel time."]],MINUTE:[["Serial_number","Required. A valid date or time."]],SECOND:[["Serial_number","Required. A valid time in a format Excel recognizes."]],DATEDIF:[["Start_date","Required. Start date in Excel date serial number format."],["End_date","Required. End date in Excel date serial number format."],["Unit","Required. The time unit to use (years, months, or days)."]],LOOKUP:[["Lookup_value","Required. The value to search for."],["Lookup_vector","Required. The one-row, or one-column range to search."],["Result_vector","Optional. The one-row, or one-column range of results."]],HLOOKUP:[["Lookup_value","Required. The value to look up."],["Table_array","Required. The table from which to retrieve data."],["Row_index","Required. The row number from which to retrieve data."],["Range_lookup","Optional. A Boolean to indicate exact match or approximate match. Default = TRUE = approximate match."]],VLOOKUP:[["Lookup_value","Required. The value to look for in the first column of a table."],["Table_array","Required. The table from which to retrieve a value."],["Column_index_num","Required. The column in the table from which to retrieve a value."],["Range_lookup","Optional. TRUE = approximate match (default). FALSE = exact match."]],XLOOKUP:[["Lookup","Required. The lookup value."],["Lookup_array","Required. The array or range to search."],["Return_array","Required. The array or range to return."],["Not_found","Optional. Value to return if no match found."],["Match_mode","Optional. 0 = exact match (default), -1 = exact match or next smallest, 1 = exact match or next larger, 2 = wildcard match."],["Search_mode","Optional. 1 = search from first (default), -1 = search from last, 2 = binary search ascending, -2 = binary search descending."]],INDEX:[["Array","Required. A range of cells, or an array constant."],["Row_num","Required. The row position in the reference or array."],["Col_num","Optional. The column position in the reference or array."],["Area_num","Optional. The range in reference that should be used."]],MATCH:[["Lookup_value","Required. The value to match in lookup_array."],["Lookup_array","Required. A range of cells or an array reference."],["Match_type","Optional. 1 = exact or next smallest (default), 0 = exact match, -1 = exact or next largest."]],XMATCH:[["Lookup_value","Required. The lookup value."],["Lookup_array","Required. The array or range to search."],["Match_mode","Optional. 0 = exact match (default), -1 = exact match or next smallest, 1 = exact match or next larger, 2 = wildcard match."],["Search_mode","Optional. 1 = search from first (default), -1 = search from last, 2 = binary search ascending, -2 = binary search descending."]],CHOOSE:[["Index_num","Required. The value to choose. A number between 1 and 254."],["Value1","Required. The first value from which to choose."],["Value2","Optional. The second value from which to choose."]],ISBLANK:[["Value","Required. The value to check."]],ISBINARY:[["Value","Required. The value to check."]],ISEVEN:[["Value","Required. The numeric value to check."]],ISODD:[["Value","Required. The numeric value to check."]],ISNONTEXT:[["Value","Required. The value to check."]],ISNUMBER:[["Value","Required. The value to check."]],ISTEXT:[["Value","Required. The value to check."]],N:[["Value","Required. The value to convert to a number."]],IF:[["Logical_test","Required. A value or logical expression that can be evaluated as TRUE or FALSE."],["Value_if_true","Optional. The value to return when logical_test evaluates to TRUE."],["Value_if_false","Optional. The value to return when logical_test evaluates to FALSE."]],AND:[["Logical1","Required. The first condition or logical value to evaluate."],["Logical2","Optional. The second condition or logical value to evaluate."]],NOT:[["Logical","Required. A value or logical expression that can be evaluated as TRUE or FALSE."]],OR:[["Logical1","Required. The first condition or logical value to evaluate."],["Logical2","Optional. The second condition or logical value to evaluate."]],FALSE:[],TRUE:[],ACOS:[["Number","Required. The value to get the inverse cosine of. The number must be between -1 and 1 inclusive."]],ACOSH:[["Number","Required. Any real number equal to or greater than 1."]],ACOT:[["Number","Required. Number is the cotangent of the angle you want. This must be a real number."]],ACOTH:[["Number","Required. The absolute value of Number must be greater than 1."]],ADD:[["Number1","Required. The first value to sum."],["Number2","Required. The second value to sum."]],ARABIC:[["Roman_text","Required. The Roman numeral in text that you want to convert."]],ASIN:[["Number","Required. The value to get the inverse sine of. The number must be between -1 and 1 inclusive."]],ASINH:[["Number","Required. Any real number."]],ATAN:[["Number","Required. The value to get the inverse tangent of."]],ATAN2:[["X_num","Required. The x coordinate of the input point."],["Y_num","Required. The y coordinate of the input point."]],ATANH:[["Number","Required. Any real number between 1 and -1."]],AVEDEV:[["Number1","Required. First value or reference."],["Number2","Optional. Second value or reference."]],BASE:[["Number","Required. The number to convert to a given base."],["Radix","Required. The base to convert to."],["Min_length","Optional. The minimum string length to return, achieved by padding with zeros."]],BINOMDIST:[["Number_s","Required. The number of successes."],["Trials","Required. The number of independent trials."],["Probability_s","Required. The probability of success on each trial."],["Cumulative","Required. TRUE = cumulative distribution function, FALSE=probability mass function."]],"BINOM.INV":[["Trials","Required. The number of Bernoulli trials."],["Probability_s","Required. The probability of a success on each trial."],["Alpha","Required. The criterion value."]],"BINOM.DIST.RANGE":[["Trials","Required. The number of independent trials. Must be greater than or equal to 0."],["Probability_s","Required. The probability of success in each trial. Must be greater than or equal to 0 and less than or equal to 1."],["Number_s","Required. The number of successes in trials. Must be greater than or equal to 0 and less than or equal to Trials."],["Number_s2","Optional. If provided, returns the probability that the number of successful trials will fall between Number_s and number_s2. Must be greater than or equal to Number_s and less than or equal to Trials."]],"BINOM.DIST":[["Number_s","Required. The number of successes."],["Trials","Required. The number of independent trials."],["Probability_s","Required. The probability of success on each trial."],["Cumulative","Required. TRUE = cumulative distribution function, FALSE=probability mass function."]],BITAND:[["Number1","Required. A positive decimal number."],["Number2","Required. A positive decimal number."]],BITLSHIFT:[["Number","Required. The number to be bit shifted."],["Shift_amount","Required. The amount of bits to shift, if negative shifts bits to the right instead."]],BITOR:[["Number1","Required. A positive decimal number."],["Number2","Required. A positive decimal number."]],BITRSHIFT:[["Number","Required. The number to be bit shifted."],["Shift_amount","Required. The amount of bits to shift to the right, if negative shifts bits to the left instead."]],BITXOR:[["Number1","Required. A positive decimal number."],["Number2","Required. A positive decimal number."]],COMBIN:[["Number","Required. The total number of items."],["Number_chosen","Required. The number of items in each combination."]],COMBINA:[["Number","Required. The total number of items."],["Number_chosen","Required. The number of items in each combination."]],COMPLEX:[["Real_num","Required. The real number."],["I_num","Required. The imaginary number."],["Suffix",'Optional. The suffix, either "i" or "j".']],CORREL:[["Array1","Required. A range of cell values."],["Array2","Required. A second range of cell values."]],COS:[["Number","Required. The angle in radians for which you want the cosine."]],COSH:[["Number","Required. The hyperbolic angle."]],COT:[["Number","Required. The angle provided in radians."]],COTH:[["Number","Required."]],COUNTBLANK:[["Range","Required. The range in which to count blank cells."]],COVAR:[["Array1","Required. The first cell range of integers."],["Array2","Required. The second cell range of integers."]],"COVARIANCE.P":[["Array1","Required. The first cell range of integers."],["Array2","Required. The second cell range of integers."]],"COVARIANCE.S":[["Array1","Required. The first cell range of integers."],["Array2","Required. The second cell range of integers."]],CSC:[["Number","Required. The angle provided in radians."]],CSCH:[["Number","Required."]],DEC2BIN:[["Number","Required. The decimal number you want to convert to binary."],["Places","Optional. Pads the resulting binary number with zeros up to the specified number of digits. If omitted returns the least number of characters required to represent the number."]],DEC2HEX:[["Number","Required. The decimal number you want to convert to hexadecimal."],["Places","Optional. Pads the resulting number with zeros up to the specified number of digits. If omitted returns the least number of characters required to represent the number."]],DEC2OCT:[["Number","Required. The decimal number you want to convert to octal."],["Places","Optional. Pads the resulting octal number with zeros up to the specified number of digits. If omitted returns the least number of characters required to represent the number."]],DECIMAL:[["Number","Required. A text string representing a number."],["Radix","Required. The base of the number to be converted, an integer between 2-36."]],DEGREES:[["Angle","Required. Angle in radians that you want to convert to degrees."]],DELTA:[["Number1","Required. The first number."],["Number2","Optional. The second number."]],DEVSQ:[["Number1","Required. First value or reference."],["Number2","Optional. Second value or reference."]],DIVIDE:[["Number1","Required. The number we are dividing."],["Number2","Required. The number by which we divide."]],EQ:[["Number1","Required. First value or reference."],["Number2","Required. Second value or reference."]],ERF:[["Lower_limit","Required. The lower bound for integrating ERF."],["Upper_limit","Optional. The upper bound for integrating ERF. If omitted, ERF integrates between zero and lower_limit."]],ERFC:[["X","Required. The lower bound for integrating ERFC."]],EVEN:[["Number","Required. The number to round up to an even integer."]],FACT:[["Number","Required. The number to get the factorial of."]],FACTDOUBLE:[["Number","Required. A number greater than or equal to -1."]],FISHER:[["X","Required. A numeric value for which you want the transformation."]],FISHERINV:[["Y","Required. The value for which you want to perform the inverse of the transformation."]],GAMMA:[["Number","Required. Returns a number."]],GCD:[["Number1","Required. The first number."],["Number2","Optional. The second number."]],GEOMEAN:[["Number1","Required. First value or reference."],["Number2","Optional. Second value or reference."]],GESTEP:[["Number","Required. The value to test against step."],["Step","Optional. The threshold value. If you omit a value for step, GESTEP uses zero."]],GT:[["Number1","Required. First value or reference."],["Number2","Required. Second value or reference."]],GTE:[["Number1","Required. First value or reference."],["Number2","Required. Second value or reference."]],HARMEAN:[["Number1","Required. First value or reference."],["Number2","Optional. Second value or reference."]],HEX2BIN:[["Number","Required. The hexadecimal number you want to convert to binary."],["Places","Optional. Pads the resulting binary number with zeros up to the specified number of digits. If omitted returns the least number of characters required to represent the number."]],HEX2DEC:[["Number","Required. The hexadecimal number you want to convert to decimal."]],HEX2OCT:[["Number","Required. The hexadecimal number you want to convert to octal."],["Places","Optional. Pads the resulting binary number with zeros up to the specified number of digits. If omitted returns the least number of characters required to represent the number."]],IMABS:[["Inumber","Required. A complex number."]],IMAGINARY:[["Inumber","Required. A complex number."]],IMCONJUGATE:[["Inumber","Required. A complex number for which you want the conjugate."]],IMCOS:[["Inumber","Required. A complex number for which you want the cosine."]],IMCOSH:[["Inumber","Required. A complex number for which you want the hyperbolic cosine."]],IMCOT:[],IMCSC:[["Inumber","Required. A complex number for which you want the cosecant."]],IMCSCH:[["Inumber","Required. A complex number for which you want the hyperbolic cosecant."]],IMDIV:[["Inumber1","Required. The complex numerator or dividend."],["Inumber2","Required. The complex denominator or divisor."]],IMEXP:[["Inumber","Required. A complex number for which you want the exponential."]],IMLN:[["Inumber","Required. A complex number for which you want the natural logarithm."]],IMPOWER:[["Inumber","Required. A complex number."],["Number","Required. Power to raise number."]],IMPRODUCT:[["Inumber1","Required. Complex number 1."],["Inumber2","Optional. Complex number 2."]],IMREAL:[["Inumber","Required. A complex number."]],IMSEC:[["Inumber","Required. A complex number for which you want the secant."]],IMSECH:[["Inumber","Required. A complex number for which you want the hyperbolic secant."]],IMSIN:[["Inumber","Required. A complex number for which you want the sine."]],IMSINH:[["Inumber","Required. A complex number for which you want the hyperbolic sine."]],IMSQRT:[["Inumber","Required. A complex number for which you want the square root."]],IMSUB:[["Inumber1","Required. Complex number 1."],["Inumber2","Required. Complex number 2."]],IMSUM:[["Inumber1","Required. Complex number 1."],["Inumber2","Optional. Complex number 2."]],IMTAN:[["Inumber","Required. A complex number for which you want the tangent."]],LARGE:[["Array","Required. An array or range of numeric values."],["K","Required. Position as an integer, where 1 corresponds to the largest value."]],LN:[["Number","Required. A number to take the natural logarithm of."]],LOG10:[["Number","Required. Number for which you want the logarithm."]],LT:[["Number1","Required. First value or reference."],["Number2","Required. Second value or reference."]],LTE:[["Number1","Required. First value or reference."],["Number2","Required. Second value or reference."]],MEDIAN:[["Number1","Required. A number or cell reference that refers to numeric values."],["Number2","Optional. A number or cell reference that refers to numeric values."]],MINUS:[["Number1","Required. The number from which we subtract."],["Number2","Required. The number by which we subtract."]],MOD:[["Number","Required. The number to be divided."],["Divisor","Required. The number to divide with."]],MROUND:[["Number","Required. The number that should be rounded."],["Significance","Required. The multiple to use when rounding."]],MULTINOMIAL:[["Number1, number2, ...","Required. Number1 is required, subsequent numbers are optional. 1 to 255 values for which you want the multinomial."]],MULTIPLY:[["Number1","Required. The number to multiply."],["Number2","Required. The number to multiply by."]],NE:[["Number1","Required. First value or reference."],["Number2","Required. Second value or reference."]],OCT2BIN:[["Number","Required. The octal number you want to convert. Number may not contain more than 10 characters. The most significant bit of number is the sign bit. The remaining 29 bits are magnitude bits. Negative numbers are represented using two's-complement notation."],["Places","Optional. The number of characters to use. If places is omitted, OCT2BIN uses the minimum number of characters necessary. Places is useful for padding the return value with leading 0s (zeros)."]],OCT2DEC:[["Number","Required. The octal number you want to convert. Number may not contain more than 10 octal characters (30 bits). The most significant bit of number is the sign bit. The remaining 29 bits are magnitude bits. Negative numbers are represented using two's-complement notation."]],OCT2HEX:[["Number","Required. The octal number you want to convert. Number may not contain more than 10 octal characters (30 bits). The most significant bit of number is the sign bit. The remaining 29 bits are magnitude bits. Negative numbers are represented using two's-complement notation."],["Places","Optional. The number of characters to use. If places is omitted, OCT2HEX uses the minimum number of characters necessary. Places is useful for padding the return value with leading 0s (zeros)."]],ODD:[["Number","Required. The number to round up to an odd integer."]],PERCENTILE:[["Array","Required. Data values."],["K","Required. Number representing kth percentile."]],"PERCENTILE.INC":[["Array","Required. Data values."],["K","Required. Number representing kth percentile."]],"PERCENTILE.EXC":[["Array","Required. Data values."],["K","Required. A value between 0 and 1 that represents the k:th percentile."]],PERMUT:[["Number","Required. The total number of items."],["Number_chosen","Required. The number of items in each combination."]],PI:[],POW:[["Number","Required. Number to raise to a power."],["Power","Required. Power to raise number to (the exponent)."]],QUARTILE:[["Array","Required. A reference containing data to analyze."],["Quart","Required. The quartile value to return."]],"QUARTILE.INC":[["Array","Required. A reference containing data to analyze."],["Quart","Required. The quartile value to return."]],"QUARTILE.EXC":[["Array","Required. A reference containing data to analyze."],["Quart","Required. The quartile value to return, 1-3."]],QUOTIENT:[["Numerator","Required. The number to be divided."],["Denominator","Required. The number to divide by."]],RADIANS:[["Angle","Required. Angle in degrees to convert to radians."]],ROMAN:[["Number","Required. Number (in Arabic numeral) you want to convert to Roman numeral."],["Form","Optional. The type of Roman numeral you want."]],SEC:[["Number","Required. The angle in radians for which you want the secant."]],SECH:[],SIGN:[["Number","Required. The number to get the sign of."]],SIN:[["Number","Required. The angle in radians for which you want the sine."]],SINH:[["Number","Required. The hyperbolic angle."]],SMALL:[["Array","Required. An array or range of numeric values."],["K","Required. Position as an integer, where 1 corresponds to the smallest value."]],SQRTPI:[["Number","Required. The number by which pi is multiplied."]],STDEV:[["Number1","Required. First number or reference in the sample."],["Number2","Optional. Second number or reference."]],"STDEV.S":[["Number1","Required. First number or reference in the sample."],["Number2","Optional. Second number or reference."]],"STDEV.P":[["Number1","Required. First number or reference in the sample."],["Number2","Optional. Second number or reference."]],STDEVA:[["Number1","Required. First number or reference in the sample."],["Number2","Optional. Second number or reference."]],STDEVP:[["Number1","Required. First number or reference in the sample."],["Number2","Optional. Second number or reference."]],STDEVPA:[["Number1","Required. First number or reference in the sample."],["Number2","Optional. Second number or reference."]],STEYX:[["Known_y's","Required. An array or range of dependent data points."],["Known_x's","Required. An array or range of independent data points."]],SUBTOTAL:[["Function_num","Required. A number that specifies which function to use in calculating subtotals within a list. See table below for full list."],["Ref1","Required. A named range or reference to subtotal."],["Ref2","Optional. A named range or reference to subtotal."]],SUMSQ:[["Number1","Required. The first argument containing numeric values."],["Number2","Optional. The first argument containing numeric values."]],SUMX2MY2:[["Array_x","Required. The first range or array containing numeric values."],["Array_y","Required. The second range or array containing numeric values."]],SUMX2PY2:[["Array_x","Required. The first range or array containing numeric values."],["Array_y","Required. The second range or array containing numeric values."]],SUMXMY2:[["Array_x","Required. The first range or array containing numeric values."],["Array_y","Required. The second range or array containing numeric values."]],TAN:[["Number","Required. The angle in radians for which you want the tangent."]],TANH:[["Number","Required. Any real number."]],TRUNC:[["Number","Required. The number to truncate."],["Num_digits","Optional. The precision of the truncation (default is 0)."]],VAR:[["Number1","Required. First number or reference."],["Number2","Optional. Second number or reference."]],"VAR.S":[["Number1","Required. First number or reference."],["Number2","Optional. Second number or reference."]],"VAR.P":[["Number1","Required. First number or reference."],["Number2","Optional. Second number or reference."]],VARA:[["Number1","Required. First number or reference."],["Number2","Optional. Second number or reference."]],VARP:[["Number1","Required. First number or reference."],["Number2","Optional. Second number or reference."]],VARPA:[["Number1","Required. First number or reference."],["Number2","Optional. Second number or reference."]],WEIBULL:[["X","Required. The value at which to evaluate the function."],["Alpha","Required. A parameter to the distribution."],["Beta","Required. A parameter to the distribution."],["Cumulative","Required. Determines the form of the function."]],"WEIBULL.DIST":[["X","Required. The value at which to evaluate the function."],["Alpha","Required. A parameter to the distribution."],["Beta","Required. A parameter to the distribution."],["Cumulative","Required. Determines the form of the function."]],CHAR:[["Number","Required. A number between 1 and 255."]],CLEAN:[["Text","Required. The text to clean."]],CODE:[["Text","Required. The text for which you want a numeric code."]],EXACT:[["Text1","Required. The first text string to compare."],["Text2","Required. The second text string to compare."]],FIXED:[["Number","Required. The number to round and format."],["Decimals","Optional. Number of decimals to use. Default is 2."],["No_commas","Optional. Suppress commas. TRUE = no commas, FALSE = commas. Default is FALSE."]],NUMBERVALUE:[["Text","Required. The text to convert to a number."],["Decimal_separator","Optional. The character for decimal values."],["Group_separator","Optional. The character for grouping by thousands."]],REGEXEXTRACT:[["Text","Required. The input text."],["Regular_expression","Required. The first part of text that matches this expression will be returned."]],REGEXMATCH:[["Text","Required. The text to be tested against the regular expression."],["Regular_expression","Required. The regular expression to test the text against."]],REGEXREPLACE:[["Text","Required. The text, a part of which will be replaced."],["Regular_expression","Required. The regular expression. All matching instances in text will be replaced."],["Replacement","Required. The text which will be inserted into the original text."]],REPT:[["Text","Required. The text to repeat."],["Number_times","Required. The number of times to repeat text."]],T:[["Value","Required. The value to return as text."]],JOIN:[["Text1, text2, ..."],["Text you want to combine"]],ARRAYTOTEXT:[["Array","Required. The array or range to convert to text."],["Format","Optional. Output format. 0 = concise (default), and 1 = strict."]],DATEVALUE:[["Date_text","Required. A valid date in text format."]],DAYS:[["End_date","Required. The end date."],["Start_date","Required. The start date."]],DAYS360:[["Start_date","Required. The start date."],["End_date","Required. The end date."],["Method","Optional. Day count method. FALSE (default) = US method, TRUE = European method."]],EDATE:[["Start_date","Required. Start date as a valid Excel date."],["Months","Required. Number of months before or after start_date."]],EOMONTH:[["Start_date","Required. A date that represents the start date in a valid Excel serial number format."],["Months","Required. The number of months before or after start_date."]],ISOWEEKNUM:[["Date","Required. A valid Excel date in serial number format."]],NETWORKDAYS:[["Start_date","Required. The start date."],["End_date","Required. The end date."],["Holidays","Optional. A list of non-work days as dates."]],"NETWORKDAYS.INTL":[["Start_date","Required. The start date."],["End_date","Required. The end date."],["Weekend","Optional. Setting for which days of the week should be considered weekends."],["Holidays","Optional. A reference to dates that should be considered non-work days."]],TIMEVALUE:[["Time_text","Required. A date and/or time in a text format recognized by Excel."]],WEEKNUM:[["Serial_num","Required. A valid Excel date in serial number format."],["Return_type","Optional. The day the week begins. Default is 1."]],WEEKDAY:[["Serial_number","Required. The date for which you want to get the day of week."],["Return_type","Optional. A number representing day of week mapping scheme. Default is 1."]],WORKDAY:[["Start_date","Required. The date from which to start."],["Days","Required. The working days before or after start_date."],["Holidays","Optional. A list dates that should be considered non-work days."]],"WORKDAY.INTL":[["Start_date","Required. The start date."],["Days","Required. The end date."],["Weekend","Optional. Setting for which days of the week should be considered weekends."],["Holidays","Optional. A list of one or more dates that should be considered non-work days."]],YEARFRAC:[["Start_date","Required. The start date."],["End_date","Required. The end date."],["Basis","Optional. The type of day count basis to use (see below)."]],ACCRINT:[["Id","Required. Issue date of the security."],["Fd","Required. First interest date of security."],["Sd","Required. Settlement date of security."],["Rate","Required. Interest rate of security."],["Par","Required. Par value of security."],["Freq","Required. Coupon payments per year (annual = 1, semiannual = 2; quarterly = 4)."],["Basis","Optional. Day count basis (see below, default =0)."],["Calc","Optional. Calculation method (see below, default = TRUE)."]],PMT:[["Rate","Required. The interest rate for the loan."],["Nper","Required. The total number of payments for the loan."],["Pv","Required. The present value, or total value of all loan payments now."],["Fv","Optional. The future value, or a cash balance you want after the last payment is made. Defaults to 0 (zero)."],["Type","Optional. When payments are due. 0 = end of period. 1 = beginning of period. Default is 0."]],FV:[["Rate","Required. The interest rate per period."],["Nper","Required. The total number of payment periods."],["Pmt","Required. The payment made each period. Must be entered as a negative number."],["Pv","Optional. The present value of future payments. If omitted, assumed to be zero. Must be entered as a negative number."],["Type","Optional. When payments are due. 0 = end of period, 1 = beginning of period. Default is 0."]],DB:[["Cost","Required. Initial cost of asset."],["Salvage","Required. Asset value at the end of the depreciation."],["Life","Required. Periods over which asset is depreciated."],["Period","Required. Period to calculation depreciation for."],["Month","Optional. Number of months in the first year. Defaults to 12."]],DDB:[["Cost","Required. Initial cost of asset."],["Salvage","Required. Asset value at the end of the depreciation."],["Life","Required. Periods over which asset is depreciated."],["Period","Required. Period to calculation depreciation for."],["Factor","Optional. Rate at which the balance declines. If omitted, defaults to 2."]],DOLLAR:[["Number","Required. The number to convert."],["Decimals","Required. The number of digits to the right of the decimal point. Default is 2."]],DOLLARDE:[["Fractional_dollar","Required. Dollar component in special fractional notation."],["Fraction","Required. The denominator in the fractional unit. 8 = 1/8, 16 = 1/16, 32 = 1/32, etc."]],DOLLARFR:[["Decimal_dollar","Required. Pricing as a normal decimal number."],["Fraction","Required. The denominator in the fractional unit. 8 = 1/8, 16 = 1/16, 32 = 1/32, etc."]],EFFECT:[["Nominal_rate","Required. The nominal or stated interest rate."],["Npery","Required. Number of compounding periods per year."]],FVSCHEDULE:[["Principal","Required. The initial investment sum."],["Schedule","Required. Schedule of interest rates, provided as range or array."]],IRR:[["Values","Required. Array or reference to cells that contain values."],["Guess","Optional. An estimate for expected IRR. Default is .1 (10%)."]],IPMT:[["Rate","Required. The interest rate per period."],["Per","Required. The payment period of interest."],["Nper","Required. The total number of payment periods."],["Pv","Required. The present value, or total value of all payments now."],["Fv","Optional. The cash balance desired after last payment is made. Defaults to 0."],["Type","Optional. When payments are due. 0 = end of period. 1 = beginning of period. Default is 0."]],ISPMT:[["Rate","Required. Interest rate."],["Per","Required. Period (starts with zero, not 1)."],["Nper","Required. Number of periods."],["Pv","Required. Present value."]],NPV:[["Rate","Required. Discount rate over one period."],["Value1","Required. First value(s) representing cash flows."],["Value2","Optional. Second value(s) representing cash flows."]],NOMINAL:[["Effect_rate","Required. The effective annual interest rate."],["Npery","Required. Number of compounding periods per year."]],NPER:[["Rate","Required. The interest rate per period."],["Pmt","Required. The payment made each period."],["Pv","Required. The present value, or total value of all payments now."],["Fv","Optional. The future value, or a cash balance you want after the last payment is made. Defaults to 0."],["Type","Optional. When payments are due. 0 = end of period. 1 = beginning of period. Default is 0."]],PDURATION:[["Rate","Required. Interest rate per period."],["Pv","Required. Present value of the investment."],["Fv","Required. Future value of the investment."]],PPMT:[["Rate","Required. The interest rate per period."],["Per","Required. The payment period of interest."],["Nper","Required. The total number of payments for the loan."],["Pv","Required. The present value, or total value of all payments now."],["Fv","Optional. The cash balance desired after last payment is made. Defaults to 0."],["Type","Optional. When payments are due. 0 = end of period. 1 = beginning of period. Default is 0."]],PV:[["Rate","Required. The interest rate per period."],["Nper","Required. The number of payment periods."],["Pmt","Required. The payment made each period."],["Fv","Optional. Future value. If omitted, defaults to zero."],["Type","Optional. Payment type, 0 = end of period, 1 = beginning of period. Default is 0."]],SYD:[["Cost","Required. Initial cost of asset."],["Salvage","Required. Asset value at the end of the depreciation."],["Life","Required. Periods over which asset is depreciated."],["Period","Required. Period to calculation depreciation for."]],TBILLPRICE:[["Settlement","Required. Settlement date of the security."],["Maturity","Required. Maturity date of the security."],["Discount","Required. The discount rate for the security."]],TBILLYIELD:[["Settlement","Required. Settlement date of the security."],["Maturity","Required. Maturity date of the security."],["Price","Required. Price per $100."]]}},t.getMethods=function(){return Object.keys(Xt)},t.numberMethods=Ht,t.page=ue,t.row=le,t.str2id=function(e){var t=[];return ke(t,e,0),t[1]},t.str2pos=function(e){var t=[];return ke(t,e,0),se(t[1]).slice(0,2)},t.str2range=function(e){var t=[];e.split(":").map((function(e){return ke(t,e,0)}));var i=se(t[1]),n=i[0],o=i[1],r=se(t[4]);return[n,o,r[0],r[1]]},t.textMethods=A,t.toId=ae},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyManager=void 0;var n=i(16),o=i(3);function r(e){for(var t=e.toLowerCase().match(/\w+/g),i=0,n="",o=0;o<t.length;o++){var r=t[o];"ctrl"===r?i+=4:"shift"===r?i+=2:"alt"===r?i+=1:n=r}return i+n}var a={Up:"arrowUp",Down:"arrowDown",Right:"arrowRight",Left:"arrowLeft",Esc:"escape",Spacebar:"space"},s=function(){function e(e){var t=this;this._keysStorage={},this._initHandler=function(e){var i;if(e.which>=48&&e.which<=57||e.which>=65&&e.which<=90)i=String.fromCharCode(e.which);else{var r=32===e.which?e.code:e.key;i=(0,o.isIE)()&&a[r]||r}var s=t._keysStorage[(e.ctrlKey||e.metaKey?4:0)+(e.shiftKey?2:0)+(e.altKey?1:0)+(i&&i.toLowerCase())];if(s)for(var l=0;l<s.length;l++){if(t._beforeCall&&!1===t._beforeCall(e,n.focusManager.getFocusId()))return;s[l].handler(e)}},e&&(this._beforeCall=e),document.addEventListener("keydown",this._initHandler)}return e.prototype.destructor=function(){document.removeEventListener("keydown",this._initHandler),this.removeHotKey()},e.prototype.addHotKey=function(e,t){var i=r(e);this._keysStorage[i]||(this._keysStorage[i]=[]),this._keysStorage[i].push({handler:t})},e.prototype.removeHotKey=function(e,t){var i=this;if(e)if(e&&t){var n=r(e),o=function(e){return e.toString().replace(/\n/g,"").replace(/\s/g,"")};this._keysStorage[n].forEach((function(e,r){o(e.handler)===o(t)&&(delete i._keysStorage[n][r],i._keysStorage[n]=i._keysStorage[n].filter((function(e){return e})))}))}else{var a=r(e);delete this._keysStorage[a]}else this._keysStorage={}},e.prototype.exist=function(e){var t=r(e);return!!this._keysStorage[t]},e.prototype.getKeyStorageLength=function(){return Object.keys(this._keysStorage).length},e}();t.KeyManager=s},function(e,t,i){"use strict";var n,o,r,a;Object.defineProperty(t,"__esModule",{value:!0}),t.DataDriver=t.DragEvents=t.DataEvents=t.TreeFilterType=void 0,function(e){e.all="all",e.level="level",e.leafs="leafs"}(n||(t.TreeFilterType=n={})),function(e){e.afterAdd="afteradd",e.beforeAdd="beforeadd",e.removeAll="removeall",e.beforeRemove="beforeremove",e.afterRemove="afterremove",e.change="change",e.filter="filter",e.dataRequest="dataRequest",e.load="load",e.loadError="loaderror",e.beforeLazyLoad="beforelazyload",e.afterLazyLoad="afterlazyload",e.beforeItemLoad="beforeItemLoad",e.afterItemLoad="afterItemLoad",e.beforeGroup="beforeGroup",e.afterGroup="afterGroup",e.beforeUnGroup="beforeUnGroup",e.afterUnGroup="afterUnGroup"}(o||(t.DataEvents=o={})),function(e){e.beforeDrag="beforeDrag",e.dragStart="dragStart",e.dragOut="dragOut",e.dragIn="dragIn",e.canDrop="canDrop",e.cancelDrop="cancelDrop",e.beforeDrop="beforeDrop",e.afterDrop="afterDrop",e.afterDrag="afterDrag"}(r||(t.DragEvents=r={})),function(e){e.json="json",e.csv="csv",e.xml="xml"}(a||(t.DataDriver=a={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throwMoveWarning=t.isOnlyPermanentFilters=t.hasJsonOrArrayStructure=t.isTreeCollection=t.copyWithoutInner=t.toDataDriver=t.toProxy=t.dhxError=t.dhxWarning=t.isDebug=t.findByConf=t.naturalCompare=t.isEqualObj=void 0;var n=i(0),o=i(33),r=i(67);function a(e){console.warn(e)}t.isEqualObj=function(e,t){for(var i in e)if(e[i]!==t[i]||Array.isArray(e[i]))return!1;return!0},t.naturalCompare=function(e,t){if(isNaN(e)||isNaN(t)){var i=[],n=[];for(e.replace(/(\d+)|(\D+)/g,(function(e,t,n){i.push([t||1/0,n||""])})),t.replace(/(\d+)|(\D+)/g,(function(e,t,i){n.push([t||1/0,i||""])}));i.length&&n.length;){var o=i.shift(),r=n.shift(),a=o[0]-r[0]||o[1].localeCompare(r[1]);if(a)return a}return i.length-n.length}return e-t},t.findByConf=function(e,t,i,n){if("function"==typeof t){if(t.call(this,e,i,n))return e}else if(t.by&&t.match&&e[t.by]===t.match)return e},t.isDebug=function(){var e=window.dhx;if(void 0!==e)return void 0!==e.debug&&e.debug},t.dhxWarning=a,t.dhxError=function(e){throw new Error(e)},t.toProxy=function(e){var t=typeof e;return"string"===t?new o.DataProxy(e):"object"===t?e:void 0},t.toDataDriver=function(e){if("string"==typeof e){var t=window.dhx,i=t&&t.dataDrivers||r.dataDrivers;if(i[e])return new i[e];console.warn("Incorrect data driver type:",e),console.warn("Available types:",JSON.stringify(Object.keys(i)))}else if("object"==typeof e)return e},t.copyWithoutInner=function(e,t){var i={};for(var n in e)n.startsWith("$")||t&&t[n]||(i[n]=e[n]);return i},t.isTreeCollection=function(e){return Boolean(e.getRoot)},t.hasJsonOrArrayStructure=function(e){if("object"==typeof e)return!0;if("string"!=typeof e)return!1;try{var t=JSON.parse(e);return"[object Object]"===Object.prototype.toString.call(t)||Array.isArray(t)}catch(e){return!1}},t.isOnlyPermanentFilters=function(e){return!(!e||(0,n.isEmptyObj)(e))&&Object.keys(e).every((function(t){var i;return null===(i=e[t].config)||void 0===i?void 0:i.permanent}))},t.throwMoveWarning=function(e,t){return void 0===t&&(t=!0),a("item with ID ".concat(e," not ").concat(t?"moved":"found")),null}},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(83),t),o(i(156),t),o(i(84),t),o(i(57),t)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDateFormat=t.isDHXFormat=t.getExcelFormatFromDHX=t.getDHXDateFormat=t.getExcelDateFromString=t.isTimeCheck=t.timeStringToJS=t.timeDiff=t.dateDiff=t.addTime=t.addDay=t.excelDateToJSDate=t.getExcelDateFromJs=void 0;var n=i(21);function o(e){return e?25569+(e.getTime()-6e4*e.getTimezoneOffset())/864e5:null}function r(e,t){return isNaN(e)?0:Math.min(t,Math.max(0,e))}function a(e){var t,i,n=0,o=0,a=0;if("string"==typeof e){var s=e.match(/\d+/g);if(!s)return e;e.toLowerCase().includes("pm")&&(t=!0),e.toLowerCase().includes("am")&&(i=!0),o=r(+s[0],23),(t||i)&&(t&&o<12&&(o+=12),i&&12===o&&(o=0)),n=r(+s[1],59),a=r(+s[2],59)}return new Date(1991,0,1,o,n,a)}t.getExcelDateFromJs=o,t.excelDateToJSDate=function(e){var t=new Date(Math.round(86400*(e-25569)*1e3));return new Date(t.getTime()+6e4*t.getTimezoneOffset())},t.addDay=function(e,t){return void 0===t&&(t=1),new Date(e.getFullYear(),e.getMonth(),e.getDate()+t)},t.addTime=function(e,t){return void 0===t&&(t=36e5),new Date(e.getTime()+t)},t.dateDiff=function(e,t){var i=t.getTime(),n=e.getTime();return parseInt("".concat((i-n)/864e5))},t.timeDiff=function(e,t){var i=new Date,n=new Date;i.setHours(e.getHours(),e.getMinutes(),e.getSeconds()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds());var o=n.getTime(),r=i.getTime();return parseInt("".concat(o-r))},t.timeStringToJS=a,t.isTimeCheck=function(e){return/([0-2][0-9]:[0-5][0-9]:[0-5][0-9])/i.test(e)},t.getExcelDateFromString=function(e,t){if("string"!=typeof e)return e;var i=t.id,r=t.mask,s=e;if(i.includes("date")&&(s=(0,n.stringToDate)(e,c(r),!0)?o((0,n.stringToDate)(e,c(r))):e),"time"===i){var l=a(e);s="string"==typeof l?l:o(l)}return s};var s={mmmm:"%F",mmm:"%M",mm:"%m",m:"%n",dddd:"%I",ddd:"%D",dd:"%d",d:"%j",y:"%y",yy:"%y",yyyy:"%Y",w:"",ww:"",q:"",h:"%G",hh:"%H","AM/PM":"%A","am/pm":"%a","A/P":"%A","a/p":"%a",n:"%i",nn:"%i",s:"%s",ss:"%s"},l={h:"%g",hh:"%h"};function c(e){if(u(e))return e;var t=e.toLowerCase(),i="",n="",o="",r="",a=t.includes("am/pm")||t.includes("a/p");a&&(e=(e=(e=(e=e.replace("AM/PM","%A")).replace("am/pm","%a")).replace("A/P","%A")).replace("a/p","%a"));for(var c=0;c<=e.length;c++){for(var d=e[c],h="",f=c;!h&&f<e.length;){var p=e[f];h=s[p],f++}"m"===d&&(r.includes("h")||h.includes("s"))&&(d="n"),n&&d!==o&&(i+=n.includes("h")&&a?l[n]:s[n]||o,r=s[n]?n:r,n=""),n+=d,o=d}return i}function u(e){return e.includes("%")}t.getDHXDateFormat=c,t.getExcelFormatFromDHX=function(e){if(!u(e))return e;var t=e;return Object.keys(s).forEach((function(e){for(var i=s[e];i&&t.includes(i);)t=t.replace(i,e)})),Object.keys(l).forEach((function(e){for(var i=l[e];i&&t.includes(i);)t=t.replace(i,e)})),t},t.isDHXFormat=u,t.isDateFormat=function(e){if(e.toLowerCase().includes("date"))return"date";if(e.toLowerCase().includes("time"))return"time";if(e.includes("#")||e.includes("0"))return!1;var t=u(e)?e:c(e),i=["%F","%M","%m","%n","%I","%D","%d","%j","%y","%Y"].find((function(e){return t.includes(e)})),n=["%G","%H","%i","%s","%g","%h"].find((function(e){return t.includes(e)}));return!(!i&&!n)&&(i?"date":"time")}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.updateSpans=t.setAutoHeightToRow=t.removeRowsCss=t.updateRowsIndex=t.updateColumns=t.getIndexRowCell=t.getHeaderCell=void 0;var r=i(13),a=i(2);function s(e){var t=e.letter,i=void 0===t?"A":t,n=e.index,o=void 0===n?0:n,r=e.showMenuIcon,a=void 0===r||r,s=e.nextColIsHidden,l=void 0!==s&&s,c=e.nextHiddenRow,u=void 0!==c&&c,d="";return d="$index"!==i?'<div class="dhx_custom_header_cell">\n\t\t\t\t'.concat(i,'\n\t\t\t<div class="dhx_resizer_grip_wrap">\n\t\t\t\t<div class="dhx_resizer_grip" data-dhx-id=').concat(o,'>\n\t\t\t\t\t<div class="dhx_resizer_grip_line"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t').concat(a?'<i class="dxi dxi-dots-vertical dhx_header_icon" data-dhx-id='.concat(o,"></i>"):"","\n\t\t</div>"):'<i class="dxi dxi-select-all"> </i>',u&&(d+='<div class="dhx_expand_row" data-dhx-id='.concat(1,'>\n\t\t<i class="dxi dxi-chevron-up dhx_hidden_row"></i>\n\t\t<i class="dxi dxi-chevron-down  dhx_hidden_row"></i>\n\t\t</div>')),l&&(d+='<div class="dhx_expand_col" data-dhx-id='.concat(o,'>\n\t\t<i class="dxi dxi-chevron-left dhx_hidden_col"></i>\n\t\t<i class="dxi dxi-chevron-right  dhx_hidden_col"></i>\n\t\t</div>')),d}t.getHeaderCell=s,t.getIndexRowCell=function(e,t){var i=e.$index,n=e.$index-1,o=t.filteredRows,r=void 0===o?[]:o,a=t.rows,s=void 0===a?[]:a,l=s.slice(n+1).find((function(e,t){return!r[n+t+1]})),c='<div class="dhx_custom_index_cell">'.concat(i,'\n\t<div class="dhx_resizer_grip_wrap">\n\t\t\t<div class="dhx_resizer_grip" data-dhx-id=').concat(i-1,'>\n\t\t\t\t<div class="dhx_resizer_grip_line"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>');return(null==l?void 0:l.hidden)&&(c+='<div class="dhx_expand_row" data-dhx-id='.concat(s.indexOf(l),'>\n\t\t<i class="dxi dxi-chevron-up dhx_hidden_row"></i>\n\t\t<i class="dxi dxi-chevron-down  dhx_hidden_row"></i>\n\t\t</div>')),c},t.updateColumns=function(e){var t=e.columns,i=0;null==t||t.map((function(e,t){if(e.width=e.width||120,i+=e.hidden?0:e.width,"$index"!==e.id){var n=(0,a.getLetterFromNumber)(t);e.header=[{text:s({letter:n,index:t}),css:""}],e.$letter=n}})),e.$totalWidth=i},t.updateRowsIndex=function(e){e.map((function(e,t){e.$index=t+1}))},t.removeRowsCss=function(e){e.data.map((function(t){e.removeRowCss(t.id,"dhx_selected_row")}))},t.setAutoHeightToRow=function(e,t,i,s){var l=i.getMeta(),c=l.cols,u=l.rows,d=(0,a.getCellIds)(e),h=d.row,f=d.col,p="wrap"===s,v=(0,a.getCellInfo)(e,i),g=n({},u[h]),_=v.value,m=v.format;if(_){var y=(0,r.getFormattedValue)(_,m),b=n({},c[f]),w=b.width,x=b.wrappedRows,C=(0,a.getTextHeight)(y,w),E=g.wrap,S=g.changedByUser;if(E||(E=new Map,g.wrap=E),p?E.set(f,C):E.delete(f),x||(b.wrappedRows=new Set),p?b.wrappedRows.add(h):E.size||b.wrappedRows.delete(h),!S){var I=[];E.forEach((function(e,t){f!==t&&I.push(e)}));var k=Math.max.apply(Math,o(o([],I,!1),[0],!1));return g.height=Math.max(k,p?C:t.config.rowHeight),u[h]=n({},g),c[f]=n({},b),i.setMeta({rows:u}),!0}}},t.updateSpans=function(e,t,i,n,o){var r=n.getMeta().merged,a=o.getCellIndex(i),s=new Map,l=new Map(r),c=[];return Array.from(l).forEach((function(i){var n=i[0],o=i[1],r=o.cell,l=r.row,u=r.column,d=o.colspan,h=o.rowspan;if(e&&a.col>u+d||t&&a.row>l+h)return s.set(n,o);var f={id:n,cell:{row:l,column:u},colspan:d,rowspan:h};e&&u<a.col&&(f.colspan+=e,e>0&&c.push([f.cell.row,a.col-1,{spanId:n,isSpanStart:!1}])),e&&u>=a.col&&(f.cell.column+=e,e<0)||(t&&l<a.row&&(f.rowspan+=t,t>0&&c.push([a.row,f.cell.column-1,{spanId:n,isSpanStart:!1}])),t&&l>=a.row&&(f.cell.row+=t,t<0)||s.set(n,f))})),{prev:r,next:s,nextBlock:c}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeCell=t.getReducedRowspan=t.getReducedColspan=t.getSpanHeight=t.getWidth=void 0,t.getWidth=function(e,t,i){return e.slice(i,i+(t||1)).filter((function(e){return!e.hidden})).reduce((function(e,t){return e+t.$width}),0)},t.getSpanHeight=function(e,t){var i=t.$rowsVisibility;return e.slice(i[0],i[1]+1).reduce((function(e,t){return e+t.$height}),0)},t.getReducedColspan=function(e,t,i){var n=e.findIndex((function(e){return e.id===t}));return e.slice(n,n+(i||1)).filter((function(e){return!e.hidden})).length},t.getReducedRowspan=function(e,t,i,n){var o,r=n.rowspan||1;if(e.length===t.length)return r;var a=null!==(o=null==e?void 0:e.findIndex((function(e){return e.id===n.row})))&&void 0!==o?o:-1,s=0;if(-1!==a)for(var l=1;l<r;l++){var c=t[i-s+l],u=e[a+l];(null==c?void 0:c.id)!==(null==u?void 0:u.id)&&s++}return r-s},t.normalizeCell=function(e,t){if(e){var i=e.row,n=e.column,o=t.getSpan(i.id,n.id);return o?{row:i.id===o.row?i:t.data.getItem(o.row),column:n.id===o.column?n:t.config.columns.find((function(e){return e.id===o.column}))}:e}}},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(60),t),o(i(100),t)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataProxy=void 0;var n=i(51),o=function(){function e(e,t){void 0===t&&(t={}),this.url=this._url=e,this.config=t}return e.prototype.updateUrl=function(e,t){for(var i in void 0===t&&(t={}),this._url=this.url=e||this._url,this.url+=this.url.includes("?")?"&":"?",t)this.config[i]=t[i],this.url+="".concat(i,"=").concat(encodeURIComponent(t[i]),"&");this.url=this.url.slice(0,-1)},e.prototype.load=function(){return n.ajax.get(this.url,void 0,this.config)},e.prototype.save=function(e,t){switch(t){case"delete":return n.ajax.delete(this.url,e,this.config);case"update":return n.ajax.put(this.url,e,this.config);default:return n.ajax.post(this.url,e,this.config)}},e}();t.DataProxy=o},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeSpan=t.getShifts=t.getSpans=t.getCells=t.getHandlers=void 0;var o=i(0),r=i(1),a=i(31),s=i(20),l=i(8),c=i(139),u=i(3),d=i(17),h=i(23);function f(e,t,i,n,o){t=(0,u.locateNodeByClassName)(o.target,"dhx_grid-fixed-cols-wrap")?0:t;var r=(0,u.locateNodeByClassName)(o.target,"dhx_grid-cell"),a=(0,u.locateNodeByClassName)(o.target,"dhx_span-cell");if((r||a)&&n){var s=r?r.parentNode:a,l=(r||a).getAttribute("data-dhx-col-id"),c=i.filteredColumns.find((function(e){return e.id===l})),d=s.getAttribute("data-dhx-id"),h=(i.$data||i.data).find((function(e){return e.id.toString()===d}));n.toLocaleLowerCase().includes("touch")?i._events.fire(n,[h,c,o]):i.events.fire(n,[h,c,o])}}function p(e,t,i,n){return(0,c.getEditor)(e,t,i,n)}function v(e){var t=e.$scrollBarWidth,i=e.$totalWidth-e.$width+h.BORDERS+t.y,n=e.$totalHeight-e.$height+e.$headerHeight+e.$footerHeight+h.BORDERS+t.x;return{x:i>0?i-e.scroll.left:0,y:n>0?n-e.scroll.top:0}}t.getHandlers=function(e,t,i){return{onclick:[f,e,t,i,l.GridEvents.cellClick],onmouseover:[f,e,t,i,l.GridEvents.cellMouseOver],onmousedown:[f,e,t,i,l.GridEvents.cellMouseDown],ondblclick:[f,e,t,i,l.GridEvents.cellDblClick],oncontextmenu:[f,e,t,i,l.GridEvents.cellRightClick],ontouchstart:[f,e,t,i,l.GridEvents.cellMouseDown],ontouchmove:[f,e,t,i,l.GridSystemEvents.cellTouchMove],ontouchend:[f,e,t,i,l.GridSystemEvents.cellTouchEnd]}},t.getCells=function(e){if(!e.data||!e.filteredColumns)return[];var t,i=e.$positions,o=("render"!==e.$renderFrom?e.data.slice(i.yStart,i.yEnd):e.currentRows)||[],a=e.filteredColumns.slice(i.xStart,i.xEnd),l=e.selection.getCell(),c=document.querySelector(".dhx_drag-ghost");if(c){var u=Array.from(c.querySelectorAll(".dhx_grid-row")).map((function(e){return Number(e.getAttribute("aria-rowindex"))-1}));u.length&&(t=u.map((function(t){return e.data[t]})).filter((function(e){return e&&!o.find((function(t){return t.id===e.id}))})),o.push.apply(o,t))}return o.map((function(c,u){var h,f=null==t?void 0:t.some((function(e){return e.id===c.id})),v=o.length-1===u,g=null===(h=e.$subRowCells)||void 0===h?void 0:h.get(c.id),_="";e.rowCss&&(_=e.rowCss(c)),c.$css&&(_+=c.$css);var m=a.map((function(t,o){var a,u;if(!t.hidden){var h=c[t.id],f=(0,d.getEditorOptions)(t,c);(t.editable||e.editable&&!1!==t.editable)&&("select"===t.editorType||"combobox"===t.editorType||"multiselect"===t.editorType)&&f&&(h=(h="string"==typeof h&&"multiselect"===t.editorType?h.split(",").map((function(e){return e.trim()})):[null==h?void 0:h.toString()]).map((function(e){var t,i;return null!==(i=null===(t=f.find((function(t){return t.id&&t.id.toString()===e})))||void 0===t?void 0:t.value)&&void 0!==i?i:e})).join(", "));var v=(0,d.applyPattern)(h,t),_=t.template?t.template(v,c,t):"boolean"!=typeof(u=v)&&"boolean"!==t.type||"string"==typeof u?u||0===u?u:"":"".concat(Boolean(u));"string"==typeof _&&(_=(0,s.isHtmlEnable)(e,t)?(0,r.el)("div.dhx_grid-cell__content",n({".innerHTML":_},{role:"button","aria-label":"Edit content"})):_);var m="".concat(t.$cellCss&&t.$cellCss[c.id]||""," dhx_").concat(t.type,"-cell").replace(/\s+/g," "),y=t.$width,b=e.$editable&&e.$editable.row===c.id&&e.$editable.col===t.id&&!e.$editable.isSpan,w=e.leftSplit,x=e.filteredColumns;(b||"boolean"===t.type&&(e.editable&&(null===(a=t.editable)||void 0===a||a)||!e.editable&&t.editable))&&(_=p(c,t,e).toHTML(),m+=" dhx_grid-cell__editable",w===x.indexOf(t)+1&&(y-=1));var C=e.firstColId===t.id&&(null==g?void 0:g.toggleIcon)&&!!(null==g?void 0:g.height);return"tree"===e.type&&e.firstColId===t.id||C?function(e,t,i,o,a){void 0===a&&(a=!1);var s=o.$editable&&o.$editable.row===t.id&&o.$editable.col===i.id,l=!o.fixedColumns.left.length||"leftFixedCols"===o.$renderFrom,c=i.align?"dhx_align-".concat(i.align):"dhx_align-left",u="";l&&(u="dhx_tree-cell ".concat(i.$cellCss[t.id]||""," ").concat(c),(t.$items||a)&&(u+=" dhx_grid-expand-cell"),s&&(u+=" dhx_tree-editing-cell"),o.dragMode&&!s&&(u+=(t.$drophere?" dhx_grid-cell--drophere":"")+(t.$dragtarget?" dhx_grid-cell--dragtarget":"")));var h=(0,d.getTreeCellWidthOffset)(t,!0);return(0,r.el)(".dhx_grid-cell",n({class:u,style:{width:i.$width,height:t.$height,padding:t.$items?0:"0 0 0 ".concat(h,"px")},"data-dhx-col-id":i.id},{role:"gridcell","aria-colindex":1}),l?[t.$items||a?(0,r.el)(".dhx_grid-expand-cell-icon",n(n({class:t.$opened?"dxi dxi-chevron-down":"dxi dxi-chevron-right","data-dhx-id":t.id},function(e){return{role:"button","aria-label":e.$opened?"Collapse group":"Expand group"}}(t)),{style:{padding:t.$level?"0 0 0 ".concat(4+h,"px"):"0 0 0 4px"}})):null,(0,r.el)(".dhx_tree-cell",{class:c+"".concat(o.autoHeight?" dhx_tree-cell_auto-height":"")},[e])]:null)}(_,c,t,e,C):(e.dragMode&&!b&&(m+=(c.$drophere?" dhx_grid-cell--drophere":"")+(c.$dragtarget?" dhx_grid-cell--dragtarget":"")),t.align&&(m+=" dhx_align-".concat(t.align)),(0,s.isHtmlEnable)(e,t)&&(m+=" dhx_grid-cell__content_html-enable"),e.autoHeight&&(m+=" dhx_grid-cell__content_auto-height"),(0,r.el)(".dhx_grid-cell",n({class:m,style:{width:y,height:c.$height+"px"},_key:t.id,"data-dhx-col-id":t.id},function(e,t,i,o){return n({role:"gridcell","aria-colindex":t,"aria-readonly":o?"false":"true"},function(e,t){var i={tabindex:-1};return l?l.row.id===t.id&&l.column.id===e.id&&(i.tabindex=0):i.tabindex=0,i}(e,c))}(t,i.xStart+o+1,0,e.editable)),[_]))}})),y=(0,d.getTotalRowHeight)(c);return(0,r.el)(".dhx_grid-row",n({style:{height:v?y+1:y,display:f?"none":null},"data-dhx-id":c.id,class:_,_key:c.id,_flags:r.KEYED_LIST},f?{}:{role:"row","aria-rowindex":i.yStart+u+1}),m)}))},t.getSpans=function(e,t){var i,c,u=[],f=e.columns,g=e.filteredColumns,_=e.data,m=e.currentSpans,y=e.bottomSplit,b=void 0===y?0:y;if(!g.length||!m)return null;for(var w=e.fixedColumns.right.length,x=m.filter((function(t){var i;return null===(i=t.$renderFrom)||void 0===i?void 0:i.includes(e.$renderFrom)})),C=x.sort((function(e,t){return"string"==typeof e.row&&"string"==typeof t.row?e.row.localeCompare(t.row):e.row-t.row})),E=function(m){var y=C[m].row,x=C[m].column,E=C[m].$rowsVisibility[1]-C[m].$rowsVisibility[0]+1,S=C[m].$colsVisibility[1]-C[m].$colsVisibility[0]+1,I=C[m].text,k=C[m].css,O=t===l.Split.bottom&&e.$renderFrom.endsWith("FixedCols"),M=O?e.$data:_,R=null==g?void 0:g.findIndex((function(e){return"".concat(e.id)==="".concat(x)})),A=null==M?void 0:M.findIndex((function(e){return"".concat(e.id)==="".concat(y)}));if(R<0||A<0)return"continue";if(O){var P=e.$data[A+E-1];if(!_.find((function(e){return e.id===(null==P?void 0:P.id)})))return"continue"}var T=g[R],D=M[A],F=T.$cellCss[y],V=(0,o.isDefined)(C[m].text)?"string":T.type;if(T.hidden)return"continue";var L=void 0;if((0,o.isDefined)(I))if("function"==typeof I){var N=n(n({},e.commonSummary),e.colSummary[x]);"string"==typeof T.summary&&"count"!==T.summary&&(N[T.summary]=(0,d.applyPattern)(N[T.summary],T)),L=I(N)}else L=I.toString();else L=void 0===D[x]?"":(0,d.applyPattern)(D[x],T);if("function"!=typeof I){var H=T.template||function(e,t,i){return e||0===e?e:""};L=H(L,D,T)}var j=(0,s.isHtmlEnable)(e,T);L="string"==typeof L?(0,r.el)("div.dhx_span-cell-content",{class:e.autoHeight?" dhx_grid-cell__content_auto-height":"",".innerHTML":j?L:null},j?null:L):L;var z=void 0;if("bottomFixedRows"===e.$renderFrom||O){var $=M.length-b;z=A<$?-(0,s.getTotalHeight)(M.slice(A,$)):(0,s.getTotalHeight)(M.slice($,A))}else z=(0,s.getTotalHeight)(M.slice(0,A))-(t?0:1);var B=0;if("rightFixedCols"===e.$renderFrom){var q=g.length-e.fixedColumns.right.length;B=R<q?-(0,s.getTotalWidth)(g.slice(R,q)):(0,s.getTotalWidth)(g.slice(q,R))}else for(var W=R-1;W>=0;W--)B+=g[W].$width;var G=D.$items&&0===R,U=R===g.length-1,X=R+S===g.length,Y=w&&R===g.length-w,K=t===l.Split.bottom&&e.fixedRows.bottom.find((function(e){return e.id===y})),J=!!b&&A+E>M.length-b,Z=!!w&&R+S===g.length-w,Q=T.header[0].text?" dhx_span-cell":" dhx_span-cell dhx_span-cell--title";Q+=G?" dhx_span-expand-cell":"",Q+=F?" ".concat(F):"",Q+=k?" ".concat(k):"",Q+=0===A?" dhx_span-first-row":"",Q+=A+E===M.length?" dhx_grid__span_bottom--last-row":"",Q+=0===R||Y?" dhx_span-first-col":"",Q+=U||X?" dhx_span-last-col":"",Q+=1===S?" dhx_span-".concat(T.type||"string","-cell"):" dhx_span-string-cell",Q+=T.align?" dhx_align-".concat(T.align):" dhx_".concat(V,"-cell"),Q+=K?" dhx_grid__span_bottom--all-fixed":"",Q+=J?" dhx_grid__span_bottom--part-fixed":"",Q+=Z?" dhx_grid__span_right--before-fixed":"";var ee=void 0;if(S>1){var te=f.findIndex((function(e){return e.id===x}));ee=(0,a.getWidth)(f,C[m].colspan,te)}else ee=T.$width;var ie=void 0;if(E>1){if(ie=(0,a.getSpanHeight)(M,C[m]),t===l.Split.top&&e.$renderFrom.endsWith("FixedCols")){var ne=A+E-M.length;if(ne>0){var oe=e.fixedRows.top.length;ie+=(0,s.getTotalHeight)(e.$data.slice(oe,oe+ne))}}}else ie=D.$height;var re=null;if((null===(i=e.$editable)||void 0===i?void 0:i.isSpan)&&e.$editable.row===y&&e.$editable.col===x||"boolean"===T.type&&(e.editable&&(null===(c=T.editable)||void 0===c||c)||!e.editable&&T.editable)){var ae=e.topSplit,se=void 0===ae?0:ae,le=e.fixedColumns.left.length,ce=le&&R+S<=le||w&&R>=g.length-w,ue=A<se||A+E>M.length-b,de=se&&A+E<=se||b&&A>=M.length-b,he=R<le||R+S>g.length-w;if("render"===e.$renderFrom||ce&&!ue||de&&!he){var fe=e.$height,pe=e.$scrollBarWidth,ve=e.scroll,ge=e.fixedRows,_e=e.fixedColumns,me=C[m].text,ye=0;if(L=p(D,T,e,C[m]).toHTML(me),Q+=" dhx_span__editable",!de){var be=(0,s.getTotalHeight)(ge.top),we=(0,s.getTotalHeight)(ge.bottom),xe=pe.yState?fe-e.$headerHeight-e.$footerHeight-pe.x-h.BORDERS:e.$totalHeight,Ce=z+ie-ve.top,Ee=z-be<ve.top,Se=Ce>xe-we;Ee&&Se&&pe.xState&&(ye=1),z=Ee?ve.top+be-(be&&!ce?1:0):z,ie=Se?xe-z-we+ve.top-ye:Ee?Ce-be:ie}if("render"===e.$renderFrom){if(re=14,_e.left.find((function(e){return e.id===x}))&&(B=ve.left+(0,s.getTotalWidth)(_e.left.slice(0,R)),!ce)){var Ie=(0,s.getTotalWidth)(_e.left.slice(R,le));ee=ee-ve.left>Ie?ee-ve.left:Ie}if(ge.top.find((function(e){return e.id===y}))&&(z=ve.top+(0,s.getTotalHeight)(ge.top.slice(0,A)),!de)){var ke=(0,s.getTotalHeight)(e.fixedRows.top.slice(A,e.topSplit));ie=ie>0?ke+ie-ye:ke}if(_e.right.find((function(e){return e===g[g.indexOf(T)+S-1]}))){var Oe=g.length,Me=v(e),Re=Oe-g.indexOf(T)-S,Ae=(Ie=Re?(0,s.getTotalWidth)(_e.right.slice(0,-Re)):(0,s.getTotalWidth)(_e.right),(0,s.getTotalWidth)(g.slice(R,Oe-w)));B=Me.x>Ae?B-Me.x+Ae:B,ce||(ee=Me.x<Ae?ee-Me.x-1:Ie-1)}if(ge.bottom.find((function(e){return e===M[M.indexOf(D)+E-1]}))){Oe=M.length,Me=v(e);var Pe=Oe-M.indexOf(D)-E,Te=(ke=Pe?(0,s.getTotalHeight)(ge.bottom.slice(0,-Pe)):(0,s.getTotalHeight)(e.fixedRows.bottom),(0,s.getTotalHeight)(M.slice(A,Oe-b)));z=Me.y>Te?z-Me.y+Te:z,de||(ie=Me.y<Te?ke+ie-ye-(Pe?-1:ye?0:1):ke-(Pe?-1:1))}}le===R+1&&(ee-=1),R===g.length-w&&(B+=1,ee-=1)}}u.push((0,r.el)("div",{class:Q,style:{width:ee,height:ie,top:z,left:B,zIndex:re},"data-dhx-col-id":x,"data-dhx-id":y,"aria-instead":"true"},[G?(0,r.el)(".dhx_span-expand-cell-icon",{class:D.$opened?"dxi dxi-chevron-down":"dxi dxi-chevron-right","data-dhx-id":D.id,role:"button","aria-label":D.$opened?"Collapse group":"Expand group",style:{padding:"0 0 0 ".concat(4+(0,d.getTreeCellWidthOffset)(D,!0),"px")}}):null,L]))},S=0;S<C.length;S++)E(S);return u},t.getShifts=function(e){var t=e.filteredColumns.slice(0,e.$positions.xStart),i=e.data.slice(0,e.$positions.yStart);return{x:(0,s.getTotalWidth)(t),y:(0,s.getTotalHeight)(i)}},t.normalizeSpan=function(e,t,i){var o=t.topSplit,r=void 0===o?0:o,s=t.bottomSplit,c=void 0===s?0:s,u=t.columns,d=e.column,f=e.row,p=e.colspan,v=e.rowspan,g=i.getRawData(0,-1,null,2),_=u.filter((function(e){return!e.hidden})),m=_.findIndex((function(e){return e.id==d})),y=g.findIndex((function(e){return e.id==f})),b=m+(p?(0,a.getReducedColspan)(u,d,p)-1:0),w=y+(v?(0,a.getReducedRowspan)(i.getInitialData(),g,y,e)-1:0),x=-1===m?[]:[m,b],C=-1===y?[]:[y,w],E=[];if(-1!==m&&-1!==y){var S=(0,h.getCurrFixedCols)(t,l.Split.left).length,I=(0,h.getCurrFixedCols)(t,l.Split.right).length,k=m<S,O=y<r,M=b>=_.length-I,R=w>=g.length-c;b>=S&&w>=r&&m<_.length-I&&y<g.length-c&&E.push("render"),k&&E.push("leftFixedCols"),M&&E.push("rightFixedCols"),!O||k||M?O&&!E.includes("render")&&E.push("render"):E.push("topFixedRows"),!R||k||M?R&&!E.includes("render")&&E.push("render"):E.push("bottomFixedRows")}return n(n({},e),{$renderFrom:E,$rowsVisibility:C,$colsVisibility:x})}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollView=t.scrollViewConfig=void 0;var n=i(0),o=i(1),r=i(3);t.scrollViewConfig={enable:!1,autoHide:!0,timeout:1e3,scrollHandler:function(){}};var a=function(){function e(e,i){var o;void 0===i&&(i={});var a=this;this.config=(0,n.extend)({enable:t.scrollViewConfig.enable,autoHide:t.scrollViewConfig.autoHide,timeout:t.scrollViewConfig.timeout,scrollHandler:t.scrollViewConfig.scrollHandler},i),this._wheelName=(0,r.isIE)()?"onmousewheel":"onwheel",this._getRootView=e,this._scrollYTop=this._scrollXLeft=this._runnerYTop=this._runnerXLeft=this._runnerHeight=this._runnerWidth=0,this._visibleYArea=this._visibleXArea=1,this._scrollWidth=(0,r.getScrollbarWidth)(),this._scrollHeight=(0,r.getScrollbarHeight)(),this._handlers=((o={onscroll:function(e){a.config.scrollHandler(e),a.update()}})[this._wheelName]=function(e){var t=!!(0,r.locateNodeByClassName)(e.target,"y-scroll");e.preventDefault();var i=40*((e.deltaY||-e.wheelDelta)>0?1:-1),n=a._getRefs().area;if(t){var o=n.scrollHeight-a._runnerHeight,s=a._scrollYTop+i;n.scrollTop=s<0?0:s>o?o:s}else{var l=n.scrollWidth-a._runnerWidth,c=a._scrollXLeft+i;n.scrollLeft=c<0?0:c>l?l:c}a.update()},o.onmousedownRunner=function(e){e.preventDefault();var t=!!(0,r.locateNodeByClassName)(e.target,"y-scroll"),i=a._getRefs(),n=i.area,o=i.runnerY,s=i.runnerX,l=n.getBoundingClientRect(),c=l.top+window.pageYOffset,u=l.bottom+window.pageYOffset,d=n.scrollHeight-a._runnerHeight,h=e.pageY-o.getBoundingClientRect().top-window.pageYOffset,f=l.left+window.pageXOffset,p=l.right+window.pageXOffset,v=n.scrollWidth-a._runnerWidth,g=e.pageX-s.getBoundingClientRect().left-window.pageXOffset,_=function(e){if(t){var i=e.pageY-h;n.scrollTop=i<=c?0:i>u?d:(i-c)/a._visibleYArea}else{var o=e.pageX-g;n.scrollLeft=o<=f?0:o>p?v:(o-f)/a._visibleXArea}a.update()},m=function(){document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",m),document.body.classList.remove("dhx-no-select")};document.body.classList.add("dhx-no-select"),document.addEventListener("mousemove",_),document.addEventListener("mouseup",m)},o.onmousedownArea=function(e){if(!(0,r.locateNodeByClassName)(e,"scroll-runner")){e.preventDefault();var t=!!(0,r.locateNodeByClassName)(e.target,"y-scroll"),i=a._getRefs(),n=i.area,o=i.runnerY,s=i.runnerX;t?n.scrollTop+=(e.pageY-o.getBoundingClientRect().top)/a._visibleYArea:n.scrollLeft+=(e.pageX-s.getBoundingClientRect().left)/a._visibleXArea,a.update()}},o.onmouseenter=function(e){if(!(0,r.locateNodeByClassName)(e,"scroll-runner")){var t=a._getRefs();if(t){var i=!!(0,r.locateNodeByClassName)(e.target,"y-scroll"),n=t.areaX,o=t.areaY;i&&a._runnerHeight>0?o.style.background="#eee":!i&&a._runnerWidth>0&&(n.style.background="#eee")}}},o.onmouseleave=function(e){if(!(0,r.locateNodeByClassName)(e,"scroll-runner")){var t=a._getRefs();if(t){var i=!!(0,r.locateNodeByClassName)(e.target,"y-scroll"),n=t.areaX,o=t.areaY;i&&a._runnerHeight>0?o.style.background="transparent":!i&&a._runnerWidth>0&&(n.style.background="transparent")}}},o)}return e.prototype.enable=function(){this.config.enable=!0,this._getRootView().redraw()},e.prototype.disable=function(){this.config.enable=!1,this._getRootView().redraw()},e.prototype.render=function(e,t){var i,n,r=this;if(void 0===t&&(t=""),!this.config.enable||!e.length)return e;t&&(this._uid=t);var a=this.config.enable?[(0,o.el)(".y-scroll",(i={},i[this._wheelName]=this._handlers[this._wheelName],i._ref=t?"scroll-y-area-".concat(t):"scroll-y-area",i.onmousedown=this._handlers.onmousedownArea,i.onmouseenter=this._handlers.onmouseenter,i.onmouseleave=this._handlers.onmouseleave,i.style={width:"6px",height:"100%",right:0,top:0,position:"absolute"},i),[(0,o.el)(".scroll-runner",{_ref:t?"scroll-y-runner-".concat(t):"scroll-y-runner",onmousedown:this._handlers.onmousedownRunner,style:{height:this._runnerHeight+"px",top:this._runnerYTop}})]),(0,o.el)(".x-scroll",(n={},n[this._wheelName]=this._handlers[this._wheelName],n._ref=t?"scroll-x-area-".concat(t):"scroll-x-area",n.onmousedown=this._handlers.onmousedownArea,n.onmouseenter=this._handlers.onmouseenter,n.onmouseleave=this._handlers.onmouseleave,n.style={width:"100%",height:"6px",left:0,bottom:0,position:"absolute"},n),[(0,o.el)(".scroll-runner",{_ref:t?"scroll-x-runner-".concat(t):"scroll-x-runner",onmousedown:this._handlers.onmousedownRunner,style:{width:this._runnerWidth+"px",left:this._runnerXLeft}})])]:null;return(0,o.el)(".scroll-view-wrapper",[(0,o.el)(".scroll-view",{onscroll:this._handlers.onscroll,_ref:t?"scroll-view-".concat(t):"scroll-view",_hooks:{didInsert:function(){r.update()},didRecycle:function(){r.update()}},style:{width:"calc(100% + ".concat(this._scrollWidth,"px)"),height:"calc(100% + ".concat(this._scrollHeight,"px)"),"margin-bottom":"-".concat(this._scrollHeight,"px")}},e)].concat(a))},e.prototype.update=function(){var e=this._getRefs();if(e){var t=e.area,i=e.areaX,o=e.areaY,r=e.runnerY,a=e.runnerX;this._visibleYArea=t.clientHeight/t.scrollHeight,this._visibleXArea=t.clientWidth/t.scrollWidth,this._scrollYTop=t.scrollTop,this._scrollXLeft=t.scrollLeft,this._runnerYTop=this._scrollYTop*this._visibleYArea,this._runnerXLeft=this._scrollXLeft*this._visibleXArea,this._runnerHeight=this._visibleYArea<1?t.clientHeight*this._visibleYArea:0,this._runnerWidth=this._visibleXArea<1?t.clientWidth*this._visibleXArea:0;var s=r.style.top,l=a.style.left;r.style.opacity=1,r.style.top=this._runnerYTop+"px",r.style.height=this._runnerHeight+"px",a.style.opacity=1,a.style.left=this._runnerXLeft+"px",a.style.width=this._runnerWidth+"px",s!==r.style.top&&(o.style.opacity=.9,o.style.width="10px"),l!==a.style.left&&(i.style.opacity=.9,i.style.height="10px"),this.config.autoHide?!this._autoHideFunc&&(this._autoHideFunc=(0,n.debounce)((function(){r.style.opacity=0,o.style.width="6px",a.style.opacity=0,i.style.height="6px"}),this.config.timeout)):this._autoHideFunc=(0,n.debounce)((function(){o.style.width="6px",i.style.height="6px"}),this.config.timeout),this._autoHideFunc()}},e.prototype._getRefs=function(){var e=this._getRootView(),t=!(!e.refs["scroll-view"]||!e.refs["scroll-x-runner"]&&!e.refs["scroll-y-runner"]),i=!(!this._uid||!e.refs["scroll-view-".concat(this._uid)]||!e.refs["scroll-x-runner-".concat(this._uid)]&&!e.refs["scroll-y-runner-".concat(this._uid)]);if(e.refs){if(t)return{area:e.refs["scroll-view"].el,areaY:e.refs["scroll-y-area"].el,areaX:e.refs["scroll-x-area"].el,runnerY:e.refs["scroll-y-runner"].el,runnerX:e.refs["scroll-x-runner"].el};if(i)return{area:e.refs["scroll-view-".concat(this._uid)].el,areaY:e.refs["scroll-y-area-".concat(this._uid)].el,areaX:e.refs["scroll-x-area-".concat(this._uid)].el,runnerY:e.refs["scroll-y-runner-".concat(this._uid)].el,runnerX:e.refs["scroll-x-runner-".concat(this._uid)].el}}},e}();t.ScrollView=a},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.getNavbarButtonCSS=t.navbarComponentMixin=t.getIcon=t.getCount=void 0;var o=i(1),r=i(0);t.getCount=function(e,t,i){var n={danger:" dhx_navbar-count--color_danger",secondary:" dhx_navbar-count--color_secondary",primary:" dhx_navbar-count--color_primary",success:" dhx_navbar-count--color_success"}[e.countColor]||" dhx_navbar-count--color_danger";return(0,o.el)(".dhx_navbar-count",{class:t+n+(!i&&parseInt(e.count,10)>99?" dhx_navbar-count--overlimit":"")},i&&parseInt(e.count,10)>99?"99+":e.count)},t.getIcon=function(e,t){return void 0===e&&(e=""),e.startsWith("dxi")&&(e="dxi "+e),(0,o.el)("span",{class:"dhx_".concat(t,"__icon ").concat(e),"aria-hidden":"true"})};t.navbarComponentMixin=function(e,t,i,r){var a,s,l=function(e,t,i){var n="",o="";return o=(n=i?"dhx_menu-item":"dhx_"+e+"__item")+(t.css?" "+t.css:""),"spacer"!==t.type&&"separator"!==t.type||(o+=" ".concat(n,"--").concat(t.type)),"button"!==t.type||"sidebar"!==e||t.icon||(o+=" dhx_navbar-item--colapse_hidden"),o}(e,t,i),c="ribbon"===e&&("navItem"===t.type||"imageButton"===t.type);return(0,o.el)("li",n({_key:t.id,class:l+(t.icon&&!t.value&&c?" dhx_ribbon__item--icon":"")+(t.src&&!t.value&&c?" dhx_ribbon__item--icon":"")+(t.size&&c?" dhx_ribbon__item--"+t.size:""),".innerHTML":"customHTML"===t.type?t.html:void 0,"data-dhx-id":"customHTML"===t.type?t.id:void 0},(a=t.type,s={role:"none"},"separator"===a&&(s.role="separator",s["aria-orientation"]="vertical"),s)),"customHTML"!==t.type?[r]:void 0)},t.getNavbarButtonCSS=function(e,t){var i=e.color,n=e.size,o=e.view,a=e.full,s=e.icon,l=e.circle,c=e.loading,u=e.value,d=e.active,h=e.count;return({danger:" dhx_button--color_danger",secondary:" dhx_button--color_secondary",primary:" dhx_button--color_primary",success:" dhx_button--color_success"}[i]||" dhx_button--color_primary")+({small:" dhx_button--size_small",medium:" dhx_button--size_medium"}[n]||" dhx_button--size_medium")+({flat:" dhx_button--view_flat",link:" dhx_button--view_link"}[o]||" dhx_button--view_flat")+(a?" dhx_button--width_full":"")+(l?" dhx_button--circle":"")+(c?" dhx_button--loading":"")+(d?" dhx_button--active":"")+(s&&!u?" dhx_button--icon":"")+((0,r.isDefined)(h)?" dhx_button--count":"")}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeToolbarFormat=t.getFormatsDropdown=t.getFormatItem=t.getToggledValue=t.updateToolbar=t.getColorpickerTemplate=void 0;var r=i(12),a=i(13),s=i(2);function l(e,t){return'<div class="dxi dxi-'.concat(t,' dhx_toolbar-button__icon dhx_toolbar-button__colorpicker" style="border-bottom: solid 3px ').concat(e,'; cursor: pointer"></div>')}function c(e,t){void 0===t&&(t=1500.31);var i=e.name,n=(0,a.getFormattedValue)(t,e);return'<div class="dhx_format-item"><span class="dhx_format-name">'.concat(r.default[i]||i,' </span><span class="dhx_format-helper">').concat(n,"</span></div>")}function u(e){return{id:e.id,css:"dhx_format-name-wrap",twoState:!0,html:c(e,e.example)}}t.getColorpickerTemplate=l,t.updateToolbar=function(e,t,i){var o,c,u=i.activePage,d=i.getPageMeta(u),h=d.merged,f=d.focusedCell,p=d.selectedCells,v=d.freezedCol,g=d.freezedRow,_=d.rows,m=d.cols;if(p&&f){var y=p.join(","),b=n({locked:!1,format:(0,a.getFormat)("common")},(0,s.getCellInfo)(f.cell,u)),w=[],x=!!(0,s.getCellsArray)(y).find((function(e){return!(0,s.isCellSpaned)((0,s.getCellInfo)(e,u),h)}));b.css&&(w="string"==typeof b.css?b.css.split(" "):b.css);for(var C={},E=0,S=w;E<S.length;E++){var I=S[E];C=n(n({},C),dhx.css.get(I))}var k=n({color:"#4C4C4C",background:"#FFF","text-align":"left","vertical-align":"center","font-style":"","font-weight":"","text-decoration":"",multiline:"clip"},C),O=r.default[x?"merge":"unmerge"],M="dxi dxi-table-".concat(x?"merge":"split","-cell").concat(x?"s":"");e.data.update("merge",{active:!x,icon:M,tooltip:O}),t.data.update("merge",{value:O,tooltip:O});var R=p.at(-1),A=(0,s.isRangeId)(R)?i.getRangeIndexes(R).end:i.getCellIndex(R),P=A.col,T=A.row,D=(0,s.getLetterFromNumber)(P),F=i.getRangeIndexes(R),V=F.start,L=F.end;v?e.show("unfreeze-cols"):e.hide("unfreeze-cols"),g?e.show("unfreeze-rows"):e.hide("unfreeze-rows"),e.data.update("freeze-cols",{value:r.default.freezeToCol.replace("{col}",D)}),e.data.update("freeze-rows",{value:r.default.freezeToRow.replace("{row}","".concat(T+1))}),e.data.update("hide-cols",{value:r.default[V.col!==L.col?"hideCols":"hideCol"].replace("{col}","".concat((0,s.getLetterFromNumber)(V.col)).concat(V.col!==L.col?"-".concat((0,s.getLetterFromNumber)(L.col)):""))}),e.data.update("hide-rows",{value:r.default[V.row!==L.row?"hideRows":"hideRow"].replace("{row}","".concat(V.row+1).concat(V.row!==L.row?"-".concat(L.row+1):""))});for(var N=!1,H=V.row;H<L.row;H++)_[H+1].hidden&&(H=L.row,N=!0);N?e.show("show-rows"):e.hide("show-rows");var j=!1,z=m;for(H=V.col;H<L.col;H++)(null===(o=z[H])||void 0===o?void 0:o.hidden)&&(H=L.col,j=!0);j?e.show("show-cols"):e.hide("show-cols"),function(i){var n=function(n){switch(n){case"color":e.data.update(n,{html:l(i[n]||"#4C4C4C","format-color-text")});break;case"background":case"background-color":e.data.update("background",{html:l(i[n]||"#FFF","format-color-fill")});break;case"text-align":var o="halign-".concat(i[n]);if(!e.data.exists("halign")||!e.data.exists(o))return{value:void 0};e.data.update("halign",{icon:e.data.getItem(o).icon});var r={};e.data.getItem("halign").items.forEach((function(e){r[e.id]=!1,t.data.update(e.id,{active:e.id===o})})),r[o]=!0,e.setState(r);break;case"vertical-align":var a="valign-".concat(i[n]);if(!e.data.exists("valign")||!e.data.exists(a))return{value:void 0};var s={};e.data.getItem("valign").items.forEach((function(e){s[e.id]=!1,t.data.update(e.id,{active:e.id===a})})),s[a]=!0,e.setState(s),e.data.update("valign",{icon:e.data.getItem(a).icon});break;case"multiline":if(!e.data.exists("multiline"))return{value:void 0};var c="multiline-".concat(i[n]),u={};e.data.getItem("multiline").items.forEach((function(e){u[e.id]=!1,t.data.update(e.id,{active:e.id===c})})),u[c]=!0,e.setState(u),e.data.update("multiline",{icon:e.data.getItem(c).icon});break;case"font-weight":e.data.update("font-weight-bold",{active:"bold"==i[n]||"700"==i[n]}),t.data.update("font-weight-bold",{active:"bold"==i[n]||"700"==i[n]});break;case"font-style":e.data.update("font-style-italic",{active:"italic"===i[n]}),t.data.update("font-style-italic",{active:"italic"===i[n]});break;case"text-decoration":var d={active:i[n].includes("underline")};e.data.update("text-decoration-underline",d),t.data.update("text-decoration-underline",d);var h={active:i[n].includes("line-through")};e.data.update("text-decoration-line-through",h),t.data.update("text-decoration-line-through",h)}};for(var o in i){var r=n(o);if("object"==typeof r)return r.value}}(k);var $=e.data.getItem("format");$&&$.items.map((function(e){return e.active=!1}));var B=function(i){switch(i){case"locked":e.data.getItem("lock")&&e.data.update("lock",{active:b[i]});break;case"format":var n=(0,a.getDefaultFormatsMap)()[null===(c=b[i])||void 0===c?void 0:c.mask]||"common",o=e.data.getItem(n);e.data.getItem("format")&&e.data.update("format",{value:o?(0,a.getFormat)(n).name:e.data.getItem("custom_format").value}),o&&e.data.update(n,{active:!0}),e.data.update("custom_format",{hidden:!!o,active:!o}),t.data.getItems("format").forEach((function(e){t.data.update(e.id,{active:n===e.id})}))}};for(var q in b)B(q);for(var q in u)if("filter"===q)e.data.getItem("filter")&&e.data.update("filter",{active:u[q]});t.data.update("freeze-cols",{value:r.default.freezeToCol.replace("{col}",D)}),t.data.update("freeze-rows",{value:r.default.freezeToRow.replace("{row}",f.row+1)})}},t.getToggledValue=function(e,t,i,o,r){var a=(0,s.getCellInfo)(t,e),l=[];a.css&&(l="string"==typeof a.css?a.css.split(" "):a.css);for(var c={},u=0,d=l;u<d.length;u++){var h=d[u];c=n(n({},c),dhx.css.get(h))}var f=c[i],p=f&&"none"!==f?f:"",v=p.includes(o)?p.split(o).join(""):"".concat(p," ").concat(o);return"text-decoration"!==i||v||(v="none"),v.trim()},t.getFormatItem=c,t.getFormatsDropdown=function(e){var t=e.formats;return o(o([],t.map((function(e){return u(e)})),!0),[{id:"custom_format",css:"dhx_format-name-wrap",twoState:!0,hidden:!0,value:r.default.custom}],!1)},t.normalizeToolbarFormat=u},function(e,t,i){"use strict";var n,o,r,a;Object.defineProperty(t,"__esModule",{value:!0}),t.VaultMode=t.FileStatus=t.ProgressBarEvents=t.UploaderEvents=void 0,function(e){e.uploadBegin="uploadbegin",e.beforeUploadFile="beforeuploadfile",e.uploadFile="uploadfile",e.uploadFail="uploadfail",e.uploadComplete="uploadcomplete",e.uploadProgress="uploadprogress"}(n||(t.UploaderEvents=n={})),function(e){e.cancel="cancel"}(o||(t.ProgressBarEvents=o={})),function(e){e.queue="queue",e.uploaded="uploaded",e.failed="failed",e.inprogress="inprogress"}(r||(t.FileStatus=r={})),function(e){e.grid="grid",e.list="list"}(a||(t.VaultMode=a={}))},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionEvents=void 0,function(e){e.beforeUnSelect="beforeunselect",e.afterUnSelect="afterunselect",e.beforeSelect="beforeselect",e.afterSelect="afterselect"}(n||(t.SelectionEvents=n={}))},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.removePatternMask=t.patternMask=t.removeNumberMask=t.numberMask=void 0;var o=i(0);t.numberMask=function(e,t,i){var n,r,a,s=t.prefix||"",l=t.suffix||"",c=t.maxIntLength,u=t.maxDecLength,d=t.minDecLength,h=null!==(n=t.groupSeparator)&&void 0!==n?n:",",f="number"!=typeof u||u?null!==(r=t.decSeparator)&&void 0!==r?r:".":"",p=!1,v=e.toString(),g="-"===v[0];g&&!1===t.allowNegative&&(v=v.slice(1),g=!1);var _=v.split(".");if((0,o.isDefined)(c)){var m=c+(g?1:0);_[0].length>m&&(_[0]=_[0].slice(0,m),p=!0)}if((0,o.isDefined)(u)&&(null===(a=_[1])||void 0===a?void 0:a.length)>u&&(_[1]=_[1].slice(0,u),p=!0),t.onlyView&&d&&_[0])for(_[1]||(_[1]="");_[1].length<d;)_[1]+="0";_[0]=_[0].replace(/\B(?=(\d{3})+(?!\d))/g,h);var y=s+(v=_.join(f))+l;if(v.length||(y=""),i){var b=i.value.length,w=i.selectionStart,x=y.length-b,C=w+x,E=0;g&&v[E+2]!==f&&++E,"0"===v[E]&&v.length>1&&v[1]!==f&&(y=s+"0"+l),v[E]===f&&(y=g?s+"-0"+f+l:s+"0"+f+l,++C),C>y.length?C=y.length:C<0&&(C=0),l&&y.length-l.length<=C&&(C=C-l.length+(y.length-C)),y[C-1]===h&&--C,p&&-1===x&&y[++C-1]===h&&C++,i.value=y,i.setSelectionRange(C,C),i.focus()}return y},t.removeNumberMask=function(e,t){var i,n=t.decSeparator||".",o=null===(i=t.allowNegative)||void 0===i||i;t.prefix&&e.startsWith(t.prefix)&&(e=e.slice(t.prefix.length)),t.suffix&&e.endsWith(t.suffix)&&(e=e.slice(0,e.length-t.suffix.length));var r=o&&"-"===e[0]?"-":"",a=e.split(n),s=a[0],l=a.slice(1),c=(e=l.length?s+n+l.join(""):s).replace(new RegExp("[^0-9\\".concat(n,"]"),"g"),"").replace(new RegExp("\\".concat(n)),".");return t.lastCall&&("."===c[c.length-1]&&(c=0==+c?"":c.slice(0,-1)),(isNaN(+c)||0==+c)&&(r="")),r+c};var r={0:/\d/,a:/[A-Za-z]/,"#":/[A-Za-z0-9]/,"*":/./};function a(e,t){var i="",o=t,a=n({},r);"object"==typeof t&&(o="function"==typeof t.pattern?t.pattern(e):t.pattern,a=n(n({},a),t.charFormat||{}));for(var s=0;s<e.length;s++)a[o[s]]&&(i+=e[s]);return i}t.patternMask=function(e,t,i){var o,s;e=(null===(o=null==i?void 0:i.value)||void 0===o?void 0:o.toString())||e.toString();var l=t,c=n({},r);if("object"==typeof t&&(l="function"==typeof t.pattern?t.pattern(e):t.pattern,c=n(n({},c),t.charFormat||{})),s=function(e,t,i){if(void 0===i&&(i={}),!e)return"";var o="",a=0,s=!1,l=!1;i=n(n({},r),i);for(var c=0;c<t.length;c++){var u=i[d=t[c]];if(u){for(;a<e.length&&!u.test(e[a]);)a++;if(!(a<e.length))break;o+=e[a],a++,s=!0}else a<e.length&&(o+=d,e.length>1&&e[a]===d&&a++)}for(c=o.length;c<t.length;c++)if(i[t[c]]){l=!0;break}if(!l)for(c=o.length;c<t.length;c++){var d;if(i[d=t[c]])break;o+=d}if(l&&o.length>0&&!i[t[o.length-1]]){for(var h=o.length-1;h>=0&&!i[t[h]];)h--;o=o.substring(0,h+1)}return s||(o=""),o}(e,l,c),i){var u=a(i.value,t),d=a(s,t),h=i.selectionStart||0;if(u.length===d.length)if(u!==d)for(;h<l.length&&!c[l[h-1]]||0===h&&!c[l[h]];)h++;else for(;h>0&&!c[l[h-1]];)h--;else if(u.length<d.length)for(;h<l.length&&!c[l[h-1]]||0===h&&!c[l[h]];)h++;0===h&&(h=s.length),i.value=s,i.setSelectionRange(h,h),i.focus()}return s},t.removePatternMask=a},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(143),t),o(i(81),t)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NavigationBarEvents=t.DataEvents=void 0;var n,o=i(11);Object.defineProperty(t,"DataEvents",{enumerable:!0,get:function(){return o.DataEvents}}),function(e){e.inputCreated="inputCreated",e.click="click",e.openMenu="openMenu",e.beforeHide="beforeHide",e.afterHide="afterHide",e.inputFocus="inputFocus",e.inputBlur="inputBlur",e.inputChange="inputChange",e.input="input",e.keydown="keydown"}(n||(t.NavigationBarEvents=n={}))},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ActionsManager=t.actions=void 0;var o=i(0),r=i(5),a=i(187),s=i(188),l=i(189),c=i(190),u=i(191),d=i(192),h=i(193),f=i(194),p=i(195),v=i(196),g=i(197),_=i(198),m=i(199),y=i(200),b=i(201),w=i(202),x=i(203),C=i(204),E=i(205),S=i(2),I=i(206),k=i(207),O=i(208),M=i(209),R=i(210),A=i(211),P=i(212),T=i(213),D=i(214);t.actions={setCellStyle:y.SetCellStyle,setCellValue:b.SetCellValue,setCellFormat:m.SetCellFormat,removeCellStyles:g.RemoveCellStyles,lockCell:v.LockCell,deleteRow:u.DeleteRow,addRow:s.AddRow,deleteColumn:c.DeleteColumn,addColumn:a.AddColumn,groupAction:h.GroupAction,groupRowAction:p.GroupRowAction,groupColAction:f.GroupColAction,addSheet:l.AddSheet,deleteSheet:d.DeleteSheet,renameSheet:_.RenameSheet,clear:w.Clear,clearSheet:x.ClearSheet,resizeCol:C.ResizeCol,resizeRow:E.ResizeRow,setValidation:I.SetValidation,sortCells:k.SortCells,insertLink:O.InsertLink,fitColumn:M.FitColumn,filter:R.Filter,merge:A.Merge,unmerge:P.Unmerge,toggleFreeze:T.Freeze,toggleVisibility:D.Hide};var F=function(){function e(e){this._config=e,this._actions=[],this._redoActions=[],this._sheets=[],this._redoSheets=[],this._dataStore=e.store.dataStore,this._events=e.events}return e.prototype.execute=function(e,i){if(Array.isArray(e)){var a=function(e,i,o){var a,s={},l={},c=e.map((function(e){var o=e.groupAction||e.action;if(a||(a=e.page),o){(0,S.getCellsArray)(e.cell).forEach((function(t){if(!s[t]){var i=n({},(0,S.getCellInfo)(t,e.page));s[t]=i}}));var r=n({},e.page.getMeta());return l=n(n({},r),{merged:new Map(r.merged)}),new t.actions[o](n(n({},e),i))}}));return{do:function(){var e=c.map((function(e){return(0,S.cleanActionConfig)(e.config)}));o.fire(r.SpreadsheetEvents.beforeAction,[r.Actions.groupAction,e])&&(c.map((function(e){return e.do()})),o.fire(r.SpreadsheetEvents.afterAction,[r.Actions.groupAction,e]))},undo:function(){var e=c.map((function(e){return(0,S.cleanActionConfig)(e.config)}));a.setMeta(l),o.fire(r.SpreadsheetEvents.beforeAction,[r.Actions.groupAction,e])&&(Object.keys(s).forEach((function(e){var t=(0,S.getCellIds)(e),i=t.row,n=t.col,o=s[e],r=a.getCell(i,n)||{},l={};Object.keys(r).forEach((function(e){l[e]=o[e]||null})),a.setCell(i,n,l)})),a.setMeta(n(n({},l),{merged:new Map(l.merged)})),o.fire(r.SpreadsheetEvents.afterAction,[r.Actions.groupAction,e]))},config:i}}(e,this._config,this._events);return a.do(),this._actions.push({command:r.Actions.groupAction,action:a}),void this._sheets.push(this._config.spreadsheet.activeSheetName)}if((0,o.extend)(i,this._config),t.actions[e]){var s=new t.actions[e](i);if(!this._events.fire(r.SpreadsheetEvents.beforeAction,[e,(0,S.cleanActionConfig)(i)]))return;s.do(),i.action===r.Actions.addSheet||i.action===r.Actions.deleteSheet||i.action===r.Actions.renameSheet?this._sheets.push(null):this._sheets.push(this._config.spreadsheet.activeSheetName),this._actions.push({command:e,action:s}),e!==r.Actions.resizeCol&&e!==r.Actions.resizeRow&&this._events.fire(r.SpreadsheetEvents.afterAction,[e,(0,S.cleanActionConfig)(i)])}},e.prototype.undo=function(){var e=this._actions[this._actions.length-1];if(e){var t=e.command,i=e.action;if(t!==r.Actions.groupAction&&!this._events.fire(r.SpreadsheetEvents.beforeAction,[t,(0,S.cleanActionConfig)(i.config),!0]))return;this._actions.pop(),i.undo();var n=this._sheets.pop();if(n){var o=this._dataStore.getPage(n);this._config.spreadsheet._changeSheet(o.getMeta().id)}this._redoActions.push({command:t,action:i}),this._redoSheets.push(n),t!==r.Actions.resizeCol&&t!==r.Actions.resizeRow&&t!==r.Actions.groupAction&&this._events.fire(r.SpreadsheetEvents.afterAction,[t,(0,S.cleanActionConfig)(i.config)])}},e.prototype.redo=function(){var e=this._redoActions[this._redoActions.length-1];if(e){var t=e.command,i=e.action;if(t!==r.Actions.groupAction&&!this._events.fire(r.SpreadsheetEvents.beforeAction,[t,(0,S.cleanActionConfig)(i.config),!0]))return;this._redoActions.pop(),i.do();var n=this._redoSheets.pop();if(n){var o=this._dataStore.getPage(n);this._config.spreadsheet._changeSheet(o.getMeta().id)}this._actions.push({command:t,action:i}),this._sheets.push(n),t!==r.Actions.resizeCol&&t!==r.Actions.resizeRow&&t!==r.Actions.groupAction&&this._events.fire(r.SpreadsheetEvents.afterAction,[t,(0,S.cleanActionConfig)(i.config)])}},e}();t.ActionsManager=F},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Input=t.Validation=void 0;var s,l=i(1),c=i(0),u=i(40),d=i(7),h=i(14),f=i(4),p=i(6);!function(e){e.empty="",e.validEmail="email",e.validInteger="integer",e.validNumeric="numeric",e.validAlphaNumeric="alphanumeric",e.validIPv4="IPv4"}(s||(t.Validation=s={}));var v=function(e){function t(t,i){void 0===i&&(i={});var n=e.call(this,null,i)||this;return n.events=new f.EventSystem,n._propsItem=["inputType","required","validation","icon","placeholder","autocomplete","readOnly","maxlength","minlength","min","max","step","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage","numberMask","patternMask"],n._props=a(a([],d.baseProps,!0),n._propsItem,!0),n._initView(i),n._initHandlers(),n}return o(t,e),t.prototype.destructor=function(){var t;null===(t=this._input)||void 0===t||t.removeEventListener("compositionend",this._handlers.oninput),this.events&&this.events.clear(),this.unmount(),e.prototype._destructor.call(this),this.events=this._uid=this._propsItem=this._propsItem=this.config=this._handlers=null},t.prototype.setProperties=function(e){if(e&&!(0,c.isEmptyObj)(e)&&this.events.fire(p.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.events.fire(p.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(p.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(p.ItemEvent.afterShow,[t]))},t.prototype.hide=function(e){var t=this.config,i=t.value;t.hidden&&!e||!this.events.fire(p.ItemEvent.beforeHide,[i,e])||(this.config.hidden=!0,this.events.fire(p.ItemEvent.afterHide,[i,e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.disable=function(){this.config.disabled=!0,this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return!!this.config.disabled},t.prototype.validate=function(e){void 0===e&&(e=!1);for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=t.length?t[0]:this.getValue();if(!e&&!this.events.fire(p.ItemEvent.beforeValidate,[n]))return!1;var o=this.config.validation?(0,d.validateInput)(n,this.config.validation):(0,d.baseInputValidate)(n,this.config);return e||(this.setValidationStatus(o?"success":"error"),this.events.fire(p.ItemEvent.afterValidate,[n,o]),!this.isFocused()&&this.paint()),o},t.prototype.clearValidate=function(){this.setValidationStatus(),this.paint()},t.prototype.clear=function(){""!==this.config.value&&this.events.fire(p.ItemEvent.beforeChange,[""])&&(this.config.value="",this.events.fire(p.ItemEvent.change,[this.getValue()]),(0,d.isVerify)(this.config)&&this.setValidationStatus(this.validate(!0)?"success":"error"))},t.prototype.setValue=function(e){void 0!==e&&this.config.value!==e&&this.events.fire(p.ItemEvent.beforeChange,[e])&&(this.config.value=e,this.events.fire(p.ItemEvent.change,[this.getValue()]),(0,d.isVerify)(this.config)&&this.validate())},t.prototype.getValue=function(){var e=this.config,t=e.inputType,i=e.value;return"number"===t&&"number"==typeof i||null===i?i:"number"===t&&"string"==typeof i?i.length?Number(i):"":"string"==typeof i?i.length?i:"":void 0===i?"":String(i)},t.prototype.getText=function(){var e,t,i,n;return(null===(n=null===(i=null===(t=null===(e=this.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.input)||void 0===i?void 0:i.el)||void 0===n?void 0:n.value)||this._applyValuePattern(this.config.value)},t.prototype.isFocused=function(){var e,t,i;return(null===(i=null===(t=null===(e=this.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.input)||void 0===i?void 0:i.el)===document.activeElement},t.prototype.focus=function(){var e=this;(0,l.awaitRedraw)().then((function(){e.getRootView().refs.input.el.focus()}))},t.prototype.blur=function(){var e=this;(0,l.awaitRedraw)().then((function(){e.getRootView().refs.input.el.blur()}))},t.prototype._initView=function(e){if((0,c.isEmptyObj)(e))throw new Error("Check the configuration is correct");for(var t in this.config={type:"input",id:e.id,name:e.name,value:"",disabled:!1,hidden:!1,inputType:"text",required:!1,icon:"",placeholder:"",autocomplete:!1,readOnly:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content",numberMask:!1},e)"id"!==t&&"type"!==t&&"name"!==t&&(this.config[t]=e[t]);if(this.config.numberMask&&"number"===this.config.inputType){var i={maxIntLength:16,maxDecLength:2};"boolean"==typeof this.config.numberMask?this.config.numberMask=i:this.config.numberMask=r(r({},i),this.config.numberMask)}this._value=this.config.value,this.paint()},t.prototype._initHandlers=function(){var e=this;this.events.on(p.ItemEvent.change,(function(t){e._value=t,e.paint()}))},t.prototype._getHandlers=function(){var e=this;return{oninput:function(t){t.isComposing||(e._value=e._removeValuePattern(t.target.value),e._applyValuePattern(e._value,t.target),e.events.fire(p.ItemEvent.input,["number"===e.config.inputType?Number(e._value):e._value]))},onchange:function(t){e._value=e._removeValuePattern(t.target.value,!0),e._value!==e.config.value&&e.setValue(e._value)},onfocus:function(){e.events.fire(p.ItemEvent.focus,[e.getValue()]),e.paint()},onblur:function(){e._uid&&(e.events.fire(p.ItemEvent.blur,[e.getValue()]),e._value!==e.config.value&&e.setValue(e._value),(0,l.awaitRedraw)().then((function(){return e.paint()})))},onkeydown:function(t){"Enter"===t.code&&"input"===e.config.type&&t.preventDefault(),e.events.fire(p.ItemEvent.keydown,[t])}}},t.prototype._draw=function(){var e=this,t=this.config,i=t.id,n=t.disabled,o=t.name,r=t.icon,a=t.placeholder,s=t.required,u=t.inputType,h=t.hidden,f=t.autocomplete,p=t.readOnly,v=t.maxlength,g=t.minlength,_=t.max,m=t.min,y=t.label,b=t.helpMessage,w=h?" dhx_form-group--hidden":"",x=!t.numberMask&&["text","number","password"].includes(u)?u:"text",C=this._applyValuePattern(this._value,null,!0);return(0,l.el)("div.dhx_form-group",{class:(0,d.getFormItemCss)(this.config,(0,d.isVerify)(this.config),this.isFocused())+w},[this._drawLabel(),(0,l.el)(".dhx_input__wrapper",{},[(0,l.el)("div.dhx_input__container",{},[this.config.icon?(0,l.el)(".dhx_input__icon",{class:this.config.icon}):null,(0,l.el)("input.dhx_input",{type:x,"data-dhx-id":o||i,id:i||this._uid,_key:i||this._uid,placeholder:a||"",value:C,name:o||"",disabled:n,required:s,readOnly:p,maxlength:v,minlength:g,max:_,min:m,onblur:this._handlers.onblur,oninput:this._handlers.oninput,onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onkeydown:this._handlers.onkeydown,class:r?"dhx_input--icon-padding":"",autocomplete:f?"on":"off",_ref:"input","aria-label":y||b||"type ".concat(o||u||"text"),"aria-describedby":b?"dhx_label__help_".concat(i||this._uid):null,_hooks:{didRecycle:function(t,i){e.isFocused()&&(0,c.isDefined)(e._value)&&e._applyValuePattern(e._value,i.el,!0)},didInsert:function(t){e._input=t.el,e._input.addEventListener("compositionend",e._handlers.oninput)}}})]),(0,d.getValidationMessage)(this.config)&&(0,l.el)("span.dhx_input__caption",(0,d.getValidationMessage)(this.config))])])},t.prototype._applyValuePattern=function(e,t,i){return void 0===i&&(i=!1),this.config.numberMask?(0,u.numberMask)(e.toString(),r(r({},this.config.numberMask),{onlyView:i}),t):this.config.patternMask?(0,u.patternMask)(e.toString(),this.config.patternMask,t):e},t.prototype._removeValuePattern=function(e,t){return void 0===t&&(t=!1),this.config.numberMask?(0,u.removeNumberMask)(e,r(r({},this.config.numberMask),{lastCall:t})):this.config.patternMask?(0,u.removePatternMask)(e,this.config.patternMask):e},t}(h.Label);t.Input=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={dragAndDrop:"Drag & drop",or:"or",grid:"Grid",list:"List",browse:"Browse files",filesOrFoldersHere:"files or folders here",cancel:"Cancel",clearAll:"Clear all",clearAllSelected:"Clear selected",clear:"Clear",add:"Add",upload:"Upload",download:"Download",error:"error",byte:"B",kilobyte:"KB",megabyte:"MB",gigabyte:"GB"}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={cancel:"Cancel",select:"Select",rightClickToDelete:"Right click to delete",customColors:"Custom colors",addNewColor:"Add new color"}},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(109),t),o(i(264),t)},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.WindowEvents=void 0,function(e){e.resize="resize",e.headerDoubleClick="headerdoubleclick",e.move="move",e.afterShow="aftershow",e.afterHide="afterhide",e.beforeShow="beforeshow",e.beforeHide="beforehide"}(n||(t.WindowEvents=n={}))},function(e,t,i){"use strict";var n,o,r;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageContainerPosition=t.Position=t.RealPosition=void 0,function(e){e.left="left",e.right="right",e.top="top",e.bottom="bottom",e.center="center"}(n||(t.RealPosition=n={})),function(e){e.right="right",e.bottom="bottom",e.center="center",e.left="left",e.top="top"}(o||(t.Position=o={})),function(e){e.topLeft="top-left",e.topRight="top-right",e.bottomLeft="bottom-left",e.bottomRight="bottom-right"}(r||(t.MessageContainerPosition=r={}))},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.ajax=void 0;var n=i(26),o=i(27);function r(e){return e?e.includes("json")?"json":e.includes("xml")?"xml":"text":"text"}function a(t,i,a,s,l){var c=s||{};if(l&&(c.Accept="application/"+l),"GET"!==a&&(c["Content-Type"]=c["Content-Type"]||"application/json"),"GET"===a){var u=i&&"object"==typeof i?function(e){return Object.keys(e).reduce((function(t,i){var n="object"==typeof e[i]?JSON.stringify(e[i]):e[i];return t.push(i+"="+encodeURIComponent(n)),t}),[]).join("&")}(i):i&&"string"==typeof i?i:"";u&&(t+=t.includes("?")?"&":"?",t+=u),i=null}return window.fetch?("application/json"===c["Content-Type"]&&i&&"object"==typeof i&&(i=JSON.stringify(i)),window.fetch(t,{method:a,body:i||null,headers:c}).then((function(t){if(!t.ok)return t.text().then((function(i){return e.reject({status:t.status,statusText:t.statusText,message:i})}));var i=l||r(t.headers.get("Content-Type"));if("raw"===i)return{headers:Object.fromEntries(t.headers.entries()),url:t.url,body:t.body};if(204!==t.status)switch(i){case"json":return t.json();case"xml":var a=(0,o.toDataDriver)(n.DataDriver.xml);return a?t.text().then((function(e){return a.toJsonObject(e)})):t.text();default:return t.text()}}))):new e((function(e,s){var u=new XMLHttpRequest;for(var d in u.onload=function(){u.status>=200&&u.status<300?("raw"===l&&e({url:u.responseURL,headers:u.getAllResponseHeaders().trim().split(/[\r\n]+/).reduce((function(e,t){var i=t.split(": ");return e[i[0]]=i[1],e}),{}),body:u.response}),204===u.status?e():e(function(e,t){switch(t){case"json":return JSON.parse(e);case"text":default:return e;case"xml":var i=(0,o.toDataDriver)(n.DataDriver.xml);return i?i.toJsonObject(e):{parseError:"Incorrect data driver type: 'xml'"}}}(u.responseText,l||r(u.getResponseHeader("Content-Type"))))):s({status:u.status,statusText:u.statusText})},u.onerror=function(){s({status:u.status,statusText:u.statusText,message:u.responseText})},u.open(a,t),c)u.setRequestHeader(d,c[d]);switch(a){case"POST":case"DELETE":case"PUT":u.send(void 0!==i?JSON.stringify(i):"");break;default:u.send()}}))}t.ajax={get:function(e,t,i){return a(e,t,"GET",i&&i.headers,void 0!==i?i.responseType:void 0)},post:function(e,t,i){return a(e,t,"POST",i&&i.headers,void 0!==i?i.responseType:void 0)},put:function(e,t,i){return a(e,t,"PUT",i&&i.headers,void 0!==i?i.responseType:void 0)},delete:function(e,t,i){return a(e,t,"DELETE",i&&i.headers,void 0!==i?i.responseType:void 0)}}}).call(this,i(15))},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(72),t),o(i(91),t),o(i(169),t),o(i(8),t),o(i(31),t),o(i(17),t),o(i(20),t)},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(144),t),o(i(80),t)},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.Layout=void 0;var r=i(55),a=i(74),s=i(1),l=function(e){function t(t,i){var n=e.call(this,t,i)||this;if(n._root=n.config.parent||n,n._all={},n._parseConfig(),n._progress=!1,n.config.activeTab&&(n.config.activeView=n.config.activeTab),n.config.views&&(n.config.activeView=n.config.activeView||n._cells[0].id,n._isViewLayout=!0),!i.parent){var o=(0,s.create)({render:function(){return n._root&&n.toVDOM()}},n);n.mount(t,o)}return n}return o(t,e),t.prototype.destructor=function(){if(this.unmount(),this.config){for(var e=0,t=this._cells;e<t.length;e++){var i=t[e];null==i||i.destructor()}this.config=this._cells=this._root=this._xLayout=this._isViewLayout=null,this._all={}}},t.prototype.toVDOM=function(){var t;if(this._isViewLayout){var i=[this.getCell(this.config.activeView).toVDOM()];return e.prototype.toVDOM.call(this,i)}var n=[];return this._inheritTypes(),null===(t=this._cells)||void 0===t||t.forEach((function(e){var t=e.toVDOM();Array.isArray(t)?n=n.concat(t):n.push(t)})),e.prototype.toVDOM.call(this,n)},t.prototype.removeCell=function(e){if(this.events.fire(r.LayoutEvents.beforeRemove,[e])){var t=this.config.parent||this;if(t===this){var i=this.getCell(e);if(i){var n=i.getParent();delete this._all[e],n._cells=n._cells.filter((function(t){return t.id!=e})),n.paint()}this.events.fire(r.LayoutEvents.afterRemove,[e])}else t.removeCell(e)}},t.prototype.addCell=function(e,t){if(void 0===t&&(t=-1),this.events.fire(r.LayoutEvents.beforeAdd,[e.id])){var i=this._createCell(e);t<0&&(t=this._cells.length+t+1),this._cells.splice(t,0,i),this.paint(),this.events.fire(r.LayoutEvents.afterAdd,[e.id])}},t.prototype.getId=function(e){return e<0&&(e=this._cells.length+e),this._cells[e]?this._cells[e].id:void 0},t.prototype.getRefs=function(e){var t;return null===(t=this._root.getRootView().refs)||void 0===t?void 0:t[e]},t.prototype.getCell=function(e){var t;return null===(t=this._root)||void 0===t?void 0:t._all[e]},t.prototype.forEach=function(e,t,i){if(void 0===i&&(i=1/0),this._haveCells(t)&&!(i<1)){var n;n=t?this._root._all[t]._cells:this._root._cells;for(var o=0;o<n.length;o++){var r=n[o];e.call(this,r,o,n),this._haveCells(r.id)&&r.forEach(e,r.id,--i)}}},t.prototype.cell=function(e){return this.getCell(e)},t.prototype.progressShow=function(){this._progress=!0,this.paint()},t.prototype.progressHide=function(){this._progress=!1,this.paint()},t.prototype._getCss=function(t){var i=this._xLayout?"dhx_layout-columns":"dhx_layout-rows",n=this.config.align?" "+i+"--"+this.config.align:"";if(t)return i+" dhx_layout-cell"+(this.config.align?" dhx_layout-cell--"+this.config.align:"");var o=this.config.parent?e.prototype._getCss.call(this):"dhx_widget dhx_layout",r=this.config.parent?"":" dhx_layout-cell";return o+(this.config.full?r:" "+i)+n},t.prototype._parseConfig=function(){var e=this,t=this.config,i=t.rows||t.cols||t.views||[];this._xLayout=!t.rows,this._cells=i.map((function(t){return e._createCell(t)}))},t.prototype._createCell=function(e){var i;return e.rows||e.cols||e.views?(e.parent=this._root,i=new t(this,e)):i=new a.Cell(this,e),this._root._all[i.id]=i,e.init&&e.init(i,e),i},t.prototype._haveCells=function(e){if(e){var t=this._root._all[e];return t._cells&&t._cells.length>0}return Object.keys(this._all).length>0},t.prototype._inheritTypes=function(e){var t=this;if(void 0===e&&(e=this._cells),Array.isArray(e))e.forEach((function(e){return t._inheritTypes(e)}));else{var i=null==e?void 0:e.config;if((null==i?void 0:i.rows)||(null==i?void 0:i.cols)){var n=e.getParent();!i.type&&n&&(n.config.type?i.type=n.config.type:this._inheritTypes(n))}}},t}(a.Cell);t.Layout=l},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutEvents=void 0,function(e){e.beforeShow="beforeShow",e.afterShow="afterShow",e.beforeHide="beforeHide",e.afterHide="afterHide",e.beforeResizeStart="beforeResizeStart",e.resize="resize",e.afterResizeEnd="afterResizeEnd",e.beforeAdd="beforeAdd",e.afterAdd="afterAdd",e.beforeRemove="beforeRemove",e.afterRemove="afterRemove",e.beforeCollapse="beforeCollapse",e.afterCollapse="afterCollapse",e.beforeExpand="beforeExpand",e.afterExpand="afterExpand"}(n||(t.LayoutEvents=n={}))},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(82),t),o(i(158),t),o(i(87),t)},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ListEvents=void 0,function(e){e.click="click",e.doubleClick="doubleclick",e.focusChange="focuschange",e.beforeEditStart="beforeEditStart",e.afterEditStart="afterEditStart",e.beforeEditEnd="beforeEditEnd",e.afterEditEnd="afterEditEnd",e.itemRightClick="itemRightClick",e.itemMouseOver="itemMouseOver",e.contextmenu="contextmenu"}(n||(t.ListEvents=n={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={total:"Total",groupText:"Group",dropAreaTitle:"Group by:",dropAreaPlaceholder:"Drag the column header here"}},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(96),t),o(i(260),t),o(i(6),t)},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Toolbar=void 0;var a=i(0),s=i(1),l=i(3),c=i(19),u=i(22),d=function(e){function t(t,i){var n=e.call(this,t,(0,a.extend)({navigationType:"click",$name:"toolbar"},i))||this;n._currentRoot=null;return n.mount(t,(0,s.create)({render:function(){return n._draw(t)}})),n}return o(t,e),t.prototype.getState=function(e){if(!(0,a.isDefined)(e)||this.data.getItem(e)){var t={};for(var i in this.data.eachChild(this.data.getRoot(),(function(e){e.twoState&&!e.group?t[e.id]=e.active:"input"!==e.type&&"selectButton"!==e.type&&"datePicker"!==e.type||(t[e.id]=e.value)}),!1),this._groups)this._groups[i].active&&(t[i]=this._groups[i].active);return(0,a.isId)(e)?t[e]:t}},t.prototype.setState=function(e){var t,i=function(i){if(n._groups&&n._groups[i])n._groups[i].active&&(n.data.update(n._groups[i].active,{active:!1}),n._groups[i].active=e[i],n.data.update(e[i],{active:!0}));else{var o=n.data.getItem(i);switch(o.type){case"input":n.data.update(i,{value:e[i]});break;case"selectButton":var r=null===(t=o.items)||void 0===t?void 0:t.find((function(t){return t.value===e[i]}));n.data.update(i,{value:e[i],icon:null==r?void 0:r.icon});break;case"datePicker":o.$calendar?e[i]?o.$calendar.setValue(e[i]):o.$calendar.clear():n.data.update(i,{value:e[i]});break;default:n.data.update(i,{active:e[i]})}}},n=this;for(var o in e)i(o)},t.prototype.setFocus=function(e){if(this.data.getItem(e)&&"input"===this.data.getItem(e).type){var t=this.getRootNode().querySelector('[data-dhx-id="'.concat(e,'"]'));t&&t.focus()}},t.prototype._customHandlers=function(){var e=this;return{input:function(t){var i=(0,l.locate)(t),n=e.data.getItem(i);if(n){var o=t.target.value;e.data.update(i,{value:o}),"input"===n.type&&e.events.fire(u.NavigationBarEvents.input,[i,o])}},tooltip:function(t){var i=(0,l.locateNode)(t);if(i){var n=i.getAttribute("data-dhx-id"),o=e.data.getItem(n);(null==o?void 0:o.tooltip)&&(0,c.tooltip)(o.tooltip,{node:i,position:c.Position.bottom})}}}},t.prototype._getFactory=function(){return(0,u.createFactory)({widget:this,defaultType:"navItem",allowedTypes:["button","imageButton","selectButton","navItem","menuItem","separator","spacer","title","input","customHTML","datePicker","customHTMLButton"],widgetName:"toolbar"})},t.prototype._draw=function(e){var t=this,i=this.data.getLength()?this.data.reduce((function(e,t){switch(t.type){case"title":return e||20;case"button":return"small"===t.size&&(!e||e<=28)?28:e||32;default:return 32}}),0)+24:null;return(0,s.el)("nav.dhx_widget.dhx_toolbar",{style:{height:i},class:this.config.css?this.config.css:""},[(0,s.el)("ul.dhx_navbar.dhx_navbar--horizontal",r(r({"data-dhx-widget-id":this._uid,tabindex:0},function(e){return{role:"toolbar","aria-label":e||""}}(e)),{onclick:this._handlers.onclick,onmousedown:this._handlers.onmousedown,oninput:this._handlers.input,onmouseover:this._handlers.tooltip,onkeydown:this._handlers.onkeydown,onmousemove:this._handlers.onmousemove,onmouseleave:this._handlers.onmouseleave,_hooks:{didInsert:function(e){e.el.addEventListener("keyup",(function(e){if(9===e.which){var i=(0,l.locateNode)(document.activeElement);if(i){var n=i.getAttribute("data-dhx-id"),o=t.data.getItem(n);(null==o?void 0:o.tooltip)&&(0,c.tooltip)(o.tooltip,{node:i,position:c.Position.bottom,force:!0})}}}),!0)}}}),this.data.map((function(e){return t._factory(e)}),this.data.getRoot(),!1))])},t.prototype._getMode=function(e,t){return e.id===t?"bottom":"right"},t.prototype._close=function(t){this._activePosition=null,this._currentRoot=null,e.prototype._close.call(this,t)},t.prototype._setRoot=function(e){this.data.getParent(e)===this.data.getRoot()&&(this._currentRoot=e)},t}(u.Navbar);t.Toolbar=d},function(e,t,i){"use strict";function n(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,i,n){return t+t+i+i+n+n}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function o(e){var t,i,n=e.r/255,o=e.g/255,r=e.b/255,a=Math.max(n,o,r),s=a-Math.min(n,o,r),l=function(e){return(a-e)/6/s+.5};if(0===s)t=i=0;else{i=s/a;var c=l(n),u=l(o),d=l(r);n===a?t=d-u:o===a?t=1/3+c-d:r===a&&(t=2/3+u-c),t<0?t+=1:t>1&&(t-=1)}return{h:360*t,s:i,v:a}}Object.defineProperty(t,"__esModule",{value:!0}),t.getAlpha=t.alphaToHex=t.isHex=t.HexToHSV=t.RGBToHSV=t.HexToRGB=t.RGBToHex=t.HSVtoRGB=void 0,t.HSVtoRGB=function(e){var t={r:0,g:0,b:0},i=e.h/60,n=e.s,o=e.v,r=Math.floor(i)%6,a=i-Math.floor(i),s=255*o*(1-n),l=255*o*(1-n*a),c=255*o*(1-n*(1-a));switch(o*=255,r){case 0:t.r=o,t.g=c,t.b=s;break;case 1:t.r=l,t.g=o,t.b=s;break;case 2:t.r=s,t.g=o,t.b=c;break;case 3:t.r=s,t.g=l,t.b=o;break;case 4:t.r=c,t.g=s,t.b=o;break;case 5:t.r=o,t.g=s,t.b=l}for(var u in t)t[u]=Math.round(t[u]);return t},t.RGBToHex=function(e){return Object.keys(e).reduce((function(t,i){var n=e[i].toString(16).toUpperCase();return t+(n=1===n.length?"0"+n:n)}),"#")},t.HexToRGB=n,t.RGBToHSV=o,t.HexToHSV=function(e){return o(n(9===e.length?e.slice(0,-2):e))},t.isHex=function(e){return/(^#[0-9A-F]{8}$)|(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},t.alphaToHex=function(e){var t=Math.round(255*e).toString(16).toUpperCase();return 1===t.length?"0"+t:t},t.getAlpha=function(e){return 9===e.length?Number((parseInt(e.slice(-2),16)/255).toFixed(2)):1}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setLocale=void 0,t.setLocale=function(e,t){var i=this[e];if(i)for(var n in t)i[n]=t[n]}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={apply:"apply",reject:"reject"}},function(e,t,i){"use strict";function n(e){var t=document.activeElement;t.classList.contains("dhx_alert__apply-button")&&"Enter"===e.key||t.classList.contains("dhx_alert__confirm-reject")||t.classList.contains("dhx_alert__confirm-aply")||e.preventDefault()}Object.defineProperty(t,"__esModule",{value:!0}),t.blockScreen=void 0,t.blockScreen=function(e){var t=document.createElement("div");return t.className="dhx_alert__overlay "+(e||""),document.body.appendChild(t),document.addEventListener("keydown",n),function(){document.body.removeChild(t),document.removeEventListener("keydown",n)}}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.disableTooltip=t.enableTooltip=t.tooltip=t.getZIndex=t.findPosition=void 0;var o=i(3),r=i(49),a=750,s=200;function l(e,t,i,n,o,a){var s,c,u;if(void 0===o&&(o=8),void 0===a&&(a=0),a>1&&(t=r.Position.center),"top"!==t&&"bottom"!==t){var d=e.top+(e.height-n)/2,h=d<0&&window.pageYOffset+d+n<scrollY+window.innerHeight;u=window.pageYOffset+(h?0:d)}switch(t){case r.Position.center:return(c=e.left+window.pageXOffset+(e.width-i)/2)+o<window.pageXOffset&&(c=e.left+window.pageXOffset),{left:c,top:u,pos:s=r.RealPosition.center};case r.Position.right:return s=r.RealPosition.right,(c=e.right+window.pageXOffset+o)+i>window.innerWidth+window.pageXOffset?l(e,r.Position.left,i,n,o,++a):{left:c,top:u,pos:s};case r.Position.left:return s=r.RealPosition.left,(c=window.pageXOffset+e.left-i-o)<0?l(e,r.Position.right,i,n,o,++a):{left:c,top:u,pos:s};case r.Position.top:return s=r.RealPosition.top,(c=window.pageXOffset+e.left+(e.width-i)/2)+i>window.innerWidth+window.pageXOffset?c=window.innerWidth+window.pageXOffset-i:c<0&&(c=0),e.top<n?l(e,r.Position.bottom,i,n,o,++a):{left:c,top:u=window.pageYOffset+e.top-n-o,pos:s};case r.Position.bottom:default:return(c=window.pageXOffset+e.left+(e.width-i)/2)+i>window.innerWidth+window.pageXOffset?c=window.innerWidth+window.pageXOffset-i:c<0&&(c=0),s=r.RealPosition.bottom,(u=window.pageYOffset+e.bottom+o)+n>window.innerHeight+window.pageYOffset?l(e,r.Position.top,i,n,o,++a):{left:c,top:u,pos:s}}}t.findPosition=l;var c=document.createElement("div"),u=document.createElement("span");u.className="dhx_tooltip__text",c.appendChild(u),c.setAttribute("role","tooltip"),c.style.position="absolute";var d,h=null,f=!1,p=null,v=null;function g(e){return e&&(e.classList.contains("dhx_popup--window")&&e.classList.contains("dhx_popup--window_active")||e.classList.contains("dhx_popup--window_modal")||e.classList.contains("dhx_popup"))?1e7:(null==e?void 0:e.classList.contains("dhx_popup--window"))?9999999:e&&e.offsetParent?g(e.offsetParent):null}function _(e,t,i,n,o,a,s){void 0===n&&(n=""),void 0===o&&(o=!1),void 0===a&&(a=8);var d=e.getBoundingClientRect();s?u.innerHTML=t:u.textContent=t,c.style.left=null,c.style.top=null,document.body.appendChild(c),c.className="dhx_widget dhx_tooltip ".concat(o?" dhx_tooltip--forced":""," ").concat(n);var h=c.getBoundingClientRect(),p=l(d,i,h.width,h.height,a),v=p.left,_=p.top,m=p.pos,y=g(e);switch(y&&(c.style.zIndex=y.toString()),m){case r.RealPosition.bottom:case r.RealPosition.top:case r.RealPosition.left:case r.RealPosition.right:case r.RealPosition.center:c.style.left=v+"px",c.style.top=_+"px"}c.className+=" dhx_tooltip--".concat(m),f=!0,o||setTimeout((function(){c.className+=" dhx_tooltip--animate"}))}function m(e,t,i){var n=i.force,o=i.showDelay,l=i.hideDelay,u=i.position,g=i.css,m=i.htmlEnable,y=i.margin;n||(v=setTimeout((function(){_(e,t,u||r.Position.bottom,g,!1,y,m)}),o||a));var b=function(){var t;f&&(t=l,h&&(p=setTimeout((function(){document.body.removeChild(c),f=!1,p=null}),t||s))),clearTimeout(v),e.removeEventListener("mouseleave",b),e.removeEventListener("blur",b),document.removeEventListener("mousedown",b),h=null,d=null};n&&_(e,t,u,g,n,y,m),e.addEventListener("mouseleave",b),e.addEventListener("blur",b),document.addEventListener("mousedown",b),d=b}function y(e,t){var i=(0,o.toNode)(t.node);i!==h&&(d&&(d(),d=null),h=i,p?(clearTimeout(p),p=null,m(i,e,n(n({},t),{force:!0}))):m(i,e,t))}function b(e){var t=(0,o.locateNode)(e,"dhx_tooltip_text");t&&y(t.getAttribute("dhx_tooltip_text"),{position:t.getAttribute("dhx_tooltip_position")||r.Position.bottom,node:t})}t.getZIndex=g,t.tooltip=y,t.enableTooltip=function(){document.addEventListener("mousemove",b)},t.disableTooltip=function(){document.removeEventListener("mousemove",b)}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.DataCollection=void 0;var r=i(4),a=i(128),s=i(131),l=i(33),c=i(27),u=i(26),d=i(0),h=i(132),f=function(){function e(e,t){var i=this;this._filters={},this._sortingStates=[],this._changes={order:[]},this.config=e||{},this._group=new h.Group,this._sort=new s.Sort,this._loader=new a.Loader(this,this._changes),this.events=t||new r.EventSystem(this),this.events.on(u.DataEvents.dataRequest,(function(e,t){var n=i.dataProxy;n&&n.updateUrl&&(n.updateUrl(null,{from:e,limit:n.config.limit||t-e}),i.load(n))})),this.events.on(u.DataEvents.loadError,(function(e){setTimeout((function(){"string"!=typeof e?(0,c.dhxError)(e):(0,c.dhxWarning)(e)}),0)})),this._reset()}return e.prototype._reset=function(e){void 0===e&&(e={}),e.grouping||this.ungroup(),this._order=[],this._pull={},this._changes={order:[]},this._initFilterOrder=this._initSortOrder=null,this._meta=new WeakMap,this._loaded=!1},e.prototype.group=function(e,t){void 0===t&&(t={}),e||(0,c.dhxError)("The group method has mandatory arguments"),Array.isArray(e)||(0,c.dhxError)("The group method expects an array as an argument"),e.length||(0,c.dhxError)("The array with the group method values cannot be empty"),this.isGrouped()&&this.ungroup();var i=this._group.getGroupConfig(t);this.events.fire(u.DataEvents.beforeGroup,[i])&&(this._parse(this._group.group(e,(null==t?void 0:t.data)||this._order,t),u.DataDriver.json,!0),this.events.fire(u.DataEvents.afterGroup,[this._group.getGroupedFields(),i]))},e.prototype.ungroup=function(){if(this.isGrouped()){var e=this._group.getGroupedFields(),t=this._group.getGroupConfig();this.events.fire(u.DataEvents.beforeUnGroup,[e,t])&&(this._parse(this._group.ungroup(this._order)),this.events.fire(u.DataEvents.afterUnGroup,[e,t]))}},e.prototype.isGrouped=function(){return this._group.isGrouped()},e.prototype.add=function(e,t){var i,n=this;if(this.events.fire(u.DataEvents.beforeAdd,[e]))return i=Array.isArray(e)?e.map((function(e,i){return 0!==i&&t>=0&&(t+=1),n._add((0,d.copy)(e),t)})):this._add((0,d.copy)(e),t),this._reapplyFilters(),i},e.prototype.remove=function(e){var t=this;e instanceof Array?o([],e,!0).map((function(e){t._remove(e)})):(0,d.isId)(e)&&this._remove(e)},e.prototype.removeAll=function(){this._reset(),this.events.fire(u.DataEvents.removeAll),this.events.fire(u.DataEvents.change)},e.prototype.exists=function(e){return!!this._pull[e]},e.prototype.getNearId=function(e){var t;if(!this._pull[e])return(null===(t=this._order[0])||void 0===t?void 0:t.id)||""},e.prototype.getItem=function(e){return this._pull[e]},e.prototype.update=function(e,t,i){var n=this.getItem(e);if(n){if((0,c.isEqualObj)(t,n))return;(0,d.isId)(t.id)&&e!==t.id?((0,c.dhxWarning)("this method doesn't allow changing the id"),(0,c.isDebug)()):(t.parent&&n.parent&&t.parent!==n.parent&&this.move(e,-1,this,t.parent),(0,d.extend)(this._pull[e],t,!1),this.config.update&&this.config.update(this._pull[e]),i||this._onChange("update",e,this._pull[e])),this._reapplyFilters()}else(0,c.dhxWarning)("item not found")},e.prototype.getIndex=function(e){return(0,d.isId)(e)&&(0,d.isDefined)(this._pull[e])?this._order.findIndex((function(t){return(null==t?void 0:t.id)==e})):-1},e.prototype.getId=function(e){if(this._order[e])return this._order[e].id},e.prototype.getLength=function(){return this._order.length},e.prototype.isDataLoaded=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this._order.length),(0,d.isNumeric)(e)&&(0,d.isNumeric)(t)?0===this._order.slice(e,t).filter((function(e){return e&&e.$empty})).length:(this._loaded||(this._loaded=!this.find((function(e){return e.$empty}))),!!this._loaded)},e.prototype.filter=function(e,t,i){var n,o;if((null==t?void 0:t.$restore)&&(e=this._normalizeFilters(e||this._filters)),!(null==t?void 0:t.add)&&(this._order=this._initFilterOrder||this._order,this._initFilterOrder=null,!(null==t?void 0:t.$restore)))for(var r in this._filters){var a=this._filters[r];(null===(n=a.config)||void 0===n?void 0:n.permanent)?this._applyFilters(a.rule):delete this._filters[r]}if(e&&!(null==t?void 0:t.$restore)&&(o=(null==t?void 0:t.id)||(0,d.uid)(),this._filters[o]={rule:e,config:t||{}}),e&&"function"!=typeof e)if((0,d.isDefined)(e.by))this._applyFilters(e);else for(var r in e)this._applyFilters(e[r]);else this._applyFilters(e);if(!i){var s=this._getPureFilters(this._filters);this.events.fire(u.DataEvents.filter,[(0,d.isEmptyObj)(s)?null:s])}return o},e.prototype.resetFilter=function(e,t){var i,n=e||{},o=n.id,r=n.permanent;if((0,d.isEmptyObj)(e))for(var a in this._filters)(null===(i=this._filters[a].config)||void 0===i?void 0:i.permanent)||delete this._filters[a];else r?this._filters={}:o&&delete this._filters[o];return this.filter(null,{$restore:!0},t),(0,d.isEmptyObj)(this._getPureFilters(this._filters))},e.prototype.getFilters=function(e){var t=this.getRawFilters(e),i=t?this._getPureFilters(t):{};return(0,d.isEmptyObj)(i)?null:i},e.prototype.getRawFilters=function(e){var t=this._filters;return(null==e?void 0:e.permanent)&&(t=Object.keys(t).reduce((function(e,i){var n;return(null===(n=t[i].config)||void 0===n?void 0:n.permanent)&&(e[i]=t[i]),e}),{})),(0,d.isEmptyObj)(t)?null:t},e.prototype.find=function(e){for(var t=this._initFilterOrder||this._order,i=0;i<t.length;i++){var n=(0,c.findByConf)(t[i],e,i,t);if(n)return n}return null},e.prototype.findAll=function(e){for(var t=this._initFilterOrder||this._order,i=[],n=0;n<t.length;n++){var o=(0,c.findByConf)(t[n],e,n,t);o&&i.push(o)}return i},e.prototype.sort=function(e,t,i){var r,a,s=this;if(void 0===i&&(i=!1),this.isDataLoaded()){if((null==t?void 0:t.smartSorting)&&(this._sorter=e),i||this._sortingStates.length&&!(null==t?void 0:t.smartSorting)&&((null===(r=this._sortingStates[0])||void 0===r?void 0:r.smartSorting)||(null==t?void 0:t.smartSorting))||(this._sortingStates=[n(n({},e),t)]),e){if(!i&&(this._initSortOrder=this._initSortOrder||o([],this._initFilterOrder||this._order,!0),!(null==t?void 0:t.smartSorting)&&(null===(a=this._sortingStates[0])||void 0===a?void 0:a.smartSorting))){var l=this._sortingStates.findIndex((function(t){return t.by==e.by}));-1!==l?(this._sortingStates[l].dir=e.dir,this._sortingStates.forEach((function(e,t){s.sort(e,{smartSorting:!t},!0)}))):this._sortingStates.push(e)}this._applySorters(e)}else this._initSortOrder&&(this._sortingStates=[],this._order=this._initSortOrder,this._sorter=this._initSortOrder=null,this._initFilterOrder&&(this._initFilterOrder=null,this.filter(null,{$restore:!0},!0)));i||this.events.fire(u.DataEvents.change,[void 0,"sort",e])}else(0,c.dhxWarning)("the method doesn't work with lazyLoad")},e.prototype.getSortingStates=function(){return this._sortingStates},e.prototype.copy=function(e,t,i,n){var o=this;return e instanceof Array?e.map((function(e,r){return o._copy(e,t,i,n,r)})):this._copy(e,t,i,n)},e.prototype.move=function(e,t,i,n,o){var r,a=this;if(e instanceof Array){var s=[];return e.forEach((function(e,o){(0,d.isId)(a._move(e,t,i,n,o))?s.push(e):(0,c.throwMoveWarning)(e,a.exists(e))})),s}return null!==(r=this._move(e,t,i,n,0,o))&&void 0!==r?r:(0,c.throwMoveWarning)(e,this.exists(e))},e.prototype.forEach=function(e){for(var t=0;t<this._order.length;t++)e.call(this,this._order[t],t,this._order)},e.prototype.load=function(e,t){if("string"==typeof e&&(this.dataProxy=e=new l.DataProxy(e)),"string"==typeof t){var i=t.toLocaleLowerCase();"xml"!==i&&"csv"!==i||(e.config.responseType=e.config.responseType||"text")}return this.dataProxy=e,this._loader.load(e,t)},e.prototype.parse=function(e,t){return this._parse(e,t)},e.prototype.$parse=function(e){var t=this.config.approximate;t&&(e=this._approximate(e,t.value,t.maxNum)),this._parse_data(e),this._reapplyFilters(),this.events.fire(u.DataEvents.change,[void 0,"load"]),this.events.fire(u.DataEvents.load)},e.prototype.save=function(e){"string"==typeof e&&(e=new l.DataProxy(e)),this._loader.save(e)},e.prototype.changeId=function(e,t,i){if(void 0===t&&(t=(0,d.uid)()),e!=t)if(this.exists(t))(0,c.dhxWarning)("item with ID ".concat(t," already exists"));else{var n=this.getItem(e);n?(n.id=t,(0,d.extend)(this._pull[e],n),this._pull[t]=this._pull[e],i||this._onChange("update",t,this._pull[t]),delete this._pull[e]):(0,c.dhxWarning)("item not found")}},e.prototype.isSaved=function(){return!this._changes.order.length},e.prototype.map=function(e){for(var t=[],i=0;i<this._order.length;i++)t.push(e.call(this,this._order[i],i,this._order));return t},e.prototype.mapRange=function(e,t,i){e<0&&(e=0),t>this._order.length-1&&(t=this._order.length-1);for(var n=this._order.slice(e,t+1),o=[],r=e;r<=t;r++)o.push(i.call(this,this._order[r],r,n));return o},e.prototype.reduce=function(e,t){for(var i=0;i<this._order.length;i++)t=e.call(this,t,this._order[i],i);return t},e.prototype.serialize=function(e){void 0===e&&(e=u.DataDriver.json);for(var t=[],i=function(e){var i=n({},o._order[e]);Object.keys(i).forEach((function(e){e.startsWith("$")&&delete i[e]})),(0,d.isDefined)(i.parent)||delete i.parent,t.push(i)},o=this,r=0;r<this._order.length;r++)i(r);var a=(0,c.toDataDriver)(e);if(a)return a.serialize(t)},e.prototype.getInitialData=function(){return this._initFilterOrder},e.prototype.setMeta=function(e,t,i){if(e){var n=this._meta.get(e);n||(n={},this._meta.set(e,n)),n[t]=i}},e.prototype.getMeta=function(e,t){var i=this._meta.get(e);return i?i[t]:null},e.prototype.getMetaMap=function(e){return this._meta.get(e)},e.prototype.setRange=function(e,t){this._range=t?[e,t]:null},e.prototype.getRawData=function(e,t,i,n){if(i=i||this._order,1===n)return i;if(this._range)if(e=this._range[0]+e,-1===t)t=this._range[1];else{var o=Math.abs(t-e);t=e+o>this._range[1]?this._range[1]:e+o}if(!t||0===e&&(-1===t||t===i.length))return i;if(e>=i.length)return[];(-1===t||t>i.length)&&(t=i.length);var r=i.slice(e,t);return 0!==r.filter((function(e){return e.$empty})).length&&this.events.fire(u.DataEvents.dataRequest,[e,t]),r},e.prototype._add=function(e,t){var i=this._addCore(e,t);return this._onChange("add",e.id,e),this.events.fire(u.DataEvents.afterAdd,[e]),i},e.prototype._remove=function(e){var t=this._pull[e];if(t){if(!this.events.fire(u.DataEvents.beforeRemove,[t]))return;this._removeCore(t.id),this._onChange("remove",e,t)}this.events.fire(u.DataEvents.afterRemove,[t])},e.prototype._copy=function(t,i,o,r,a){if(!this.exists(t))return null;var s=(0,d.uid)();return a&&(i=-1===i?-1:i+a),o?o instanceof e||!r?o.exists(t)?(o.add(n(n({},(0,c.copyWithoutInner)(this.getItem(t))),{id:s}),i),s):(o.add((0,c.copyWithoutInner)(this.getItem(t)),i),t):void o.add((0,c.copyWithoutInner)(this.getItem(t)),i):(this.add(n(n({},(0,c.copyWithoutInner)(this.getItem(t))),{id:s}),i),s)},e.prototype._move=function(e,t,i,n,o,r){if(!this.exists(e))return null;if(o&&t<this.getIndex(e)&&(t=-1===t?-1:t+o),i&&i!==this&&this.exists(e)){var a=(0,d.copy)(this.getItem(e),!0);return r&&(a.id=r),(!r&&i.exists(e)||i.exists(r))&&(a.id=(0,d.uid)()),n&&(a.parent=n),i.add(a,t),this.remove(e),a.id}if(this.getIndex(e)===t)return null;var s=this._order.splice(this.getIndex(e),1)[0];return-1===t&&(t=this._order.length),this._order.splice(t,0,s),this.events.fire(u.DataEvents.change,[e,"update",this.getItem(e)]),e},e.prototype._addCore=function(e,t){var i;return this.config.init&&(e=this.config.init(e)),e.id=null!==(i=e.id)&&void 0!==i?i:(0,d.uid)(),this._pull[e.id]&&(0,c.dhxError)("Item ".concat(e.id," already exist")),this._initFilterOrder&&!(0,c.isTreeCollection)(this)&&this._addToOrder(this._initFilterOrder,e,t),this._initSortOrder&&this._addToOrder(this._initSortOrder,e,t),this._addToOrder(this._order,e,t),e.id},e.prototype._removeCore=function(e){this._pull[e]&&(this._order=this._order.filter((function(t){return t.id!==e})),this._initFilterOrder&&this._initFilterOrder.length&&(this._initFilterOrder=this._initFilterOrder.filter((function(t){return t.id!==e}))),this._initSortOrder&&this._initSortOrder.length&&(this._initSortOrder=this._initSortOrder.filter((function(t){return t.id!==e}))),delete this._pull[e])},e.prototype._parse_data=function(e){for(var t=this._order.length,i=0,n=e;i<n.length;i++){var o=n[i];this._addCore(o,t++)}},e.prototype._approximate=function(e,t,i){for(var n=e.length,o=t.length,r=Math.floor(n/i),a=Array(Math.ceil(n/r)),s=0,l=0;l<n;l+=r){for(var c=(0,d.copy)(e[l]),u=Math.min(n,l+r),h=0;h<o;h++){for(var f=0,p=l;p<u;p++)f+=e[p][t[h]];c[t[h]]=f/(u-l)}a[s++]=c}return a},e.prototype._onChange=function(e,t,i){for(var o=0,r=0,a=this._changes.order;r<a.length;r++){var s=a[r],l=this._changes.order.indexOf(s);if(s.id===t&&!s.saving&&(o+=1,l===this._changes.order.length-1||this._changes.order[l+1].id!==t)){if(s.error&&(s.error=!1),s=n(n({},s),{obj:i,status:e}),(o+=1)>10?this._changes.order.splice(l,o-10,s):this._changes.order.splice(l+1,0,s),this._loader.updateChanges(this._changes),"remove"===e&&i.$emptyRow)return;return void this.events.fire(u.DataEvents.change,[t,e,i])}}this._changes.order.push({id:t,status:e,obj:n({},i),saving:!1}),this._loader.updateChanges(this._changes),this.events.fire(u.DataEvents.change,[t,e,i])},e.prototype._addToOrder=function(e,t,i){i>=0&&e[i]?(this._pull[t.id]=t,e.splice(i,0,t)):(this._pull[t.id]=t,e.push(t))},e.prototype._applySorters=function(e){this._sort.sort(this._order,e,this._sorter),this._initFilterOrder&&this._initFilterOrder.length&&this._sort.sort(this._initFilterOrder,e,this._sorter)},e.prototype._applyFilters=function(e){if(e){if(!this._checkFilterRule(e))throw new Error("Invalid filter rule");var t="function"!=typeof e?this._getRuleCallback(e):e,i=this._order.filter((function(e){return t(e)}));this._initFilterOrder||(this._initFilterOrder=this._order),this._order=i}},e.prototype._reapplyFilters=function(){var e=this.getFilters({permanent:!0});e&&this.filter(e,{$restore:!0,add:!0},!0),this._sorter&&this._applySorters()},e.prototype._getRuleCallback=function(e){if((0,d.isDefined)(e.by)&&(0,d.isDefined)(e.match))return e.compare?function(t){return e.compare(t[e.by],e.match,t,e.multi)}:function(t){return t[e.by]==e.match}},e.prototype._getPureFilters=function(e){return Object.keys(e).reduce((function(t,i){var n;return(null===(n=e[i].config)||void 0===n?void 0:n.$local)||(t[i]=e[i]),t}),{})},e.prototype._normalizeFilters=function(e){var t=[];for(var i in e){var o=e[i].rule;if("function"!=typeof o)if((0,d.isDefined)(o.by))t.push(this._getRuleCallback(o));else for(var r in o)t.push(this._getRuleCallback(o[r]));else t.push(o)}return n({},t)},e.prototype._checkFilterRule=function(e){return"function"==typeof e||(0,d.isDefined)(e.by)&&(0,d.isDefined)(e.match)},e.prototype._parse=function(e,t,i){return void 0===t&&(t=u.DataDriver.json),void 0===i&&(i=!1),this._reset({grouping:i}),this._loader.parse(e,t)},e}();t.DataCollection=f},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.dataDriversPro=t.dataDrivers=void 0;var o=i(68),r=i(69),a=i(129);t.dataDrivers={json:o.JsonDriver,csv:r.CsvDriver},t.dataDriversPro=n(n({},t.dataDrivers),{xml:a.XMLDriver})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JsonDriver=void 0;var n=function(){function e(){}return e.prototype.toJsonArray=function(e){return this.getRows(e)},e.prototype.serialize=function(e){return e},e.prototype.getFields=function(e){return e},e.prototype.getRows=function(e){return"string"==typeof e?JSON.parse(e):e},e}();t.JsonDriver=n},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.CsvDriver=void 0;var o=function(){function e(e){this.config=n(n({},{skipHeader:0,nameByHeader:!1,rowDelimiter:"\n",columnDelimiter:","}),e),this.config.nameByHeader&&(this.config.skipHeader=1)}return e.prototype.getFields=function(e,t){for(var i=new RegExp('(?<!")'.concat(this.config.columnDelimiter,'(?!")')),n=e.trim().split(i),o={},r=0;r<n.length;r++)o[t?t[r]:r+1]=isNaN(Number(n[r]))?n[r].replace(/"[,;"]"/gi,(function(e){return e.split("").splice(1,1).slice(-1,1).join("")})):parseFloat(n[r]);return o},e.prototype.getRows=function(e){return e.trim().split(this.config.rowDelimiter)},e.prototype.toJsonArray=function(e){var t=this,i=this.getRows(e),n=this.config.names;if(this.config.skipHeader){var o=i.splice(0,this.config.skipHeader);this.config.nameByHeader&&(n=o[0].trim().split(this.config.columnDelimiter))}return i.map((function(e){return t.getFields(e,n)}))},e.prototype.serialize=function(e,t){var i=e[0]?Object.keys(e[0]).filter((function(e){return!e.startsWith("$")})).join(this.config.columnDelimiter)+this.config.rowDelimiter:"",n=this._serialize(e);return t?n:i+n},e.prototype._serialize=function(e){var t=this;return e.reduce((function(e,i){var n=Object.keys(i),o=n.reduce((function(e,o,r){var a,s;return o.startsWith("$")||"items"===o?e:"".concat(e).concat((null!==(s=null===(a=i[o])||void 0===a?void 0:a.toString())&&void 0!==s?s:"").replaceAll(/[,;"]/gi,(function(e){return'"'.concat(e,'"')}))).concat(r===n.length-1||r!==n.length-1&&n[r+1].startsWith("$")?"":t.config.columnDelimiter)}),"");return i.items?"".concat(e).concat(e?"\n":"").concat(o).concat(t._serialize(i.items)):"".concat(e).concat(e?t.config.rowDelimiter:"").concat(o)}),"")},e}();t.CsvDriver=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.methods=void 0;var n=i(0);t.methods={sum:function(e,t){return parseFloat(e.reduce((function(e,i){return e+(+i[t]||0)}),0).toFixed(12))},avg:function(e,t){return parseFloat((e.reduce((function(e,i){return e+(+i[t]||0)}),0)/e.length).toFixed(12))},count:function(e,t){return void 0===e&&(e=[]),e.filter((function(e){return(0,n.isDefined)(e[t])&&""!==e[t]})).length},min:function(e,t){return Math.min.apply(Math,e.map((function(e){return+e[t]})))},max:function(e,t){return Math.max.apply(Math,e.map((function(e){return+e[t]})))}}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.TreeCollection=t.addToOrder=void 0;var s=i(0),l=i(66),c=i(33),u=i(27),d=i(26);function h(e,t,i,n){void 0!==n&&-1!==n&&e[i]&&e[i][n]?e[i].splice(n,0,t):(e[i]||(e[i]=[]),e[i].push(t))}t.addToOrder=h;var f=function(e){function t(t,i){var n,o=e.call(this,t,i)||this;o._childs={};var r=o._root=t&&t.rootId||"_ROOT_"+(0,s.uid)();return o._childs=((n={})[r]=[],n),o._initChilds=null,o}return o(t,e),t.prototype.add=function(e,t,i){var n,o=this;if(void 0===t&&(t=-1),void 0===i&&(i=this._root),this.events.fire(d.DataEvents.beforeAdd,[e]))return"object"!=typeof e&&(e={value:e}),n=Array.isArray(e)?e.map((function(e,n){return o._add(e,t,i,n)})):this._add(e,t,i),this._reapplyFilters(),n},t.prototype.getRoot=function(){return this._root},t.prototype.getParent=function(e,t){if(void 0===t&&(t=!1),!this._pull[e])return null;var i=this._pull[e].parent;return t?this._pull[i]:i},t.prototype.getItems=function(e){return this._childs&&this._childs[e]?this._childs[e]:[]},t.prototype.getLength=function(e){return void 0===e&&(e=this._root),this._childs[e]?this._childs[e].length:null},t.prototype.removeAll=function(t){var i;if((0,s.isId)(t)){if(this._childs[t])for(var n=0,o=a([],this._childs[t],!0);n<o.length;n++){var r=o[n];this.remove(r.id)}}else{e.prototype.removeAll.call(this);var l=this._root;this._initChilds=null,this._childs=((i={})[l]=[],i)}},t.prototype.update=function(t,i,n){var o=i.parent;!(0,s.isDefined)(o)||this.exists(o)||o===this._root?e.prototype.update.call(this,t,i,n):(0,u.dhxWarning)("Item parent doesn't exist")},t.prototype.getIndex=function(e){var t=this.getParent(e);return t&&this._childs[t]?this._childs[t].findIndex((function(t){return(null==t?void 0:t.id)==e})):-1},t.prototype.sort=function(e,t,i){var n,o,s=this;if(void 0===i&&(i=!1),(null==t?void 0:t.smartSorting)&&(this._sorter=e),i||this._sortingStates.length&&!(null==t?void 0:t.smartSorting)&&((null===(n=this._sortingStates[0])||void 0===n?void 0:n.smartSorting)||(null==t?void 0:t.smartSorting))||(this._sortingStates=[r(r({},e),t)]),e){if(!i&&(this._initSortOrder=this._initSortOrder||a([],this._initFilterOrder||this._order,!0),!(null==t?void 0:t.smartSorting)&&(null===(o=this._sortingStates[0])||void 0===o?void 0:o.smartSorting))){var l=this._sortingStates.findIndex((function(t){return t.by==e.by}));-1!==l?(this._sortingStates[l].dir=e.dir,this._sortingStates.forEach((function(e,t){s.sort(e,{smartSorting:!t},!0)}))):this._sortingStates.push(e)}this._applySorters(e)}else this._initSortOrder&&(this._childs={},this._order=[],this._sortingStates=[],this._initSortOrder.forEach((function(e){return s._parseItem(e)})),this._sorter=this._initSortOrder=this._initChilds=null,this._initFilterOrder&&(this._initFilterOrder=null,this.filter(null,{$restore:!0},!0)));i||(this._reapplyFilters(),this.events.fire(d.DataEvents.change,[void 0,"sort",e]))},t.prototype.filter=function(e,t,i){if((null==t?void 0:t.$restore)&&(e=this._normalizeFilters(e||this._filters)),!(e&&(null==t?void 0:t.add)||(this._initChilds&&(this._childs=this._initChilds,this._initChilds=null),null==t?void 0:t.$restore)))for(var n in this._filters){var o=this._filters[n],r=o.rule,a=o.config;(null==a?void 0:a.permanent)?this._applyFilter(r,a):delete this._filters[n]}var l;if(e&&!(null==t?void 0:t.$restore))l=(null==t?void 0:t.id)||(0,s.uid)(),t||(t={}),t.type=t.type||d.TreeFilterType.all,this._filters[l]={rule:e,config:t},this._applyFilter(e,t);else for(var n in e)this._applyFilter(e[n],this._filters[n].config);if(!i){var c=this._getPureFilters(this._filters);this.events.fire(d.DataEvents.filter,[(0,s.isEmptyObj)(c)?null:c])}return l},t.prototype.restoreOrder=function(){this.resetFilter({permanent:!0},!0),this.sort()},t.prototype.copy=function(e,t,i,n){var o=this;return void 0===i&&(i=this),void 0===n&&(n=this._root),e instanceof Array?e.map((function(e,r){return o._copy(e,t,i,n,r)})):this._copy(e,t,i,n)},t.prototype.move=function(e,t,i,n){var o,r=this;if(void 0===n&&(n=this._root),i=i||this,e instanceof Array){var a=[];return e.forEach((function(e,o){(0,s.isId)(r._move(e,t,i,n,o))?a.push(e):(0,u.throwMoveWarning)(e,r.exists(e))})),a}return null!==(o=this._move(e,t,i,n))&&void 0!==o?o:(0,u.throwMoveWarning)(e,this.exists(e))},t.prototype.forEach=function(e,t,i){if(void 0===t&&(t=this._root),void 0===i&&(i=1/0),this.haveItems(t)&&!(i<1))for(var n=this._childs[t],o=0;o<n.length;o++)e.call(this,n[o],o,n),this.haveItems(n[o].id)&&this.forEach(e,n[o].id,--i)},t.prototype.eachChild=function(e,t,i,n){if(void 0===i&&(i=!0),void 0===n&&(n=function(){return!0}),this.haveItems(e))for(var o=0;o<this._childs[e].length;o++)t.call(this,this._childs[e][o],o),i&&n(this._childs[e][o])&&this.eachChild(this._childs[e][o].id,t,i,n)},t.prototype.getNearId=function(e){return e},t.prototype.loadItems=function(e,t){var i=this;if(void 0===t&&(t=d.DataDriver.json),this.events.fire(d.DataEvents.beforeItemLoad,[e])){var n=this.config.autoload.toString(),o=n+(n.includes("?")?"&id=".concat(e):"?id=".concat(e));new c.DataProxy(o).load().then((function(n){n=(t=(0,u.toDataDriver)(t)).toJsonArray(n),i._parse_data(n,e),i.events.fire(d.DataEvents.change),i.events.fire(d.DataEvents.afterItemLoad,[e])})).catch((function(e){i.events.fire(d.DataEvents.loadError,[e])}))}},t.prototype.refreshItems=function(e,t){void 0===t&&(t=d.DataDriver.json),this.removeAll(e),this.loadItems(e,t)},t.prototype.eachParent=function(e,t,i){void 0===i&&(i=!1);var n=this.getItem(e);if(n&&(i&&t.call(this,n),n.parent!==this._root)){var o=this.getItem(n.parent);t.call(this,o),this.eachParent(n.parent,t)}},t.prototype.haveItems=function(e){return e in this._childs},t.prototype.canCopy=function(e,t){if(e===t)return!1;var i=!0;return this.eachParent(t,(function(t){return t.id===e?i=!1:null})),i},t.prototype.serialize=function(e,t){void 0===e&&(e=d.DataDriver.json);var i=this._serialize(this._root,t),n=(0,u.toDataDriver)(e);if(n)return n.serialize(i)},t.prototype.getId=function(e,t){if(void 0===t&&(t=this._root),this._childs[t]&&this._childs[t][e])return this._childs[t][e].id},t.prototype.map=function(e,t,i){void 0===t&&(t=this._root),void 0===i&&(i=!0);var n=[];if(!this.haveItems(t))return n;for(var o=0;o<this._childs[t].length;o++)if(n.push(e.call(this,this._childs[t][o],o,this._childs)),i){var r=this.map(e,this._childs[t][o].id,i);n=n.concat(r)}return n},t.prototype.getRawData=function(t,i,n,o,r){var a;return r=null!=r?r:this._root,this._childs[r]?(a=r===this._root?e.prototype.getRawData.call(this,t,i,this._childs[r]):this._childs[r],2===o?this.flatten(a):a):[]},t.prototype.flatten=function(e){var t=this,i=[];return e.forEach((function(e){i.push(e);var n=t._childs[e.id];n&&e.$opened&&(i=i.concat(t.flatten(n)))})),i},t.prototype._add=function(t,i,n,o){void 0===i&&(i=-1),void 0===n&&(n=this._root),this._setParent(t,n),o>0&&-1!==i&&(i+=1);var r=e.prototype._add.call(this,t,i);if(Array.isArray(t.items))for(var a=0,s=t.items;a<s.length;a++){var l=s[a];this.add(l,-1,t.id)}return r},t.prototype._setParent=function(e,t){e.parent=e.parent?e.parent.toString():t;var i=this._pull[e.parent];i&&!i.items&&(i.items=[])},t.prototype._copy=function(e,t,i,n,o){if(void 0===i&&(i=this),void 0===n&&(n=this._root),!this.exists(e))return null;var r=this._childs[e];if(o&&(t=-1===t?-1:t+o),i===this&&!this.canCopy(e,n))return null;var a=(0,u.copyWithoutInner)(this.getItem(e),{items:!0});if(i.exists(e)&&(a.id=(0,s.uid)()),(0,u.isTreeCollection)(i)){if(this.exists(e)&&(a.parent=n,i!==this&&n===this._root&&(a.parent=i.getRoot()),i.add(a,t),e=a.id),r)for(var l=0,c=r;l<c.length;l++){var d=c[l].id,h=this.getIndex(d);this.copy(d,h,i,e)}return e}i.add(a,t)},t.prototype._move=function(e,t,i,n,o){if(void 0===i&&(i=this),void 0===n&&(n=this._root),!this.exists(e))return null;if(o&&t<this.getIndex(e)&&(t=-1===t?-1:t+o),i!==this){if(!(0,u.isTreeCollection)(i))return i.add((0,u.copyWithoutInner)(this.getItem(e)),t),void this.remove(e);var r=this.copy(e,t,i,n);return this.remove(e),r}return this.canCopy(e,n)?(this._moveItem(e,n,t),this.events.fire(d.DataEvents.change,[e,"update",this.getItem(e)]),e):null},t.prototype._moveItem=function(e,t,i){var n=this.getParent(e),o=this._initChilds||this._childs;if([this._childs,this._initChilds].forEach((function(o){if(o&&o[n]){var r=o[n].findIndex((function(t){return t.id===e}));if(-1!==r){var a=o[n].splice(r,1)[0];a.parent=t,h(o,a,t,i),o[n].length||delete o[n]}}})),n!==this._root&&n!==t){var r=this.getItem(n);o[n]?r.items=a([],o[n],!0):delete r.items}t!==this._root&&(this.getItem(t).items=a([],o[t]||[],!0))},t.prototype._reset=function(t){var i;if((0,s.isId)(null==t?void 0:t.id))for(var n=0,o=a([],this._childs[null==t?void 0:t.id],!0);n<o.length;n++){var r=o[n];this.remove(r.id)}else{e.prototype._reset.call(this,t);var l=this._root;this._initChilds=null,this._childs=((i={})[l]=[],i)}},t.prototype._removeCore=function(e){if(this._pull[e]){var t=this.getParent(e);this._childs[t]=this._childs[t].filter((function(t){return t.id!==e})),t===this._root||this._childs[t].length||delete this._childs[t],this._initChilds&&this._initChilds[t]&&(this._initChilds[t]=this._initChilds[t].filter((function(t){return t.id!==e})),t===this._root||this._initChilds[t].length||delete this._initChilds[t]),this._fastDeleteChilds(this._childs,e),this._initChilds&&this._fastDeleteChilds(this._initChilds,e)}},t.prototype._addToOrder=function(t,i,n){var o=this._childs,r=this._initChilds,a=i.parent;this._pull[i.id]=i,i.parent&&this._pull[i.parent]&&this._pull[i.parent].items&&!this._pull[i.parent].items.find((function(e){return e.id===i.id}))&&this._pull[i.parent].items.push(i),e.prototype._addToOrder.call(this,t,i,n),h(o,i,a,n),r&&h(r,i,a,n)},t.prototype._parse_data=function(e,t){var i;void 0===t&&(t=this._root);for(var n=0,o=e;n<o.length;n++){var r=o[n];this.config.init&&(r=this.config.init(r)),r&&"object"!=typeof r&&(r={value:r}),r.id=null!==(i=r.id)&&void 0!==i?i:(0,s.uid)(),r.parent=void 0===r.parent||null===r.parent||r.parent&&r.$items?t:r.parent,this._pull[r.id]&&(0,u.dhxError)("Item ".concat(r.id," already exist")),this._parseItem(r),r.items&&r.items instanceof Object&&this._parse_data(r.items,r.id)}},t.prototype._parseItem=function(e){this._pull[e.id]=e,this._order[this._order.length]=e,this._childs[e.parent]||(this._childs[e.parent]=[]),this._childs[e.parent].push(e)},t.prototype._fastDeleteChilds=function(e,t){var i,n;if(this._pull[t]&&((null===(i=this._initFilterOrder)||void 0===i?void 0:i.length)&&(this._initFilterOrder=this._initFilterOrder.filter((function(e){return e.id!==t}))),(null===(n=this._initSortOrder)||void 0===n?void 0:n.length)&&(this._initSortOrder=this._initSortOrder.filter((function(e){return e.id!==t}))),this._order=this._order.filter((function(e){return e.id!==t})),delete this._pull[t]),e[t]){for(var o=0;o<e[t].length;o++)this._fastDeleteChilds(e,e[t][o].id);delete e[t]}},t.prototype._recursiveFilter=function(e,t,i,n,o){var r=this,a=this._childs[i];if(a){var s=function(e){switch(t.type){case d.TreeFilterType.all:return!0;case d.TreeFilterType.level:return n===t.level;case d.TreeFilterType.leafs:return!r.haveItems(e.id)}};if("function"==typeof e){var l=function(t){return s(t)&&e(t)};(c=a.filter(l)).length?o[i]=c:i===this._root&&(o[i]=[])}else{var c;l=function(t){var i,n=!0;for(var o in e)if(e[o].by&&""!==e[o].match&&(n=e[o].compare?e[o].compare(t[e[o].by],e[o].match,t):-1!==(null===(i=t[e[o].by])||void 0===i?void 0:i.toString().toLocaleLowerCase().indexOf(e[o].match.toString().toLowerCase()))),!n)break;return s(t)&&n};(c=a.filter(l)).length?o[i]=c:i===this._root&&(o[i]=[])}for(var u=0,h=a;u<h.length;u++){var f=h[u];this._recursiveFilter(e,t,f.id,n+1,o)}}},t.prototype._serialize=function(e,t){var i=this;return void 0===e&&(e=this._root),this.map((function(e){var n={};for(var o in e)"parent"===o||"items"===o||o.startsWith("$")||(n[o]=e[o]);return t&&(n=t(n)),i.haveItems(e.id)&&(n.items=i._serialize(e.id,t)),n}),e,!1)},t.prototype._applyFilter=function(e,t){var i=this;if(e&&("function"==typeof e||!(0,s.isEmptyObj)(e))){if(!this._checkFilterRule(e))throw new Error("Invalid filter rule");var n;this._initFilterOrder||(this._initFilterOrder=this._order),this._initChilds||(this._initChilds=this._childs);var o={};if("function"!=typeof e)if(n={},(0,s.isDefined)(e.by))n[e.by]=e;else for(var r in e)n[r]=e[r];else n=e;this._recursiveFilter(n,t,this._root,0,o),Object.keys(o).forEach((function(e){for(var t=i.getParent(e),n=i.getItem(e);t;)o[t]||(o[t]=[]),n&&!o[t].find((function(e){return e.id===n.id}))&&o[t].push(n),n=i.getItem(t),t=i.getParent(t)})),this._childs=o}},t.prototype._normalizeFilters=function(e){var t={};for(var i in e)t[i]=e[i].rule;return t},t.prototype._checkFilterRule=function(t){var i=this;return e.prototype._checkFilterRule.call(this,t)||Object.values(t).every((function(t){return"function"!=typeof t&&e.prototype._checkFilterRule.call(i,t)}))},t.prototype._applySorters=function(e){for(var t in this._childs)this._sort.sort(this._childs[t],e,this._sorter);if(this._initChilds&&Object.keys(this._initChilds).length)for(var t in this._initChilds)this._sort.sort(this._initChilds[t],e,this._sorter)},t}(l.DataCollection);t.TreeCollection=f},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i},s=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Grid=void 0;var l=i(1),c=i(4),u=i(3),d=i(0),h=i(25),f=i(9),p=i(11),v=i(137),g=i(17),_=i(31),m=i(20),y=i(138),b=i(8),w=i(73),x=i(23),C=i(162),E=i(166),S=i(167),I=i(34),k=i(21),O=i(168),M=function(e){function t(t,i){void 0===i&&(i={});var n=e.call(this,t,i)||this;if(n._touch={duration:350,dblDuration:300,timer:null,start:!1},n._destructed=!1,n._sortingStates=[],n._commonSummary={},n._colSummary={},n.version="5.2.0",n.name="grid",n.config=(0,d.extend)({rowHeight:40,headerRowHeight:40,footerRowHeight:40,keyNavigation:!0,sortable:!0,columns:[],data:[],tooltip:!0,rootParent:"string"==typeof t&&t||n._uid},n._normalizeConfig(i)),n.content=(0,C.getContent)(),n._scroll={top:0,left:0},n.config.autoWidth=n.config.autoWidth||n.config.fitToContainer,n.config.adjust=n.config.adjust||n.config.columnsAutoWidth,n.config.editable=n.config.editable||n.config.editing,n.config.leftSplit=n.config.leftSplit||n.config.splitAt,n.config.columns.forEach((function(e){"date"===e.type&&e.format&&(e.dateFormat=e.format)})),n._setHTMLEventHandlers(),n.config.eventHandlers)for(var o=0,r=Object.entries(n.config.eventHandlers);o<r.length;o++){var a=r[o],s=a[0],l=a[1];n._htmlEvents[s]=(0,u.eventHandler)((function(e){return{col:n.getColumn((0,u.locate)(e,"data-dhx-col-id")||(0,u.locate)(e,"data-dhx-id"))||{},row:n.data.getItem((0,u.locate)(e,"data-dhx-id"))||{}}}),l,n._htmlEvents[s])}return(n.config.dragMode||n.config.dragItem)&&(p.dragManager.setItem(n._uid,n),n.config.dragItem||(n.config.dragItem="row"),n.config.dragMode||(n.config.dragMode="both")),n._init(),n.config.columns&&n._parseColumns(!0),n._canDataParse()&&n.data.parse(n.config.data),n.selection=new y.Selection(n,{disabled:!n.config.selection},n.events,n._uid),n.mount(t,n._createView()),i.autoEmptyRow&&0===n.data.getLength()&&(n._addEmptyRow(),n.paint()),n}return o(t,e),t.prototype.destructor=function(){var e;this._destructed=!0,this._destroyContent(),null===(e=this.config.$subRowCells)||void 0===e||e.forEach((function(e){var t;null===(t=e.cell)||void 0===t||t.destructor()})),this.keyManager&&this.keyManager.destructor(),this.events&&this.events.clear(),this._events&&this._events.clear(),this.export=this.content=this.selection=null,this._activeFilters=this._filterData=this._scroll=this._touch=this._htmlEvents=this._hiddenFilters=this.config.$subRowCells=null,this.unmount()},t.prototype.setColumns=function(e){var t=this;this._destroyContent(),this.config.columns=e,this._parseColumns(!0),(0,m.isAutoWidth)(this.config)&&this._applyAutoWidth(),this._setSummary(),this._adjustColumns(),this._checkFilters(),this._checkMarks(),this._normalizeSpans(),this.paint(),this.config.keyNavigation&&(0,l.awaitRedraw)().then((function(){t._initHotKey(!0),t.paint()}))},t.prototype.addRowCss=function(e,t){var i=this.data.getItem(e),n=i.$css||"";n.match(new RegExp(t,"g"))||(i.$css=n+" ".concat(t),this.paint())},t.prototype.removeRowCss=function(e,t){var i=this.data.getItem(e),n=i.$css?i.$css.replace(t,""):"";i.$css=n,this.paint()},t.prototype.addCellCss=function(e,t,i){var n=this.getColumn(t);if(n){n.$cellCss=n.$cellCss||{};var o=n.$cellCss[e];if(o){var r=o.match(new RegExp(i,"g"))?"":" ".concat(i);n.$cellCss[e]+=r}else this.data.getItem(e)&&(n.$cellCss[e]="".concat(i," "));this.paint()}},t.prototype.removeCellCss=function(e,t,i){var n=this.getColumn(t);n&&(n.$cellCss[e]?(n.$cellCss[e]=n.$cellCss[e].replace(i,""),this.paint()):this.data.getItem(e)&&(n.$cellCss[e]=""))},t.prototype.showColumn=function(e){var t=this.getColumn(e);t&&t.hidden&&this.events.fire(b.GridEvents.beforeColumnShow,[t])&&(this._showColumn(t),this.events.fire(b.GridEvents.afterColumnShow,[t]))},t.prototype.hideColumn=function(e){var t=this.getColumn(e);t&&!t.hidden&&this.events.fire(b.GridEvents.beforeColumnHide,[t])&&(this._hideColumn(t),this.events.fire(b.GridEvents.afterColumnHide,[t]))},t.prototype.isColumnHidden=function(e){var t=this.getColumn(e);if(t)return!!t.hidden},t.prototype.showRow=function(e){if((0,d.isDefined)(e)){var t=e.toString(),i=this.data.getItem(t);i&&i.hidden&&this.events.fire(b.GridEvents.beforeRowShow,[i])&&(this.data.update(t,{hidden:!1}),this._checkFilters(!0),this.paint(),this.events.fire(b.GridEvents.afterRowShow,[i]))}},t.prototype.hideRow=function(e){if((0,d.isDefined)(e)){var t=e.toString(),i=this.data.getItem(t);i&&this.events.fire(b.GridEvents.beforeRowHide,[i])&&(this.data.update(t,{hidden:!0}),this._checkFilters(!0),this._checkSelectFilterValue(),this.paint(),this.events.fire(b.GridEvents.afterRowHide,[i]))}},t.prototype.isRowHidden=function(e){if((0,d.isDefined)(e)){var t=this.data.getItem(e.toString());return t?!!t.hidden:void 0}},t.prototype.getScrollState=function(){return{x:this._scroll.left,y:this._scroll.top}},t.prototype.scroll=function(e,t){var i=this.getRootView().refs.grid_body.el.querySelector(".scroll-view")||this.getRootView().refs.grid_body.el;i.scrollLeft=!e&&0!==e||"number"!=typeof e?i.scrollLeft:e,i.scrollTop=!t&&0!==t||"number"!=typeof t?i.scrollTop:t,this.paint()},t.prototype.scrollTo=function(e,t){var i=this.config,n=i.topSplit,o=i.bottomSplit,r=i.columns,a=i.$width,s=i.$height,l=i.$headerHeight,c=r.filter((function(e){return!e.hidden})),u=this.data.getRawData(0,-1,null,2),h=c.findIndex((function(e){return e.id==t})),f=u.findIndex((function(t){return t.id==e}));if((0,d.isDefined)(h)&&(0,d.isDefined)(f)){var p=this.getScrollState(),v=this.selection.getCell(),_=v&&r.findIndex((function(e){return e.id==v.column.id})),y=v&&u.findIndex((function(e){return e.id==v.row.id})),w=(0,x.getCurrFixedCols)(this.config,b.Split.left).length,C=(0,x.getCurrFixedCols)(this.config,b.Split.right).length,E=w&&_<w,S=C&&_>=r.length-C,I=n&&y<n,k=o&&y>=u.length-o,O=(0,m.getTotalWidth)(c.slice(0,h)),M=(0,m.getTotalHeight)(u.slice(0,f)),R=(0,g.getTotalRowHeight)(u[f]);if(w){var A=(0,m.getTotalWidth)((0,x.getCurrFixedCols)(this.config,b.Split.left));(!E&&!S&&h<_||O-p.x-A<0)&&(O-=A)}if(C){var P=(0,m.getTotalWidth)((0,x.getCurrFixedCols)(this.config,b.Split.right));(!E&&!S&&h>_||a+p.x-O-c[h].$width-P<0)&&(O+=P)}if(n){var T=(0,m.getTotalHeight)(u.slice(0,n));(!I&&!k&&f<y||M-p.y-T<0)&&(M-=T)}if(o){var D=(0,m.getTotalHeight)(u.slice(-o));(!I&&!k&&f>y||s+p.y-l-M-R-D<0)&&(M+=D)}var F=a+p.x,V=s+p.y-l,L=M-p.y-R,N=O-p.x-r[h].$width,H=M+2*R+18-V,j=O+2*r[h].$width+18-F,z=L>0&&H<0?0:L<0?L:H,$=N>0&&j<0?0:N<0?N:j;this.scroll($+p.x,z+p.y)}},t.prototype.adjustColumnWidth=function(e,t){void 0===t&&(t=!0);var i=this.config.columns.filter((function(e){return!e.hidden})),n=i.filter((function(t){return t.id===e})),o=this._adjustColumnsWidth({rows:this.config.data,cols:n,totalCols:i,adjust:t});this.config.$totalWidth=i.reduce((function(e,t){if(o[t.id]){t.$fixedWidth=!0;var i=t.maxWidth,n=t.minWidth,r=o[t.id];t.$width=r,i&&r>i&&(t.$width=i),n&&t.$width<n&&(t.$width=n)}return e+t.$width}),0),this.paint()},t.prototype.getCellRect=function(e,t){var i,n=this.config.columns.filter((function(e){return!e.hidden})),o=this.data.getRawData(0,-1),r=this.getSpan(e,t),a=n.findIndex((function(e){return e.id==(r?r.column:t)})),s=o.findIndex((function(t){return t.id==(r?r.row:e)}));return{x:(0,m.getTotalWidth)(n.slice(0,a)),y:(0,m.getTotalHeight)(o.slice(0,s)),height:(null==r?void 0:r.rowspan)>1?(0,_.getSpanHeight)(o,r):(0,g.getTotalRowHeight)(o[s])||0,width:(null==r?void 0:r.colspan)>1?(0,_.getWidth)(this.config.columns,r.colspan,this.config.columns.findIndex((function(e){return e.id===r.column}))):(null===(i=n[a])||void 0===i?void 0:i.$width)||0}},t.prototype.getColumn=function(e){for(var t,i=0,n=null===(t=this.config)||void 0===t?void 0:t.columns;i<n.length;i++){var o=n[i];if(o.id==e)return o}},t.prototype.addSpan=function(e){this.config.spans=this.config.spans||[];var t=(0,d.findIndex)(this.config.spans,(function(t){return"".concat(t.row)==="".concat(e.row)&&"".concat(t.column)==="".concat(e.column)}));t>=0?this.config.spans[t]=e:(this.config.spans.push((0,I.normalizeSpan)(e,this.config,this.data)),this._checkMarks(),this.paint())},t.prototype.getSpan=function(e,t){var i,n=this;if(this.config.spans){var o=this.data.getIndex(e.toString()),r=this.config.columns.findIndex((function(e){return e.id===t})),a=(0,d.findIndex)(this.config.spans,(function(e){var t=n.data.getIndex(e.row.toString()),i=n.config.columns.findIndex((function(t){return t.id===e.column})),a=t,s=e.rowspan?t+e.rowspan:t+1,l=i,c=e.colspan?i+e.colspan:i+1;return o>=a&&o<s&&r>=l&&r<c}));return null===(i=this.config)||void 0===i?void 0:i.spans[a]}},t.prototype.removeSpan=function(e,t){if(this.config.spans){var i=(0,d.findIndex)(this.config.spans,(function(i){return"".concat(i.row)=="".concat(e)&&"".concat(i.column)=="".concat(t)}));this.config.spans.splice(i,1),this.paint()}},t.prototype.editCell=function(e,t,i){var n,o=this.data.getItem(e),r=this.getColumn(t);if(o&&r){var a=r.editorType,s=this.getSpan(o.id,r.id);if(!s||"function"!=typeof s.text){if(i||(i=this.config.autoHeight&&"number"!==r.type?"textarea":"input","date"===r.type&&(i="datePicker"),"boolean"===r.type&&(i="checkbox"),a&&(i=a),(0,d.isDefined)(null==s?void 0:s.text)&&(i=this.config.autoHeight?"textarea":"input")),"number"===r.type)if(!((0,d.isDefined)(null==s?void 0:s.text)&&["input","textarea"].includes(i))&&!["input","select","combobox"].includes(i))return;this.events.fire(b.GridEvents.beforeEditStart,[o,r,i])&&((null===(n=this.config.$editable)||void 0===n?void 0:n.editor)||this.config.$editable&&this.config.$editable.row===e&&this.config.$editable.col===t&&this.config.$editable.editorType===i||(this.config.$editable={row:o.id,col:r.id,isSpan:!!s,editorType:i},this.selection.config.disabled||this.selection.setCell(e.toString(),t.toString()),this.paint(),this.events.fire(b.GridEvents.afterEditStart,[o,r,i])))}}else(0,p.dhxWarning)("item not found")},t.prototype.editEnd=function(e){this.config.$editable&&this.config.$editable.editor&&this.config.$editable.editor.endEdit(e)},t.prototype.getHeaderFilter=function(e){var t=this,i=this.getColumn(e);if(i){var n=null;return i.header.forEach((function(i){i.content&&(n=t.content[i.content].element[e])})),n}},t.prototype.getSummary=function(e){return r(r({},this._commonSummary),e?this._colSummary[e]:{})},t.prototype.getSortingState=function(){var e,t=null===(e=this._sortingStates)||void 0===e?void 0:e[0];return{dir:t.dir,by:t.by}},t.prototype._createView=function(){var e=this;return(0,l.create)({render:function(t,i){return e._destructed?(0,l.el)("div"):(0,w.render)(t,i,e._htmlEvents,e.selection,e._uid)},hooks:this._initHooks()},this)},t.prototype._parseColumns=function(e){void 0===e&&(e=!1);var t=this.config.columns.filter((function(e){return!e.hidden}));this.normalizeColumns({config:this.config,columns:t,configChanged:e}),(0,g.countColumns)(this.config,t)},t.prototype.normalizeColumns=function(e){var t,i,n,o=this,r=e.config,a=e.columns,s=e.configChanged;r.$headerHeightMap=[],r.$footerHeightMap=[],r.$headerHeight=r.$footerHeight=0;for(var l=0,c=a;l<c.length;l++){(p=c[l]).htmlEnable=null!==(t=p.htmlEnable)&&void 0!==t?t:r.htmlEnable,p.$cellCss=p.$cellCss||{},(0,g.normalizeArray)(p,"header"),(0,g.normalizeArray)(p,"footer"),p.minWidth&&p.minWidth<20&&(p.minWidth=20),p.maxWidth&&p.maxWidth<20&&(p.maxWidth=20);var u=p.minWidth||100;p.width&&(u=(u=p.maxWidth&&p.minWidth?p.width>=p.minWidth&&p.width<=p.maxWidth?p.width:p.width>=p.maxWidth?p.maxWidth:p.minWidth:p.maxWidth?p.width<=p.maxWidth?p.width:p.maxWidth>100?p.maxWidth:100:p.minWidth?p.width>=p.minWidth?p.width:p.minWidth:p.width)<20?20:u),p.$width=p.$width&&!s?p.$width:u,p.$width>p.maxWidth&&(p.$width=p.maxWidth),p.$width<p.minWidth&&(p.$width=p.minWidth)}for(var d=function(e){if(null===(i=e.header)||void 0===i?void 0:i.length){var t=0;e.header.forEach((function(i,n){(t=r.headerAutoHeight?o.getNormalizeContentHeight(i,e,r):r.headerRowHeight)>(r.$headerHeightMap[n]||0)&&(r.$headerHeightMap[n]=Math.max(t,r.headerRowHeight))}))}if(null===(n=e.footer)||void 0===n?void 0:n.length){var a=0;e.footer.forEach((function(t,i){(a=r.footerAutoHeight?o.getNormalizeContentHeight(t,e,r):r.footerRowHeight)>(r.$footerHeightMap[i]||0)&&(r.$footerHeightMap[i]=Math.max(a,r.footerRowHeight))}))}},h=0,f=a;h<f.length;h++){var p;d(p=f[h])}r.$headerHeight=r.$headerHeightMap.reduce((function(e,t){return e+t}),0),r.$footerHeight=r.$footerHeightMap.reduce((function(e,t){return e+t}),0)},t.prototype.getNormalizeContentHeight=function(e,t,i){return this.config.footerRowHeight},t.prototype._parseData=function(){this._detectColsTypes(),this.config.data=this.data.map((function(e){return e})),this.config.data=this._prepareData(this.data),this._checkMarks(),this._applyLocalFilter(),this._checkFilters()},t.prototype._createCollection=function(){this.data=new p.DataCollection(null,this.events)},t.prototype._getRowIndex=function(e){return this.data.getIndex(e)},t.prototype._setHTMLEventHandlers=function(){var e=this,t=function(t,i,n){var o;if(t&&i&&(0,m.isTooltip)(e.config,i)){var a=void 0;if("combobox"===i.editorType||"select"===i.editorType){var s=(0,g.getEditorOptions)(i,t).find((function(e){var n;return(e instanceof Object?e.id.toString():e)===(null===(n=t[i.id])||void 0===n?void 0:n.toString())}));a=s instanceof Object?s.value:s}else if("multiselect"===i.editorType){var l=null===(o=t[i.id])||void 0===o?void 0:o.toString().split(", ");if(null==l?void 0:l.length)a=(0,g.getEditorOptions)(i,t).filter((function(e){return l.includes(e instanceof Object?e.id.toString():e)})).map((function(e){return e instanceof Object?e.value:e})).join(", ")}var c=(0,g.applyPattern)(a||t[i.id],i),u=function(){return!!c||"boolean"==typeof c};i.tooltipTemplate?c=i.tooltipTemplate(c,t,i)||null:u()&&i.template&&(c=i.template(c,t,i)),u()&&(0,m.showTooltip)(c,r({node:n,htmlEnable:(0,m.isHtmlEnable)(e.config,i)},(0,m.getTooltipConfig)(e.config,i)))}},i=function(t,i){var n;void 0===i&&(i="header");var o=t.target,a=o.getAttribute("data-dhx-text-id"),s=e.getColumn(o.getAttribute("data-dhx-id"));if(a&&s){var l=null===(n=s[i])||void 0===n?void 0:n.find((function(e){return e.id===a}));if((0,m.isContentTooltip)(e.config,s,l,i)){var c=null==l?void 0:l.text,u=e.getSummary(s.id);"function"==typeof c&&(c=c(u)),"function"==typeof(null==l?void 0:l.tooltipTemplate)&&(c=l.tooltipTemplate(r({value:c},u),l,s)||null),(null==c?void 0:c.toString().length)&&(0,m.showTooltip)(c,r({node:o,htmlEnable:(0,m.isHtmlEnable)(e.config,s,l)},(0,m.getTooltipConfig)(e.config,s,l,i)))}}};this._htmlEvents={onclick:(0,u.eventHandler)((function(e){return(0,u.locate)(e)}),{"dhx_grid-header-cell--sortable":function(t,i){var n=t.target.getAttribute("dhx_resized"),o=e.getColumn(i);if(o&&(0,m.isSortable)(e.config,o)&&!n){var r=(0,u.locate)(t,"data-dhx-text-id"),a=o.header.find((function(e){return e.id===r}));e._sort(i,a.sortAs)}},"dhx_grid-expand-cell":function(t,i){t.target.classList.contains("dhx_grid-expand-cell-icon")&&e.events.fire(b.GridEvents.expand,[i])},"dhx_span-expand-cell":function(t,i){t.target.classList.contains("dhx_span-expand-cell-icon")&&e.events.fire(b.GridEvents.expand,[i])}}),onscroll:function(t){e.events.fire(b.GridEvents.scroll,[{y:t.target.scrollTop,x:t.target.scrollLeft}])},onmouseover:{".dhx_grid-cell.dhx_boolean-cell .dhx_checkbox.dhx_cell-editor__checkbox":function(i){var n=i.composedPath(),o=e.data.getItem(n[2].getAttribute("data-dhx-id")),r=e.getColumn(n[1].getAttribute("data-dhx-col-id"));t(o,r,i.target)},".dhx_grid-cell:not(.dhx_boolean-cell)":function(i){var n=e.data.getItem(i.composedPath()[1].getAttribute("data-dhx-id")),o=e.getColumn(i.target.getAttribute("data-dhx-col-id"));t(n,o,i.target)},".dhx_grid-cell:not(.dhx_tree-cell) .dhx_grid-cell__content, .dhx_tree-cell :not(.dhx_grid-cell__content)":function(i){var n=i.composedPath(),o=e.data.getItem(n[2].getAttribute("data-dhx-id")),r=e.getColumn(n[1].getAttribute("data-dhx-col-id"));t(o,r,i.target)},".dhx_grid-cell.dhx_tree-cell .dhx_grid-cell__content":function(i){var n=i.composedPath(),o=e.data.getItem(n[3].getAttribute("data-dhx-id")),r=e.getColumn(n[2].getAttribute("data-dhx-col-id"));t(o,r,n[2])},".dhx_span-cell:not(.dhx_grid-header-cell):not(.dhx_grid-footer-cell)":function(t){var i,n=t.target,o=e.data.getItem(n.getAttribute("data-dhx-id")),a=e.getColumn(n.getAttribute("data-dhx-col-id")),s=e.getSpan(o.id,a.id);if(o&&s&&(0,m.isTooltip)(e.config,s)){var l=e.getSummary(a.id),c=null===(i=("function"==typeof s.text?s.text(l):s.text)||(0,g.applyPattern)(o[a.id],a))||void 0===i?void 0:i.toString();s.tooltipTemplate?c=s.tooltipTemplate(r({value:c},l),s)||null:a.template&&(c=a.template(c,o,a)),c&&(0,m.showTooltip)(c,r({node:n,htmlEnable:(0,m.isHtmlEnable)(e.config,a)},(0,m.getTooltipConfig)(e.config,null,s)))}},".dhx_grid-header-cell":function(e){return i(e,"header")},".dhx_grid-footer-cell":function(e){return i(e,"footer")}}}},t.prototype._setEventHandlers=function(){var e=this,t=function(t){var i=t.source,n=t.target,o=a(t,["source","target"]);(null==i?void 0:i.length)&&i.map((function(t){return e.data.exists(t)&&e.data.update(t,o,!0)})),e.data.exists(n)&&e.data.update(n,o,!0)};this.data.events.on(p.DataEvents.load,(function(){if(e._applyLocalFilter(!0),e._parseData(),e._parseColumns(),e.config.autoEmptyRow){var t=e.data.find({by:"$emptyRow",match:!0});t?e.data.move(t.id,e.data.getLength()-1):e._addEmptyRow()}e.config.data instanceof p.DataCollection?(0,l.awaitRedraw)().then((function(){return e._normalizeSpans()})):e._normalizeSpans(),e.paint()})),this.data.events.on(p.DataEvents.change,(function(t,i,n){if("load"!==i)if("setPage"!==i){if("sort"===i)e._setSort();else if("add"===i||"update"===i||"remove"===i){if((0,d.isId)(t)&&"remove"===i){var o=e.selection.getCells().find((function(e){return e.row.id===t}));o&&e.selection.removeCell(o.row.id,o.column.id)}e.config.data=e._prepareData(e.data)}else(0,p.isTreeCollection)(e.data)?e.config.data=e._prepareData(e.data):e._setSummary(),e._adjustColumns();if((0,d.isId)(t)&&(e._checkFilters(),e._checkSelectFilterValue()),e._detectColsTypes(),e._removeMarks(),e._checkMarks(),e.config.autoEmptyRow&&(!e._activeFilters||(0,d.isEmptyObj)(e._activeFilters))){var r=e.data.find({by:"$emptyRow",match:!0});if(r){if(r.id===t)return;e.data.move(r.id,e.data.getLength()-1)}else e._addEmptyRow()}switch(i){case"add":case"remove":case"sort":e._normalizeSpans()}e._render()}else(0,l.awaitRedraw)().then((function(){var t=e.config.columns.find((function(e){return!0!==e.hidden}));e.scrollTo(e.data.getId(n[0]).toString(),t.id.toString()),e._render()}))})),this.data.events.on(p.DataEvents.filter,(function(t){t||e.data.getRawFilters({permanent:!0})||e._applyLocalFilter(),!t||(0,p.isOnlyPermanentFilters)(t)?(e._filterData=e.data.map((function(e){return e}))||[],e._setUniqueData(),e._clearFilterValue()):e._checkFilters(),e._setSummary(),e._removeMarks(),e._checkMarks(),e._normalizeSpans(),e.paint()})),this.data.events.on(p.DataEvents.removeAll,(function(){e._hiddenFilters={},e.config.columns.map((function(e){e.header.map((function(t){!t.content||"selectFilter"!==t.content&&"comboFilter"!==t.content||(e.$uniqueData=[])}))})),(0,d.isEmptyObj)(e._activeFilters)||e.data.resetFilter(),e._clearFilterValue(!0)})),this.events.on(p.DragEvents.beforeDrag,(function(t,i,n,o){if("row"===o)return!e.data.isGrouped()&&e.events.fire(b.GridEvents.beforeRowDrag,[t,i])})),this.events.on(p.DragEvents.dragStart,(function(i,n,o){if("row"===o)t(r(r({},i),{$dragtarget:!0})),e.events.fire(b.GridEvents.dragRowStart,[i,n]),e._autoScroll("vertical")})),this.events.on(p.DragEvents.dragIn,(function(t,i,n){if("row"===n)e.events.fire(b.GridEvents.dragRowIn,[t,i])})),this.events.on(p.DragEvents.dragOut,(function(t,i,n){if("row"===n)e.events.fire(b.GridEvents.dragRowOut,[t,i])})),this.events.on(p.DragEvents.canDrop,(function(i,n,o){if("row"===o)t(r(r({},i),{$drophere:!0})),e.events.fire(b.GridEvents.canRowDrop,[i,n])})),this.events.on(p.DragEvents.cancelDrop,(function(i,n,o){if("row"===o)t(r(r({},i),{$drophere:void 0,$dragtarget:void 0})),e.events.fire(b.GridEvents.cancelRowDrop,[i,n])})),this.events.on(p.DragEvents.beforeDrop,(function(t,i,n){if("row"===n)return e.events.fire(b.GridEvents.beforeRowDrop,[t,i])})),this.events.on(p.DragEvents.afterDrop,(function(t,i,n){var o,r=t.source,a=t.target,l=t.start;if("row"===n){var c=e.data.getItem(t.start);if(!c||r.some((function(e){return e==a})))return;for(var u=0,d=e.config.columns;u<d.length;u++){var h=d[u];void 0===c[h.id]&&e.data.update(c.id,((o={})[h.id]=null,o),!0)}var f=e.data.getInitialData(),p=null==f?void 0:f.findIndex((function(e){return e.id==l})),v=null==f?void 0:f.findIndex((function(e){return e.id==a}));if(p>-1&&v>-1)if((null==r?void 0:r.length)>1){for(var g=[],_=function(e){var t=null==f?void 0:f.findIndex((function(t){return t.id==e})),i=null==f?void 0:f.splice(t,1)[0];g.push(i)},m=0,y=r;m<y.length;m++){_(y[m])}v=null==f?void 0:f.findIndex((function(e){return e.id==a})),v>0&&++v,null==f||f.splice.apply(f,s([v,0],g,!1))}else null==f||f.splice(v,0,null==f?void 0:f.splice(p,1)[0]);e._adjustColumns(),e._checkFilters(),e.paint(),e.events.fire(b.GridEvents.afterRowDrop,[t,i])}})),this.events.on(p.DragEvents.afterDrag,(function(i,n,o){if("row"===o)t(r(r({},i),{$dragtarget:void 0})),e.events.fire(b.GridEvents.afterRowDrag,[i,n]),e._normalizeSpans()})),this.events.on(b.GridEvents.cellMouseDown,(function(t,i,n){if(n.targetTouches){if(e._touch.timer=setTimeout((function(){e._dragStart(n)}),e._touch.duration),e._touch.timeStamp)e._touch.dblDuration>=e._touch.timeStamp-+n.timeStamp.toFixed()&&((!1!==i.editable&&e.config.editable||i.editable)&&e.editCell(t.id,i.id,i.editorType),n.preventDefault(),e.events.fire(b.GridEvents.cellDblClick,[t,i,n])),e._touch.timeStamp=null;else e._touch.timeStamp=+n.timeStamp.toFixed();setTimeout((function(){e._touch.timeStamp=null}),e._touch.dblDuration)}else e._dragStart(n)})),this._events.on(b.GridSystemEvents.cellTouchMove,(function(t,i,n){e._touch.start&&n.preventDefault(),e._clearTouchTimer()})),this._events.on(b.GridSystemEvents.cellTouchEnd,(function(){e._touch.start=!1,e._clearTouchTimer()})),this.events.on(b.GridEvents.filterChange,(function(t,i,n,o){var r,a,s;if(e.events.fire(b.GridEvents.beforeFilter,[t,i])){if(e.config.autoEmptyRow){var l=e.data.find({by:"$emptyRow",match:!0});l&&e.data.remove(l.id)}e._activeFilters||(e._activeFilters={});var c=e.getColumn(i),u=c.header.filter((function(e){return e.content===n&&void 0!==e.customFilter}))[0];if("comboFilter"===n&&void 0!==t||"comboFilter"!==n&&""!==t){var d=(0,g.getEditorOptions)(c);"combobox"!==c.editorType&&"select"!==c.editorType&&"multiselect"!==c.editorType||!d||(t=Array.isArray(t)?t.map((function(e){var t;return(null===(t=d.find((function(t){return"string"==typeof t?t===e:t.value===e})))||void 0===t?void 0:t.id)||e})):null!==(a=null===(r=d.find((function(e){return"string"==typeof e?e===t:e.value===t})))||void 0===r?void 0:r.id)&&void 0!==a?a:t);e._activeFilters[i]={by:i,match:t,compare:null!==(s=null==u?void 0:u.customFilter)&&void 0!==s?s:function(t){var i=e.getColumn(t);return function(t,o,r,a){return e.content[n].match({val:t,match:o,obj:r,multi:a,col:i})}}(i),multi:"multiselect"===(null==c?void 0:c.editorType)}}else delete e._activeFilters[i];o||e.data.filter(e._activeFilters)}})),this.events.on(b.GridEvents.scroll,(function(t){e._scroll={top:t.y,left:t.x},e.editEnd(),e.paint()})),this.events.on(b.GridEvents.cellDblClick,(function(t,i,n){t&&((0,u.locateNodeByClassName)(n,"dhx_boolean-cell")||t.hasOwnProperty("$group")||(!1!==i.editable&&e.config.editable||i.editable)&&e.editCell(t.id,i.id,i.editorType))})),this.events.on(b.GridEvents.afterEditEnd,(function(t,i,n){var o,a;if(!(null===(a=e.config.$editable)||void 0===a?void 0:a.editor)||e.config.$editable.col===n.id&&e.config.$editable.row===i.id){var s,l;e.config.$editable?(s=e.config.$editable.row,l=e.config.$editable.col):(s=i.id,l=n.id);var c=e.getSpan(s,l);if((0,d.isDefined)(null==c?void 0:c.text)&&void 0!==t)c.text=t.toString();else{var u=e.data.getItem(s);delete u.$emptyRow,void 0!==t&&e.data.update(s,r(r({},u),((o={})[l]=t,o)))}e.config.$editable=null,e.paint()}})),this.events.on(b.GridEvents.headerCellMouseDown,(function(t,i,n){var o=n.target.getAttribute("dhx_resized");if(o&&e.events.fire(b.GridEvents.beforeResizeStart,[i,n])&&(0,E.startResize)(e,o.toString(),n,(function(){e.paint(),e.config.$resizing=null,e.events.fire(b.GridEvents.afterResizeEnd,[i,n])})),n.targetTouches){if(e._touch.timeStamp)e._touch.dblDuration>=e._touch.timeStamp-+n.timeStamp.toFixed()&&(n.preventDefault(),e.events.fire(b.GridEvents.headerCellDblClick,[t,i,n])),e._touch.timeStamp=null;else e._touch.timeStamp=+n.timeStamp.toFixed();setTimeout((function(){e._touch.timeStamp=null}),e._touch.dblDuration)}})),this.events.on(b.GridEvents.footerCellDblClick,(function(t,i,n){if(n.targetTouches){if(e._touch.timeStamp)e._touch.dblDuration>=e._touch.timeStamp-+n.timeStamp.toFixed()&&(n.preventDefault(),e.events.fire(b.GridEvents.footerCellDblClick,[t,i,n])),e._touch.timeStamp=null;else e._touch.timeStamp=+n.timeStamp.toFixed();setTimeout((function(){e._touch.timeStamp=null}),e._touch.dblDuration)}})),this.events.on(b.GridEvents.resize,(function(){return e._parseColumns()})),this.events.on(b.GridEvents.afterResizeEnd,(function(t){var i;e.config.columns=null===(i=e.config.columns)||void 0===i?void 0:i.map((function(e){return e.id==t.id&&(e.width=t.$width),e})),e._parseColumns()}))},t.prototype._addEmptyRow=function(){var e=this.data.getId(this.data.getLength()-1),t=this.data.getItem(e),i=this.config.columns.filter((function(e){return!e.hidden}));(0,m.isRowEmpty)(t)||this.data.add(i.reduce((function(e,t){return e[t.id]="",e}),{$emptyRow:!0}))},t.prototype._sort=function(e,t,i){void 0===i&&(i=this.config.multiSort);var n=this.getColumn(e),o=this._sortingStates.find((function(t){return t.by==e}));if(this.events.fire(b.GridEvents.beforeSort,[n,"asc"===(null==o?void 0:o.dir)?"desc":"asc"])){var r="asc";(null==o?void 0:o.by)===e&&(r="asc"===o.dir?"desc":"asc");this.data.sort({by:e,dir:r,as:null!=t?t:function(e){return e&&"date"===n.type?"string"==typeof e?(0,k.stringToDate)(e,n.dateFormat).getTime():e.getTime():e?"".concat(e):""}},{smartSorting:i}),this.events.fire(b.GridEvents.afterSort,[n,r])}},t.prototype._setSort=function(){var e,t=null===(e=this.data.getSortingStates())||void 0===e?void 0:e[0];this._sortingStates=t&&[t]||[]},t.prototype._clearTouchTimer=function(){this._touch.timer&&(clearTimeout(this._touch.timer),this._touch.timer=null)},t.prototype._checkFilters=function(e){if(void 0===e&&(e=!1),(0,d.isEmptyObj)(this._activeFilters))e&&this.data.resetFilter(),this._filterData=this.data.map((function(e){return e}))||[],this._setUniqueData();else{var t=this.data.getRawFilters({permanent:!0});this.data.filter(t,{$restore:!0},!0),this._filterData=this.data.map((function(e){return e}))||[],this._setUniqueData(),this.data.filter(null,{$restore:!0},!0),this._filterData=this.data.map((function(e){return e}))||[],this._setUniqueData(!0)}},t.prototype._setUniqueData=function(e){var t=this;void 0===e&&(e=!1),this._filterData&&this.config.columns.forEach((function(i){i.header.forEach((function(n){if(n.content&&("selectFilter"===n.content||"comboFilter"===n.content)){var o=i.header.some((function(e){var t;return null===(t=e.filterConfig)||void 0===t?void 0:t.multiselection})),r=i.header.some((function(e){var t;return null===(t=e.filterConfig)||void 0===t?void 0:t.filter}));if(!e||e&&!o&&!r){var a=(0,g.getUnique)(t._filterData,i.id,o,i.editorType),s=(0,g.getEditorOptions)(i);"combobox"!==i.editorType&&"select"!==i.editorType&&"multiselect"!==i.editorType||!s||(a=a.map((function(e){var t=s.find((function(t){return"string"==typeof t?e===t:e===t.id}));return t&&"string"!=typeof t?t.value:e}))),a="string"!==i.type?Array.from(new Set(a.map((function(e){return(0,g.applyPattern)(e,i)})))):a,e?i.$activeFilterData=a:(i.$uniqueData=a,i.$activeFilterData&&delete i.$activeFilterData)}}}))}))},t.prototype._checkSelectFilterValue=function(){var e,t=null===(e=this.content)||void 0===e?void 0:e.selectFilter;if(t)for(var i in t.value){var n=this.getColumn(i),o=t.value[i];n.hidden||!o||n.$uniqueData.includes(o)||t.element[i].clear()}},t.prototype._clearFilterValue=function(e){var t=this;void 0===e&&(e=!1),["selectFilter","inputFilter"].map((function(e){var i;return null===(i=t.content)||void 0===i?void 0:i[e]})).filter((function(e){return e})).forEach((function(i){for(var n in i.value)!i.value[n]||!e&&t.getColumn(n).hidden||i.element[n].clear(!0)}))},t.prototype._adjustColumns=function(){var e=this,t=this.config.columns.filter((function(e){return!e.hidden})),i=[],n=[],o={};if(t.forEach((function(e){e.adjust?i.push(e):n.push(e)})),i.length||n.length){var a=this.config.data&&this.config.data.length?this.config.data:this.data.map((function(e){return e}));i.forEach((function(i){o=r(r({},o),e._adjustColumnsWidth({rows:a,cols:[i],totalCols:t,adjust:i.adjust}))})),n.length&&(o=r(r({},o),this._adjustColumnsWidth({rows:a,cols:n,totalCols:t})))}this.config.$totalWidth=t.reduce((function(e,t){if(o[t.id]){t.$fixedWidth=!0;var i=t.maxWidth,n=t.minWidth,r=o[t.id];t.$width=r,i&&r>i&&(t.$width=i),n&&t.$width<n&&(t.$width=n)}return e+t.$width}),0)},t.prototype._prepareData=function(e){var t=this;return(this.config.autoHeight||this.config.headerAutoHeight||this.config.footerAutoHeight)&&(this.config.autoHeight=this.config.headerAutoHeight=this.config.footerAutoHeight=!1),this._normalizeDataType(),this._setSummary(),this._adjustColumns(),e.map((function(e){return e.$height=Number(e.height)||t.config.rowHeight,e}))},t.prototype._adjustColumnsWidth=function(e){var t,i,n,o,r=this,a=e.rows,s=e.cols,l=e.adjust,c=void 0===l?this.config.adjust:l,u={};if("header"===c||!0===c){var d=s.filter((function(e){return e.header}));if(y=(0,g.getMaxColsWidth)(this._prepareColumnData(d,"header"),d,{font:"normal 14.4px Arial"},"header"))for(var h=0,f=Object.entries(y);h<f.length;h++){var p=f[h],v=p[0],_=p[1];u=Object.assign(u,((t={})[v]=+_+24+(o=this.getColumn(v),(0,m.isSortable)(r.config,o)?16:0),t))}}if("footer"===c||!0===c){var y;d=s.filter((function(e){return e.footer}));if(y=(0,g.getMaxColsWidth)(this._prepareColumnData(d,"footer"),d,{font:"normal 14.4px Arial"},"footer"))for(var b=0,w=Object.entries(y);b<w.length;b++){var x=w[b];v=x[0],_=x[1];(u[v]&&u[v]<+_+24||!u[v])&&(u=Object.assign(u,((i={})[v]=+_+24,i)))}}if(("data"===c||!0===c)&&(y=(0,g.getMaxColsWidth)(a,s,{font:"normal 14.4px Arial"},"data")))for(var C=0,E=Object.entries(y);C<E.length;C++){var S=E[C];v=S[0],_=S[1];(u[v]&&u[v]<+_+24||!u[v])&&(u=Object.assign(u,((n={})[v]=+_+24,n)))}return u},t.prototype._prepareColumnData=function(e,t){for(var i,n,o,a=[],s=0;s<e.length;s++){for(var l=[],c=e[s],u=0;u<(null==c?void 0:c[t].length);u++){var d={},h=null===(n=null==c?void 0:c[t][u])||void 0===n?void 0:n.text;if(h){"function"==typeof h&&(h=h(this.getSummary(c.id)));var f=null===(o=null==c?void 0:c[t][u])||void 0===o?void 0:o.htmlEnable;d[c.id]=h||"",f&&(d[c.id]=(0,m.removeHTMLTags)(d[c.id]))}else d[c.id]="";l.push(d)}for(var p=0;p<l.length;p++)for(var v=0,g=Object.entries(l[p]);v<g.length;v++){var _=g[v],y=_[0],b=_[1];a[p]=r({},a[p])||{},a[p]=Object.assign(a[p],((i={})[y]=b,i))}}return a},t.prototype._dragStart=function(e){if(this.config.dragMode&&("row"===this.config.dragItem||"both"===this.config.dragItem)&&!this.config.$editable){var t=this.getColumn(e.target.getAttribute("data-dhx-col-id"));if(!1===(null==t?void 0:t.draggable))return;var i=(0,u.locateNode)(e,"data-dhx-id"),n=i&&i.getAttribute("data-dhx-id");e.targetTouches&&(this._touch.start=!0),p.dragManager.onMouseDown({event:e,source:[n],itemsForGhost:[this._getRowGhost([n])],type:"row"})}},t.prototype._getRowGhost=function(e){var t,i=this.config,n=i.$totalWidth,o=i.$width,r=this.getRootNode(),a=(0,x.getCurrFixedCols)(this.config,b.Split.left),s=(0,x.getCurrFixedCols)(this.config,b.Split.right),l=(0,x.calcScrollBarWidth)(this.config,!!(null===(t=this.scrollView)||void 0===t?void 0:t.config.enable)),c=e.map((function(e){var t=(0,O.getRowNode)(e,r),i=n>o-l.y?o-l.y-x.BORDERS:n;if(a.length||s.length){var c=new Array(3);if(c[1]=t,a.length){var d=(0,O.getRowNode)(e,r,"left");i-=d.offsetWidth,c[0]=d}if(s.length){var h=(0,O.getRowNode)(e,r,"right");i-=h.offsetWidth,c[2]=h}var f=document.createElement("div");return f.style.display="flex",c.forEach((function(e){if(e){var n=e.cloneNode(!0);if(e===t){var o=(0,u.getNodeOffset)(e,r).left-(0,m.getTotalWidth)(a)-x.BORDERS/2;f.appendChild((0,O.getVisibleRowNode)(n,i,o))}else n.removeAttribute("aria-rowindex"),n.style.width=e.offsetWidth+"px",f.appendChild(n)}})),f}var p=t.cloneNode(!0);return(0,O.getVisibleRowNode)(p,i,(0,u.getNodeOffset)(t,r).left-x.BORDERS/2)})),d=document.createElement("div");return d.style.setProperty("width","initial","important"),c.forEach((function(e){return d.appendChild(e)})),d},t.prototype._initHooks=function(){var e=this;return{didMount:function(){e._canDataParse(!0)&&(e._container||e._applyAutoWidth(),e.data.parse(e.config.data)),e.config.autoWidth&&e._parseColumns(),e.config.keyNavigation&&(e.keyManager=new h.KeyManager((function(t,i){return!(i!==e._uid||!e.events.fire(b.GridEvents.beforeKeyDown,[t]))&&(e.events.fire(b.GridEvents.afterKeyDown,[t]),!0)})),e._initHotKey())}}},t.prototype._normalizeDataType=function(){var e=this,t=this.config.columns.reduce((function(e,t){return"number"===t.type&&e.push(t),e}),[]);t.length&&this.data.forEach((function(i){for(var n,o=0,r=t;o<r.length;o++){var a=r[o],s=(0,g.getValueForNumberColumn)(a,i[a.id]);if(Number.isNaN(s))throw new Error("Incorrect data in column with type 'number', see docs: https://docs.dhtmlx.com/suite/grid/api/api_gridcolumn_properties/");i[a.id]!==s&&e.data.update(i.id,((n={})[a.id]=s,n),!0)}}))},t.prototype._applyLocalFilter=function(e){void 0===e&&(e=!1);var t={add:!0,permanent:!0,$local:!0},i=this.data.getRawFilters(),n=Object.keys(i||{}).find((function(e){return i[e].config.$local}));n&&(t.id=n),e?this.data.filter((function(e){return e}),t,!0):this.data.filter((function(e){return e&&!e.hidden}),t,!0)},t.prototype._normalizeSpans=function(){var e,t=this;this.config.spans=null===(e=this.config.spans)||void 0===e?void 0:e.map((function(e){return(0,I.normalizeSpan)(e,t.config,t.data)}))},t.prototype._hideColumn=function(e){e.hidden=!0,this.config.$totalWidth-=e.$width,this._parseColumns(),this.config.data=this._prepareData(this.data);var t=this._activeFilters&&this._activeFilters[e.id];t&&(this._hiddenFilters||(this._hiddenFilters={}),this._hiddenFilters[e.id]=t,delete this._activeFilters[e.id],this._checkFilters()),this._normalizeSpans(),this.paint()},t.prototype._showColumn=function(e){e.hidden=!1,this.config.$totalWidth+=e.$width,this._parseColumns(),this.config.data=this._prepareData(this.data);var t=this._hiddenFilters&&this._hiddenFilters[e.id];t&&(this._activeFilters[e.id]=t,delete this._hiddenFilters[e.id],this._checkFilters(),this._checkSelectFilterValue()),this._normalizeSpans(),this.paint()},t.prototype._setSummary=function(){var e=this,t=this.data.getRawData(0,-1,null,2).filter((function(e){return e!=e.$group&&e!=e.$groupSummary}));"tree"===this.config.type&&(t=t.filter((function(t){return!e.data.haveItems(t.id)}))),this.config.summary&&Object.entries(this.config.summary).forEach((function(i){var n=i[0],o=i[1];e._commonSummary[n]=e._applyMethod(o,t)})),this.config.columns.forEach((function(i){var n;if(i.summary){var o=i.id,r=i.summary;e._colSummary[o]||(e._colSummary[o]={}),"string"==typeof r?e._colSummary[o][r]=null===(n=p.methods[r])||void 0===n?void 0:n.call(p.methods,t,o):Object.entries(r).forEach((function(i){var n=i[0],r=i[1];e._colSummary[o][n]=e._applyMethod(r,t,o)}))}}))},t.prototype._applyMethod=function(e,t,i){var n;return"function"==typeof e?e(t):"string"==typeof e&&(null===p.methods||void 0===p.methods?void 0:p.methods[e])?null===p.methods||void 0===p.methods?void 0:p.methods[e](t,i):Array.isArray(e)&&(null===p.methods||void 0===p.methods?void 0:p.methods[null==e?void 0:e[1]])?null===(n=p.methods[e[1]])||void 0===n?void 0:n.call(p.methods,t,e[0]):null},t.prototype._canDataParse=function(e){var t;return void 0===e&&(e=!1),!!((null===(t=this.config.data)||void 0===t?void 0:t.length)&&this.config.data instanceof Array&&this.config.columns)&&(this.config.autoWidth&&this.config.autoHeight?e:!e)},t.prototype._init=function(){this.events=new c.EventSystem(this),this._events=new c.EventSystem(this),this._attachDataCollection(),this.export=new v.Exporter("grid",this.version,this),this._setEventHandlers()},t.prototype._attachDataCollection=function(){if(this.config.data instanceof p.DataCollection)return this.data=this.config.data,this.data.config.collapsed=this.config.collapsed,void(this.config.data=this.data.serialize());this._createCollection()},t.prototype._setMarks=function(e,t){for(var i=[],n=0,o=this.data.map((function(t){return i.push(t[e.id]),{id:t.id,data:t[e.id],row:t}}));n<o.length;n++){var r=o[n],a=t(r.data,i,r.row,e);a&&(e.$cellCss=e.$cellCss||{},e.$cellCss[r.id]+=" "+a)}},t.prototype._checkMarks=function(){var e=this;this.config.columns.map((function(t){var i=t.mark;i&&("function"==typeof i?e._setMarks(t,i):e._setMarks(t,(function(e,t){var n=[];t.forEach((function(e){null!=e&&""!==e&&n.push(parseFloat(e))}));var o=(0,d.getMinArrayNumber)(n),r=(0,d.getMaxArrayNumber)(n);return i.max&&r===parseFloat(e)?i.max:!(!i.min||o!==parseFloat(e))&&i.min})))}))},t.prototype._removeMarks=function(){this.config.columns.forEach((function(e){e.mark&&(e.$cellCss={})}))},t.prototype._detectColsTypes=function(){this.config.columns.forEach((function(e){return e.type?e:e.numberMask?(e.type="number",e):void(e.type||(e.type="string"))}))},t.prototype._destroyContent=function(){for(var e in this.content)"comboFilter"===e&&this.content[e].destroy()},t.prototype._render=function(){this.paint()},t.prototype._initHotKey=function(e){void 0===e&&(e=!1);var t=(0,S.getKeysHandlers)(this);for(var i in t)this.keyManager.exist(i)||this.keyManager.addHotKey(i,t[i]);if(!e)for(var i in this.config.hotkeys)this.keyManager.addHotKey(i,this.config.hotkeys[i])},t.prototype._normalizeConfig=function(e){return Object.keys(e).forEach((function(t){t.startsWith("$")&&delete e[t]})),e},t.prototype._autoScroll=function(e){var t,i,n,o=(null===(t=this.scrollView)||void 0===t?void 0:t.config.enable)?null===(i=this.getRootNode())||void 0===i?void 0:i.querySelector(".scroll-view"):null===(n=this.getRootNode())||void 0===n?void 0:n.querySelector(".dhx_grid-body");if(o){var r=null,a=o.getBoundingClientRect(),s=a.top,l=a.bottom,c=a.left,u=a.right,d=a.height,h=a.width,f=function(e){"up"===e||"down"===e?o.scrollBy(0,"up"===e?-40:40):o.scrollBy("left"===e?-40:40,0),r=setTimeout((function(){f(e)}),100)},p=function(t){var i=t.clientX,n=t.clientY;switch(e){case"horizontal":i>u-30&&i<u&&n>s&&n<l?r||f("right"):i>c&&i<c+30&&n>s&&n<l?r||f("left"):r&&(clearTimeout(r),r=null);break;case"vertical":n>l-30&&n<l&&i>c&&i<u?r||f("down"):n>s&&n<s+30&&i>c&&i<u?r||f("up"):r&&(clearTimeout(r),r=null)}};(h<o.scrollWidth||d<o.scrollHeight)&&(document.addEventListener("pointermove",p),document.addEventListener("pointerup",(function(){document.removeEventListener("pointermove",p),r&&clearTimeout(r)}),{once:!0}))}},t.prototype._applyAutoWidth=function(){var e,t,i=this._container||(null===(e=this.getRootView().node.parent)||void 0===e?void 0:e.el);if(i){var n=(0,w.getElementSizes)(i),o=null===(t=this.scrollView)||void 0===t?void 0:t.config.enable;(0,w.applyAutoWidth)(this.config,n,o)}},t}(f.View);t.Grid=M},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.proRender=t.render=t.applyAutoWidth=t.getElementSizes=t.getRenderConfig=void 0;var o=i(1),r=i(3),a=i(17),s=i(20),l=i(8),c=i(34),u=i(88),d=i(89),h=i(0),f=i(23),p=i(160),v=i(161);function g(e,t,i,n){var o=void 0===i?[0,0]:i,r=o[0],a=o[1],s=e[0],l=e[1],c=t[0],u=t[1];return c<=s&&s<=u||c<=l&&l<=u||s<=c&&u<=l||s<r||a&&l>=n-a}function _(e,t,i){var o=e.config,r=o.spans,s=void 0===r?[]:r,c=o.columns,u=o.leftSplit,d=void 0===u?0:u,h=o.topSplit,p=void 0===h?0:h,_=o.rightSplit,m=void 0===_?0:_,y=o.bottomSplit,b=void 0===y?0:y,w=c.filter((function(e){return!e.hidden})),x=(0,a.calculateVisibleRange)(i,e._scroll,o,t),C=w.slice(x.xStart,x.xEnd),E=t.slice(x.yStart,x.yEnd),S=s.filter((function(e){var i;if(!(null===(i=e.$renderFrom)||void 0===i?void 0:i.length))return!1;var n=g(e.$rowsVisibility,[x.yStart,x.yEnd],[p,b],t.length),o=g(e.$colsVisibility,[x.xStart,x.xEnd],[d,m],c.length);return n&&o})),I={left:(0,f.getCurrFixedCols)(o,l.Split.left),right:(0,f.getCurrFixedCols)(o,l.Split.right)},k={top:t.slice(0,o.topSplit||0),bottom:o.bottomSplit?t.slice(-o.bottomSplit):[]};return e.config.$subRowCells&&(0,v.setSubRowCell)(e,E),n(n({},o),{data:t,columns:o.columns,scroll:e._scroll,$positions:x,headerHeight:o.$headerHeight,footerHeight:o.$footerHeight,firstColId:w[0]&&w[0].id,events:e.events,_events:e._events,filteredColumns:w,currentColumns:C,currentRows:E,currentSpans:S,fixedColumns:I,fixedRows:k,sort:e._sortingStates,content:e.content,gridId:e._uid,commonSummary:e._commonSummary,colSummary:e._colSummary,$renderFrom:"render"})}function m(e){if(e&&(e.tagName||(e=e._parent._container),e)){var t=e.currentStyle||window.getComputedStyle(e),i=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)||0,n=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)||0;return{width:e.clientWidth-i,height:e.clientHeight-n}}}function y(e,t,i){var r,a=(0,c.getCells)(e),l=e.filteredColumns,u=e.$resizing,d=e.$totalHeight,f=e.$totalWidth,p=e.leftSplit,g=e.data,_=e.$positions,m=(0,c.getSpans)(e);if(u){var y=(0,h.findIndex)(l,(function(e){return e.id===u})),b=(0,s.getTotalWidth)(l.slice(0,y))+l[y].$width;r=(0,o.el)(".dhx_grid-resize-line",{style:{top:0,left:b,height:d}})}var w=e.selection?e.selection.toHTML():null;w="string"==typeof w?(0,o.el)("div.dhx_selection",{".innerHTML":w}):w;var x,C=_;return(0,o.el)(".dhx_data-wrap",{style:{height:d,width:f,"padding-left":t.x,"padding-top":t.y},role:"presentation","data-dhx-drop-area":"row"},[(0,o.el)(".dhx_grid_data".concat(p?".dhx_grid_fixed_left":""),n(n({_flags:o.KEYED_LIST},(0,c.getHandlers)(C.yStart,C.xStart,e)),(x=g.length,{role:"rowgroup","aria-rowcount":x})),a),(0,v.getSubRowContent)(e),(0,o.el)(".dhx_span-spans",n({role:"presentation"},(0,c.getHandlers)(C.yStart,C.xStart,e)),m),(0,o.el)(".dhx_grid_selection",{_ref:"selection","aria-hidden":"true"},[].concat(w,r))])}function b(e,t,i){var n=i.height-f.BORDERS;return n=t?n:n-e.headerHeight,e.$footer?t?n:n-e.footerHeight:n}function w(e,t,i){void 0===i&&(i=!1);var n=!i&&e.$totalHeight>=t.height-(e.$headerHeight||0)?(0,r.getScrollbarWidth)():0,o=t.width-f.BORDERS-n;if(!(o<0)){var a=(e.columns||[]).filter((function(e){return!e.hidden})),l=[],c=[],u=!1;a.forEach((function(t){t.width||t.$fixedWidth||!(0,s.isAutoWidth)(e,t)?l.push(t):c.push(t)}));do{u=!1;for(var d=c.reduce((function(e,t){return e+(t.gravity||1)}),0),h=(0,s.getTotalWidth)(l),p=function(e){var t=o>h?(o-h)*((e.gravity||1)/d):0,i=e.minWidth&&t<e.minWidth,n=e.maxWidth&&t>e.maxWidth;if(i||n)return u=!0,e.$width=i?e.minWidth:e.maxWidth,c=c.filter((function(t){return t.id!=e.id})),l.push(e),"break";e.$width=t},v=0,g=c;v<g.length;v++){if("break"===p(g[v]))break}}while(u)}}t.getRenderConfig=_,t.getElementSizes=m,t.applyAutoWidth=w,t.render=function(e,t,i,r,a){var h=m(t._container);e&&e.node&&e.node.parent&&e.node.parent.el&&(h=m(e.node.parent.el));var p=t.config;if(!p)return(0,o.el)("div");if(!p.columns.length)return(0,o.el)(".dhx_grid",{"data-dhx-widget-id":a,"data-dhx-root-id":p.rootParent,"data-dhx-drop-area":"common",role:"empty-grid"});var v=t.data.getRawData(0,-1,null,2);p.columns.reduce((function(e,t){return t.hidden?e:t.hidden}),!0)?p.$totalHeight=0:p.$totalHeight=v.reduce((function(e,t){return e+(t.$height||0)}),0);var g={width:(p.width&&"number"==typeof p.width?p.width:null==h?void 0:h.width)||0,height:(p.height&&"number"==typeof p.height?p.height:null==h?void 0:h.height)||0};(0,s.isAutoWidth)(p)&&(w(p,g),p.$totalWidth=(0,s.getTotalWidth)(p.columns.filter((function(e){return!e.hidden})))),p.$width=g.width,p.$height=g.height;var x=_(t,v,g);x.selection=r,x.datacollection=t.data;var C=(0,c.getShifts)(x);x.$scrollBarWidth=(0,f.calcScrollBarWidth)(x);var E,S,I,k,O=(0,s.isCssSupport)("position","sticky"),M=b(x,O,g),R={wrapper:g,sticky:O,shifts:C,gridBodyHeight:M},A=(0,d.getFixedRows)(x,n(n({},R),{name:"header",position:"top"})),P=x.$footer?(0,d.getFixedRows)(x,n(n({},R),{name:"footer",position:"bottom"})):null,T=x.$totalWidth+f.BORDERS<g.width?"dhx_grid-less-width":"",D=x.$totalHeight+f.BORDERS<g.height?"dhx_grid-less-height":"",F=x.fixedColumns.right.length?"dhx_grid__contains_cols_right--fixed":"",V=p.bottomSplit?"dhx_grid__contains_rows_bottom--fixed":"";if(!e.node){var L=t.getScrollState(),N=L.x,H=L.y;(0,o.awaitRedraw)().then((function(){t.scroll(N,H)}))}return(0,o.el)(".dhx_grid.dhx_widget",n({class:(x.css||"")+(O?"":" dhx_grid_border")+(p.multiselection?" dhx_no-select--pointer":""),"data-dhx-widget-id":a,"data-dhx-root-id":p.rootParent,"data-dhx-drop-area":"common"},(E=x.data,S=p.columns,I=x.editable,k=x.multiselection,{role:"grid","aria-rowcount":E.length,"aria-colcount":S.filter((function(e){return!e.hidden})).length,"aria-readonly":I?"false":"true","aria-multiselectable":k?"true":"false"})),[(0,o.resizer)((function(){return t.paint()})),(0,o.el)(".dhx_grid-content",n(n({style:n({},g)},i),{class:"".concat(T," ").concat(D," ").concat(F," ").concat(V).trim(),role:"presentation"}),[O?null:A,(0,o.el)(".dhx_grid-body",{style:{height:M,width:g.width-f.BORDERS},onscroll:i.onscroll,_ref:"grid_body",role:"presentation"},[(0,o.el)("div",{},[O?A:null,y(x,C),O?P:null])]),(0,u.getFixedColsHeader)(x,R,l.Split.left),(0,u.getFixedColsHeader)(x,R,l.Split.right),(0,u.getFixedCols)(x,R,l.Split.left),(0,u.getFixedCols)(x,R,l.Split.right),(0,d.getFixedDataRows)(x,R,l.Split.top),(0,d.getFixedDataRows)(x,R,l.Split.bottom),O?null:P])])},t.proRender=function(e,t,i,r,h){var v,g=m(t._container);e&&e.node&&e.node.parent&&e.node.parent.el&&(g=m(e.node.parent.el));var x=t.config;if(!x)return(0,o.el)("div");if(!x.columns.length)return(0,o.el)(".dhx_grid",{"data-dhx-widget-id":h,"data-dhx-root-id":x.rootParent,"data-dhx-drop-area":"common",role:"empty-grid"});var C,E=t.data.getRawData(0,-1,null,2),S=x.topSplit||0,I=x.bottomSplit||0,k=0,O=0;x.columns.reduce((function(e,t){return t.hidden?e:t.hidden}),!0)?x.$totalHeight=0:x.$totalHeight=E.reduce((function(e,t,i){return S&&i<S+k&&(t.$subRowHeight=0,t.$opened=!1,t.hidden&&k++),I&&i>=E.length-I-O&&(t.$subRowHeight=0,t.$opened=!1,t.hidden&&O++),t.$index=i,e+(0,a.getTotalRowHeight)(t)}),0),"auto"===t.config.height&&(C=function(e,t,i){var n,o,r=e._container,a=t.$headerHeight+(t.$footerHeight&&t.$footerHeight+1)+t.$totalHeight+f.BORDERS;if(r){var s=window.getComputedStyle(r),l=s.minHeight,c=s.maxHeight;return a<=parseFloat(l)?parseFloat(l):a>=parseFloat(c)?parseFloat(c):a+(0,f.calcScrollBarWidth)(t,!!(null===(n=e.scrollView)||void 0===n?void 0:n.config.enable),i).x}return a+(i?(0,f.calcScrollBarWidth)(t,!!(null===(o=e.scrollView)||void 0===o?void 0:o.config.enable),i).x:0)}(t,x,g));var M=x.width&&"number"==typeof x.width?x.width:null==g?void 0:g.width,R=x.height&&"number"==typeof x.height?x.height:null==g?void 0:g.height,A={width:M||0,height:("auto"===t.config.height?C:R)||0},P=x.group;(null==P?void 0:P.panel)&&(A.height-=P.panelHeight||40),(0,s.isAutoWidth)(x)&&(w(x,A,t.scrollView&&t.scrollView.config.enable),x.$totalWidth=(0,s.getTotalWidth)(x.columns.filter((function(e){return!e.hidden})))),x.$width=A.width,x.$height=A.height;var T=_(t,E,A);T.selection=r,T.datacollection=t.data;var D=(0,c.getShifts)(T);T.$scrollBarWidth=(0,f.calcScrollBarWidth)(T,!!(null===(v=t.scrollView)||void 0===v?void 0:v.config.enable));var F=(0,s.isCssSupport)("position","sticky"),V=null==P?void 0:P.panel,L=b(T,F,A),N={wrapper:A,sticky:F,shifts:D,gridBodyHeight:L},H=(0,d.getFixedRows)(T,n(n({},N),{name:"header",position:"top"})),j=T.$footer?(0,d.getFixedRows)(T,n(n({},N),{name:"footer",position:"bottom"})):null,z=T.$totalWidth+f.BORDERS<A.width?"dhx_grid-less-width":"",$=T.$totalHeight+f.BORDERS<A.height?"dhx_grid-less-height":"",B=T.fixedColumns.right.length?"dhx_grid__contains_cols_right--fixed":"",q=x.bottomSplit?"dhx_grid__contains_rows_bottom--fixed":"";if(!e.node){var W=t.getScrollState(),G=W.x,U=W.y;(0,o.awaitRedraw)().then((function(){t.scroll(G,U)}))}var X=(0,o.el)("div",{},[F?H:null,y(T,D,t.getScrollState()),F?j:null]);return(0,o.el)(".dhx_grid.dhx_widget",{class:(T.css||"")+(F?"":" dhx_grid_border")+(x.multiselection?" dhx_no-select--pointer":""),style:{height:null!=C?C:null},"data-dhx-widget-id":h,"data-dhx-root-id":x.rootParent,role:"grid","aria-rowcount":T.data.length,"aria-colcount":T.filteredColumns.length,"data-dhx-drop-area":"common"},[V&&(0,p.getGroupPanel)(x.$grouped,t)||null,(0,o.resizer)((function(){return t.paint()})),(0,o.el)(".dhx_grid-content",n(n({style:n({},A)},i),{class:"".concat(z," ").concat($," ").concat(B," ").concat(q).trim(),role:"presentation"}),[F?null:H,(0,o.el)(".dhx_grid-body",{style:{height:L,width:A.width-f.BORDERS},onscroll:i.onscroll,_ref:"grid_body",role:"presentation"},[t.scrollView&&t.scrollView.config.enable?t.scrollView.render([X]):X]),(0,u.getFixedColsHeader)(T,N,l.Split.left),(0,u.getFixedColsHeader)(T,N,l.Split.right),(0,u.getFixedCols)(T,N,l.Split.left),(0,u.getFixedCols)(T,N,l.Split.right),(0,d.getFixedDataRows)(T,N,l.Split.top),(0,d.getFixedDataRows)(T,N,l.Split.bottom),F?null:j])])}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Cell=void 0;var a=i(0),s=i(1),l=i(9),c=i(55),u=i(145),d=i(4),h=i(54),f=function(e){function t(t,i){var n=e.call(this,t,i)||this;n._disabled=[];var o=t;return o&&o.isVisible&&(n._parent=o),n._parent&&n._parent.events?n.events=n._parent.events:n.events=new d.EventSystem(n),n.config.full=void 0===n.config.full?Boolean(n.config.header||n.config.collapsable||n.config.headerHeight||n.config.headerIcon||n.config.headerImage):n.config.full,n._afterWindowResized=n._resizedWindow.bind(n),n.id=n.config.id||(0,a.uid)(),n._initHandlers(),n._progress=!!n.config.progressDefault,n._stopProgressDefault=!1,n._isXDirection()&&!i.width&&(i.$autoWidth=!0),n._isXDirection()||i.height||(i.$autoHeight=!0),n}return o(t,e),t.prototype.paint=function(){var e;if(this.isVisible()){var t=this.getRootView();t?t.redraw():null===(e=this._parent)||void 0===e||e.paint()}},t.prototype.isVisible=function(){var e;if(!this._parent)return!(!this._container||!this._container.tagName)||Boolean(this.getRootNode());var t=null===(e=this._parent.config)||void 0===e?void 0:e.activeView;return(!t||t===this.id)&&(!this.config.hidden&&(!this._parent||this._parent.isVisible()))},t.prototype.hide=function(){this.events.fire(c.LayoutEvents.beforeHide,[this.id])&&(this.config.hidden=!0,this._resetCellsSize(),this._parent&&this._parent.paint&&this._parent.paint(),this.events.fire(c.LayoutEvents.afterHide,[this.id]))},t.prototype.show=function(){this.events.fire(c.LayoutEvents.beforeShow,[this.id])&&(this._parent&&this._parent.config&&void 0!==this._parent.config.activeView?this._parent.config.activeView=this.id:this.config.hidden=!1,this._parent&&!this._parent.isVisible()&&this._parent.show(),this.paint(),this.events.fire(c.LayoutEvents.afterShow,[this.id]))},t.prototype.expand=function(){this.events.fire(c.LayoutEvents.beforeExpand,[this.id])&&(this.config.collapsed=!1,this._checkNextSize()||this._checkNextSize(this._getAnyFlexCell()),this.events.fire(c.LayoutEvents.afterExpand,[this.id]),this.paint())},t.prototype.collapse=function(){this.events.fire(c.LayoutEvents.beforeCollapse,[this.id])&&(this.config.collapsed=!0,this._checkNextSize()||this._checkNextSize(this._getAnyFlexCell()),this.events.fire(c.LayoutEvents.afterCollapse,[this.id]),this.paint())},t.prototype.toggle=function(){this.config.collapsed?this.expand():this.collapse()},t.prototype._checkNextSize=function(e){var t=null!=e?e:this._getNextCell();return!!t&&(this._isXDirection()&&t.config.$autoWidth&&t.config.width?(t.config.width=void 0,!0):!this._isXDirection()&&t.config.$autoHeight&&t.config.height?(t.config.height=void 0,!0):!e&&t._checkNextSize())},t.prototype.getParent=function(){return this._parent},t.prototype.destructor=function(){var e;this.events&&this.events.clear(),window.removeEventListener("resize",this._afterWindowResized),this._ui&&this._ui.config&&"function"==typeof(null===(e=this._ui)||void 0===e?void 0:e.destructor)&&this._ui.destructor(),this.config=this.events=this.id=this._parent=this._handlers=this._uid=this._disabled=this._resizerHandlers=null,this.unmount()},t.prototype.getWidget=function(){return this._ui},t.prototype.getCellView=function(){return this._parent&&this._parent.getRefs(this._uid)},t.prototype.attach=function(e,t){return this.config.html=null,"object"==typeof e?this._ui=e:"string"==typeof e?this._ui=new window.dhx[e](null,t):"function"==typeof e&&(e.prototype instanceof l.View?this._ui=new e(null,t):this._ui={getRootView:function(){return e(t)}}),this.paint(),this._ui},t.prototype.attachHTML=function(e){this.config.html=e,this.paint()},t.prototype.detach=function(){this._stopProgressDefault=!1,this._ui=this.config.html=null,this.paint()},t.prototype.progressShow=function(){this.config.progressDefault&&(this._stopProgressDefault=!1),this._progress=!0,this.paint()},t.prototype.progressHide=function(){this.config.progressDefault&&(this._stopProgressDefault=!0),this._progress=!1,this.paint()},t.prototype.isVisibleProgress=function(){return this._progress},t.prototype.toVDOM=function(e){var t,i,n;if(this._saveTheme(),null===this.config&&(this.config={}),!this.config.hidden){var o,l=this.config.$fieldset,c=this._calculateStyle(),u=(0,a.isDefined)(this.config.padding)?isNaN(Number(this.config.padding))?{padding:this.config.padding}:{padding:"".concat(this.config.padding,"px")}:"",d=this.config.full||this.config.html?c:r(r({},c),u),h=this._checkProgress()?this._getProgressBar():null;if(!this.config.html)if(this._ui){var f=this._ui.getRootView();f.render&&(f=(0,s.inject)(f)),o=[f]}else o=e||null;var p=this.config.resizable&&!this._isLastCell()&&this._getNextCell()&&!this.config.collapsed?(0,s.el)(".dhx_layout-resizer."+(this._isXDirection()?"dhx_layout-resizer--x":"dhx_layout-resizer--y"),r(r({},this._resizerHandlers),{_ref:"resizer_"+this._uid,tabindex:0}),[(0,s.el)("span.dhx_layout-resizer__icon",{class:"dxi "+(this._isXDirection()?"dxi-dots-vertical":"dxi-dots-horizontal")})]):null,v={};if(this.config.on)for(var g in this.config.on)v["on"+g]=this.config.on[g];var _="",m=this.config.cols||this.config.rows;if(this.config.type&&m)switch(this.config.type){case"line":_=" dhx_layout-line";break;case"wide":_=" dhx_layout-wide";break;case"space":_=" dhx_layout-space"}var y=l?(0,s.el)("fieldset.dhx_form-fieldset",{class:this.config.$disabled?" dhx_form-fieldset--disabled":"",style:u,disabled:this.config.$disabled},[(0,s.el)("legend.dhx_form-fieldset-legend",{class:"dhx_form-fieldset-legend--".concat(this.config.labelAlignment||"left")},this.config.label),(0,s.el)(".dhx_layout-cell-content",{class:this._getCss(!1)},[].concat(o))]):this.config.full?[(0,s.el)("div",{tabindex:this.config.collapsable?"0":"-1",role:this.config.collapsable?"button":null,"aria-label":this.config.collapsable?"click to ".concat(this.config.collapsed?"expand":"collapse"):null,class:"dhx_layout-cell-header"+(this._isXDirection()?" dhx_layout-cell-header--col":" dhx_layout-cell-header--row")+(this.config.collapsable?" dhx_layout-cell-header--collapseble":"")+(this.config.collapsed?" dhx_layout-cell-header--collapsed":"")+(((this.getParent()||{}).config||{}).isAccordion?" dhx_layout-cell-header--accordion":""),style:{height:this.config.headerHeight},onclick:this._handlers.toggle,onkeydown:this._handlers.enterCollapse},[this.config.headerIcon&&(0,s.el)("span.dhx_layout-cell-header__icon",{class:this.config.headerIcon}),this.config.headerImage&&(0,s.el)(".dhx_layout-cell-header__image-wrapper",[(0,s.el)("img",{src:this.config.headerImage,class:"dhx_layout-cell-header__image"})]),this.config.header&&(0,s.el)("h3.dhx_layout-cell-header__title",this.config.header),this.config.collapsable?(0,s.el)("div.dhx_layout-cell-header__collapse-icon",{class:this._getCollapseIcon()}):(0,s.el)("div.dhx_layout-cell-header__collapse-icon",{class:"dxi dxi-empty"})]),this.config.collapsed?null:(0,s.el)("div",{style:r(r({},u),{height:"calc(100% - ".concat(this.config.headerHeight||37,"px)")}),class:this._getCss(!0)+" dhx_layout-cell-content"+(this.config.type?_:"")},this.config.html?[(0,s.el)("div",{".innerHTML":this.config.html,class:"dhx_layout-cell dhx_layout-cell-inner_html"})]:o)]:!this.config.html||this.config.rows&&this.config.cols&&this.config.views?o:[this.config.collapsed?null:(0,s.el)(".dhx_layout-cell-content",{style:u},[(0,s.el)(".dhx_layout-cell-inner_html",{".innerHTML":this.config.html})])],b=(0,s.el)("div",r(r(((t={_key:this.config.id||this._uid,_ref:this._uid})["aria-label"]=this.config.id?"tab-content-"+this.config.id:null,t["data-cell-id"]=null!==(i=this.config.id)&&void 0!==i?i:null,t["data-dhx-theme"]=null!==(n=this._theme)&&void 0!==n?n:null,t),v),{class:this._getCss(!1)+(this.config.css?" "+this.config.css:"")+(this.config.collapsed?" dhx_layout-cell--collapsed":"")+(this.config.resizable?" dhx_layout-cell--resizable":"")+(this.config.type&&!this.config.full?_:""),style:l?c:d}),y||h?[].concat(y,h):null);return p?[].concat(b,p):b}},t.prototype._saveTheme=function(){var e,t=null===(e=this.getCellView())||void 0===e?void 0:e.el;t&&(this._theme=t.getAttribute("data-dhx-theme"))},t.prototype._getProgressBar=function(){return(0,s.el)("span",{class:"dhx_progress-bar"},[(0,s.sv)("svg",{viewBox:"25 25 50 50",class:"dhx_spinner"},[(0,s.sv)("circle",{cx:"50",cy:"50",r:"20",class:"path"})])])},t.prototype._getCss=function(e){return"dhx_layout-cell"},t.prototype._initHandlers=function(){var e=this;!this.getParent()||this.config.cols||this.config.rows||window.addEventListener("resize",this._afterWindowResized),this._handlers={enterCollapse:function(t){13===t.keyCode&&e._handlers.toggle()},collapse:function(){e.config.collapsable&&e.collapse()},expand:function(){e.config.collapsable&&e.expand()},toggle:function(){e.config.collapsable&&e.toggle()}};var t={left:null,top:null,isActive:!1,range:null,xLayout:null,nextCell:null,size:null,resizerLength:null,margin:null,collapsedSize:null},i=function(i,n){if(void 0===n&&(n={x:0,y:0}),t.isActive){var o=t.xLayout,r=i.targetTouches?i.targetTouches[0].clientX:i.clientX+n.x,a=i.targetTouches?i.targetTouches[0].clientY:i.clientY+n.y,s=o?r-t.range.min+window.pageXOffset:a-t.range.min+window.pageYOffset,l=o?"width":"height";s<0?s=t.resizerLength/2:s>t.size&&(s=t.size-t.resizerLength);var u=function(t){var i;return parseInt(null===(i=e.config[t])||void 0===i?void 0:i.toString())},d=u(o?"maxWidth":"maxHeight"),h=u(o?"minWidth":"minHeight");(!d||s<d)&&(!h||s>h)&&(e.config[l]=s-t.resizerLength/2+"px",t.nextCell.config[l]=t.size-s-t.resizerLength/2+"px",t.nextCell._getAnyFlexCell()&&(t.nextCell._getAnyFlexCell().config[l]=void 0),e.paint(),e.events.fire(c.LayoutEvents.resize,[e.id]))}},n={},o=function(r){if(t.isActive=!1,document.body.classList.remove("dhx_no-select--resize"),r.targetTouches)for(var a in document.removeEventListener("touchend",o),document.removeEventListener("touchmove",i),n)n[a].node.contentWindow.document.removeEventListener("touchend",o),n[a].node.contentWindow.document.removeEventListener("touchmove",n[a].listener);else for(var a in document.removeEventListener("mouseup",o),document.removeEventListener("mousemove",i),n)n[a].node.contentWindow.document.removeEventListener("mouseup",o),n[a].node.contentWindow.document.removeEventListener("mousemove",n[a].listener);e.events.fire(c.LayoutEvents.afterResizeEnd,[e.id])},r=function(i){if(i.targetTouches&&i.preventDefault(),3!==i.which&&(t.isActive&&o(i),e.events.fire(c.LayoutEvents.beforeResizeStart,[e.id]))){document.body.classList.add("dhx_no-select--resize");var n=e.getCellView(),r=e._getNextCell(),a=r.getCellView(),s=e._getResizerView(),l=n.el.getBoundingClientRect(),d=s.el.getBoundingClientRect(),h=a.el.getBoundingClientRect();t.xLayout=e._isXDirection(),t.left=l.left+window.pageXOffset,t.top=l.top+window.pageYOffset,t.collapsedSize=e._getCollapsedSize(e,r),t.margin=(0,u.getMarginSize)(e.getParent().config),t.range=(0,u.getBlockRange)(l,h,t.xLayout),t.size=t.range.max-t.range.min-t.margin-t.collapsedSize,t.isActive=!0,t.nextCell=r,t.resizerLength=t.xLayout?d.width:d.height}};this._resizerHandlers={onmousedown:function(e){r(e),document.addEventListener("mouseup",o),document.addEventListener("mousemove",i);var t=document.querySelectorAll("iframe");if(t.length)for(var a in t.forEach((function(e,t){var o={x:e.getBoundingClientRect().x,y:e.getBoundingClientRect().y};n[t]={node:e,listener:function(e){return i(e,o)}}})),n)n[a].node.contentWindow.document.addEventListener("mouseup",o),n[a].node.contentWindow.document.addEventListener("mousemove",n[a].listener)},ontouchstart:function(e){r(e),document.addEventListener("touchend",o),document.addEventListener("touchmove",i);var t=document.querySelectorAll("iframe");if(t.length)for(var a in t.forEach((function(e,t){var o={x:e.getBoundingClientRect().x,y:e.getBoundingClientRect().y};n[t]={node:e,listener:function(e){return i(e,o)}}})),n)n[a].node.contentWindow.document.addEventListener("touchend",o),n[a].node.contentWindow.document.addEventListener("touchmove",n[a].listener)},ondragstart:function(e){return e.preventDefault()}}},t.prototype._getCollapsedSize=function(e,t){var i=0,n=this._parent,o=n._cells.indexOf(e),r=n._cells.indexOf(t);if(r-o==1)return i;for(var a=o+1;a<r;a++)n._cells[a].config.collapsed&&(this._isXDirection()?i+=45:i+=Number(n._cells[a].config.headerHeight)||37);return i},t.prototype._getCollapseIcon=function(){return this._isXDirection()&&this.config.collapsed?"dxi dxi-chevron-right":this._isXDirection()&&!this.config.collapsed?"dxi dxi-chevron-left":!this._isXDirection()&&this.config.collapsed?"dxi dxi-chevron-up":this._isXDirection()||this.config.collapsed?void 0:"dxi dxi-chevron-down"},t.prototype._isLastCell=function(){var e=this._parent;return e&&e._cells.indexOf(this)===e._cells.length-1},t.prototype._getNextCell=function(){var e=this._parent,t=e._cells.indexOf(this),i=!this._isLastCell()&&e._cells[t+1];return!!i&&(i.config.hidden||i.config.collapsed?i._getNextCell():i)},t.prototype._getAnyFlexCell=function(e){var t,i=this;void 0===e&&(e=!1);var n=this._parent,o=this._isXDirection()?"$autoWidth":"$autoHeight",r=null===(t=null==n?void 0:n._cells)||void 0===t?void 0:t.filter((function(t){return!0===t.config[o]&&(!!e||t.id!==i.id)}));return!!(null==r?void 0:r.length)&&r[r.length-1]},t.prototype._getResizerView=function(){return this._parent.getRefs("resizer_"+this._uid)},t.prototype._isXDirection=function(){return this._parent&&this._parent._xLayout},t.prototype._checkProgress=function(){return this instanceof h.Layout?this.isVisibleProgress():(this._calculateProgressState(),(this._progress||this._checkAutoProgress())&&!this.config.collapsed&&!this.config.hidden&&!this._parent.isVisibleProgress())},t.prototype._checkAutoProgress=function(){if(this._stopProgressDefault)return!1;var e=this.config,t=e.html;return e.progressDefault&&!this._ui&&!t},t.prototype._calculateProgressState=function(){if(!this._stopProgressDefault){var e=this.config,t=e.html,i=e.progressDefault;!i||this._ui||t||(this._progress=!0),i&&(this._ui||t)&&(this._progress=!1)}},t.prototype._calculateStyle=function(){var e=this.config;if(e){var t={},i=!1,n=!1;isNaN(Number(e.width))||(e.width=e.width+"px"),isNaN(Number(e.height))||(e.height=e.height+"px"),isNaN(Number(e.minWidth))||(e.minWidth=e.minWidth+"px"),isNaN(Number(e.minHeight))||(e.minHeight=e.minHeight+"px"),isNaN(Number(e.maxWidth))||(e.maxWidth=e.maxWidth+"px"),isNaN(Number(e.maxHeight))||(e.maxHeight=e.maxHeight+"px"),"content"===e.width&&(i=!0),"content"===e.height&&(n=!0);var o=e,r=o.width,a=o.height,s=o.cols,l=o.rows,c=o.minWidth,u=o.minHeight,d=o.maxWidth,h=o.maxHeight,f=o.gravity,p=o.collapsed,v=o.$fixed,g=-1===Math.sign(f)?0:f;"boolean"==typeof f&&(g=f?1:0);var _="boolean"==typeof f?!f:-1===Math.sign(f);this._isXDirection()?(v||r||void 0===f&&(c||d))&&(_=!0):(v||a||void 0===f&&(u||h))&&(_=!0);var m=this._checkFullSizeCell(),y=_&&!m?0:m?1:g||1,b=this._isXDirection()?"x":"y";if(void 0===c||p||(t.minWidth=c),void 0===u||p||(t.minHeight=u),void 0!==d&&(t.maxWidth=d),void 0!==h&&(t.maxHeight=h),void 0===this._parent&&void 0!==!b&&(b=!0),m||void 0===r||"content"===r){if(!0===b)t.width="100%";else if("x"===b)if(i)t.flex="0 0 auto";else{var w=this._isXDirection()?"1px":"auto";t.flex="".concat(y," ").concat(s||l?"0 ".concat(w):"1 auto")}}else t.width=r;if(m||void 0===a||"content"===a){if(!0===b)t.height="100%";else if("y"===b)if(n)t.flex="0 0 auto";else{w=this._isXDirection()?"auto":"1px";t.flex="".concat(y," ").concat(s||l?"0 ".concat(w):"1 auto")}}else t.height=a;return!0===b&&void 0===e.width&&void 0===e.height&&(t.flex="".concat(y," 1 auto")),p&&(this._isXDirection()?t.width="auto":t.height="auto",t.flex="0 0 auto"),t}},t.prototype._resizedWindow=function(){var e;if(void 0===this._isLastFlexCell?this._isLastFlexCell=(null===(e=this._getAnyFlexCell(!0))||void 0===e?void 0:e.id)===this.id:this._isLastFlexCell||window.removeEventListener("resize",this._afterWindowResized),this._isLastFlexCell){var t=this._isXDirection()?"width":"height";this.config[t]=void 0,this.paint()}},t.prototype._resetCellsSize=function(){var e=this,t=this._parent._cells.filter((function(t){return t!==e&&!t.config.hidden&&!t.config.collapsed})),i=this._isXDirection(),n=i?"$autoWidth":"$autoHeight",o=i?"width":"height";t.forEach((function(e){e.config[n]&&(e.config[o]=void 0)}))},t.prototype._checkFullSizeCell=function(){var e=this;if(!this._parent)return!1;var t=this._isXDirection()?"$autoWidth":"$autoHeight";if(!this.config[t])return!1;var i=this._parent._cells.filter((function(t){return t!==e&&!t.config.hidden}));return!!i.length&&i.every((function(e){return e.config.collapsed}))},t}(l.View);t.Cell=f},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ProLayout=void 0;var r=i(54),a=i(76),s=function(e){function t(t,i){return e.call(this,t,i)||this}return o(t,e),t.prototype._createCell=function(e){var i;return e.rows||e.cols||e.views?(e.parent=this._root,i=new t(this,e)):i=new a.ProCell(this,e),this._root._all[i.id]=i,e.init&&e.init(i,e),i},t}(r.Layout);t.ProLayout=s},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ProCell=void 0;var a=i(0),s=i(1),l=i(35),c=function(e){function t(t,i){var n=e.call(this,t,i)||this;if(n.scrollView=new l.ScrollView((function(){return n._getFirstRootView()})),!t){var o=(0,s.create)({render:function(){return n.toVDOM()}},n);n.mount(t,o)}return n}return o(t,e),t.prototype._getFirstRootView=function(e){return void 0===e&&(e=this),e.getParent()&&e.getParent().getRootView()?e.getParent().getRootView():this._getFirstRootView(e.getParent())},t.prototype.toVDOM=function(e){var t,i,n;if(this._saveTheme(),null===this.config&&(this.config={}),!this.config.hidden){var o,l=this.config.$fieldset,c=this._calculateStyle(),u=(0,a.isDefined)(this.config.padding)?isNaN(Number(this.config.padding))?{padding:this.config.padding}:{padding:"".concat(this.config.padding,"px")}:"",d=this.config.full||this.config.html?c:r(r({},c),u),h=this._checkProgress()?this._getProgressBar():null;if(!this.config.html)if(this._ui){var f=this._ui.getRootView();f.render&&(f=(0,s.inject)(f)),o=f?[this.scrollView.render(f)]:f||null}else o=e?this.scrollView.render([e]):e||null;var p=this.config.resizable&&!this._isLastCell()&&this._getNextCell()&&!this.config.collapsed?(0,s.el)(".dhx_layout-resizer."+(this._isXDirection()?"dhx_layout-resizer--x":"dhx_layout-resizer--y"),r(r({},this._resizerHandlers),{_ref:"resizer_"+this._uid}),[(0,s.el)("span.dhx_layout-resizer__icon",{class:"dxi "+(this._isXDirection()?"dxi-dots-vertical":"dxi-dots-horizontal")})]):null,v={};if(this.config.on)for(var g in this.config.on)v["on"+g]=this.config.on[g];var _="",m=this.config.cols||this.config.rows;if(this.config.type&&m)switch(this.config.type){case"line":_=" dhx_layout-line";break;case"wide":_=" dhx_layout-wide";break;case"space":_=" dhx_layout-space"}var y=(0,s.el)(".dhx_layout-cell-content",{_key:"".concat(this._uid,"_html"),style:u},[(0,s.el)(".dhx_layout-cell-inner_html",{".innerHTML":this.config.html})]),b=l?(0,s.el)("fieldset.dhx_form-fieldset",{class:this.config.$disabled?" dhx_form-fieldset--disabled":"",style:u,disabled:this.config.$disabled},[(0,s.el)("legend.dhx_form-fieldset-legend",{class:"dhx_form-fieldset-legend--".concat(this.config.labelAlignment||"left")},this.config.label),(0,s.el)(".dhx_layout-cell-content",{class:this._getCss(!1)},[].concat(o))]):this.config.full?[(0,s.el)("div",{tabindex:this.config.collapsable?"0":"-1",class:"dhx_layout-cell-header"+(this._isXDirection()?" dhx_layout-cell-header--col":" dhx_layout-cell-header--row")+(this.config.collapsable?" dhx_layout-cell-header--collapseble":"")+(this.config.collapsed?" dhx_layout-cell-header--collapsed":"")+(((this.getParent()||{}).config||{}).isAccordion?" dhx_layout-cell-header--accordion":""),style:{height:this.config.headerHeight},onclick:this._handlers.toggle,onkeydown:this._handlers.enterCollapse},[this.config.headerIcon&&(0,s.el)("span.dhx_layout-cell-header__icon",{class:this.config.headerIcon}),this.config.headerImage&&(0,s.el)(".dhx_layout-cell-header__image-wrapper",[(0,s.el)("img",{src:this.config.headerImage,class:"dhx_layout-cell-header__image"})]),this.config.header&&(0,s.el)("h3.dhx_layout-cell-header__title",this.config.header),this.config.collapsable?(0,s.el)("div.dhx_layout-cell-header__collapse-icon",{class:this._getCollapseIcon()}):(0,s.el)("div.dhx_layout-cell-header__collapse-icon",{class:"dxi dxi-empty"})]),this.config.collapsed?null:(0,s.el)("div",{style:r(r({},u),{height:"calc(100% - ".concat(this.config.headerHeight||37,"px)")}),class:this._getCss(!0)+" dhx_layout-cell-content"+(this.config.type?_:"")},this.config.html?[(0,s.el)("div",{".innerHTML":this.config.html,class:"dhx_layout-cell dhx_layout-cell-inner_html"})]:o)]:!this.config.html||this.config.rows&&this.config.cols&&this.config.views?o:[this.config.collapsed?null:this.scrollView&&this.scrollView.config.enable&&this.getParent()?this.scrollView.render([y],this._uid):y],w=(0,s.el)("div",r(r(((t={_key:this.config.id||this._uid,_ref:this._uid})["aria-label"]=this.config.id?"tab-content-"+this.config.id:null,t["data-cell-id"]=null!==(i=this.config.id)&&void 0!==i?i:null,t["data-dhx-theme"]=null!==(n=this._theme)&&void 0!==n?n:null,t),v),{class:this._getCss(!1)+(this.config.css?" "+this.config.css:"")+(this.config.collapsed?" dhx_layout-cell--collapsed":"")+(this.config.resizable?" dhx_layout-cell--resizable":"")+(this.config.type&&!this.config.full?_:""),style:l?c:d}),b||h?[].concat(b,h):null);return p?[].concat(w,p):w}},t}(i(74).Cell);t.ProCell=c},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(146),t),o(i(79),t)},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.PopupEvents=void 0,function(e){e.beforeHide="beforeHide",e.beforeShow="beforeShow",e.afterHide="afterHide",e.afterShow="afterShow",e.click="click"}(n||(t.PopupEvents=n={}))},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SliderEvents=void 0,function(e){e.beforeChange="beforeChange",e.change="change",e.focus="focus",e.blur="blur",e.keydown="keydown",e.mousedown="mousedown",e.mouseup="mouseup"}(n||(t.SliderEvents=n={}))},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.TimepickerEvents=void 0,function(e){e.beforeChange="beforeChange",e.change="change",e.beforeApply="beforeApply",e.afterApply="afterApply",e.beforeClose="beforeClose",e.afterClose="afterClose",e.apply="apply",e.close="close",e.save="save"}(n||(t.TimepickerEvents=n={}))},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.CalendarEvents=void 0,function(e){e.change="change",e.beforeChange="beforechange",e.modeChange="modeChange",e.monthSelected="monthSelected",e.yearSelected="yearSelected",e.cancelClick="cancelClick",e.dateMouseOver="dateMouseOver",e.dateHover="dateHover"}(n||(t.CalendarEvents=n={}))},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Combobox=t.$template=void 0;var a=i(0),s=i(1),l=i(4),c=i(3),u=i(153),d=i(9),h=i(11),f=i(18),p=i(28),v=i(10),g=i(157),_=i(85),m=i(39),y=i(86),b=i(87);function w(e,t){return"function"==typeof t?t(e):e+" "+_.default.selectedItems}t.$template=function(e){return e.icon?(0,s.el)("div.dhx_combobox-options-wrapper",[(0,s.el)("span",{class:"".concat(e.icon," dhx_combobox-options__icon")}),(0,s.el)("span",{class:"dhx_combobox-options__value"},e.value)]):e.src?(0,s.el)("div.dhx_combobox-options-wrapper",[(0,s.el)("img",{class:"dhx_combobox-options__image",alt:e.value,src:e.src}),(0,s.el)("span",{class:"dhx_combobox-options__value"},e.value)]):(0,s.el)("span",{class:"dhx_combobox-options__value"},e.value)};var x=function(e){function i(t,i){var n=e.call(this,t,(0,a.extend)({listHeight:224,disabled:!1,readOnly:!1,newOptions:!1,htmlEnable:!0},i))||this;n.config.itemsCount=n.config.itemsCount||n.config.showItemsCount,n.config.helpMessage=n.config.helpMessage||n.config.help,n.config.cellHeight&&36===n.config.itemHeight&&(n.config.itemHeight=n.config.cellHeight),n.config.labelInline&&(n.config.labelPosition="left"),Array.isArray(n.config.data)?(n.events=new l.EventSystem(n),n.data=new h.DataCollection({}),n.data.parse(n.config.data)):n.config.data?(n.data=n.config.data,n.events=new l.EventSystem(n),n.events.context=n):(n.events=new l.EventSystem(n),n.data=new h.DataCollection({})),n.popup=new v.Popup,n.popup.events.on(v.PopupEvents.afterShow,(function(){n.paint()})),n.popup.events.on(v.PopupEvents.afterHide,(function(){n.config.multiselection&&(n._state.value=""),n.paint()})),n.popup.events.on(v.PopupEvents.beforeHide,(function(e){e&&n._hideOptions()})),(n.config.readonly||n.config.readOnly)&&(n.config.readOnly=n.config.readOnly||n.config.readonly,n._keyListener=new g.KeyListener),n._state={value:"",ignoreNext:!1,canDelete:!1,unselectActive:!1,currentState:b.ComboState.default,creatingState:!1},n._initHandlers(),n._createLayout(),n.config.value&&n.data.getLength()&&(n._setValue(n.config.value,!0),n.config.value=""),n._initEvents();var o=(0,s.create)({render:function(){return n._draw()},hooks:{didRedraw:function(){n.popup.isVisible()&&(n.focus(),n._configurePopup())}}});return n.mount(t,o),n}return o(i,e),i.prototype.focus=function(){if(this.config.disabled)return!1;this.getRootView().refs.input.el.focus()},i.prototype.blur=function(){if(this.config.disabled)return!1;this.getRootView().refs.input.el.blur(),this.popup.hide()},i.prototype.enable=function(){this.config.disabled=!1,this.paint()},i.prototype.disable=function(){this.config.disabled=!0,this.paint()},i.prototype.isDisabled=function(){return this.config.disabled},i.prototype.clear=function(){this.list.selection.remove(),this._state.value="",this._filter(),this.paint()},i.prototype.getValue=function(e){var t=this.list.selection.getId();return e?(0,a.wrapBox)(t):Array.isArray(t)?t.join(","):t},i.prototype.setValue=function(e,t){return this._setValue(e,t)},i.prototype.addOption=function(e,t){if(void 0===t&&(t=!0),e){var i;"string"==typeof e?i=this.data.add({value:e}):"object"==typeof e&&(i=this.data.add(e));var n=this.config.multiselection&&t?r(r([],this.list.selection.getId(),!0),[i],!1):i;this.setValue(n)}},i.prototype.destructor=function(){this.popup&&this.popup.destructor(),this.events&&this.events.clear(),this.list&&this.list.destructor(),this._helper&&this._helper.destructor(),this._layout&&this._layout.destructor(),this._keyListener&&this._keyListener.destructor(),this.config=this.events=this.list=this.popup=null,this._helper=this._keyListener=this._handlers=this._state=this._uid=this._isPopupConfiqureted=null,this.unmount()},i.prototype.setState=function(e){switch(e){case"success":this._state.currentState=b.ComboState.success;break;case"error":this._state.currentState=b.ComboState.error;break;default:this._state.currentState=b.ComboState.default}this.paint()},i.prototype._setValue=function(e,t){var i=this;if(void 0===t&&(t=!1),!this._exsistId(e))return!1;if(this._filter(),this.list.selection.remove(null,t),this.config.multiselection)"string"==typeof e&&(e=e.split(",")),"number"==typeof e&&(e=[e]),e.forEach((function(e){i.list.selection.add(e,!1,!1,t)}));else{var n=(0,a.unwrapBox)(e);this.list.selection.add(n,!1,!1,t);var o=this.data.getItem(n);o&&(this._state.value=this._getItemText(o))}this.paint()},i.prototype._createLayout=function(){var e=this.list=new p.List(null,{$template:t.$template,template:this.config.template,htmlEnable:this.config.htmlEnable,virtual:this.config.virtual,keyNavigation:!0,multiselection:this.config.multiselection,itemHeight:this.config.itemHeight,height:this.config.listHeight,data:this.data,eventHandlers:this.config.eventHandlers}),i=this._layout=new f.Layout(this.popup.getContainer(),{css:"dhx_combobox-options dhx_combobox__options",rows:[{id:"select-unselect-all",hidden:!this.config.multiselection||!this.config.selectAllButton},{id:"list",height:"content"},{id:"not-found",hidden:!0}],on:{click:{".dhx_combobox__action-select-all":this._handlers.selectAll,".dhx_combobox-options__action-create-option":this._handlers.addOption}}});i.getCell("list").attach(e),this.config.multiselection&&this.config.selectAllButton&&i.getCell("select-unselect-all").attach(y.selectAllView)},i.prototype._initHandlers=function(){var e=this;this.config.helpMessage&&(this._helper=new v.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"}),this._helper.attachHTML(this.config.helpMessage)),this._handlers={addOption:function(){return e.addOption(e._state.value)},showHelper:function(t){t.preventDefault(),t.stopPropagation(),e._helper.show(t.target,{mode:"left"===e.config.labelPosition?"bottom":"right",theme:t.target})},selectAll:function(){e._state.unselectActive?(e.list.selection.remove(),e.config.selectAllButton&&(e._layout.getCell("select-unselect-all").attach(y.selectAllView),e._state.unselectActive=!1)):(e.data.filter(),e.list.selection.add(),e.config.selectAllButton&&(e._layout.getCell("select-unselect-all").attach(y.unselectAllView),e._state.unselectActive=!0)),e._changePopupPosition(),e.paint()},onkeydown:function(t){if("Tab"===t.key&&e.popup.isVisible())e._hideOptions();else if(e.popup.isVisible()||t.which!==u.KEY_CODES.DOWN_ARROW||e._showOptions(),e.popup.isVisible()&&(t.which===u.KEY_CODES.RIGHT_ARROW&&e.config.readOnly&&!e.config.multiselection&&(e.list.moveFocus(p.MOVE_DOWN),t.preventDefault()),t.which===u.KEY_CODES.LEFT_ARROW&&e.config.readOnly&&!e.config.multiselection&&(e.list.moveFocus(p.MOVE_UP),t.preventDefault()),t.which===u.KEY_CODES.DOWN_ARROW&&(e.list.moveFocus(p.MOVE_DOWN),t.preventDefault()),t.which===u.KEY_CODES.UP_ARROW&&(e.list.moveFocus(p.MOVE_UP),t.preventDefault()),t.which===u.KEY_CODES.ESC&&e._hideOptions(),t.which===u.KEY_CODES.ENTER)){if(e.data.getLength()){var i=e.list.getFocus(),n=e.config.multiselection?r(r([],e.list.selection.getId(),!0),[i],!1):i;e.setValue(n)}else e.config.newOptions&&e.addOption(e._state.value,!0);e.config.multiselection?e._updatePopup():e.data.getLength()&&e._hideOptions()}e.events.fire(b.ComboboxEvents.keydown,[t,e.list.getFocus()])},onkeyup:function(t){if(e.config.multiselection&&!e.config.itemsCount)if(e._state.ignoreNext)e._state.ignoreNext=!1;else if(t.which===u.KEY_CODES.BACKSPACE&&!e._state.value&&e.config.multiselection&&e.list.selection.getId().length){var i=e.list.selection.getId(),n=i[i.length-1];e.list.selection.remove(n),e._changePopupPosition(),e.paint()}},oninput:function(t){if(!e.config.disabled){var i=t.target.value;e.events.fire(b.ComboboxEvents.input,[i]),e._state.value=i,i.length?e._state.canDelete=!1:(e._state.ignoreNext=!0,e._state.canDelete=!0),e.config.multiselection||e.list.selection.remove(),e._filter(!0),e.popup.isVisible()||e._showOptions(),e._updatePopup()}},oninputclick:function(t){var i;if(!e.config.disabled){if(e.focus(),t.target.classList.contains("dhx_combobox__action-remove")){var n=null===(i=e.data.getItem((0,c.locate)(t)))||void 0===i?void 0:i.id;if(!(0,a.isId)(n))return;return e.list.selection.remove(n),e._changePopupPosition(),void e.paint()}if(t.target.classList.contains("dhx_combobox__action-clear-all"))return e.list.selection.getId().forEach((function(t){return e.list.selection.remove(t)})),e.config.selectAllButton&&e._state.unselectActive&&(e._layout.getCell("select-unselect-all").attach(y.selectAllView),e._state.unselectActive=!1),void e.paint();t.preventDefault(),e.popup.isVisible()?e.focus():e._showOptions()}},toggleIcon:function(){e.focus(),e.popup.isVisible()?e._hideOptions():e._showOptions()},onfocus:function(){var t;return null===(t=e.events)||void 0===t?void 0:t.fire(b.ComboboxEvents.focus,[])},onblur:function(){var t;return null===(t=e.events)||void 0===t?void 0:t.fire(b.ComboboxEvents.blur,[])}}},i.prototype._initEvents=function(){var e=this;this.data.events.on(h.DataEvents.load,(function(){e.config.value&&(e._setValue(e.config.value,!0),e.config.value=""),e.popup.isVisible()&&e._filter()})),this.data.events.on(h.DataEvents.removeAll,(function(){e._state.value="",e.paint()})),this.data.events.on(h.DataEvents.afterAdd,(function(){e.popup.isVisible()&&(e.config.multiselection?e._changePopupPosition():e._hideOptions())})),this.list.events.on(p.ListEvents.click,(function(){e.config.multiselection||e._hideOptions(),e._changePopupPosition()})),this.list.selection.events.on(m.SelectionEvents.beforeSelect,(function(t){var i=e.config.multiselection?r(r([],e.getValue(e.config.multiselection),!0),[t],!1):t;return e.events.fire(b.ComboboxEvents.beforeChange,[i])})),this.list.selection.events.on(m.SelectionEvents.afterSelect,(function(){var t=e.getValue(e.config.multiselection);e.events.fire(b.ComboboxEvents.change,[t]),e._updateSelectedItem(t)})),this.list.selection.events.on(m.SelectionEvents.beforeUnSelect,(function(t){var i=e.config.multiselection?e.getValue(e.config.multiselection).filter((function(e){return e!=t})):t;return e.events.fire(b.ComboboxEvents.beforeChange,[i])})),this.list.selection.events.on(m.SelectionEvents.afterUnSelect,(function(){var t=e.config.multiselection,i=e.getValue(t);e.events.fire(b.ComboboxEvents.change,[i]),t&&e._updateSelectedItem(i)})),this.popup.events.on(v.PopupEvents.beforeShow,(function(){if(!e.popup.isVisible()&&!e._isPopupConfiqureted)return e._configurePopup(),!1})),this.popup.events.on(v.PopupEvents.afterShow,(function(){var t;if((null===(t=e.list.scrollView)||void 0===t?void 0:t.config.enable)&&e.list.scrollView.update(),e.config.readOnly){if(e._state.value){var i=e.list.selection.getId();e.list.setFocus(i)}else e.list.resetFocus();e._keyListener.startNewListen((function(t){return e._findBest(t)}))}e.list.scrollTo(e.list.getFocus())}))},i.prototype._showOptions=function(){this.events.fire(b.ComboboxEvents.beforeOpen)&&(this._state.value.length&&(this._state.canDelete=!0),this._filter(),this._configurePopup()&&(this.events.fire(b.ComboboxEvents.open),this.events.fire(b.ComboboxEvents.afterOpen)))},i.prototype._configurePopup=function(){this._isPopupConfiqureted=!0;var e=this.getRootView();return!!(e&&e.refs&&e.refs.holder)&&(this.popup.isVisible()||this._updatePopup(),!0)},i.prototype._hideOptions=function(){var e=this;this.events.fire(b.ComboboxEvents.beforeClose)&&(this.config.readOnly&&this._keyListener.endListen(),this.config.multiselection||this.config.readOnly||this.list.selection.contains()||(this._state.value=""),(0,s.awaitRedraw)().then((function(){return e.popup.isVisible()&&e.popup.hide()})),this.events.fire(b.ComboboxEvents.afterClose),this.events.fire(b.ComboboxEvents.close),this.data.resetFilter(),this._filter(),this.paint())},i.prototype._filter=function(e){var t=this;if(void 0===e&&(e=!1),!this.config.readOnly){this.config.filter?this.data.filter((function(e){return t.config.filter(e,t._state.value)})):e&&this.data.filter((function(e){return(0,a.isExistValue)(t._getItemText(e)||"",t._state.value)}));var i=this.list.selection.getId();!i||this.config.multiselection?this.list.resetFocus():this.list.setFocus(i);var n=this._layout.getCell("list"),o=this._layout.getCell("not-found");if(0===this.data.getLength()){this.config.multiselection&&this.config.selectAllButton&&this._layout.getCell("select-unselect-all").hide(),n.hide(),this._state.creatingState=!0;var r=this.config.newOptions?this._state.value:"";o.height=(0,y.emptyListHeight)(r,this.getRootView().refs.holder.el.offsetWidth),o.attach(y.emptyListView,r),o.show()}else{if(this.config.multiselection&&this.config.selectAllButton&&this._layout.getCell("select-unselect-all").show(),!(this._state.value&&this.data.find((function(e){return e.value===t._state.value})))&&this._state.value)if(this._state.creatingState=this.config.newOptions,n.show(),this.config.newOptions){r=this._state.value;o.height=(0,y.emptyListHeight)(r,this.getRootView().refs.holder.el.offsetWidth),o.attach(y.emptyListView,r),o.show()}else o.hide();else this._state.creatingState=!1,o.isVisible()&&(n.show(),o.hide())}}},i.prototype._findBest=function(e){var t=this,i=this.data.find((function(i){return(0,a.isExistValue)(t._getItemText(i)||"",e)}));i&&this.list.selection.getId()!==i.id&&(this.list.setFocus(i.id),this.paint())},i.prototype._exsistId=function(e){var t=this;return e instanceof Array?e.every((function(e){return t.data.exists(e)})):this.data.exists(e)},i.prototype._draw=function(){var e;if(!this.config)return(0,s.el)("div");var i=this.config,n=i.multiselection,o=i.labelPosition,a=i.hiddenLabel,l=i.required,u=i.disabled,d=i.css,h=i.helpMessage,f=i.readOnly,p=i.placeholder,v=n?null:this.data.getItem(this.list.selection.getId()),g=!this.list.selection.getId()||"object"==typeof this.list.selection.getId()&&0===this.list.selection.getId().length,_=(0,c.getLabelStyle)(this.config),m=!this.config.multiselection&&(this.config.readOnly||!this.popup.isVisible()),y=m&&this.config.htmlEnable&&this.config.template,w=m&&((null==v?void 0:v.icon)||(null==v?void 0:v.src))&&!this.config.template;return(0,s.el)("div",{"data-dhx-widget-id":this._uid,onkeydown:this._handlers.onkeydown,onkeyup:this._handlers.onkeyup,class:"dhx_widget dhx_combobox"+("left"===o?" dhx_combobox--label-inline":"")+(a?" dhx_combobox--sr_only":"")+(l?" dhx_combobox--required":"")+(u?" dhx_combobox--disabled":"")+(d?" ".concat(d):"")},[_?(0,s.el)("label.dhx_label.dhx_combobox__label",{style:_.style,class:h?"dhx_label--with-help":"",onclick:this._handlers.oninputclick},h?[(_.label||l)&&(0,s.el)("span.dhx_label__holder",_.label),(0,s.el)("span.dhx_label-help.dxi.dxi-help-circle-outline",{tabindex:"0",role:"button",onclick:this._handlers.showHelper,id:"dhx_label__help_".concat(this._uid)})]:_.label):null,(0,s.el)("div.dhx_combobox-input-box"+(u?".dhx_combobox-input-box--disabled":"")+(f?".dhx_combobox-input-box--readonly":"")+(this._state.currentState===b.ComboState.error?".dhx_combobox-input-box--state_error":"")+(this._state.currentState===b.ComboState.success?".dhx_combobox-input-box--state_success":""),{_ref:"holder"},[(0,s.el)("div.dhx_combobox-input__icon",{onclick:this._handlers.toggleIcon},[(0,s.el)("span"+(this.popup.isVisible()?".dxi.dxi-menu-up":".dxi.dxi-menu-down"))]),(0,s.el)("div.dhx_combobox-input-list-wrapper",{onclick:this._handlers.oninputclick},[(0,s.el)("ul.dhx_combobox-input-list",r(r([],this._drawSelectedItems(),!0),[(0,s.el)("li.dhx_combobox-input-list__item.dhx_combobox-input-list__item--input",[(y||w)&&v?(0,s.el)("div.dhx_combobox-input__template",{".innerHTML":y?this.config.template(v):null},w?[(0,t.$template)(v)]:null):null,(0,s.el)("input.dhx_combobox-input",{oninput:this._handlers.oninput,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,_ref:"input",_key:this._uid,type:"text",placeHolder:g&&p?p:void 0,value:f&&v?this._getItemText(v):this._state.value,readOnly:f||u,required:l,role:"combobox","aria-label":f?"Select value":"Type or select value","aria-describedby":h?"dhx_label__help_".concat(this._uid):null,"aria-expanded":this.popup.isVisible().toString(),"aria-controls":null===(e=this.list.getRootView().node)||void 0===e?void 0:e.attrs.id})])],!1))])])])},i.prototype._drawSelectedItems=function(){var e=this;if(!this.config.multiselection)return[];if(this.config.itemsCount){var t=this.list.selection.getId().length;return t?[(0,s.el)("li.dhx_combobox-input-list__item.dhx_combobox-tag",[(0,s.el)("span.dhx_combobox-tag__value",w(t,this.config.itemsCount)),(0,s.el)("button.dhx_button.dhx_combobox-tag__action.dhx_combobox__action-clear-all",{"aria-label":"clear all"},[(0,s.el)("span.dhx_button__icon.dxi.dxi-close-circle")])])]:[]}return this.list.selection.getId().map((function(t){var i=e.data.getItem(t);if(!i)return null;var n=e._drawImageOrIcon(i);return(0,s.el)("li.dhx_combobox-input-list__item.dhx_combobox-tag",{"data-dhx-id":t},r(r([],n||!e.config.template?[n,(0,s.el)("span.dhx_combobox-tag__value",e._getItemText(i))]:[(0,s.el)("span.dhx_combobox-tag__template",{".innerHTML":e.config.template(i)})],!0),[(0,s.el)("button.dhx_button.dhx_button--icon.dhx_combobox-tag__action.dhx_combobox__action-remove",{type:"button","aria-label":"remove"},[(0,s.el)("span.dhx_button__icon.dxi.dxi-close-circle")])],!1))}))},i.prototype._drawImageOrIcon=function(e){return e.src?(0,s.el)("img.dhx_combobox-tag__image",{src:e.src,alt:""}):e.icon?(0,s.el)("span.dhx_combobox-tag__icon",{class:e.icon}):null},i.prototype._getItemText=function(e){return e?e.value:null},i.prototype._updateSelectedItem=function(e){var t;this.config.multiselection?(this.config.selectAllButton&&!this._state.unselectActive&&this.data.getLength()===e.length?(this._layout.getCell("select-unselect-all").attach(y.unselectAllView),this._state.unselectActive=!0):this.config.selectAllButton&&this._state.unselectActive&&(this._layout.getCell("select-unselect-all").attach(y.selectAllView),this._state.unselectActive=!1),this._state.value&&(this._state.value="",this._state.canDelete=0===e.length,this.data.resetFilter(),this._filter())):this._state.value=null!==(t=this._getItemText(this.data.getItem(e)))&&void 0!==t?t:"",this.paint()},i.prototype._changePopupPosition=function(){var e=this;this.config.multiselection&&(0,s.awaitRedraw)().then((function(){e._updatePopup()}))},i.prototype._updatePopup=function(){var e=this.popup.getContainer(),t=this.getRootView().refs.holder.el;e.style.width=t.offsetWidth+"px";var i=(0,s.getViewHeight)(this.list._renderList(),t.offsetWidth),n=this._layout.getCell("select-unselect-all").isVisible()?33:0,o=this._state.creatingState?this._layout.getCell("not-found").height:0;e.style.height=i+n+o+"px",this.popup.show(t,{mode:"bottom",theme:this.getRootNode()})},i}(d.View);t.Combobox=x},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.List=t.MOVE_DOWN=t.MOVE_UP=void 0;var s=i(0),l=i(11),c=i(1),u=i(25),d=i(39),h=i(9),f=i(84),p=i(3),v=i(57),g=i(154);t.MOVE_UP=1,t.MOVE_DOWN=2;var _=function(e){function i(t,i){void 0===i&&(i={});var n=this,o=i.itemHeight||(i.virtual?37:null);o&&"number"==typeof o&&(o=o.toString()+"px"),(n=e.call(this,t,(0,s.extend)({itemHeight:o,keyNavigation:!0,editable:!1,selection:!0,htmlEnable:!0},i))||this)._destructed=!1,n._touch={duration:350,dblDuration:300,timer:null,start:!1,timeStamp:null};var r=n.config.data;r instanceof l.DataCollection?(n.data=r,n.events=r.events):(n.data=new l.DataCollection({}),n.events=n.data.events,r&&n.data.parse(r)),n.selection=new f.Selection({disabled:!n.config.selection,multiselection:n.config.multiselection},n.data,n.events),n.config.keyNavigation&&(n.keyManager=new u.KeyManager((function(e,t){return t==n._uid&&(!n._edited||n._edited&&"escape"!==e.key)})),n._initHotKey()),n.events.on(l.DataEvents.change,(function(e,t,i){"setPage"===t&&n.scrollTo(n.data.getId(i[0])),n.paint()})),n.events.on(l.DataEvents.filter,(function(){n.paint()})),n.events.on(d.SelectionEvents.afterUnSelect,(function(){return n.paint()})),n.events.on(d.SelectionEvents.afterSelect,(function(e){(0,s.isId)(e)&&n.config.selection&&n.setFocus(e),n.paint()})),n.events.on(v.ListEvents.afterEditEnd,n.editEnd.bind(n));var a=function(e){return function(t){n.data.setMeta(n.data.getItem(t.target),"drop",e),n.paint()}};n.events.on(l.DragEvents.canDrop,a(!0)),n.events.on(l.DragEvents.cancelDrop,a(!1));var h=function(e){return function(t){t.source.map((function(t){return n.data.setMeta(n.data.getItem(t),"drag",e)})),n.paint()}};n.events.on(l.DragEvents.dragStart,h(!0)),n.events.on(l.DragEvents.afterDrag,h(!1)),n._handlers={onmousedown:function(e){n._dragStart(e)},ontouchstart:function(e){(n._touch.timer=setTimeout((function(){n._dragStart(e)}),n._touch.duration),n._touch.timeStamp)?(n._touch.dblDuration>=n._touch.timeStamp-+e.timeStamp.toFixed()&&(e.preventDefault(),n._dblClick(e)),n._touch.timeStamp=null):n._touch.timeStamp=+e.timeStamp.toFixed();setTimeout((function(){n._touch.timeStamp=null}),n._touch.dblDuration)},ontouchmove:function(e){n._touch.start&&e.preventDefault(),n._clearTouchTimer()},ontouchend:function(){n._touch.start=!1,n._clearTouchTimer()},ondragstart:function(){return!(n.config.dragMode&&!n._edited)&&null},oncontextmenu:function(e){var t,i=null===(t=n.data.getItem((0,p.locate)(e)))||void 0===t?void 0:t.id;(0,s.isId)(i)&&n.events.fire(v.ListEvents.itemRightClick,[i,e])},onclick:function(e){var t,i=null===(t=n.data.getItem((0,p.locate)(e)))||void 0===t?void 0:t.id;(0,s.isId)(i)&&(n.selection.add(i,e.ctrlKey||e.metaKey,e.shiftKey),n.config.selection&&(n._focus=i),n.events.fire(v.ListEvents.click,[i,e]),n.paint())},ondblclick:function(e){n._dblClick(e)},onscroll:function(e){n.config.virtual&&(n._topOffset=e.target.scrollTop,n._visibleHeight=e.target.offsetHeight,n.paint())},onmouseover:function(e){var t,i=null===(t=n.data.getItem((0,p.locate)(e)))||void 0===t?void 0:t.id;(0,s.isId)(i)&&(i!==(0,p.locate)(e.relatedTarget)&&n.events.fire(v.ListEvents.itemMouseOver,[i,e]))}};var g=n.config.eventHandlers;if(g)for(var _=0,m=Object.entries(g);_<m.length;_++){var y=m[_],b=y[0],w=y[1];n._handlers[b]=(0,p.eventHandler)((function(e){return(0,p.locate)(e)}),w,n._handlers[b])}n.config.dragMode&&l.dragManager.setItem(n._uid,n),n._topOffset=n._visibleHeight=0;var x=(0,c.create)({render:function(){return n._destructed?(0,c.el)("div"):n._renderList()},hooks:{didMount:function(e){n.config.virtual&&(n._visibleHeight=e.node.el.offsetHeight)},didRedraw:function(e){return n._didRedraw(e)}}});return n.mount(t,x),n}return o(i,e),i.prototype._didRedraw=function(e){},i.prototype._dblClick=function(e){var t,i=(0,p.locate)(e);i&&(i=null===(t=this.data.getItem(i))||void 0===t?void 0:t.id,this.config.editable&&this.editItem(i),this.events.fire(v.ListEvents.doubleClick,[i,e]))},i.prototype._clearTouchTimer=function(){this._touch.timer&&(clearTimeout(this._touch.timer),this._touch.timer=null)},i.prototype._dragStart=function(e){var t=this;this._touch.start=!0;var i=[],n=(0,p.locateNode)(e,"data-dhx-id"),o=n&&n.getAttribute("data-dhx-id"),r=this.selection.getId();return this.config.multiselection&&r instanceof Array&&(r.map((function(e){e!==o&&t.getRootView().refs[e]&&i.push(t.getRootView().refs[e].el)})),r=a([],r,!0)),"string"==typeof r&&(r=[r]),this.config.dragMode&&!this._edited?l.dragManager.onMouseDown({event:e,type:"row",source:r||[o],itemsForGhost:i}):null},i.prototype.disableSelection=function(){this.selection.disable()},i.prototype.enableSelection=function(){this.selection.enable()},i.prototype.editItem=function(e){this._edited=e,this.data.getItem(this._edited)&&this.events.fire(v.ListEvents.beforeEditStart,[e])?(this.paint(),this.events.fire(v.ListEvents.afterEditStart,[e])):this._edited=null},i.prototype.editEnd=function(e,t){if(this._edited){if(null!==e){var i=this.data.getItem(t);this.data.update(t,r(r({},i),{value:e})),this._changed=!0}this._edited=null,this.paint()}},i.prototype.getFocusItem=function(){return this.data.getItem(this._focus)},i.prototype.setFocus=function(e){this._focus!=e&&this.data.exists(e)&&(this._focus=e,this.events.fire(v.ListEvents.focusChange,[this.data.getIndex(this._focus),this._focus]),this.scrollTo(e),this.paint())},i.prototype.resetFocus=function(){this._focus=void 0,this.events.fire(v.ListEvents.focusChange),this.scrollTo(this.data.getId(0)),this.paint()},i.prototype.getFocus=function(){return this._focus},i.prototype.destructor=function(){this._destructed=!0,this.events&&this.events.clear(),this.keyManager&&this.keyManager.destructor(),this.selection&&this.selection.destructor(),this.config=this.events=this.selection=this.keyManager=null,this._handlers=this._focus=this._edited=this._events=this._topOffset=this._visibleHeight=this._touch=null,this.unmount()},i.prototype.scrollTo=function(e){var t=this.getRootView();if(t&&t.node&&t.node.el&&void 0!==e){var i=this.getRootNode();this._scrollTo(e,i)}},i.prototype._scrollTo=function(e,t){if(t){var i=this.data.getIndex(e);if(-1!==i){var n=this.config.virtual,o=Math.floor(i/t.children.length)||0,r=t.children[i-t.children.length*o];if(n||r){var a=n?parseInt(this.config.itemHeight):r.clientHeight,s=n?i*a:r.offsetTop;s>=t.scrollTop+t.clientHeight-a?t.scrollTo(0,s-t.clientHeight+a):s<t.scrollTop&&t.scrollTo(0,s)}}}},i.prototype._renderItem=function(e,t){var i=function(e){e.class+=" dhx_list-item--empty"},n=this.config.itemHeight;if(e.$empty)return(0,c.el)("li",{class:"dhx_list-item",style:{height:n}});var o="";this.config.template&&(o=this.config.template(e)),e.html&&(o=e.html);var a=e.id==this._focus&&this.config.keyNavigation;if(e.id==this._edited)return(0,g.getEditor)(e,this).toHTML();var s=this.data.getMetaMap(e),l=r(r(r(r({},this._events),{class:"dhx_list-item"+(s&&s.selected?" dhx_list-item--selected":"")+(a?" dhx_list-item--focus":"")+(s&&s.drop&&!this._edited?" dhx_list-item--drophere":"")+(s&&s.drag&&!this._edited?" dhx_list-item--dragtarget":"")+(this.config.dragMode&&!this._edited?" dhx_list-item--drag":"")+(e.css?" "+e.css:""),"data-dhx-id":e.id,_ref:e.id.toString(),style:{height:n},_key:e.id}),this.getItemAriaAttrs(this,e)),{tabindex:a?0:-1});if(o)return o===e.html||this.config.htmlEnable?(l[".innerHTML"]=o,(0,c.el)("li",l)):(0,c.el)("li",l,o);if(this.config.$template)return e.value||i(l),(0,c.el)("li",l,[this.config.$template(e)]);var u=e.text||e.value;return u||i(l),this.config.htmlEnable?l[".innerHTML"]=u:l.class+=" dhx_list-item--text",this.config.htmlEnable?(0,c.el)("li",l):(0,c.el)("li",l,u)},i.prototype._renderList=function(){var e=this,t=this._getRange(),i=this.data.getRawData(t[0],t[1]).map((function(t,i){return e._renderItem(t,i)}));return this.config.virtual&&(i=a(a([(0,c.el)(".div",{style:{height:t[2]+"px"}})],i,!0),[(0,c.el)(".div",{style:{height:t[3]+"px"}})],!1)),(0,c.el)("ul.dhx_widget.dhx_list",r(r({style:{"max-height":this.config.height,position:"relative"},tabindex:0,id:this._uid,class:(this.config.css?this.config.css:"")+(this.config.multiselection&&this.selection.getItem()?" dhx_no-select--pointer":""),"data-dhx-widget-id":this._uid,"data-dhx-drop-area":"row"},this._handlers),this._getListAriaAttrs(this.config,this.data.getLength())),i)},i.prototype.moveFocus=function(e,i){var n=this.data.getLength();if(n){var o=this._focus,r=o?this.data.getIndex(o):-1;i=i||1,e===t.MOVE_DOWN?o=this.data.getId(Math.min(r+i,n-1)):e===t.MOVE_UP&&(o=this.data.getId(Math.max(r-i,0))),this.setFocus(o)}},i.prototype._getRange=function(){if(this.config.virtual){var e=this._visibleHeight||parseInt(this.config.height),t=parseInt(this.config.itemHeight),i=this.data.getRawData(0,-1).length,n=i*t,o=this._topOffset;o=Math.max(0,Math.min(o,n-e));var r=Math.floor(o/t),a=Math.min(i-r,Math.floor(e/t)+5);return this._topOffset=o,[r,a+r,r*t,n-t*(a+r)]}return[0,-1,0,0]},i.prototype._getHotkeys=function(){var e=this;return{arrowDown:function(i){e.moveFocus(t.MOVE_DOWN),e._changed&&(e._changed=!1),i.preventDefault()},arrowUp:function(i){e.moveFocus(t.MOVE_UP),e._changed&&(e._changed=!1),i.preventDefault()},escape:function(){e.editEnd(null),e._changed&&(e._changed=!1)},enter:function(t){var i;if(e._changed)e._changed=!1;else{var n=e.selection.getItem(),o=n instanceof Array?null===(i=n[0])||void 0===i?void 0:i.id:null==n?void 0:n.id;e.config.editable&&!e._edited&&(n&&o===e._focus||!n)?e.editItem(e._focus):e.selection.add(e._focus),e.events.fire(v.ListEvents.click,[e._focus,t])}},"shift+enter":function(t){e.selection.add(e._focus,!1,!0),e.events.fire(v.ListEvents.click,[e._focus,t])},"ctrl+enter":function(t){e.selection.add(e._focus,!0,!1),e.events.fire(v.ListEvents.click,[e._focus,t])},"ctrl+a":function(t){e.config.multiselection&&(t.preventDefault(),e.selection.remove(),e.data.map((function(e){return e.id})).forEach((function(t){"ctrlClick"===e.config.multiselection?e.selection.add(t,!0):e.selection.add(t)})))}}},i.prototype._initHotKey=function(){var e=this._getHotkeys();for(var t in e)this.keyManager.addHotKey(t,e[t]);for(var t in this.config.hotkeys)this.keyManager.addHotKey(t,this.config.hotkeys[t])},i.prototype.getItemAriaAttrs=function(e,t){return r(r({role:"option","aria-selected":t.id===this._focus?"true":"false"},function(e,t){return e.config.dragMode&&!e._edited?{"aria-grabbed":Boolean(t.$dragtarget&&!e._edited).toString()}:{}}(e,t)),function(e){return e.config.editable?{"aria-roledescription":"".concat(e._edited?"Press Enter to stop editing":"Double click to edit content")}:{}}(e))},i.prototype._getListAriaAttrs=function(e,t){return{role:"listbox","aria-label":"Listbox ".concat(e.title||"",", count of options = ").concat(t,".").concat(e.editable?" Content is editable.":""),"aria-multiselectable":e.selection&&e.multiselection?"true":"false","aria-readonly":e.editable?"false":"true"}},i}(h.View);t.List=_},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Selection=void 0;var n=i(39),o=i(11),r=i(0),a=function(){function e(e,t,i){var n=this;if(this.config=e,this.events=i,this._data=t,this._selected=[],this._data.events.on(o.DataEvents.removeAll,(function(){n._selected=[]})),"string"==typeof this.config.multiselection){["click","ctrlClick"].includes(this.config.multiselection)||(this.config.multiselection=!1)}this._data.events.on(o.DataEvents.beforeRemove,(function(e){if(n._nextSelection=null,1===n._selected.length){var t=n._data.getIndex(e.id),i=n._data.getLength();if(i>1){var o=i==t-1?t-1:t+1;n._nextSelection=n._data.getId(o)}}})),this._data.events.on(o.DataEvents.afterRemove,(function(e){var t=n._selected.indexOf(e.id);-1!==t&&n._selected.splice(t,1),(0,r.isId)(n._nextSelection)&&(n.add(n._nextSelection),n._nextSelection=null)}))}return e.prototype.enable=function(){this.config.disabled=!1},e.prototype.disable=function(){this.remove(),this.config.disabled=!0},e.prototype.getId=function(){return this.config.multiselection?this._selected:this._selected[0]},e.prototype.getItem=function(){var e=this;return this.config.multiselection?this._selected.map((function(t){return e._data.getItem(t)})):this._selected.length?this._data.getItem(this._selected[0]):null},e.prototype.contains=function(e){return(0,r.isId)(e)?this._selected.includes(e):this._selected.length>0},e.prototype.remove=function(e,t){var i=this;(0,r.isId)(e)?this._unselectItem(e,t):(this._selected.forEach((function(e){return i._unselectItem(e,t)})),this._selected=[])},e.prototype.add=function(e,t,i,n){var o=this;if(!this.config.disabled)if(void 0!==e){var r=this.config.multiselection;i&&this._selected.length&&r?this._addMulti(e,n):this._addSingle(e,r&&("ctrlClick"!==r||t),n)}else{var a=this._data.serialize().filter((function(e){var t=e.id;return!o._selected.includes(t)}));a.forEach((function(e){var t=e.id;o._addMulti(t,n)}))}},e.prototype.destructor=function(){var e=this;this._selected.forEach((function(t){return e._unselectItem(t,!0)}))},e.prototype._addMulti=function(e,t){var i,n=this._selected[this._selected.length-1],o=this._data.getIndex(n),r=this._data.getIndex(e);for(o>r&&(o=(i=[r,o])[0],r=i[1]);o<=r;o++){var a=this._data.getId(o);this._selectItem(a,t)}},e.prototype._addSingle=function(e,t,i){var n=this;t||this._selected.forEach((function(t){t!=e&&n._unselectItem(t)})),t&&this._selected.includes(e)?this._unselectItem(e,i):this._selectItem(e,i)},e.prototype._selectItem=function(e,t){var i=this._data.getItem(e);i&&!this._data.getMeta(i,"selected")&&(t||this.events.fire(n.SelectionEvents.beforeSelect,[e]))&&(this._selected.push(e),this._data.setMeta(i,"selected",!0),t||this.events.fire(n.SelectionEvents.afterSelect,[e]))},e.prototype._unselectItem=function(e,t){(t||this.events.fire(n.SelectionEvents.beforeUnSelect,[e]))&&(this._selected=this._selected.filter((function(t){return t!==e})),this._data.setMeta(this._data.getItem(e),"selected",!1),t||this.events.fire(n.SelectionEvents.afterUnSelect,[e]))},e}();t.Selection=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={notFound:"Not Found",selectAll:"Select All",unselectAll:"Unselect All",selectedItems:"selected items",createItem:"Create"}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.emptyListHeight=t.emptyListView=t.unselectAllView=t.selectAllView=void 0;var n=i(1),o=i(85);t.selectAllView=function(){return(0,n.el)(".dhx_list-item.dhx_combobox-options__item.dhx_combobox-options__item--select-all.dhx_combobox__action-select-all",o.default.selectAll)},t.unselectAllView=function(){return(0,n.el)(".dhx_list-item.dhx_combobox-options__item.dhx_combobox-options__item--select-all.dhx_combobox__action-select-all",o.default.unselectAll)},t.emptyListView=function(e){return(0,n.el)("ul.dhx_list",[(0,n.el)("li.dhx_list-item.dhx_combobox-options__item".concat(e?".dhx_combobox-options__action-create-option":""),{},e?"".concat(o.default.createItem,' "').concat(e,'"'):o.default.notFound)])},t.emptyListHeight=function(e,t){var i=document.createElement("canvas").getContext("2d",{alpha:!1});i.font="normal 14px Roboto";var n=e?"".concat(o.default.createItem,' "').concat(e,'"'):o.default.notFound;return 13+20*Math.ceil(i.measureText(n).width/(t-16))}},function(e,t,i){"use strict";var n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.ComboState=t.ComboboxEvents=void 0,function(e){e.beforeChange="beforeChange",e.change="change",e.focus="focus",e.blur="blur",e.keydown="keydown",e.input="input",e.beforeOpen="beforeOpen",e.afterOpen="afterOpen",e.beforeClose="beforeClose",e.afterClose="afterClose",e.open="open",e.close="close"}(n||(t.ComboboxEvents=n={})),function(e){e[e.default=0]="default",e[e.error=1]="error",e[e.success=2]="success"}(o||(t.ComboState=o={}))},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.getFixedCols=t.getFixedColsHeader=void 0;var r=i(1),a=i(8),s=i(34),l=i(89),c=i(20),u=i(23);t.getFixedColsHeader=function(e,t,i){if((i!==a.Split.left||"number"==typeof e.leftSplit&&e.fixedColumns.left.length)&&(i!==a.Split.right||"number"==typeof e.rightSplit&&e.fixedColumns.right.length)){var o=e.leftSplit,s=e.rightSplit,d=e.$positions,h=e.$totalWidth,f=e.$scrollBarWidth,p=i===a.Split.right,v=p?e.fixedColumns.right:e.fixedColumns.left,g=(0,c.getTotalWidth)(v),_=(0,l.getFixedRows)(n(n({},e),{currentColumns:v,$positions:n(n({},d),{xStart:0,xEnd:p?s:o}),scroll:{top:0,left:0},filteredColumns:v}),n(n({},t),{name:"header",position:"top",shifts:{x:0,y:0}}),i),m=n(n({},t),{name:"header",position:"top"});return(0,r.el)(".dhx_".concat(m.name,"-fixed-cols"),n({onwheel:c.scrollFixedColsAndRows,class:p?"dhx_grid__cols_right--fixed":"dhx_grid__cols_left--fixed",style:{position:"absolute",top:0,left:p?h<t.wrapper.width-f.y-u.BORDERS?h-g:t.wrapper.width-g-f.y-u.BORDERS:0,width:g,overflow:"hidden"}},{role:"rowgroup","aria-rowcount":_.length}),_.body)}},t.getFixedCols=function(e,t,i,d){if((i!==a.Split.left||"number"==typeof e.leftSplit&&e.fixedColumns.left.length)&&(i!==a.Split.right||"number"==typeof e.rightSplit&&e.fixedColumns.right.length)){var h,f=e.leftSplit,p=e.rightSplit,v=e.$totalWidth,g=e.$totalHeight,_=e.headerHeight,m=e.footerHeight,y=e.$positions,b=e.scroll,w=e.data,x=e.$scrollBarWidth,C=i===a.Split.right,E=g+_+m;h=E>t.gridBodyHeight?e.$footer?E-x.x:t.gridBodyHeight:E<t.gridBodyHeight-x.x?E:e.$footer?t.gridBodyHeight:t.gridBodyHeight-x.x;var S=C?e.fixedColumns.right:e.fixedColumns.left,I=(0,c.getTotalWidth)(S),k=C?"rightFixedCols":"leftFixedCols",O=(0,s.getCells)(n(n({},e),{filteredColumns:S,$renderFrom:k,$positions:n(n({},y),{xStart:0,xEnd:C?p:f})})),M=t.sticky,R=n(n({},t),{name:"footer",position:"bottom"}),A=(0,l.getRows)(n(n({},e),{currentColumns:S,$positions:n(n({},y),{xStart:0,xEnd:C?p:f})}),n(n({},t),{name:"footer",position:"bottom"})),P=0;A.forEach((function(e){return P+=e.attrs.style.height}));var T=(0,l.getFixedSpans)(n(n({},e),{filteredColumns:S}),n(n({},t),{name:"footer",position:"bottom"}),i),D=function(e){return{role:"rowgroup","aria-rowcount":e}},F=M?(0,r.el)(".dhx_".concat(R.name,"-fixed-cols"),n({onwheel:c.scrollFixedColsAndRows,class:C?"dhx_grid__cols_right--fixed":"dhx_grid__cols_left--fixed",style:{position:"absolute",top:h<t.gridBodyHeight?h-P:null,left:C?v<t.wrapper.width-x.y-u.BORDERS?v-I:t.wrapper.width-I-x.y-u.BORDERS:0,bottom:h>=t.gridBodyHeight?"".concat(M?x.x:0,"px"):null,overflow:"hidden"}},D(A.length)),o(o([],A,!0),[(0,r.el)("span.dhx_span-spans",{class:"dhx_footer-spans",role:"presentation"},T)],!1)):null,V=y,L=(0,s.getSpans)(n(n({},e),{$renderFrom:k}),d||(C?a.Split.right:a.Split.left));return[(0,r.el)(".dhx_grid-fixed-cols-wrap",n({style:{left:C?v<t.wrapper.width-x.y-u.BORDERS?v-I:t.wrapper.width-I-x.y-u.BORDERS:0,height:h>=t.gridBodyHeight?(M?t.gridBodyHeight:t.gridBodyHeight+_)-x.x:h,paddingTop:_,overflow:"hidden",width:I}},{role:"presentation","aria-label":"Fixed column"}),[(0,r.el)(".dhx_grid-fixed-cols",n(n({onwheel:c.scrollFixedColsAndRows,class:C?"dhx_grid__cols_right--fixed":"dhx_grid__cols_left--fixed",style:{top:-b.top+_-1+"px",paddingTop:t.shifts.y,height:g,position:"absolute"},_flags:r.KEYED_LIST},(0,s.getHandlers)(V.yStart,V.xStart,e)),D(w.length)),o(o([],O,!0),[L&&(0,r.el)("span.dhx_span-spans",{role:"presentation"},L)],!1)),C?(0,r.el)(".dhx_grid__cols-border--frozen",{role:"presentation",style:{left:0}}):(0,r.el)(".dhx_grid__cols-border--frozen",{role:"presentation",style:{right:0}})]),e.$footer?F:null]}}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.getFixedDataRows=t.getFixedRows=t.getFixedSpans=t.getRows=void 0;var r=i(1),a=i(31),s=i(20),l=i(8),c=i(34),u=i(88),d=i(0),h=i(23),f=i(17);function p(e,t,i,n,o){n&&(n.toLocaleLowerCase().includes("touch")?i._events.fire(n,[e,t,o]):i.events.fire(n,[e,t,o]))}function v(e,t,i,n){return{onclick:[p,n,e,i,l.GridEvents[t+"CellClick"]],onmouseover:[p,n,e,i,l.GridEvents[t+"CellMouseOver"]],onmousedown:[p,n,e,i,l.GridEvents[t+"CellMouseDown"]],ontouchstart:[p,n,e,i,l.GridEvents[t+"CellMouseDown"]],ondblclick:[p,n,e,i,l.GridEvents[t+"CellDblClick"]],oncontextmenu:[p,n,e,i,l.GridEvents[t+"CellRightClick"]],ontouchmove:[p,n,e,i,l.GridSystemEvents[t+"CellTouchMove"]],ontouchend:[p,n,e,i,l.GridSystemEvents[t+"CelltouchEnd"]]}}function g(e,t,i,n,o,a){void 0===o&&(o="");var s=t.type?"dhx_".concat(t.type,"-cell"):"dhx_string-cell",l=i.content[e.content]&&i.content[e.content].toHtml(t,i),c={};return i.filteredColumns.forEach((function(e){var t=!!i.content[e[n][a].content];c[e.id]=t&&i.content[e[n][a].content].toHtml(e,i)||e[n][a].text})),(0,r.el)(".".concat(s),{style:{class:o.trim(),padding:0}},[l])}function _(e,t){if(!e.data||!e.filteredColumns)return[];var i,o=t.name,a="header"===o?e.headerAutoHeight:e.footerAutoHeight,l=e.$positions,c=e.currentColumns,u=function(e,t){var i=e.map((function(e){return e[t]||[{}]}));return(0,s.transpose)(i)}(c,o),d=1;return u.map((function(t,p){var _=("header"===o?e.$headerHeightMap:e.$footerHeightMap)[p];return(0,r.el)(".dhx_".concat(o,"-row"),n({style:{height:_}},{role:"row","aria-rowindex":p+1}),t.map((function(t,m){var y,b=t.css||"",w=c[m],x=l.xStart+m+1,C=(0,s.isHtmlEnable)(e,w,t),E="dxi dxi-arrow-up dhx_grid-sort-icon",S="none",I=t.text;if("function"==typeof t.text){var k=n(n({},e.commonSummary),e.colSummary[w.id]);"string"==typeof w.summary&&"count"!==w.summary&&(k[w.summary]=(0,f.applyPattern)(k[w.summary],w)),I=t.text(k)}var O=e.sort.findIndex((function(e){return e.by==w.id})),M=e.sort[O];M&&!t.content&&(E+=" dhx_grid-sort-icon--".concat(M.dir),b+=" dhx_grid-".concat(o,"-cell--sorted "),S="asc"===M.dir?"ascending":"descending");var R=(0,s.isSortable)(e,w)&&t.text&&"footer"!==o&&!1!==t.headerSort;!w.$target&&R&&(b+=" dhx_grid-header-cell--sortable");var A=0===m?"dhx_first-column-cell":"",P=m===c.length-1?"dhx_last-column-cell":"";t.content||(t.align?b+=" dhx_grid-header-cell--align_".concat(t.align," "):b+=" dhx_grid-header-cell--".concat("number"===w.type||"date"===w.type?"align_right":"align_left"," ")),b+="".concat(A," ").concat(P),w.$target&&"header"===o&&(b+=" dhx_grid-header-drop-area--".concat(w.$target," "));var T=void 0!==w.resizable?w.resizable:e.resizable;if(T){var D=e.rightSplit&&e.$scrollBarWidth.xState&&e.fixedColumns.right.includes(w);T=(0,r.el)("div",{class:"dhx_resizer_grip_wrap","aria-hidden":"true"},[(0,r.el)("div",{class:"dhx_resizer_grip"+(D?" dhx_resizer_grip--left":" dhx_resizer_grip--right"),dhx_resized:w.id,style:{height:"".concat(100*u.length,"%")}},[(0,r.el)("div",{class:"dhx_resizer_grip_line"})])]);var F=w.header&&(null===(y=w.header[0])||void 0===y?void 0:y.colspan);F&&(i=F,d=1),i&&d!==i&&(0===p&&(T=null),d++),"footer"===o&&(T=null)}t.align&&(b+=" dhx_align-".concat(t.align));var V=function(e,i,n){var o={"aria-colindex":i};return"footer"===e||t.content?o.role="gridcell":(o.role="columnheader",o["aria-sort"]=n),o};if(t.content)return(0,r.el)(".dhx_grid-".concat(o,"-cell.dhx_grid-custom-content-cell"),n(n({class:b.trim(),"data-dhx-id":w.id,"data-dhx-text-id":t.id,_key:w.id,style:{width:w.$width,height:"footer"===o?_+h.BORDERS/2+"px":_+"px"}},v(w,o,e,t)),V(o,x,S)),[g(t,w,e,o,"",p),T||null]);var L="dhx_grid-header-cell-text_content";return a&&(L+=" dhx_grid-header-cell-text_content-auto-height"),(0,r.el)(".dhx_grid-".concat(o,"-cell"),n(n({class:b.trim(),"data-dhx-id":w.id,"data-dhx-text-id":t.id,_key:w.id,style:{width:w.$width,height:"footer"===o?_+h.BORDERS/2+"px":_+"px"}},v(w,o,e,t)),V(o,x,S)),[(0,r.el)("div.dhx_grid-header-cell-text",{role:"presentation"},[(0,r.el)("span",n(n({class:L},function(e,t){return R?{role:"button","aria-label":"Sort by ".concat(t)}:{}}(0,I)),{".innerHTML":C?I:null}),C?null:I),T||null]),R&&(0,r.el)("div.dhx_grid-sort",[(0,r.el)("div",{class:E,"aria-hidden":"true"}),M&&e.sort.length>1&&(0,r.el)("div.dhx_grid-sort-counter",{"aria-hidden":"true"},[O+1])||null])])})))}))}function m(e,t,i){var o=e.columns,c=e.filteredColumns,u=(0,s.transpose)(c.map((function(e){return e[t.name]||[]}))),p=t.name,_="header"===p?e.headerAutoHeight:e.footerAutoHeight,m="header"===p?e.$headerHeightMap:e.$footerHeightMap,y=0;return u.map((function(u,b){y=0;var w=m[b];return(0,r.el)(".dhx_span-row",{class:"dhx_header-row","aria-hidden":"true"},u.map((function(u,x){var C,E=c[x];if(i===l.Split.right&&0===x&&!(u.colspan>1)){var S=(0,s.transpose)(o.map((function(e){return e[t.name]||[]})));e:for(var I=0;I<S[b].length;I++){var k=S[b][I];if(k.colspan>1)for(var O=o.slice(I,I+k.colspan),M=0;M<O.length;M++)if(O[M].id===E.id){C={cell:k,col:o[I],widthBefore:(0,a.getWidth)(O,M,0),isLastCol:I+k.colspan>=o.length};break e}}}var R=(null==C?void 0:C.cell)||u,A=(null==C?void 0:C.col)||E,P=(0,s.isHtmlEnable)(e,E,u);y+=A.hidden?0:A.$width;var T=0===x?"dhx_first-column-cell":"",D=i?1:e.fixedColumns.right.length+1,F=u.colspan>1&&(0,a.getReducedColspan)(o,E.id,u.colspan),V=(null==C?void 0:C.isLastCol)||x===c.length-D||(F||1)+(x-1)>=c.length-D?"dhx_last-column-cell":"",L=w,N=w*b;if(R.rowspan>1){for(var H=R.rowspan-1;H>0;)L+=m[b+H],H--;L-=1}if(R.rowspan>1||R.colspan>1){N=0;for(I=b-1;I>=0;I--)N+=m[I]}var j=(0,s.isSortable)(e,A)&&R.rowspan>1&&R.text&&"footer"!==t.name&&!1!==R.headerSort,z="dxi dxi-arrow-up dhx_grid-sort-icon",$=e.sort.findIndex((function(e){return e.by==A.id})),B=e.sort[$];B&&!R.content&&(z+=" dhx_grid-sort-icon--".concat(B.dir));var q=A.align?"dhx_align-".concat(A.align):"number"!==A.type&&"percent"!==A.type&&"date"!==A.type||R.colspan>1?"dhx_align-left":"dhx_align-right",W="dhx_grid-".concat(p,"-cell ").concat(T," ").concat(V," ").concat(R.rowspan>1?"dhx_span-cell__rowspan":""," ").concat(R.align?"dhx_align-".concat(R.align):q," ").concat(R.css?R.css:"");!A.$target&&j&&(W+=" dhx_grid-header-cell--sortable"),R.content||(R.align?W+=" dhx_grid-header-cell--align_".concat(R.align," "):W+=" dhx_grid-header-cell--".concat("number"===A.type||"percent"===A.type||"date"===A.type?"align_right":"align_left"," ")),A.$target&&"header"===p&&(W+=" dhx_grid-header-drop-area--".concat(A.$target," "));var G=R.text;if("function"==typeof R.text){var U=n(n({},e.commonSummary),e.colSummary[E.id]);"string"==typeof E.summary&&"count"!==E.summary&&(U[E.summary]=(0,f.applyPattern)(U[E.summary],E)),G=R.text(U)}var X=null;R.content&&((X=g(R,A,e,p,W,b)).attrs.style=n(n({},X.attrs.style),{width:"100%",borderRight:"0"}));var Y="";y-A.$width>0&&(Y="var(--dhx-border)");var K="dhx_grid-header-cell-text_content";_&&(K+=" dhx_grid-header-cell-text_content-auto-height");var J=(0,r.el)("span",{class:K,".innerHTML":P?G:null},P?null:G);return R.colspan>1||R.rowspan>1?(0,r.el)(".dhx_span-cell",n({style:{width:(0,a.getWidth)(o,R.colspan,(0,d.findIndex)(o,(function(e){return e.id===A.id}))),height:L,left:y-A.$width-((null==C?void 0:C.widthBefore)||0),borderLeft:Y,top:N},class:W.trim(),"data-dhx-id":A.id,"data-dhx-text-id":R.id},v(A,p,e,R)),[X||R.rowspan>1?(0,r.el)("div.dhx_grid-header-cell-text",{role:"presentation"},[J]):J,j&&(0,r.el)("div.dhx_grid-sort",[(0,r.el)("div",{class:z,"aria-hidden":"true"}),B&&e.sort.length>1&&(0,r.el)("div.dhx_grid-sort-counter",{"aria-hidden":"true"},[$+1])||null]),i===l.Split.left&&F&&x+F>c.length||C?(0,r.el)(".dhx_grid__cols-border--frozen",{role:"presentation",style:{left:((null==C?void 0:C.widthBefore)||(0,a.getWidth)(c,c.length-x,x))-h.BORDERS/2-(x&&i===l.Split.left?1:0)}}):null]):null})).filter((function(e){return e})))}))}function y(e){return{role:"rowgroup","aria-rowcount":e}}t.getRows=_,t.getFixedSpans=m,t.getFixedRows=function(e,t,i){var a,s=e.leftSplit,l=e.$totalWidth,c=_(e,t),u=m(e,t,i),d=null;if("footer"===t.name&&!t.sticky){var f=e.rightSplit,p=e.fixedColumns,v=function(i){void 0===i&&(i=!1);var o=i?p.right:p.left;return!i&&s>=0||i&&f>=0?_(n(n({},e),{currentColumns:o,$positions:n(n({},e.$positions),{xStart:0,xEnd:i?f:s})}),t):[]};d=o(o([],v(),!0),v(!0),!0)}var g,b=((a={position:"sticky"})[t.position]=0,a);return t.sticky||(b.left=-e.scroll.left,g=-e.scroll.left,b.position="relative"),(0,r.el)(".dhx_".concat(t.name,"-wrapper").concat(e.rightSplit?".dhx_grid__rows_right--fixed":""),{class:t.sticky?"":"dhx_compatible-".concat(t.name),style:n(n({},b),{left:t.sticky?g:0,height:"footer"===t.name?e[t.name+"Height"]+h.BORDERS/2:e[t.name+"Height"],width:t.sticky?l:t.wrapper.width-h.BORDERS}),role:"presentation","data-dhx-drop-area":"header"===t.name?"column":null},[(0,r.el)(".dhx_grid-".concat(t.name).concat(s?".dhx_grid_fixed_left":""),{style:{height:"footer"===t.name?e[t.name+"Height"]+h.BORDERS/2:e[t.name+"Height"],left:g,paddingLeft:t.shifts.x,width:l},role:"presentation"},[(0,r.el)(".dhx_".concat(t.name,"-rows"),n({},y(o([],c,!0).length)),o([],c,!0)),(0,r.el)(".dhx_".concat(t.name,"-spans"),{style:{marginLeft:-t.shifts.x},class:"dhx_".concat(t.name,"-rows"),role:"presentation"},u),d&&(0,r.el)(".dhx_".concat(t.name,"-fixed-cols"),{style:{position:"absolute",top:0,left:e.scroll.left+"px",height:"100%"}},d)]),(0,r.el)("div",{style:{width:l},role:"presentation"})])},t.getFixedDataRows=function(e,t,i){if(!(i===l.Split.top&&"number"!=typeof e.topSplit||i===l.Split.bottom&&"number"!=typeof e.bottomSplit)){var a=e.$totalWidth,d=e.topSplit,p=e.bottomSplit,v=e.$positions,g=e.data,_=e.$totalHeight,m=e.$width,b=e.headerHeight,w=e.footerHeight,x=e.$scrollBarWidth,C=i===l.Split.bottom,E=C?e.fixedRows.bottom:e.fixedRows.top,S=C?"bottomFixedRows":"topFixedRows",I=(0,c.getCells)(n(n({},e),{data:E,$renderFrom:S,$positions:n(n({},v),{yStart:0,yEnd:C?p:d})})),k=E.reduce((function(e,t){return e+(0,f.getTotalRowHeight)(t)}),0),O=(0,c.getSpans)(n(n({},e),{$renderFrom:S,data:g}),C?l.Split.bottom:l.Split.top),M=(0,s.getTotalHeight)(e.fixedRows.bottom),R=function(o){return(0,u.getFixedCols)(n(n({},e),{headerHeight:0,data:E,$renderFrom:S,scroll:n(n({},e.scroll),{top:-1}),$positions:n(n({},v),{yStart:0,yEnd:C?p:d}),$totalHeight:k,$data:g}),n(n({},t),{shifts:n(n({},t.shifts),{y:0})}),o,i)||[]},A=o(o([],R(l.Split.left),!0),R(l.Split.right),!0);return[(0,r.el)(".dhx_grid-fixed-data-rows-wrap",{class:C?"dhx_grid__rows_bottom--fixed":"",style:{top:C?_+b+w<t.wrapper.height-x.x-h.BORDERS?_+b-M+h.BORDERS/2:t.wrapper.height-M-w-h.BORDERS/2-x.x:b,overflow:"hidden",height:k>t.wrapper.height?t.wrapper.height:k,width:a+x.y+h.BORDERS<m?a:m-x.y-h.BORDERS}},o(o([(0,r.el)(".dhx_grid-fixed-cols",n(n({onwheel:s.scrollFixedColsAndRows,style:{left:-e.scroll.left+"px",paddingLeft:t.shifts.x,position:"absolute",width:a},_flags:r.KEYED_LIST},(0,c.getHandlers)(0,v.xStart,e)),y(g.length)),[(0,r.el)(".dhx_grid-fixed-rows",{class:e.rightSplit?"dhx_grid__rows_right--fixed":""},o(o([],I,!0),[O&&(0,r.el)(".dhx_span-spans",{role:"presentation"},O)],!1))])],A,!0),[e.bottomSplit?(0,r.el)(".dhx_grid__rows-border--frozen",{role:"presentation"}):null],!1))]}}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultSubRowConfig=t.getGroupDefaultConfig=void 0;var o=i(58);t.getGroupDefaultConfig=function(e){return"boolean"==typeof e&&(e={}),n(n({type:"column",panel:!0,panelHeight:40,hideableColumns:!0,showMissed:!0},e),{column:n({id:"string"==typeof e.column?e.column:null,header:[{text:o.default.groupText}]},"string"==typeof e.column?{}:e.column)})},t.defaultSubRowConfig={height:200,padding:8,toggleIcon:!0,expanded:!1,preserve:!1,fullWidth:!1}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i},s=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendedGrid=void 0;var l=i(8),c=i(11),u=i(3),d=i(17),h=i(73),f=i(1),p=i(35),v=i(20),g=i(72),_=i(90),m=i(0),y=i(58),b=function(e){function t(t,i){var n,o,a=this;if((a=e.call(this,t,r({autoHeight:!1,closable:!0,groupable:!1,subRow:null,multiSort:!0,headerAutoHeight:null!==(n=null==i?void 0:i.headerAutoHeight)&&void 0!==n?n:null==i?void 0:i.autoHeight,footerAutoHeight:null!==(o=null==i?void 0:i.footerAutoHeight)&&void 0!==o?o:null==i?void 0:i.autoHeight},i))||this).config.group){a.config.$grouped=[],a.config.group=(0,_.getGroupDefaultConfig)(a.config.group);var s=a.config.group.order;Array.isArray(s)&&s.length&&a._group(s),c.dragManager.setItem(a._uid,a)}return a.config.subRow&&(a.config.$subRowCells=new Map),a.scrollView=new p.ScrollView((function(){return a.getRootView()}),{scrollHandler:function(e){return a.events.fire(l.GridEvents.scroll,[{y:e.target.scrollTop,x:e.target.scrollLeft}])}}),a}return o(t,e),t.prototype.expand=function(e){var t=this.data.getItem(e);if(t.$subRowHeight){if(!this._expand(t))return;this._normalizeSpans(),this.paint()}},t.prototype.collapse=function(e){var t=this.data.getItem(e);if(t.$subRowHeight){if(!this._collapse(t))return;this._normalizeSpans(),this.paint()}},t.prototype.expandAll=function(){var e=this;this.data.forEach((function(t){t.$subRowHeight&&e._expand(t)})),this._normalizeSpans(),this.paint()},t.prototype.collapseAll=function(){var e=this;this.data.forEach((function(t){t.$subRowHeight&&e._collapse(t)})),this._normalizeSpans(),this.paint()},t.prototype.getSubRow=function(e){var t,i,n,o;if(!(null===(t=this.config.$subRowCells)||void 0===t?void 0:t.has(e)))return null;var s=null===(i=this.config.$subRowCells)||void 0===i?void 0:i.get(e),l=s.cell,c=a(s,["cell"]);return r(r({},c),{view:(null==l?void 0:l.getWidget())||(null==l?void 0:l.config.html)||null,element:null===(o=null===(n=null==l?void 0:l.getRootView())||void 0===n?void 0:n.node)||void 0===o?void 0:o.el})},t.prototype._createView=function(){var e=this;return(0,f.create)({render:function(t,i){return e._destructed?(0,f.el)("div"):(0,h.proRender)(t,i,e._htmlEvents,e.selection,e._uid)},hooks:this._initHooks()},this)},t.prototype._setHTMLEventHandlers=function(){var t=this;e.prototype._setHTMLEventHandlers.call(this),this._htmlEvents=r(r({},this._htmlEvents),{onclick:(0,u.eventHandler)((function(e){return(0,u.locate)(e)}),{"dhx_grid-header-cell--sortable":function(e,i){var n=e.target.getAttribute("dhx_resized"),o=t.getColumn(i);if(o&&(0,v.isSortable)(t.config,o)&&!n){var r=(0,u.locate)(e,"data-dhx-text-id"),a=o.header.find((function(e){return e.id===r})),s=e.ctrlKey||e.metaKey,l=t.config.multiSort&&(!s||s&&!t._sortingStates.length);t._sort(i,a.sortAs,l)}},"dhx_grid-expand-cell":function(e,i){e.target.classList.contains("dhx_grid-expand-cell-icon")&&t.events.fire(l.GridEvents.expand,[i])},"dhx_span-expand-cell":function(e,i){e.target.classList.contains("dhx_span-expand-cell-icon")&&t.events.fire(l.GridEvents.expand,[i])}})})},t.prototype._setEventHandlers=function(){var t=this;e.prototype._setEventHandlers.call(this),this.events.on(l.GridEvents.expand,(function(e){var i=t.data.getItem(e);i&&(i.$opened?t.collapse(e):t.expand(e))})),this.events.on(l.GridEvents.headerCellMouseDown,(function(e,i,n){var o,r=(0,u.locateNodeByClassName)(n,"dhx_header-row"),a=r&&r.getAttribute("aria-rowindex");(null===(o=i.header[Number(a)-1])||void 0===o?void 0:o.content)||(n.targetTouches?t._touch.timer=setTimeout((function(){t._dragStartColumn(n,i)}),t._touch.duration):t._dragStartColumn(n,i))})),this._events.on(l.GridSystemEvents.headerCellTouchMove,(function(e,i,n){t._touch.start&&n.preventDefault(),t._clearTouchTimer()})),this._events.on(l.GridSystemEvents.headerCellTouchEnd,(function(){t._touch.start=!1,t._clearTouchTimer()})),this.events.on(l.GridEvents.afterResizeEnd,(function(){t.config.autoHeight&&(t.config.data=t.data.map((function(e){var i=(0,d.getMaxRowHeight)({row:e,cols:t.config.columns});return e.$height=(0,d.getCalculatedRowHeight)(i,{rowHeight:t.config.rowHeight}),e})))})),this.events.on(l.GridEvents.afterRowResize,(function(e,i,n){var o=t.data.getItem(e.id),r=o.id,a=o.height,s=o.$height;a&&a!==s&&t.data.update(r,{height:n}),t.data.update(r,{$height:n},!0),t.config.data=t.data.map((function(e){return e})),t.paint()})),this.events.on(l.GridEvents.scroll,(function(){t._lazyLoad()})),this.events.on(c.DataEvents.dataRequest,(function(e,i){var n=t.data.dataProxy;n&&n.config&&t._prepareDataFromTo(t.data,e,i)})),this.events.on(c.DragEvents.beforeDrag,(function(e,i,n,o){if("column"===o)return t.events.fire(l.GridEvents.beforeColumnDrag,[e,i])})),this.events.on(c.DragEvents.dragStart,(function(e,i,n){if("column"===n)t.events.fire(l.GridEvents.dragColumnStart,[e,i]),t._autoScroll("horizontal")})),this.events.on(c.DragEvents.dragIn,(function(e,i,n){var o,r;switch(n){case"column":var a=t.config.columns.findIndex((function(t){return t.id==e.target}));(c=t.config.columns.findIndex((function(t){return t.id==e.start})))!==a&&-1!=a&&(t.config.columns[a].$target=c>a?"left":"right"),t.events.fire(l.GridEvents.dragColumnIn,[e,i]);break;case"group":var s=t.getColumn(e.start);if(!t._isGroupableColumn(s))return;a=t.config.$grouped.findIndex((function(t){return t.id==e.target}));var c=t.config.$grouped.findIndex((function(t){return t.id==e.start})),u=t.config.$grouped.find((function(t){return t.id==e.start}));if(-1===a&&!u){var d=null===(r=s.header.find((function(e){return null==e?void 0:e.text})))||void 0===r?void 0:r.text;"function"==typeof d&&(d=d(t.getSummary(s.id))),(0,v.isHtmlEnable)(t.config,s)&&(d=(0,v.removeHTMLTags)(d)),t.config.$grouped.push({id:e.start,label:d,mode:"drop",notGrouped:!0,closable:t._isGroupClosable(s)})}c===a&&-1!==a||!u||(t.config.$grouped[c].mode="drop"),a>=0&&c>=0&&(o=[t.config.$grouped[c],t.config.$grouped[a]],t.config.$grouped[a]=o[0],t.config.$grouped[c]=o[1])}t.paint()})),this.events.on(c.DragEvents.dragOut,(function(e,i,n){if("column"===n)t.events.fire(l.GridEvents.dragColumnOut,[e,i])})),this.events.on(c.DragEvents.canDrop,(function(e,i,n){if("column"===n)t.events.fire(l.GridEvents.canColumnDrop,[e,i])})),this.events.on(c.DragEvents.cancelDrop,(function(e,i,n){switch(n){case"column":t.config.columns=t.config.columns.map((function(e){return delete e.$target,e})),t.events.fire(l.GridEvents.cancelColumnDrop,[e,i]);break;case"group":t.config.columns=t.config.columns.map((function(e){return delete e.$target,e}))}var o=(0,u.locate)((0,u.getElementFromPoint)(i),"data-dhx-drop-area");t.config.group&&"group"!==o&&(t.config.$grouped=t.config.$grouped.filter((function(e){return!e.notGrouped}))),t.paint()})),this.events.on(c.DragEvents.beforeDrop,(function(e,i,n){if("column"===n)return t.events.fire(l.GridEvents.beforeColumnDrop,[e,i])})),this.events.on(c.DragEvents.afterDrop,(function(e,i,n){if("column"===n)t.events.fire(l.GridEvents.afterColumnDrop,[e,i])})),this.events.on(c.DragEvents.afterDrag,(function(e,i,n){switch(n){case"column":t.config.columns=t.config.columns.map((function(e){return delete e.$target,e})),t.events.fire(l.GridEvents.afterColumnDrag,[e,i]);break;case"group":t.config.$grouped=t.config.$grouped.map((function(e){return e.mode="basic",e}));var o=t.config.$grouped.map((function(e){return delete e.notGrouped,e.id}));t._group(o)}t._normalizeSpans(),t.paint()})),this.events.on(l.GridEvents.beforeColumnDrop,(function(e){var i=e.target;if(t.config.group&&t.data.isGrouped()&&t.config.group.column.id==i)return!1})),this.events.on(l.GridEvents.groupPanelItemMouseDown,(function(e,i){if(i.targetTouches)return t._touch.start=!0,void(t._touch.timer=setTimeout((function(){t._dragStartGroupItem(i,e)}),t._touch.duration));t._dragStartGroupItem(i,e)})),this._events.on(l.GridSystemEvents.groupPanelItemTouchMove,(function(e,i){t._touch.start&&i.preventDefault(),t._clearTouchTimer()})),this._events.on(l.GridSystemEvents.groupPanelItemItemTouchEnd,(function(){t._touch.start=!1,t._clearTouchTimer()})),this.events.on(l.GridEvents.groupPanelItemClick,(function(e,i){if((0,u.locate)(i,"data-dhx-group-item-remove"))t._group(t.config.$grouped.filter((function(t){return t.id!=e})).map((function(e){return e.id})));else if((0,u.locateNodeByClassName)(i,"dhx_grid-group_item-sort")&&(0,v.isSortable)(t.config,t.getColumn(e))){var n=i.ctrlKey||i.metaKey,o=t.config.multiSort&&(!n||n&&!t._sortingStates.length);t._sort(e,void 0,o),t._changeGroupItemAfterSort()}})),this.data.events.on(c.DataEvents.afterGroup,(function(e,i){var n;if(t.config.group){t.config.$grouped=[];for(var o=t.config.group,r=function(e){var r=t.config.columns.find((function(t){return t.id==e}));if(!r)return"continue";var a=null===(n=r.header.find((function(e){return null==e?void 0:e.text})))||void 0===n?void 0:n.text;"function"==typeof a&&(a=a(t.getSummary(r.id))),(0,v.isHtmlEnable)(t.config,r)&&(a=(0,v.removeHTMLTags)(a));var s=t._sortingStates.findIndex((function(t){return t.by==e})),l=t._sortingStates[s];(null==o?void 0:o.hideableColumns)&&"column"===(null==i?void 0:i.displayMode)&&(t.isColumnHidden(e)||t._hideColumn(t.getColumn(e))),t.config.$grouped.push({id:e,label:a,sortDir:(null==l?void 0:l.dir)||null,sortOrder:t._sortingStates.length>1&&s+1||null,closable:t._isGroupClosable(r)})},a=0,l=e;a<l.length;a++){r(l[a])}if("column"===(null==i?void 0:i.displayMode)){var c=o.column;c.id=i.field,c.groupable=!1,c.draggable=!1,c.editable=!1,c.htmlEnable=!0,c.adjust=!0,c.tooltipTemplate=c.tooltipTemplate?c.tooltipTemplate:function(e,i,n){if(i.$groupSummary){var o=t.data.getItem(i.parent)[n.id];return"".concat(y.default.total," (").concat(o,")")}return e&&"".concat(e,"  ").concat((0,m.isDefined)(i.$count)?"(".concat(i.$count,")"):"")||""},c.template=c.template?c.template:function(e,i,n){if(i.$groupSummary){var o=t.data.getItem(i.parent)[n.id];return"".concat(y.default.total,'<span class="dhx_tree-cell_group-counter">&nbsp;(').concat(o,")</span>")}var r=(0,m.isDefined)(i.$count)?'<span class="dhx_tree-cell_group-counter">&nbsp;('.concat(i.$count,")</span>"):"";return(0,m.isDefined)(e)&&"".concat(e," ").concat(r," ")},t.setColumns(s([c],t.config.columns,!0))}}})),this.data.events.on(c.DataEvents.afterUnGroup,(function(e,i){if(t.config.$grouped=[],"column"===(null==i?void 0:i.displayMode)){var n=t.config.group.column;t.config.columns=t.config.columns.filter((function(e){return e.id!=n.id}))}e.forEach((function(e){t.isColumnHidden(e)&&t._showColumn(t.getColumn(e))})),t._parseColumns()})),this.data.events.on(c.DataEvents.change,(function(e,i,n){var o;"sort"===i&&(!(null===(o=t.config.$grouped)||void 0===o?void 0:o.length)||n&&!(0,v.isSortable)(t.config,n.by)||t._changeGroupItemAfterSort())}))},t.prototype._setSort=function(){this._sortingStates=this.data.getSortingStates().map((function(e){return{by:e.by,dir:e.dir,permanent:e.smartSorting}}))},t.prototype.getNormalizeContentHeight=function(e,t,i){var n,o,r=(0,v.isHtmlEnable)(i,t,e),a=0,s=e.text||"";if("function"==typeof s&&(s=s(this.getSummary(t.id))),r&&(s=(0,v.removeHTMLTags)(s)),e.colspan){var l=null===(n=i.columns)||void 0===n?void 0:n.findIndex((function(e){return e.id===t.id})),c=l+e.colspan,u=null===(o=i.columns)||void 0===o?void 0:o.slice(l,c);null==u||u.forEach((function(e){a+=e.$width}))}else a+=t.$width;return s=(null==s?void 0:s.toString())||"",(0,d.measureTextHeight)({text:s,htmlEnable:r,width:a-24,font:"normal 14.4px Arial"})+16},t.prototype._prepareData=function(e){var t=this;this._normalizeDataType(),this._setSummary(),this._adjustColumns();var i=this.config.columns.filter((function(e){return!e.hidden}));return e.map((function(e){var n;if(t.config.autoHeight&&void 0===e.height){var o=(0,d.getMaxRowHeight)({row:e,cols:i});e.$height=(0,d.getCalculatedRowHeight)(o,{rowHeight:t.config.rowHeight})||t.config.rowHeight}else e.$height=Number(e.height)||t.config.rowHeight;if(t.config.subRow){var a=r(r({},_.defaultSubRowConfig),("function"==typeof t.config.subRowConfig?t.config.subRowConfig(e):t.config.subRowConfig)||{});e.$opened=null!==(n=e.$opened)&&void 0!==n?n:a.expanded,e.$subRowHeight=a.height}return e}))},t.prototype._prepareDataFromTo=function(e,t,i){var n=this;return e.mapRange(t,i,(function(e){var t=(0,d.getMaxRowHeight)({row:e,cols:n.config.columns});return e.$height=(0,d.getCalculatedRowHeight)(t,{rowHeight:n.config.rowHeight})||n.config.rowHeight,e}))},t.prototype._dragStart=function(e){if(this.config.dragMode&&("row"===this.config.dragItem||"both"===this.config.dragItem)&&!this.config.$editable){var t=this.getColumn(e.target.getAttribute("data-dhx-col-id"));if(!1===(null==t?void 0:t.draggable))return;var i=(0,u.locateNode)(e,"data-dhx-id"),n=i&&i.getAttribute("data-dhx-id");e.targetTouches&&(this._touch.start=!0);var o=[n];if(this.config.multiselection&&(o=s(s([],o,!0),this.selection.getCells().map((function(e){return e.row.id})),!0)).length>1){for(var r=this.data.getInitialData(),a={},l=function(e){var t=o[e],i=null==r?void 0:r.findIndex((function(e){return e.id==t}));a[i]=t},d=0;d<o.length;d++)l(d);o=s([],Object.values(a),!0)}c.dragManager.onMouseDown({event:e,source:o,itemsForGhost:[this._getRowGhost(o)],type:"row"})}},t.prototype._group=function(e){if(e.length){var t=this.config.group;e=e.map((function(e){var i;if("string"==typeof e&&(null===(i=null==t?void 0:t.fields)||void 0===i?void 0:i[e])){var n=t.fields[e];return r(r({},n),{by:e})}return e})),this.data.group(e,{displayMode:t.type,showMissed:t.showMissed,field:t.column.id||"group"})}else this.data.ungroup()},t.prototype._expand=function(e){return!(e.$opened||!this.events.fire(l.GridEvents.beforeExpand,[e.id]))&&(this.data.update(e.id,{$opened:!0},!0),this.events.fire(l.GridEvents.afterExpand,[e.id]),!0)},t.prototype._collapse=function(e){return!(!e.$opened||!this.events.fire(l.GridEvents.beforeCollapse,[e.id]))&&(this.data.update(e.id,{$opened:!1},!0),this.events.fire(l.GridEvents.afterCollapse,[e.id]),!0)},t.prototype._lazyLoad=function(){var e,t,i=this,n=this.data.dataProxy;if(n&&n.config){var o=this.data.getRawData(0,-1,null,2);if(!o.length)return;var r,a=(0,h.getRenderConfig)(this,o,{width:this.config.$width,height:this.config.$height}),s=n.config.limit,l=s,u=a.currentRows,d=u[0],f=u[u.length-1],p=this.data.getIndex(f.id),v=function(e){for(var t=1;t<u.length;t++)if("firstFilledRow"===e&&!u[t].$empty&&u[t-1].$empty||"firstEmptyRow"===e&&u[t].$empty&&!u[t-1].$empty)return i.data.getIndex(u[t].id)};if(d.$empty)if(f.$empty)r=this.data.getIndex(d.id);else{var g=v("firstFilledRow"),_=g-l;_<0&&(_=0);for(var m=_;m<g;m++)if(this.data.getItem(this.data.getId(m)).$empty){r=m,l=g-m;break}}else f.$empty?r=v("firstEmptyRow"):(r=null!==(e=v("firstEmptyRow"))&&void 0!==e?e:this.data.getIndex(d.id),l=(null!==(t=v("firstFilledRow"))&&void 0!==t?t:p)-r);!this.data.isDataLoaded(r,p)&&this.data.events.fire(c.DataEvents.beforeLazyLoad,[])&&(n.updateUrl(null,{from:r,limit:l}),n.config.limit=s,this.data.load(n).then((function(){i.config.autoHeight&&i._prepareDataFromTo(i.data,r,p)})))}},t.prototype._getGhostItem=function(e){var t=document.createElement("div");return t.className="dhx_grid-draggable-item",t.innerHTML=e,t},t.prototype._dragStartColumn=function(e,t){var i,n,o=e.target,r=function(e){return e.classList.contains("dhx_grid-custom-content-cell")},a=r(o.parentElement)||r(o.parentElement.parentElement),s=this._isGroupableColumn(t);if(a||!(t.draggable||"column"===this.config.dragItem&&!1!==t.draggable||"both"===this.config.dragItem&&!1!==t.draggable)||(0,u.locateNodeByClassName)(e,"dhx_resizer_grip_wrap")){if(this.config.group&&s){var l=(0,u.locate)(e,"data-dhx-text-id");"function"==typeof(d=null===(n=t.header.find((function(e){return(null==e?void 0:e.id)==l})))||void 0===n?void 0:n.text)&&(d=d(this.getSummary(t.id))),(0,v.isHtmlEnable)(this.config,t)&&(d=(0,v.removeHTMLTags)(d)),c.dragManager.onMouseDown({event:e,type:"column",source:[t.id],ghost:this._getGhostItem(d),groupable:s,groupOnly:!0})}}else{e.targetTouches&&(this._touch.start=!0);var d,h=(0,u.locate)(e,"data-dhx-text-id");"function"==typeof(d=null===(i=t.header.find((function(e){return(null==e?void 0:e.id)==h})))||void 0===i?void 0:i.text)&&(d=d(this.getSummary(t.id))),(0,v.isHtmlEnable)(this.config,t)&&(d=(0,v.removeHTMLTags)(d)),c.dragManager.onMouseDown({event:e,type:"column",source:[t.id],ghost:this._getGhostItem(d),groupable:s})}},t.prototype._dragStartGroupItem=function(e,t){if(!(0,u.locateNodeByClassName)(e,"dhx_grid-group_item-sort")){var i=this.config.$grouped.find((function(e){return e.id==t})).label,n=this.getColumn(t);c.dragManager.onMouseDown({event:e,source:[t],type:"group",groupable:this._isGroupableColumn(n),ghost:this._getGhostItem(i)})}},t.prototype._changeGroupItemAfterSort=function(){var e=this;this.config.$grouped=this.config.$grouped.map((function(t){var i=e._sortingStates.findIndex((function(e){return e.by==t.id})),n=e._sortingStates[i];return r(r({},t),{sortDir:(null==n?void 0:n.dir)||null,sortOrder:e._sortingStates.length>1&&i+1||null})}))},t.prototype._isGroupableColumn=function(e){var t;return null!==(t=e.groupable)&&void 0!==t?t:this.config.groupable},t.prototype._isGroupClosable=function(e){var t;return null!==(t=e.closable)&&void 0!==t?t:this.config.closable},t}(g.Grid);t.ExtendedGrid=b},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.TreeGridCollection=void 0;var a=i(0),s=i(11),l=i(71),c=function(e){function t(t,i){return e.call(this,t,i)||this}return o(t,e),t.prototype.eachChild=function(t,i,n,o){void 0===n&&(n=!0),o=o||function(e){return!1!==e.$opened},e.prototype.eachChild.call(this,t,i,n,o)},t.prototype.getMaxLevel=function(){var e=this,t=1;return this.map((function(i){var n=e.getLevel(i.id);t=Math.max(n,t)})),t},t.prototype.getLevel=function(e){var t=0;return this.eachParent(e,(function(){t++})),t},t.prototype.serialize=function(t){var i=this;void 0===t&&(t=s.DataDriver.json);var n=[];e.prototype.eachChild.call(this,this.getRoot(),(function(e){if(e){var t=r({},e);Object.keys(t).forEach((function(e){e.startsWith("$")&&"$level"!==e&&delete t[e]})),t.parent&&t.parent===i._root&&delete t.parent,n.push(t)}}));var o=(0,s.toDataDriver)(t);if(o)return o.serialize(n)},t.prototype.getPlainIndex=function(e){return Object.keys(this._pull).indexOf("".concat(e))},t.prototype.map=function(e,t,i){void 0===t&&(t=this._root),void 0===i&&(i=!0);var n=[];if(!this.haveItems(t))return n;for(var o=0;o<this._childs[t].length;o++)if(n.push(e.call(this,this._childs[t][o],o)),i&&this._childs[t][o].hasOwnProperty("$opened")){var r=this.map(e,this._childs[t][o].id,i);n=n.concat(r)}return n},t.prototype.mapVisible=function(e,t,i){void 0===t&&(t=this._root),void 0===i&&(i=!0);var n=[];if(!this.haveItems(t))return n;for(var o=this._range&&t===this._root,r=o?this._range[0]:0,a=this._childs[t].length,s=o?Math.min(this._range[1],a):a,l=r;l<s;l++)if(!this._childs[t][l].hidden&&(n.push(e.call(this,this._childs[t][l],l)),i&&this._childs[t][l].$opened)){var c=this.mapVisible(e,this._childs[t][l].id,i);n=n.concat(c)}return n},t.prototype._parse_data=function(e,t){var i;void 0===t&&(t=this._root);for(var n=0,o=e;n<o.length;n++){var r=o[n];this.config.init&&(r=this.config.init(r));for(var l=0,c=Object.keys(r);l<c.length;l++){var u=c[l];u.includes("$items")&&delete r[u]}r.id=null!==(i=r.id)&&void 0!==i?i:(0,a.uid)(),r.parent=void 0===r.parent||r.parent&&r.$items?t:r.parent,this._pull[r.id]&&(0,s.dhxError)("Item ".concat(r.id," already exist")),this._parseItem(r),r.items&&r.items instanceof Object&&(r.$opened=!this.config.collapsed,this._parse_data(r.items,r.id))}this._checkItems()},t.prototype._copy=function(e,t,i,n,o){if(void 0===i&&(i=this),void 0===n&&(n=this._root),!this.exists(e))return null;var s=this._childs[e];if(o&&(t=-1===t?-1:t+o),i===this&&!this.canCopy(e,n))return null;var l=r({},this.getItem(e));if(i.exists(e)&&(l.id=(0,a.uid)()),this.exists(e)&&(l.parent=n,i!==this&&n===this._root&&(l.parent=i.getRoot()),i.add(l,t),e=l.id),s)for(var c=0,u=s;c<u.length;c++){var d=u[c].id,h=this.getIndex(d);this.copy(d,h,i,e)}return e},t.prototype._addToOrder=function(t,i,n){e.prototype._addToOrder.call(this,t,i,n),i.$level=this.getLevel(i.id),this._checkItems()},t.prototype._removeCore=function(t){e.prototype._removeCore.call(this,t),this._checkItems()},t.prototype._setParent=function(e,t){e.parent=e.parent?e.parent.toString():t},t.prototype._checkItems=function(){var e=this;this.eachChild(this._root,(function(t){var i=e.haveItems(t.id);t.$items=i,t.$level=e.getLevel(t.id),i&&(t.$opened=(0,a.isDefined)(t.$opened)?t.$opened:!e.config.collapsed&&i)}),!0,(function(){return!0}))},t.prototype._moveItem=function(e,t,i){var n=this.getParent(e);[this._childs,this._initChilds].forEach((function(o){if(o&&o[n]){var r=o[n].findIndex((function(t){return t.id===e}));if(-1!==r){var a=o[n].splice(r,1)[0];a.parent=t,(0,l.addToOrder)(o,a,t,i),o[n].length||delete o[n]}}})),this._checkItems()},t}(s.TreeCollection);t.TreeGridCollection=c},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(173),t),o(i(186),t)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSheetsContextMenuStruct=t.getContextMenuStruct=void 0;var n=i(12);t.getContextMenuStruct=function(){return[{id:"lock",value:n.default.lockCell,icon:"dxi dxi-key"},{id:"clear",value:n.default.clear,icon:"dxi dxi-eraser",items:[{id:"clear-value",value:n.default.clearValue},{id:"clear-styles",value:n.default.clearStyles},{id:"clear-all",value:n.default.clearAll}]},{id:"columns",value:n.default.columns,icon:"dxi dxi-table-column",items:[{id:"add-col",value:n.default.addColumn},{id:"remove-col",value:n.default.removeColumn},{id:"fit-col",value:n.default.fitToData,hidden:!0},{type:"separator"},{id:"unfreeze-cols",value:n.default.unfreezeCols},{id:"freeze-cols",value:n.default.freezeToCol},{id:"show-cols",value:n.default.showCols},{id:"hide-cols",value:n.default.hideCols}]},{id:"rows",value:n.default.rows,icon:"dxi dxi-table-row",items:[{id:"add-row",value:n.default.addRow},{id:"remove-row",value:n.default.removeRow},{type:"separator"},{id:"unfreeze-rows",value:n.default.unfreezeRows},{id:"freeze-rows",value:n.default.freezeToRow},{id:"show-rows",value:n.default.showRows},{id:"hide-rows",value:n.default.hideRows}]},{id:"sort",value:n.default.sort,icon:"dxi dxi-format-line-spacing",items:[{id:"asc-sort",value:n.default.ascSort,icon:"dxi dxi-sort-variant dhx-sort-acs"},{id:"desc-sort",value:n.default.descSort,icon:"dxi dxi-sort-variant"}]},{id:"link",value:"".concat(n.default.insert," ").concat(n.default.link.toLowerCase()),icon:"dxi dxi-link-variant"}]},t.getSheetsContextMenuStruct=function(e){return[{id:"delete",value:n.default.deleteSheet,icon:"dxi dxi-delete-forever",disabled:!e},{id:"rename",value:n.default.renameSheet,icon:"dxi dxi-pencil"}]}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAutoFilledCells=t.isCellGreater=t.getTimeStep=t.getDateStep=t.getProgressionStep=t.getLastCopyingCell=t.getCellsDiff=t.alphaRegex=void 0;var n=i(13),o=i(2),r=i(29);function a(e,t,i){var n=i.getCellIndex(e),o=i.getCellIndex(t),r=o.col-n.col,a=o.row-n.row,s=r<0||a<0;return{x:r,y:a,isLargerByX:Math.abs(r)>Math.abs(a),negativeDir:s}}function s(e){var t=e.map((function(e){return parseFloat(e)||0})),i=t.reduce((function(e,t){return e+t}),0),n=t.length;return(i/n*2-2*t[0])/(n-1)}function l(e){for(var t=(0,r.dateDiff)(e[0],e[1]),i=1;i<e.length-1;i++)(0,r.dateDiff)(e[i],e[i+1])!==t&&(t=0,i=e.length);return t}function c(e){for(var t=(0,r.timeDiff)(e[0],e[1]),i=1;i<e.length-1;i++)(0,r.timeDiff)(e[i],e[i+1])!==t&&(t=0,i=e.length);return t}t.alphaRegex=/(\d+$)/,t.getCellsDiff=a,t.getLastCopyingCell=function(e,t,i){(0,o.isRangeId)(e)&&(e=e.split(":")[1]);var n=i.getCellIndex(e),r=a(e,t,i),s=r.x,l=r.y,c=r.isLargerByX,u=n.row+l,d=n.col+s,h=c?d:n.col,f=c?n.row:u;return(0,o.getCellNameByIndex)(f,h)},t.getProgressionStep=s,t.getDateStep=l,t.getTimeStep=c,t.isCellGreater=function(e,t,i){var n=i.getCellIndex(e),o=i.getCellIndex(t);return n.row===o.row?n.col>o.col:n.row>o.row},t.getAutoFilledCells=function(e,i,u,d,h){var f=e.filter((function(e){var t=e.value,i=e.format;return(0,n.isNumeric)(t)&&"date"!==i.id&&"time"!==i.id&&"text"!==i.id})).map((function(e){return e.value})),p=e.filter((function(e){var t=e.value,i=e.format;return(0,n.isNumeric)(t)&&"date"===i.id})).map((function(e){return(0,r.excelDateToJSDate)(e.value)})),v=e.filter((function(e){var t=e.value,i=e.format;return(0,n.isNumeric)(t)&&"time"===i.id})).map((function(e){return(0,r.excelDateToJSDate)(e.value)})),g=e.filter((function(e){var i=e.value;return!(0,n.isNumeric)(i)&&i.match(t.alphaRegex)})).map((function(e){return e.value})).map((function(e){return parseInt(e.match(t.alphaRegex)[0])})),_=p.length<2?1:l(p),m=v.length<2?36e5:c(v),y=(0,o.getCellsArray)(i),b=s(1===f.length?[f[0],f[0]+1]:f),w=s(1===g.length?[g[0],g[0]+1]:g),x=function(e,t){var i=h.getCellIndex(e),n=h.getCellIndex(t);return i.row===n.row?i.col>n.col:i.row>n.row},C=[],E=parseFloat(f[f.length-1]),S=p[p.length-1],I=v[v.length-1],k=g[g.length-1],O=0,M=i.split(":"),R=M[0],A=M[1],P=u.split(":"),T=P[0],D=P[1],F=a(R===T&&A?A:R,T,h).isLargerByX,V=x(R,x(T,D)?D:T);V&&(_=-_,S=p[0],m=-m,I=v[0],b=-b,E=f[f.length-1],w=-w,k=g[g.length-1]);var L=(0,o.getCellsArray)(u).filter((function(e){return!y.includes(e)}));V&&(L=L.reverse(),e=e.reverse());var N=h.getPageMeta().merged,H=L.map((function(i,a){var s,l;l=e[O].value.toString().startsWith("="),s=e[O].value;var c=e[O].isSpanStart&&N.get(e[O].spanId);if(c){var u=c,f=u.colspan,p=u.rowspan,v=h.getCellIndex(i),g=(0,o.getCellNameByIndex)(v.row+p,v.col+f),x="".concat(i,":").concat(g);C.includes(x)||C.push(x)}if(l){var M=0,R=0,A=V?-1*(a+O+y.length+1):a-O+y.length;F?R=A:M=A,s=d.transposeMath(s,M,R)}if((0,n.isNumeric)(s))switch(e[O].format.id){case"date":S=(0,r.addDay)(S,_),s=(0,r.getExcelDateFromJs)(S);break;case"time":I=(0,r.addTime)(I,m),s=(0,r.getExcelDateFromJs)(I);break;default:s=(E+=b).toFixed(5)}else s.match(t.alphaRegex)&&(k+=w,s=s.replace(t.alphaRegex,Math.abs(k)));return O=void 0!==e[O+1]?O+1:0,s}));return V&&(H=H.reverse()),{cells:"".concat(L[0],":").concat(L[L.length-1]),value:H,spans:C}}},function(e,t,i){"use strict";(function(e){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i},s=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Form=void 0;var l=i(4),c=i(9),u=i(18),d=i(0),h=i(232),f=i(233),p=i(97),v=i(234),g=i(44),_=i(235),m=i(237),y=i(238),b=i(239),w=i(240),x=i(241),C=i(7),E=i(98),S=i(252),I=i(253),k=i(256),O=i(257),M=i(258),R=i(108),A=i(259),P=i(6),T=i(1),D=function(t){function i(e,i){var n=t.call(this,null,(0,d.extend)({disabled:!1,hidden:!1,css:""},i))||this;return n._isValid=!0,n._state={},n.events=new l.EventSystem(n),n.container=e,n._initUI(e),n.config.hidden&&n.hide(!0),n.config.disabled&&n.disable(),n.events.on(P.FormEvents.afterShow,(function(){n._formContainerShow()})),n.events.on(P.FormEvents.afterHide,(function(){Object.values(n._attachments).some((function(e){return!e.config.hidden}))||n._formContainerHide()})),(0,T.awaitRedraw)().then((function(){var e=n.layout.getRootNode();e&&(e.setAttribute("role","form"),n.config.title&&e.setAttribute("aria-label",n.config.title))})),n}return o(i,t),i.prototype.paint=function(){t.prototype.paint.call(this),this.layout.paint()},i.prototype.send=function(t,i,n){var o=this;if(void 0===i&&(i="POST"),this.events.fire(P.FormEvents.beforeSend))return new e((function(e,r){var a=new XMLHttpRequest;switch(a.onload=function(){a.status>=200&&a.status<300?e(a.response||a.responseText):r({status:a.status,statusText:a.statusText})},a.onloadend=function(){a.readyState===XMLHttpRequest.DONE&&200===a.status&&o.events.fire(P.FormEvents.afterSend)},a.onerror=function(){r({status:a.status,statusText:a.statusText})},"GET"===i&&(t+="?"+encodeURIComponent(JSON.stringify(o.getValue()))),a.open(i,t),n||a.setRequestHeader("Content-Type","application/json"),i){case"POST":o._send(),a.send(n?o.getValue(!0):JSON.stringify(o.getValue()));break;case"DELETE":case"PUT":a.send(n?o.getValue(!0):JSON.stringify(o.getValue()));break;default:a.send()}}))},i.prototype.clear=function(e){switch(e){case P.ClearMethod.value:this._clear();break;case P.ClearMethod.validation:this._clearValidate();break;default:this._clear(),this._clearValidate()}this.paint()},i.prototype.setValue=function(e){for(var t in e)for(var i in this._attachments)"function"==typeof this._attachments[i].setValue&&this._attachments[i].config.name===t&&this._attachments[i].setValue(e[t])},i.prototype.getValue=function(e){if(e){var t=new FormData,i=function(e){Array.isArray(n._state[e])?n._state[e].forEach((function(i,n){return t.append(e+"[".concat(n,"]"),i)})):t.append(e,n._state[e])},n=this;for(var o in this._state)i(o);return t}return r({},this._state)},i.prototype.getItem=function(e){for(var t in this._attachments)if(t==e)return this._attachments[t]},i.prototype.validate=function(e){for(var t in void 0===e&&(e=!1),this._isValid=!0,this._attachments)"function"==typeof this._attachments[t].validate&&(0,C.isVerify)(this._attachments[t].config)&&!this._attachments[t].validate(e)&&(this._isValid=!1,!e&&this.events.fire(P.FormEvents.validationFail,[t,this._attachments[t]]));return this._isValid},i.prototype.setProperties=function(e,t){if("string"==typeof e&&t&&!(0,d.isEmptyObj)(t))for(var i in this._attachments)"function"==typeof this._attachments[i].setProperties&&i===e&&this._attachments[i].setProperties(t);if("object"==typeof e&&!(0,d.isEmptyObj)(e))for(var i in this._attachments)"function"!=typeof this._attachments[i].setProperties||(0,d.isEmptyObj)(e[i])||this._attachments[i].setProperties(e[i])},i.prototype.getProperties=function(e){if(e)for(var t in this._attachments)if("function"==typeof this._attachments[t].getProperties&&t===e)return this._attachments[t].getProperties();var i={};for(var t in this._attachments)"function"==typeof this._attachments[t].getProperties&&(i[t]=this._attachments[t].getProperties());return i},i.prototype.show=function(){if(this.config.hidden||Object.values(this._attachments).some((function(e){return!e.config.hidden})))for(var e in this._formContainerShow(),this._attachments)"function"==typeof this._attachments[e].show&&this._attachments[e].show()},i.prototype.hide=function(e){if(!this.config.hidden||e)for(var t in this._formContainerHide(),this._attachments)"function"==typeof this._attachments[t].hide&&this._attachments[t].hide(e)},i.prototype.setFocus=function(e){for(var t in this._attachments){var i=this._attachments[t];"radiogroup"!==i.config.type&&"checkboxgroup"!==i.config.type||i.focus(e),i.config.name===e&&i.focus()}},i.prototype.blur=function(e){for(var t in e||this.forEach((function(e){"function"==typeof e.blur&&e.blur()})),this._attachments){var i=this._attachments[t];"radiogroup"!==i.config.type&&"checkboxgroup"!==i.config.type||i.blur(e),i.config.name===e&&i.blur()}},i.prototype.isVisible=function(e){if(!e)return!this.config.hidden;for(var t in this._attachments)if(t===e)return!this._attachments[t].config.hidden},i.prototype.disable=function(){for(var e in this.config.disabled=!0,this._attachments)"function"==typeof this._attachments[e].disable&&this._attachments[e].disable()},i.prototype.enable=function(){for(var e in this.config.disabled=!1,this._attachments)"function"==typeof this._attachments[e].enable&&this._attachments[e].enable()},i.prototype.isDisabled=function(e){if(!e)return this.config.disabled;for(var t in this._attachments)if(t===e)return this._attachments[t].config.disabled},i.prototype.forEach=function(e){for(var t=Object.values(this._attachments),i=0;i<t.length;i++)e.call(this,t[i],i,t)},i.prototype.destructor=function(){for(var e in this.unmount(),this._attachments)"function"==typeof this._attachments[e].destructor&&this._attachments[e].destructor();this.events&&this.events.clear(),this.layout&&this.layout.destructor(),this.config=this._attachments=this._state=this._uid=this.container=this.events=this._isValid=null},i.prototype.getRootView=function(){return this.layout.getRootView()},i.prototype._addLayoutItem=function(e){var t=e.id=e.id||(0,d.uid)(),i=e.name=e.name||t.toString();e.type=e.type&&e.type.toLowerCase();var n=e.padding,o=a(e,["padding"]),r=e.width,s=e.height;switch("spacer"!==e.type&&!s&&(s="content"),o.type){case"button":case"togglegroup":r=o.width||!o.full&&"content";break;case"simplevault":o.$vaultHeight=s}this._initItemHandlers(e,i);var l={id:i,width:r,height:s,padding:n,hidden:o.hidden,css:this.getCellCSS(o)};return"fieldset"===e.type&&(l.$fieldset=!0,l.label=e.label,l.labelAlignment=e.labelAlignment,this._createLayoutConfig(e,l)),l},i.prototype._initItemHandlers=function(e,t){var i=this;switch(e.type){case"avatar":var n=this._attachments[t]=new O.Avatar(null,e);this._state[t]=n.getValue(),n.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),n.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),n.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),n.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),n.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),n.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),n.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),n.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])})),n.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),n.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e,n.config),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),n.events.on(P.ItemEvent.focus,(function(e){i.events.fire(P.FormEvents.focus,[t,e])})),n.events.on(P.ItemEvent.blur,(function(e){i.events.fire(P.FormEvents.blur,[t,e])})),n.events.on(P.ItemEvent.keydown,(function(e){i.events.fire(P.FormEvents.keydown,[e,t])}));break;case"toggle":var o=this._attachments[t]=new R.ToggleButton(null,e);this._state[t]=o.getValue(),o.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),o.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),o.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),o.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),o.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),o.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),o.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),o.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e,o.config),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),o.events.on(P.ItemEvent.focus,(function(e){i.events.fire(P.FormEvents.focus,[t,e])})),o.events.on(P.ItemEvent.blur,(function(e){i.events.fire(P.FormEvents.blur,[t,e])})),o.events.on(P.ItemEvent.keydown,(function(e){i.events.fire(P.FormEvents.keydown,[e,t])}));break;case"togglegroup":var r=this._attachments[t]=new A.ToggleGroup(null,e);this._state[t]=r.getValue(),r.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),r.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),r.events.on(P.ItemEvent.beforeHide,(function(e,n,o){if(!o)return i.events.fire(P.FormEvents.beforeHide,[t,e,n])})),r.events.on(P.ItemEvent.beforeShow,(function(e,n){return i.events.fire(P.FormEvents.beforeShow,[t,e,n])})),r.events.on(P.ItemEvent.afterHide,(function(e,n,o){!r.isVisible()&&i.layout.getCell(t).hide(),!o&&i.events.fire(P.FormEvents.afterHide,[t,e,n])})),r.events.on(P.ItemEvent.afterShow,(function(e,n){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e,n])})),r.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),r.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e,r.config),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),r.events.on(P.ItemEvent.focus,(function(e,n){i.events.fire(P.FormEvents.focus,[t,e,n])})),r.events.on(P.ItemEvent.blur,(function(e,n){i.events.fire(P.FormEvents.blur,[t,e,n])})),r.events.on(P.ItemEvent.keydown,(function(e,n){i.events.fire(P.FormEvents.keydown,[e,t,n])}));break;case"button":var a=this._attachments[t]=new f.Button(null,e);a.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),a.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e,a.config),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),a.events.on(P.ItemEvent.click,(function(e){e.preventDefault(),i.events.fire(P.FormEvents.click,[t,e]),i.events.fire(P.FormEvents.buttonClick,[t,e]),a.config.submit&&i.validate()&&a.config.url&&i.send(a.config.url)})),a.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),a.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),a.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),a.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),a.events.on(P.ItemEvent.focus,(function(e){i.events.fire(P.FormEvents.focus,[t,e])})),a.events.on(P.ItemEvent.blur,(function(e){i.events.fire(P.FormEvents.blur,[t,e])})),a.events.on(P.ItemEvent.keydown,(function(e){i.events.fire(P.FormEvents.keydown,[e,t])}));break;case"datepicker":var l=this._attachments[t]=new h.DatePicker(null,e);this._state[t]=l.getValue("Date"===e.valueFormat),l.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),l.events.on(P.ItemEvent.afterChangeProperties,(function(n){i._changeProps(t,n,l.config),i._state[t]=l.getValue("Date"===e.valueFormat),i.events.fire(P.FormEvents.afterChangeProperties,[t,n]),i.paint()})),l.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),l.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),l.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),l.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),l.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),l.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),l.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),l.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])})),l.events.on(P.ItemEvent.focus,(function(e){i.events.fire(P.FormEvents.focus,[t,e])})),l.events.on(P.ItemEvent.blur,(function(e){i.events.fire(P.FormEvents.blur,[t,e])})),l.events.on(P.ItemEvent.keydown,(function(e){i.events.fire(P.FormEvents.keydown,[e,t])}));break;case"checkbox":var c=this._attachments[t]=new p.Checkbox(null,e);this._state[t]=c.getValue(),c.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),c.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e,c.config),i._state[t]=c.getValue(),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),c.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),c.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),c.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),c.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),c.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),c.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),c.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),c.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])})),c.events.on(P.ItemEvent.focus,(function(e){i.events.fire(P.FormEvents.focus,[t,e])})),c.events.on(P.ItemEvent.blur,(function(e){i.events.fire(P.FormEvents.blur,[t,e])})),c.events.on(P.ItemEvent.keydown,(function(e){i.events.fire(P.FormEvents.keydown,[e,t])}));break;case"checkboxgroup":var u=this._attachments[t]=new v.CheckboxGroup(null,e);this._state[t]=u.getValue(),u.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),u.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e,u.config),i._state[t]=u.getValue(),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),u.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),u.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),u.events.on(P.ItemEvent.beforeHide,(function(e,n,o){if(!o)return i.events.fire(P.FormEvents.beforeHide,[t,e,n])})),u.events.on(P.ItemEvent.beforeShow,(function(e,n){return i.events.fire(P.FormEvents.beforeShow,[t,e,n])})),u.events.on(P.ItemEvent.afterHide,(function(e,n,o){!u.isVisible()&&i.layout.getCell(t).hide(),!o&&i.events.fire(P.FormEvents.afterHide,[t,e,n])})),u.events.on(P.ItemEvent.afterShow,(function(e,n){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e,n])})),u.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),u.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])})),u.events.on(P.ItemEvent.focus,(function(e,n){i.events.fire(P.FormEvents.focus,[t,e,n])})),u.events.on(P.ItemEvent.blur,(function(e,n){i.events.fire(P.FormEvents.blur,[t,e,n])})),u.events.on(P.ItemEvent.keydown,(function(e,n){i.events.fire(P.FormEvents.keydown,[e,t,n])})),u.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),u.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),u.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])}));break;case"combo":var d=this._attachments[t]=new w.Combo(null,e);this._state[t]=d.getValue(),d.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),d.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e,d.config),i._state[t]=d.getValue(),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),d.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),d.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),d.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),d.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),d.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),d.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),d.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),d.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])})),d.events.on(P.ItemEvent.focus,(function(e){i.events.fire(P.FormEvents.focus,[t,e])})),d.events.on(P.ItemEvent.blur,(function(e){i.events.fire(P.FormEvents.blur,[t,e])})),d.events.on(P.ItemEvent.keydown,(function(e,n){i.events.fire(P.FormEvents.keydown,[e,t,n])}));break;case"input":var C=this._attachments[t]=new g.Input(null,e);this._state[t]=C.getValue(),C.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),C.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e,C.config),i._state[t]=C.getValue(),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),C.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),C.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),C.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),C.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),C.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),C.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),C.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),C.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])})),C.events.on(P.ItemEvent.focus,(function(e){i.events.fire(P.FormEvents.focus,[t,e])})),C.events.on(P.ItemEvent.blur,(function(e){i.events.fire(P.FormEvents.blur,[t,e])})),C.events.on(P.ItemEvent.keydown,(function(e){i.events.fire(P.FormEvents.keydown,[e,t])}));break;case"radiogroup":var T=this._attachments[t]=new _.RadioGroup(null,e);this._state[t]=T.getValue(),T.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),T.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e,T.config),i._state[t]=T.getValue(),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),T.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),T.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),T.events.on(P.ItemEvent.beforeHide,(function(e,n,o){if(!o)return i.events.fire(P.FormEvents.beforeHide,[t,e,n])})),T.events.on(P.ItemEvent.beforeShow,(function(e,n){return i.events.fire(P.FormEvents.beforeShow,[t,e,n])})),T.events.on(P.ItemEvent.afterHide,(function(e,n,o){!T.isVisible()&&i.layout.getCell(t).hide(),!o&&i.events.fire(P.FormEvents.afterHide,[t,e,n])})),T.events.on(P.ItemEvent.afterShow,(function(e,n){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e,n])})),T.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),T.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])})),T.events.on(P.ItemEvent.focus,(function(e,n){i.events.fire(P.FormEvents.focus,[t,e,n])})),T.events.on(P.ItemEvent.blur,(function(e,n){i.events.fire(P.FormEvents.blur,[t,e,n])})),T.events.on(P.ItemEvent.keydown,(function(e,n){i.events.fire(P.FormEvents.keydown,[e,t,n])}));break;case"select":var D=this._attachments[t]=new m.Select(null,e);this._state[t]=D.getValue(),D.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),D.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e,D.config),i._state[t]=D.getValue(),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),D.events.on(P.ItemEvent.changeOptions,(function(e){i.layout.getCell(t).config.options=s([],e,!0)})),D.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),D.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),D.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),D.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),D.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),D.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),D.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),D.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])})),D.events.on(P.ItemEvent.focus,(function(e){i.events.fire(P.FormEvents.focus,[t,e])})),D.events.on(P.ItemEvent.blur,(function(e){i.events.fire(P.FormEvents.blur,[t,e])})),D.events.on(P.ItemEvent.keydown,(function(e){i.events.fire(P.FormEvents.keydown,[e,t])}));break;case"simplevault":var F=this._attachments[t]=new E.SimpleVault(null,e);this._state[t]=F.getValue(),F.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),F.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e,F.config),i._state[t]=F.getValue(),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),F.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),F.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),F.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),F.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),F.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),F.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),F.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),F.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])}));break;case"slider":var V=this._attachments[t]=new x.SliderForm(null,e);this._state[t]=V.getValue(),V.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),V.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),V.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),V.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),V.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),V.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),V.events.on(P.ItemEvent.focus,(function(e){i.events.fire(P.FormEvents.focus,[t,e])})),V.events.on(P.ItemEvent.blur,(function(e){i.events.fire(P.FormEvents.blur,[t,e])})),V.events.on(P.ItemEvent.keydown,(function(e){i.events.fire(P.FormEvents.keydown,[e,t])}));break;case"textarea":var L=this._attachments[t]=new y.Textarea(null,e);this._state[t]=L.getValue(),L.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),L.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e,L.config),i._state[t]=L.getValue(),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),L.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),L.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),L.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),L.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),L.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),L.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),L.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),L.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])})),L.events.on(P.ItemEvent.focus,(function(e){i.events.fire(P.FormEvents.focus,[t,e])})),L.events.on(P.ItemEvent.blur,(function(e){i.events.fire(P.FormEvents.blur,[t,e])})),L.events.on(P.ItemEvent.keydown,(function(e){i.events.fire(P.FormEvents.keydown,[e,t])}));break;case"text":var N=this._attachments[t]=new b.Text(null,e);this._state[t]=N.getValue(),N.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),N.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e,N.config),i._state[t]=N.getValue(),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),N.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),N.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),N.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),N.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),N.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),N.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),N.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),N.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])}));break;case"timepicker":var H=this._attachments[t]=new S.TimePicker(null,e);this._state[t]=e.value&&H.getValue("timeObject"===e.valueFormat)||"",H.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),H.events.on(P.ItemEvent.afterChangeProperties,(function(n){i._changeProps(t,n,H.config),i._state[t]=H.getValue("timeObject"===e.valueFormat),i.events.fire(P.FormEvents.afterChangeProperties,[t,n]),i.paint()})),H.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),H.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),H.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),H.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),H.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),H.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),H.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),H.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])})),H.events.on(P.ItemEvent.focus,(function(e){i.events.fire(P.FormEvents.focus,[t,e])})),H.events.on(P.ItemEvent.blur,(function(e){i.events.fire(P.FormEvents.blur,[t,e])})),H.events.on(P.ItemEvent.keydown,(function(e){i.events.fire(P.FormEvents.keydown,[e,t])})),H.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),H.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),H.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])}));break;case"colorpicker":var j=this._attachments[t]=new I.ColorPicker(null,e);this._state[t]=j.getValue(),j.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),j.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e,j.config),i._state[t]=j.getValue(),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),j.events.on(P.ItemEvent.beforeChange,(function(e){return i.events.fire(P.FormEvents.beforeChange,[t,e])})),j.events.on(P.ItemEvent.change,(function(e){i._state[t]=e,i.events.fire(P.FormEvents.change,[t,e])})),j.events.on(P.ItemEvent.beforeHide,(function(e,n){if(!n)return i.events.fire(P.FormEvents.beforeHide,[t,e])})),j.events.on(P.ItemEvent.beforeShow,(function(e){return i.events.fire(P.FormEvents.beforeShow,[t,e])})),j.events.on(P.ItemEvent.afterHide,(function(e,n){i.layout.getCell(t).hide(),!n&&i.events.fire(P.FormEvents.afterHide,[t,e])})),j.events.on(P.ItemEvent.afterShow,(function(e){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t,e])})),j.events.on(P.ItemEvent.beforeValidate,(function(e){return i.events.fire(P.FormEvents.beforeValidate,[t,e])})),j.events.on(P.ItemEvent.afterValidate,(function(e,n){i.events.fire(P.FormEvents.afterValidate,[t,e,n])})),j.events.on(P.ItemEvent.focus,(function(e){i.events.fire(P.FormEvents.focus,[t,e])})),j.events.on(P.ItemEvent.blur,(function(e){i.events.fire(P.FormEvents.blur,[t,e])})),j.events.on(P.ItemEvent.keydown,(function(e){i.events.fire(P.FormEvents.keydown,[e,t])}));break;case"fieldset":var z=this._attachments[t]=new M.Fieldset(e);z.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),z.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e,z.config),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()}));break;default:var $=this._attachments[t]=new k.Spacer(null,e);$.events.on(P.ItemEvent.beforeChangeProperties,(function(e){return i.events.fire(P.FormEvents.beforeChangeProperties,[t,e])})),$.events.on(P.ItemEvent.afterChangeProperties,(function(e){i._changeProps(t,e,$.config),i.events.fire(P.FormEvents.afterChangeProperties,[t,e]),i.paint()})),$.events.on(P.ItemEvent.beforeHide,(function(e){if(!e)return i.events.fire(P.FormEvents.beforeHide,[t])})),$.events.on(P.ItemEvent.beforeShow,(function(){return i.events.fire(P.FormEvents.beforeShow,[t])})),$.events.on(P.ItemEvent.afterHide,(function(e){i.layout.getCell(t).hide(),!e&&i.events.fire(P.FormEvents.afterHide,[t])})),$.events.on(P.ItemEvent.afterShow,(function(){i.layout.getCell(t).show(),i.events.fire(P.FormEvents.afterShow,[t])}))}},i.prototype._changeProps=function(e,t,i){var n=["width","height","css","padding","label","labelAlignment","align"];for(var o in t)n.includes(o)&&(0,d.isDefined)(t[o])&&(this.layout.getCell(e).config[o]="css"===o?this.getCellCSS(i):t[o])},i.prototype.getCellCSS=function(e){var t=e.css?e.css+" dhx_form-element":"dhx_form-element";switch(e.type){case"button":case"togglegroup":e.full&&!e.width&&(t+=" dhx_button--full-gravity");break;case"text":"content"===e.width&&(t+=" dhx_form-element--fit-content")}return t},i.prototype._addLayoutItems=function(e){var t=this;return e.map((function(e){if((0,C.isBlock)(e)){var i={width:"content",height:"content"};return t._createLayoutConfig(e,i),i}return t._addLayoutItem(e)}))},i.prototype._checkLayoutConfig=function(e,t){return(0,d.isDefined)(e.css)&&(t.css=e.css),(0,d.isDefined)(e.title)&&(t.header=e.title),(0,d.isDefined)(e.padding)&&(t.padding=e.padding),(0,d.isDefined)(e.width)&&(t.width=e.width),(0,d.isDefined)(e.height)&&(t.height=e.height),(0,d.isDefined)(e.align)&&(t.align=e.align),t},i.prototype._createLayoutConfig=function(e,t){t=this._checkLayoutConfig(e,t),(0,d.isDefined)(e.rows)?t.rows=this._addLayoutItems(e.rows):(0,d.isDefined)(e.cols)&&(t.cols=this._addLayoutItems(e.cols))},i.prototype._initUI=function(e){this._attachments={};var t={padding:"8px"};this.config.css+=" dhx_form",this._createLayoutConfig(this.config,t),this.layout=new u.Layout(e,t),(0,C.setAttacments)(this._attachments,this.layout)},i.prototype._clear=function(){for(var e in this._state={},this._attachments){var t=this._attachments[e].config.name;"function"==typeof this._attachments[e].clear&&(this._attachments[e].clear(),t?this._state[t]=this._attachments[e].getValue():this._state[e]=this._attachments[e].getValue())}},i.prototype._clearValidate=function(){for(var e in this._attachments)"function"==typeof this._attachments[e].clearValidate&&this._attachments[e].clearValidate()},i.prototype._formContainerShow=function(){(this.config.hidden=!1,this.getRootView().node)&&(this.getRootView().node.el.style.display="flex")},i.prototype._formContainerHide=function(){(this.config.hidden=!0,this.getRootView().node)&&(this.getRootView().node.el.style.display="none")},i.prototype._send=function(){for(var e in this._attachments)"function"==typeof this._attachments[e].send&&this._attachments[e].send()},i}(c.View);t.Form=D}).call(this,i(15))},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Checkbox=void 0;var a=i(1),s=i(4),l=i(7),c=i(10),u=i(6),d=i(14),h=i(0),f=function(e){function t(t,i){void 0===i&&(i={});var n=e.call(this,t,i)||this;n.events=new s.EventSystem,n._propsItem=["required","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage","text"],n._props=r(r([],l.baseProps,!0),n._propsItem,!0),n._initView(i),n._initHandlers();return n.mount(t,(0,a.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype.setProperties=function(e,t){if(void 0===t&&(t=!1),e&&!(0,h.isEmptyObj)(e)&&(t||this.events.fire(u.ItemEvent.beforeChangeProperties,[this.getProperties()]))){for(var i in e)this._props.includes(i)&&(this.config[i]=e[i]);!t&&this.events.fire(u.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.show=function(){this.config.hidden&&this.events.fire(u.ItemEvent.beforeShow,[this.getValue()])&&(this.config.hidden=!1,this.events.fire(u.ItemEvent.afterShow,[this.getValue()]))},t.prototype.hide=function(e){this.config.hidden&&!e||!this.events.fire(u.ItemEvent.beforeHide,[this.getValue(),e])||(this.config.hidden=!0,this.events.fire(u.ItemEvent.afterHide,[this.getValue(),e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.disable=function(){this.config.disabled=!0,this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return!!this.config.disabled},t.prototype.validate=function(e){void 0===e&&(e=!1);var t=this.getValue();if(!e&&!this.events.fire(u.ItemEvent.beforeValidate,[t]))return!1;var i=!0;return(this.config.required||this.config.$required)&&(i=!!this.config.checked),e||(this.setValidationStatus(i?"success":"error"),this.events.fire(u.ItemEvent.afterValidate,[t,i]),this.paint()),i},t.prototype.clearValidate=function(){this.setValidationStatus(),this.paint()},t.prototype.setValue=function(e,t){void 0===t&&(t=!1),void 0!==e&&e!==this.config.checked&&(t||this.events.fire(u.ItemEvent.beforeChange,[this._getValue(e)]))&&(this.config.checked=!!e,t||(this.events.fire(u.ItemEvent.change,[this.getValue()]),(0,l.isVerify)(this.config)&&this.validate()))},t.prototype.getValue=function(){return this._getValue(this.config.checked)},t.prototype.clear=function(e){this.config.checked&&(e||this.events.fire(u.ItemEvent.beforeChange,[this._getValue(!1)]))&&(this.config.checked=!1,e||this.events.fire(u.ItemEvent.change,[this.getValue()]),(0,l.isVerify)(this.config)&&this.setValidationStatus(this.validate(!0)?"success":"error"))},t.prototype.destructor=function(){this.events&&this.events.clear(),this._inGroup=this._propsItem=this._props=this._uid=this.events=null,e.prototype._destructor.call(this),this.unmount()},t.prototype.focus=function(){var e=this;(0,a.awaitRedraw)().then((function(){e.getRootView().refs.input.el.focus()}))},t.prototype.blur=function(){var e=this;(0,a.awaitRedraw)().then((function(){e.getRootView().refs.input.el.blur()}))},t.prototype.isChecked=function(){return!!this.config.checked},t.prototype._getValue=function(e){return"string"==typeof this.config.value?e&&this.config.value||"":!!e},t.prototype._initView=function(e){var t=this;if(this._inGroup=this.config.$group,this._inGroup){for(var i in this.config={type:e.type,id:e.id,text:"",width:"content",height:"content",padding:0},e)"id"!==i&&"type"!==i&&"name"!==i&&(this.config[i]=e[i]);this._handlers={onchange:function(e){var i=e.target.checked;t.events.fire(u.ItemEvent.beforeChange,[t._getValue(i)])?(t.config.checked=i,t.events.fire(u.ItemEvent.change,[t.getValue()]),(0,l.isVerify)(t.config)&&t.validate()):t.getRootView().refs.input.el.checked=!i},onfocus:function(){return t.events.fire(u.ItemEvent.focus,[t.getValue(),t.config.id])},onblur:function(){return t.events.fire(u.ItemEvent.blur,[t.getValue(),t.config.id])},onkeydown:function(e){t.events.fire(u.ItemEvent.keydown,[e,t.config.id])}}}else{for(var i in this.config={type:e.type,id:e.id,name:e.name,checked:!1,disabled:!1,required:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},e)"id"!==i&&"type"!==i&&"name"!==i&&(this.config[i]=e[i]);this.config.helpMessage&&(this._helper=new c.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"}),this._helper.attachHTML(this.config.helpMessage)),this._handlers={showHelper:function(e){e.preventDefault(),e.stopPropagation(),t._helper.show(e.target,{mode:"left"===t.config.labelPosition?"bottom":"right",theme:t.getRootNode()})},hideHelper:function(e){e.preventDefault(),e.stopPropagation(),t._helper.hide()},onchange:function(e){var i=e.target.checked;t.events.fire(u.ItemEvent.beforeChange,[t._getValue(i)])?(t.config.checked=i,t.events.fire(u.ItemEvent.change,[t.getValue()]),(0,l.isVerify)(t.config)&&t.validate()):t.getRootView().refs.input.el.checked=!i},onfocus:function(){return t.events.fire(u.ItemEvent.focus,[t.getValue()])},onblur:function(){var e;return null===(e=t.events)||void 0===e?void 0:e.fire(u.ItemEvent.blur,[t.getValue()])},onkeydown:function(e){t.events.fire(u.ItemEvent.keydown,[e])}}}},t.prototype._initHandlers=function(){var e=this;this.events.on(u.ItemEvent.change,(function(){return e.paint()}))},t.prototype._draw=function(){var e=this.config,t=e.id,i=e.value,n=e.checked,o=e.disabled,r=e.name,s=e.required,c=e.$required,u=e.text,d=e.label,h=e.labelWidth,f=e.helpMessage;return(0,a.el)("label.dhx_checkbox.dhx_form-group.dhx_form-group--checkbox",{class:(0,l.getFormItemCss)(this.config,(0,l.isVerify)(this.config)||!!c)},this._inGroup?[(0,a.el)(".dhx_checkbox__holder",[(0,a.el)("input.dhx_checkbox__input",{type:"checkbox",id:t,value:i||"",name:r||"",disabled:o,checked:n,onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,required:s,_ref:"input"}),(0,a.el)("span.dhx_checkbox__visual-input"),(0,a.el)("span.dhx_text",[u])])]:[d||h||f||s?this._drawLabel():null,(0,a.el)(".dhx_checkbox__container",[(0,a.el)(".dhx_checkbox__holder",[(0,a.el)("input.dhx_checkbox__input",{type:"checkbox","data-dhx-id":r||t,id:t,_key:t||this._uid,value:i,name:r,disabled:o,checked:n,onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,required:s,_ref:"input","aria-label":d||"checkbox ".concat(u||""),"aria-describedby":f?"dhx_label__help_".concat(t||this._uid):null}),(0,a.el)("span.dhx_checkbox__visual-input"),(0,a.el)("span.dhx_text",[u])]),s&&(0,l.getValidationMessage)(this.config)&&(0,a.el)("span.dhx_input__caption",(0,l.getValidationMessage)(this.config))])])},t}(d.Label);t.Checkbox=f},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleVault=t.FileStatus=void 0;var s,l=i(1),c=i(4),u=i(3),d=i(0),h=i(11),f=i(242),p=i(10),v=i(7),g=i(251),_=i(6),m=i(14);!function(e){e.queue="queue",e.uploaded="uploaded",e.failed="failed",e.inprogress="inprogress"}(s||(t.FileStatus=s={}));var y=function(e){function t(t,i){var n=e.call(this,t,i)||this;n._propsItem=["required","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],n._propsSimpleVault=["params","headerParams","target","fieldName","singleRequest","updateFromResponse","autosend","accept","validation"],n._props=a(a(a([],v.baseProps,!0),n._propsItem,!0),n._propsSimpleVault,!0),n.events=new c.EventSystem(n),n.data=new h.DataCollection,n._uploader=new f.Uploader(r({target:"",accept:"",fieldName:"file",singleRequest:!1,updateFromResponse:!0,autosend:!1},i),n.data,n.data.events),n._initView(r(r({},n._uploader.config),i)),n._initHandlers();return n.mount(t,(0,l.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype.send=function(e){this._uploader.send(e)},t.prototype.selectFile=function(){this._uploader.selectFile()},t.prototype.setValue=function(e){e.length&&(this.data.parse(e),(0,v.isVerify)(this.config)&&this.validate())},t.prototype.getValue=function(){return this.data.serialize()},t.prototype.clear=function(){0!==this.getValue().length&&this.events.fire(_.ItemEvent.beforeChange,[[]])&&(this.data.removeAll(),this.events.fire(_.ItemEvent.change,[this.getValue()]),(0,v.isVerify)(this.config)&&this.setValidationStatus(this.validate(!0)?"success":"error"),this.paint())},t.prototype.disable=function(){this.config.disabled=!0,this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return this.config.disabled},t.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(_.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(_.ItemEvent.afterShow,[t]))},t.prototype.hide=function(e){var t=this.config,i=t.value;t.hidden&&!e||!this.events.fire(_.ItemEvent.beforeHide,[i,e])||(this.config.hidden=!0,this.events.fire(_.ItemEvent.afterHide,[i,e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.validate=function(e){void 0===e&&(e=!1);for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=t.length?t[0]:this.getValue();if(!e&&!this.events.fire(_.ItemEvent.beforeValidate,[n]))return!1;var o=!0;return this.config.required&&(o=!!n.length),"function"==typeof this.config.validation&&(o=this.config.validation(n)),e||(this.setValidationStatus(o?"success":"error"),this.events.fire(_.ItemEvent.afterValidate,[n,o]),this.paint()),o},t.prototype.clearValidate=function(){this.setValidationStatus(),this.paint()},t.prototype.setProperties=function(e){if(e&&!(0,d.isEmptyObj)(e)&&this.events.fire(_.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t],this._propsSimpleVault.includes(t)&&(this._uploader.config[t]=e[t]));this.events.fire(_.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.focus=function(){var e,t,i;null===(i=null===(t=null===(e=this.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.input)||void 0===i||i.el.focus(),this.paint()},t.prototype.blur=function(){var e,t,i;null===(i=null===(t=null===(e=this.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.input)||void 0===i||i.el.blur(),this.paint()},t.prototype.destructor=function(){this.events&&this.events.clear(),this._helper&&this._helper.destructor(),this.config=this.events=this._uid=this._helper=this._handlers=this._uploader=this.data=null,this._propsItem=this._propsSimpleVault=this._props=this._dragover=this._dragoverTimeout=null,this.unmount()},t.prototype._initView=function(e){var t;this.config=r({type:e.type,id:e.id,name:e.name,value:[],disabled:!1,hidden:!1,css:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},e),(null===(t=e.value)||void 0===t?void 0:t.length)&&this.data.parse(e.value),this.paint()},t.prototype._initHandlers=function(){var e=this;this._handlers={add:function(t){e.config.disabled||(t.preventDefault(),e._uploader.selectFile())},remove:function(t){if(!e.config.disabled){var i=(0,u.locate)(t);i&&e.data.remove(i)}},ondragover:function(t){for(var i=0,n=t.dataTransfer.types;i<n.length;i++){var o=n[i];if("Files"!==o&&"application/x-moz-file"!==o)return}e._dragoverTimeout?clearTimeout(e._dragoverTimeout):e.paint(),e._dragover=!0,e._dragoverTimeout=setTimeout((function(){e._dragover=!1,e._dragoverTimeout=null,e.paint()}),150)},showHelper:function(t){t.stopPropagation(),t.preventDefault(),e._helper.show(t.target,{mode:"left"===e.config.labelPosition?"bottom":"right",theme:t.target})},hideHelper:function(t){t.preventDefault(),t.stopPropagation(),e._helper.hide()}},this._uploader.events.on("beforeUploadFile",(function(t){return!(e.config.autosend&&!e.validate(!0))&&e.events.fire(_.ItemEvent.beforeUploadFile,[t,e.config.value])})),this._uploader.events.on("uploadBegin",(function(t){e.events.fire(_.ItemEvent.uploadBegin,[t,e.config.value])})),this._uploader.events.on("uploadComplete",(function(t){e.events.fire(_.ItemEvent.uploadComplete,[t,e.config.value])})),this._uploader.events.on("uploadFail",(function(t){e.events.fire(_.ItemEvent.uploadFail,[t,e.config.value])})),this._uploader.events.on("uploadFile",(function(t,i){e.events.fire(_.ItemEvent.uploadFile,[t,e.config.value,i])})),this._uploader.events.on("uploadProgress",(function(t){e.events.fire(_.ItemEvent.uploadProgress,[t,e.config.value])})),this.data.events.on(h.DataEvents.beforeAdd,(function(t){return e.events.fire(_.ItemEvent.beforeChange,[a(a([],e.config.value,!0),[t],!1),t])})),this.data.events.on(h.DataEvents.beforeRemove,(function(t){var i=e.config.value.filter((function(e){return e.id!==t.id}));return e.events.fire(_.ItemEvent.beforeChange,[i,t])})),this.data.events.on(_.ItemEvent.change,(function(t,i,n){if(i){var o=e.config.value=e.getValue();e._uploader.isActive&&"update"===i||(e.events.fire(_.ItemEvent.change,[o,n]),(0,v.isVerify)(e.config)&&e.validate()),e.paint()}}))},t.prototype._draw=function(){var e=this;this.config.helpMessage&&(this._helper||(this._helper=new p.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"})),this._helper.attachHTML(this.config.helpMessage));var t=this.data.getLength()?(0,l.el)("ul.dhx_simplevault__files.dhx_simplevault-files",{class:this.config.$vaultHeight?"":"dhx_simplevault-files__fixed"},this.data.map((function(t){return(0,l.el)("li.dhx_simplevault-files__item",[(0,l.el)("span.dhx_simplevault-files__item-name",t.file&&t.file.name||t.name),(0,l.el)(".dhx_button.dhx_simplevault-files__delete.dhx_button--icon.dhx_button--view_link.dhx_button--size_small.dhx_button--color_secondary.dhx_button--circle",{"data-dhx-id":t.id,onclick:e._handlers.remove},[(0,l.el)("span.dxi.dxi-delete-forever")])])}))):null,i=this.config,n=i.id,o=i.helpMessage,r=i.disabled,a=i.required,s=i.label,c=i.hidden,d=i.accept,h=(0,u.getLabelStyle)(this.config),f=c?" dhx_form-group--hidden":"";return(0,l.el)(".dhx_form-group.dhx_form-group--simplevault",{class:(0,v.getFormItemCss)(this.config,(0,v.isVerify)(this.config))+f},[h&&(0,l.el)("legend.dhx_label",{class:o?"dhx_label--with-help":"",style:h.style,onclick:this._handlers.add,"aria-label":s||"select files"},o?[(h.label||a)&&(0,l.el)("span.dhx_label__holder",h.label),(0,l.el)("span.dhx_label-help.dxi.dxi-help-circle-outline",{tabindex:"0",role:"button",onclick:this._handlers.showHelper,onfocus:this._handlers.showHelper,onblur:this._handlers.hideHelper})]:h.label),(0,l.el)(".dhx_input__wrapper",{id:this._uid},[(0,l.el)("div",{_hooks:{didInsert:function(t){e._uploader.linkDropArea(t.el)}},ondragover:this._handlers.ondragover,class:"dhx_simplevault"+(this._dragover?" dhx_simplevault--on-drag":"")},[(0,l.el)("div.dhx_simplevault-loader",[(0,l.el)("span.dhx_simplevault__icon.dxi.dxi-vault")]),(0,l.el)(".dhx_simplevault__drop-area",[(0,l.el)("input.dhx_simplevault__input",{_ref:"input",type:"file",id:n,disabled:r,accept:d}),(0,l.el)("span.dhx_simplevault__icon.dxi.dxi-vault"),(0,l.el)("span.dhx_simplevault__title",[(0,l.el)("span",g.default.simpleVaultText),(0,l.el)("br"),(0,l.el)("label.dhx_simplevault__label",{onclick:this._handlers.add,for:n}," "+g.default.simpleVaultLabel)])]),t]),(0,v.getValidationMessage)(this.config)&&(0,l.el)("span.dhx_input__caption",{},(0,v.getValidationMessage)(this.config))])])},t}(m.Label);t.SimpleVault=y},function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Uploader=void 0;var n=i(0),o=i(3),r=i(11),a=i(38),s=function(){function t(e,t,i){void 0===e&&(e={}),this.config=(0,n.extend)({autosend:!0,updateFromResponse:!0,fieldName:"file",accept:""},e),this.data=t||new r.DataCollection,this.events=i||this.data.events,this.isActive=!1,this._fileInput=document.createElement("input"),this._fileInput.type="file",this._fileInput.accept=this.config.accept,this._fileInput.multiple=!0,this._initEvents(),this._dropAreas=new Map}return t.prototype.selectFile=function(){this._fileInput.click()},t.prototype.linkDropArea=function(e){var t=this,i=(0,o.toNode)(e),n=function(e){return e.preventDefault()},r=function(e){e.preventDefault(),t.parseFiles(e.dataTransfer)};i.addEventListener("dragover",n),i.addEventListener("drop",r),this._dropAreas.set(i,{dragover:n,drop:r})},t.prototype.unlinkDropArea=function(e){var t=this;if(e){var i=(0,o.toNode)(e);this._unlinkDropArea(i),this._dropAreas.delete(i)}else this._dropAreas.forEach((function(e,i){t._unlinkDropArea(i)})),this._dropAreas.clear()},t.prototype.parseFiles=function(e){if(e.items&&e.items[0]&&e.items[0].webkitGetAsEntry)this._parseAsWebkitEntry(e.items);else{for(var t=e.files,i=0;i<t.length;i++)this._addFile(t[i]);this.config.autosend&&this.send()}},t.prototype.send=function(e){var t=this;if(!this._uploadInfo||!this.isActive){var i=this.data.findAll((function(e){return e.status===a.FileStatus.queue||e.status===a.FileStatus.failed})).filter((function(e){return t.events.fire(a.UploaderEvents.beforeUploadFile,[e])}));if(i.length)if(this.isActive=!0,this._uploadInfo={files:i,count:i.length,size:i.reduce((function(e,t){return e+t.file.size}),0)},this.events.fire(a.UploaderEvents.uploadBegin,[i]),this.events.fire(a.UploaderEvents.uploadProgress,[0,0,this._uploadInfo.size]),this.config.singleRequest)this._xhrSend(i,e);else for(var n=0,o=i;n<o.length;n++){var r=o[n];this._xhrSend([r],e)}}},t.prototype.abort=function(e){if(e){var t=this.data.getItem(e);t&&t.request&&4!==t.request.readyState&&t.request.abort()}else{if(!this._uploadInfo||!this._uploadInfo.files)return;for(var i=0,n=this._uploadInfo.files;i<n.length;i++){var o=n[i];this.abort(o.id)}}},t.prototype._unlinkDropArea=function(e){var t=this._dropAreas.get(e);if(t){var i=t.dragover,n=t.drop;e.removeEventListener("dragover",i),e.removeEventListener("drop",n)}},t.prototype._initEvents=function(){var e=this;this._fileInput.addEventListener("change",(function(){for(var t=e._fileInput.files,i=0;i<t.length;i++)e._addFile(t[i]);e.config.autosend&&e.send(),e._fileInput.value=null}))},t.prototype._xhrSend=function(e,t){for(var i=this,n=this._createFormData(e,t),o=new XMLHttpRequest,r=this.config.headerParams,s=0,l=e;s<l.length;s++){var c=l[s];this.data.update(c.id,{request:o,status:a.FileStatus.inprogress,progress:0})}if(o.open("POST",this.config.target),r)for(var u in r)o.setRequestHeader(u,r[u]);o.upload.onprogress=function(t){for(var n=0,o=e;n<o.length;n++){var r=o[n];i.data.update(r.id,{progress:t.loaded/t.total,status:a.FileStatus.inprogress})}var s=i._uploadInfo.files.reduce((function(e,t){return e+t.size*t.progress}),0)||0,l=i._uploadInfo.size,c=s/i._uploadInfo.size*100||0;i.events.fire(a.UploaderEvents.uploadProgress,[c,s,l])},o.onloadend=function(){i._uploadInfo.count=i.config.singleRequest?0:i._uploadInfo.count-1;for(var t=200===o.status?a.FileStatus.uploaded:a.FileStatus.failed,n=200===o.status&&o.response?JSON.parse(o.response):null,r=0,s=e;r<s.length;r++){var l=s[r];i.data.update(l.id,{status:t}),t===a.FileStatus.uploaded?(i.config.updateFromResponse&&n&&(i.config.singleRequest&&n[l.id]?i.data.update(l.id,n[l.id]):i.config.singleRequest||i.data.update(l.id,n)),i.events.fire(a.UploaderEvents.uploadFile,[l,n])):i.events.fire(a.UploaderEvents.uploadFail,[l])}0===i._uploadInfo.count&&(i.isActive=!1,i.events.fire(a.UploaderEvents.uploadComplete,[i._uploadInfo.files]))},o.send(n)},t.prototype._parseAsWebkitEntry=function(t){for(var i=this,n=[],o=0;o<t.length;o++){var r=t[o].webkitGetAsEntry();n.push(this._traverseFileTree(r))}e.all(n).then((function(){i.config.autosend&&i.send()}))},t.prototype._createFormData=function(e,t){var i=this.config.fieldName,n=new FormData,o=this.config.params;if(t)for(var r in t)n.append(r,t[r]);if(o)for(var r in o)n.append(r,o[r]);for(var a=e.length>1?"[]":"",s=0,l=e;s<l.length;s++){var c=l[s];n.append(i+a,c.file,c.file.name),n.append(i+"_fullname"+a,c.path+c.file.name);var u="object"==typeof c.id?c.id:c.id.toString();n.append(i+"_id"+a,u)}return n},t.prototype._addFile=function(e,t){void 0===t&&(t="");var i={id:(0,n.uid)(),file:e,progress:0,status:a.FileStatus.queue,src:null,path:t};this.data.add(i)},t.prototype._traverseFileTree=function(t){var i=this;return new e((function(e){var n=0,o=function(t,r){if(t.isFile)n++,t.file((function(t){n--,i._addFile(t,r),0===n&&e()}));else if(t.isDirectory){!function(t,i){n++,t.readEntries((function(t){n--;for(var r=0,a=t;r<a.length;r++){var s=a[r];o(s,i)}0===n&&e()}))}(t.createReader(),r+t.name+"/")}};o(t,"")}))},t}();t.Uploader=s}).call(this,i(15))},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ProToolbar=void 0;var a=i(60),s=i(35),l=i(1),c=i(3),u=i(19),d=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.scrollView=new s.ScrollView((function(){return n.getRootView()})),n}return o(t,e),t.prototype._draw=function(e){var t=this,i=this.data.getLength()?this.data.reduce((function(e,t){switch(t.type){case"title":return e||20;case"button":return"small"===t.size&&(!e||e<=28)?28:e||32;default:return 32}}),0)+24:null,n=[(0,l.el)("ul.dhx_navbar.dhx_navbar--horizontal",r(r({"data-dhx-widget-id":this._uid,tabindex:0},function(e){return{role:"toolbar","aria-label":e||""}}(e)),{onclick:this._handlers.onclick,onmousedown:this._handlers.onmousedown,oninput:this._handlers.input,onmouseover:this._handlers.tooltip,onkeydown:this._handlers.onkeydown,onmousemove:this._handlers.onmousemove,onmouseleave:this._handlers.onmouseleave,_hooks:{didInsert:function(e){e.el.addEventListener("keyup",(function(e){if(9===e.which){var i=(0,c.locateNode)(document.activeElement);if(i){var n=i.getAttribute("data-dhx-id"),o=t.data.getItem(n);(null==o?void 0:o.tooltip)&&(0,u.tooltip)(o.tooltip,{node:i,position:u.Position.bottom,force:!0})}}}),!0)}}}),this.data.map((function(e){return t._factory(e)}),this.data.getRoot(),!1))];return(0,l.el)("nav.dhx_widget.dhx_toolbar",{style:{height:i},class:this.config.css?this.config.css:""},this.scrollView&&this.scrollView.config.enable?[].concat(this.scrollView.render(n)):n)},t}(a.Toolbar);t.ProToolbar=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeItem=t.isImage=t.getFileClassName=t.getFileType=t.FileType=t.calculateCover=t.truncateWord=t.getBasis=void 0;var n=i(45),o=["byte","kilobyte","megabyte","gigabyte"];t.getBasis=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),e<1024?e+" "+n.default[o[t]]:this.getBasis(Math.round(e/1024),t+1)};var r;function a(e){return{extension:e.name.split(".").pop()||"none",mime:e.file?e.file.type:""}}function s(e,t){switch(e){case"jpg":case"jpeg":case"gif":case"png":case"bmp":case"tiff":case"pcx":case"svg":case"ico":return r.image;case"avi":case"mpg":case"mpeg":case"rm":case"move":case"mov":case"mkv":case"flv":case"f4v":case"mp4":case"3gp":case"wmv":case"webm":case"vob":return r.video;case"rar":case"zip":case"tar":case"tgz":case"arj":case"gzip":case"bzip2":case"7z":case"ace":case"apk":case"deb":case"zipx":case"cab":case"tar-gz":case"rpm":case"xar":return r.archive;case"xlr":case"xls":case"xlsm":case"xlsx":case"ods":case"csv":case"tsv":return r.table;case"doc":case"docx":case"docm":case"dot":case"dotx":case"odt":case"wpd":case"wps":case"pages":return r.document;case"wav":case"aiff":case"au":case"mp3":case"aac":case"wma":case"ogg":case"flac":case"ape":case"wv":case"m4a":case"mid":case"midi":return r.audio;case"pot":case"potm":case"potx":case"pps":case"ppsm":case"ppsx":case"ppt":case"pptx":case"pptm":case"odp":return r.presentation;case"html":case"htm":case"eml":return r.web;case"exe":return r.application;case"dmg":return r.apple;case"pdf":case"ps":case"eps":return r.pdf;case"psd":return r.psd;case"txt":case"djvu":case"nfo":case"xml":return r.text;default:switch(t.split("/")[0]){case"image":return r.image;case"audio":return r.audio;case"video":return r.video;default:return r.other}}}t.truncateWord=function(e,t){var i,n;if(void 0===t&&(t=13),e.length<=t)return e;var o=e.lastIndexOf(".");if(-1===o)n=e.substr(e.length-4),i=e.substr(0,t-7);else{var r=o-3;n=e.substr(r),i=e.substr(0,t-(e.length-r))}return i+"..."+n},t.calculateCover=function(e){var t,i,n,o,r=e.width,a=e.height,s=r/a;return s>1?(t=a,n=(r-(i=a))/2,o=0):s<1?(i=r,n=0,o=(a-(t=r))/2):(t=r,i=r,n=0,o=0),{sx:n,sy:o,sWidth:i,sHeight:t,dx:0,dy:0}},function(e){e.image="image",e.video="video",e.archive="archive",e.table="table",e.document="document",e.presentation="presentation",e.application="application",e.web="web",e.apple="apple",e.pdf="pdf",e.psd="psd",e.audio="audio",e.other="other",e.text="text"}(r||(t.FileType=r={})),t.getFileType=s,t.getFileClassName=function(e){var t=a(e),i=t.mime,n=t.extension;return s(n,i)+" extension-"+n},t.isImage=function(e){var t=a(e),i=t.mime;return s(t.extension,i)===r.image},t.removeItem=function(e,t){e.exists(t)&&(e.update(t,{$toRemove:!0}),setTimeout((function(){e.update(t,{$toRemove:!1},!0),e.remove(t)}),200))}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.DataView=void 0;var a=i(0),s=i(1),l=i(28),c=i(248),u=function(e){function t(t,i){return void 0===i&&(i={}),e.call(this,t,(0,a.extend)({itemsInRow:1,gap:"0px"},i))||this}return o(t,e),t.prototype.scrollTo=function(e){var t=this.getRootView();if(t&&t.node&&t.node.el&&void 0!==e){var i=this.getRootNode();this._scrollTo(e,i)}},t.prototype._scrollTo=function(e,t){var i;if(t){var n=this.data.getIndex(e);if(-1!==n){var o=this.config.virtual,r=this.config.itemsInRow-(null===(i=t.lastElementChild)||void 0===i?void 0:i.children.length)||0,a=function(e,t,i){var n=0;if(!i)return n;for(;e+t>=i;)n++,e=e+t-i;return n}(n,r,t.children.length*this.config.itemsInRow),s=a*r,l=Math.floor((n+s)/this.config.itemsInRow),c=t.children[l-t.children.length*a];if(o||c){var u=c.children[(n+s)%this.config.itemsInRow],d=parseInt(this.config.gap.toString().replace("px",""),null);u.offsetTop>=t.clientHeight+t.scrollTop-u.clientHeight?t.scrollTop=u.offsetTop-t.clientHeight+u.clientHeight+d:u.offsetTop<t.scrollTop-d&&(t.scrollTop=u.offsetTop-d)}}}},t.prototype._didRedraw=function(e){var t=e.node.el,i=t.scrollHeight>t.offsetHeight,n=e.node.attrs.class.replace(" dhx_dataview--has-scroll",""),o=i?n+" dhx_dataview--has-scroll":n;e.node.patch({class:o})},t.prototype._renderItem=function(e,t){var i=this.config,n=i.itemsInRow,o=i.gap,a=i.template,l=i.itemHeight,u=a?a(e):e.htmlContent,d=e.id==this._focus,h=(t+1)%this.config.itemsInRow==0,f=function(e){return parseFloat(e)};if(e.id==this._edited)return(0,c.getEditor)(e,this).toHTML(h);var p=e.id.toString(),v=this.data.getMetaMap(e);return(0,s.el)("div",r(r({class:"dhx_dataview-item"+(v&&v.selected?" dhx_dataview-item--selected":"")+(d?" dhx_dataview-item--focus":"")+(v&&v.drop&&!this._edited?" dhx_dataview-item--drophere":"")+(v&&v.drag&&!this._edited?" dhx_dataview-item--dragtarget":"")+(this.config.dragMode&&!this._edited?" dhx_dataview-item--drag":"")+(f(o)?" dhx_dataview-item--with-gap":"")+(e.css?" "+e.css:"")+(h?" dhx_dataview-item--last-item-in-row":""),style:{width:"calc(".concat(100/n,"% - ").concat(f(o)," * ").concat((n-1)/n,"px)"),"margin-right":h?"":o,height:a?null:l},_key:p,"data-dhx-id":p,_ref:p},this.getDataViewItemAriaAttrs(this,e)),{tabindex:d?0:-1}),u?[(0,s.el)(".dhx_dataview-item__inner-html",{".innerHTML":u,role:"presentation"})]:e.value||e.text||e.value)},t.prototype._renderList=function(){var e=this,t=this.data.getRawData(0,-1),i=this.config,n=i.itemsInRow,o=i.css,a=i.gap,l=0,c=t.reduce((function(t,i,o){return 0===l&&t.push([]),t[t.length-1].push(e._renderItem(i,o)),l=(l+1)%n,t}),[]);return(0,s.el)("",r(r(r(r({},this._handlers),{"data-dhx-widget-id":this._uid,"data-dhx-drop-area":"row",class:(o||"")+" dhx_widget dhx_dataview"+(this.config.multiselection&&this.selection.getItem()?" dhx_no-select--pointer":""),style:{height:this.config.height}}),this.getDataViewAriaAttrs(this.config,this.data.getLength(),c.length,n)),{tabindex:0}),c.map((function(e,t){return(0,s.el)(".dhx_dataview-row",{style:{margin:a},"aria-label":"Row ".concat(t+1)},e)})))},t.prototype._getHotkeys=function(){var t=this,i=e.prototype._getHotkeys.call(this);return i.arrowUp=function(e){t.moveFocus(l.MOVE_UP,t.config.itemsInRow),t._changed&&(t._changed=!1),e.preventDefault()},i.arrowDown=function(e){t.moveFocus(l.MOVE_DOWN,t.config.itemsInRow),t._changed&&(t._changed=!1),e.preventDefault()},i.arrowLeft=function(e){t.moveFocus(l.MOVE_UP),t._changed&&(t._changed=!1),e.preventDefault()},i.arrowRight=function(e){t.moveFocus(l.MOVE_DOWN),t._changed&&(t._changed=!1),e.preventDefault()},i},t.prototype.getDataViewItemAriaAttrs=function(e,t){return r(r({role:"option","aria-selected":t.$selected?"true":"false"},function(e,t){return e.config.dragMode&&!e._edited?{"aria-grabbed":Boolean(t.$dragtarget&&!e._edited).toString()}:{}}(e,t)),function(e){return e.config.editable?{"aria-roledescription":"".concat(e._edited?"Press Enter to stop editing":"Double click to edit content")}:{}}(e))},t.prototype.getDataViewAriaAttrs=function(e,t,i,n){return{role:"listbox","aria-label":"Dataview, ".concat(t," options on ").concat(i," rows, ").concat(n," options per row.").concat(e.editable?" Content is editable.":""),"aria-multiselectable":e.selection&&e.multiselection?"true":"false","aria-readonly":e.editable?"false":"true"}},t}(l.List);t.DataView=u},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DataViewEvents=void 0,function(e){e.click="click",e.doubleClick="doubleclick",e.focusChange="focuschange",e.beforeEditStart="beforeEditStart",e.afterEditStart="afterEditStart",e.beforeEditEnd="beforeEditEnd",e.afterEditEnd="afterEditEnd",e.itemRightClick="itemRightClick",e.itemMouseOver="itemMouseOver",e.contextmenu="contextmenu"}(n||(t.DataViewEvents=n={}))},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.locale=void 0,o(i(105),t),o(i(107),t),o(i(106),t),o(i(61),t);var r=i(46);Object.defineProperty(t,"locale",{enumerable:!0,get:function(){return r.default}})},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Colorpicker=void 0;var a=i(1),s=i(4),l=i(3),c=i(9),u=i(0),d=i(61),h=i(106),f=i(46),p=i(107),v=i(65),g=i(19),_=i(254),m=i(255),y=i(25),b=i(16),w=i(0),x=function(e){function t(t,i){var n=e.call(this,t,i)||this;n._setPaletteGrip=function(e){var t=n.getRootView().refs.picker_palette.el.getBoundingClientRect(),i=e.targetTouches?e.targetTouches[0].clientX:e.clientX,o=(e.targetTouches?e.targetTouches[0].clientY:e.clientY)-t.top,r=i-t.left,a=(0,m.calculatePaletteGrip)(t,o,r),s=a.s,l=a.v;n._pickerState.hsv.s=s,n._pickerState.hsv.v=l,n.paint()},n._setRangeGrip=function(e){var t=n.getRootView().refs[n._activeRange].el.getBoundingClientRect(),i=(e.targetTouches?e.targetTouches[0].clientX:e.clientX)-t.left,o=(0,m.calculateRangeGrip)(t,i),r=o.h,a=o.alpha,s=o.rangeLeft;switch(n._activeRange){case"hue_range":n._pickerState.hsv.h=r,n._pickerState.hueRangeLeft=s;break;case"alpha_range":n._pickerState.alpha=a,n._pickerState.alphaRangeLeft=s}n.paint()},n._onColorClick=function(e,t){var i=t.data.color.toUpperCase();n.events.fire(p.ColorpickerEvents.beforeChange,[i])&&(n._selected=i,n._focusColor(i),n.events.fire(p.ColorpickerEvents.change,[n._selected]),n.events.fire(p.ColorpickerEvents.colorChange,[n._selected]))},n._container=t,n.config=(0,u.extend)({css:"",grayShades:!0,pickerOnly:!1,paletteOnly:!1,customColors:[],palette:h.palette,width:"238px",mode:"palette",transparency:!0},n.config),n.config.palette||(n.config.palette=h.palette),n.config.customColors&&(n.config.customColors=n.config.customColors.map((function(e){return e.toUpperCase()}))),n._pickerState={hsv:{h:0,s:1,v:1},customHex:"",alpha:1},n.events=new s.EventSystem(n),n._setHandlers(),n._keyManager=new y.KeyManager((function(e,t){return t===n._uid})),n._initHotKey();var o=(0,a.create)({render:function(){return n._getContent()}});return n.mount(n._container,o),n}return o(t,e),t.prototype.destructor=function(){this._keyManager&&this._keyManager.destructor(),this.events&&this.events.clear(),this.config=this.events=this._selected=this._handlers=this._pickerState=this._inputTimeout=this._keyManager=null,this.unmount()},t.prototype.clear=function(){this.events.fire(p.ColorpickerEvents.beforeChange,[""])&&(this._selected="",this.events.fire(p.ColorpickerEvents.change,[this._selected,"clear"]),this.paint())},t.prototype.setValue=function(e){e=this.config.transparency||9!==e.length?e:e.slice(0,-2),this.events.fire(p.ColorpickerEvents.beforeChange,[e])&&(this._focusColor(e)||b.focusManager.getFocusId()===this._uid)&&(this.events.fire(p.ColorpickerEvents.change,[this._selected]),this.events.fire(p.ColorpickerEvents.colorChange,[this._selected]))},t.prototype.setFocus=function(e){this._focusColor(e)&&this.paint()},t.prototype.getValue=function(){return this._selected||""},t.prototype.getCustomColors=function(){return this.config.customColors},t.prototype.setCustomColors=function(e){this.config.customColors=e.map((function(e){return e.toUpperCase()})),this.paint()},t.prototype.setCurrentMode=function(e){"palette"!==e&&"picker"!==e||(this.config.mode=e,this.events.fire(p.ColorpickerEvents.modeChange,[e]),this.events.fire(p.ColorpickerEvents.viewChange,[e]),this.paint())},t.prototype.getCurrentMode=function(){return this.config.mode},t.prototype.getView=function(){return this.getCurrentMode()},t.prototype.setView=function(e){this.setCurrentMode(e)},t.prototype.focusValue=function(e){this.setFocus(e)},t.prototype._setHandlers=function(){var e=this;this._handlers={click:{".dhx_palette__cell":this._onColorClick},mousedown:function(t){e._pickerMove(t)},touchstart:function(t){e._pickerMove(t)},buttonsClick:function(t){if(e.setCurrentMode("palette"),"cancel"!==t){var i=e._pickerState.alpha,n=1!==i?(0,d.alphaToHex)(i):"",o=e._pickerState.background+n;"apply"!==t||e.config.customColors.includes(o)||(e.setValue(o),e.events.fire(p.ColorpickerEvents.apply,[]),e.events.fire(p.ColorpickerEvents.selectClick,[]))}else e.events.fire(p.ColorpickerEvents.cancelClick,[])},customColorClick:function(){e.setView("picker")},oninput:function(t){var i=(0,l.locate)(t);switch(e._inputTimeout&&clearTimeout(e._inputTimeout),i){case"hex_input":e._inputTimeout=setTimeout((function(){var i=t.target.value;-1===i.indexOf("#")&&(i="#".concat(i)),e._pickerState.customHex=i,(0,d.isHex)(i)&&(e._pickerState.hsv=(0,d.HexToHSV)(i),e._pickerState.alpha=(0,d.getAlpha)(i),e.paint())}),100);break;case"alpha_input":e._pickerState.customHex="";var n=parseInt(t.target.value);n>100&&(n=Math.trunc(n/10)),n>=0&&(e._pickerState.alpha=n/100,e.paint())}},contextmenu:{".dhx_palette__cell":function(t,i){t.preventDefault();var n=e.config.customColors.indexOf(i.data.color);-1!==n&&e._removeCustomColor(n),e.paint()}},mouseover:{".dhx_palette__cell":function(e){e.target&&(0,v.tooltip)(f.default.rightClickToDelete,{node:e.target,position:g.Position.bottom})},".dhx_colorpicker-custom-colors__picker":function(e){e.target&&(0,v.tooltip)(f.default.addNewColor,{node:e.target,position:g.Position.bottom})}}},this.events.on(p.ColorpickerEvents.change,(function(){e.paint()})),this.events.on(p.ColorpickerEvents.colorChange,(function(){e.paint()}))},t.prototype._pickerMove=function(e){var t=this,i=(0,l.locate)(e);this._pickerState.customHex="","picker_palette"===i?this._setPaletteGrip(e):(this._activeRange=i,this._setRangeGrip(e));var n="picker_palette"===i?this._setPaletteGrip:this._setRangeGrip,o=e.targetTouches?"touchmove":"mousemove",r=e.targetTouches?"touchend":"mouseup";document.addEventListener(o,n),document.addEventListener(r,(function(){document.removeEventListener(o,n),t._activeRange=null})),this.paint()},t.prototype._focusColor=function(e){if(void 0===e||e.length<4)return!1;var t=e.toUpperCase();if(!(0,d.isHex)(t))return!1;var i=this.config.palette.reduce((function(e,i){return e||(i.forEach((function(i){i.toUpperCase()!==t||(e=!0)})),e)}),!1),n=h.grayShades.includes(t);if(!i&&!n){var o=this.getCustomColors();o.includes(t.toUpperCase())||o.push(t.toUpperCase())}return this._selected=t||null,this._pickerState.hsv=(0,d.HexToHSV)(t),this._pickerState.alpha=(0,d.getAlpha)(t),!0},t.prototype._removeCustomColor=function(e){this.config.customColors.splice(e,1)},t.prototype._getCells=function(e,t){var i=this;return void 0===t&&(t=""),e.reduce((function(e,n){var o=(i._selected||"").toUpperCase()===n.toUpperCase()?"dhx_palette__cell--selected":"";return e.push((0,a.el)(".dhx_palette__cell",{class:"".concat(o," ").concat(t),_data:{color:n},style:"background:".concat(n),tabindex:0})),e}),[])},t.prototype._getGrayShades=function(){return(0,a.el)(".dhx_palette__row",this._getCells(h.grayShades))},t.prototype._getPalette=function(){var e=this;return this.config.palette.reduce((function(t,i){return t.push((0,a.el)(".dhx_palette__col",e._getCells(i))),t}),[])},t.prototype._getContent=function(){var e;return e=this.config.pickerOnly?[(0,_.getPicker)(this,this._pickerState,this._handlers)]:"palette"===this.config.mode?r(r([this.config.grayShades&&this._getGrayShades()],this._getPalette(),!0),[!this.config.paletteOnly&&(0,a.el)(".dhx_colorpicker-custom-colors",{onmouseover:this._handlers.mouseover},[(0,a.el)(".dhx_colorpicker-custom-colors__header",[f.default.customColors]),(0,a.el)(".dhx_palette--custom.dhx_palette__row",r(r([],this._getCells(this.config.customColors,"dhx_custom-color__cell"),!0),[(0,a.el)(".dhx_colorpicker-custom-colors__picker",{class:"dxi dxi-plus",onclick:this._handlers.customColorClick,onmouseover:this._handlers.mouseover,tabindex:0})],!1))])],!1):[(0,_.getPicker)(this,this._pickerState,this._handlers)],(0,a.el)(".dhx_widget.dhx_colorpicker",{class:this.config.css,style:{width:this.config.width},"data-dhx-widget-id":this._uid},[(0,a.el)(".dhx_palette",{onclick:this._handlers.click,oncontextmenu:this._handlers.contextmenu},e)])},t.prototype._initHotKey=function(){var e=this,t={enter:function(t){if((0,l.locateNodeByClassName)(t,"dhx_palette__cell")){var i=(0,w.rgbToHex)(t.target.style.background);if(!e.events.fire(p.ColorpickerEvents.beforeChange,[i]))return;e._selected=i,e.events.fire(p.ColorpickerEvents.change,[e._selected]),e.events.fire(p.ColorpickerEvents.colorChange,[e._selected])}(0,l.locateNodeByClassName)(t,"dhx_colorpicker-custom-colors__picker")&&e.setCurrentMode("picker")}};for(var i in t)this._keyManager.addHotKey(i,t[i])},t}(c.View);t.Colorpicker=x},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.palette=t.grayShades=void 0,t.grayShades=["#000000","#4C4C4C","#666666","#808080","#999999","#B3B3B3","#CCCCCC","#E6E6E6","#F2F2F2","#FFFFFF"],t.palette=[["#D4DAE4","#B0B8CD","#949DB1","#727A8C","#5E6677","#3F4757","#1D2534"],["#FFCDD2","#FE9998","#F35C4E","#E94633","#D73C2D","#CA3626","#BB2B1A"],["#F9E6AD","#F4D679","#EDB90F","#EAA100","#EA8F00","#EA7E00","#EA5D00"],["#BCE4CE","#90D2AF","#33B579","#36955F","#247346","#1D5B38","#17492D"],["#BDF0E9","#92E7DC","#02D7C5","#11B3A5","#018B80","#026B60","#024F43"],["#B3E5FC","#81D4FA","#29B6F6","#039BE5","#0288D1","#0277BD","#01579B"],["#AEC1FF","#88A3F9","#5874CD","#2349AE","#163FA2","#083596","#002381"],["#C5C0DA","#9F97C1","#7E6BAD","#584A8F","#4F4083","#473776","#3A265F"],["#D6BDCC","#C492AC","#A9537C","#963A64","#81355A","#6E3051","#4C2640"],["#D2C5C1","#B4A09A","#826358","#624339","#5D4037","#4E342E","#3E2723"]]},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ColorpickerEvents=void 0,function(e){e.beforeChange="beforeChange",e.change="change",e.apply="apply",e.cancelClick="cancelClick",e.modeChange="modeChange",e.selectClick="selectClick",e.colorChange="colorChange",e.viewChange="viewChange"}(n||(t.ColorpickerEvents=n={}))},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ToggleButton=void 0;var s=i(6),l=i(9),c=i(1),u=i(4),d=i(7),h=i(0),f=function(e){function t(t,i){var n=e.call(this,t,r({full:!1,selected:!1,disabled:!1,hidden:!1,width:"content",height:"content",text:"",icon:"",offIcon:"",offText:"",css:"",padding:""},i))||this;n.events=new u.EventSystem,n.props=a(a([],n.config.$group?[]:d.baseProps,!0),["value","offIcon","offText","icon","text","full"],!1),n.initHandlers();return n.mount(t,(0,c.create)({render:function(){return n.draw()}})),n}return o(t,e),t.prototype.setValue=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1),"boolean"==typeof e&&e!==this.config.selected&&(t||this.events.fire(s.ItemEvent.beforeChange,[e]))&&(this.config.selected=e,!t&&this.events.fire(s.ItemEvent.change,[this.getValue()]),this.paint())},t.prototype.getValue=function(){var e=this.config,t=e.value,i=e.selected;return"string"==typeof t?i?t:"":"number"==typeof t?i?t:0:!!i},t.prototype.isSelected=function(){return!!this.config.selected},t.prototype.show=function(){this.config.hidden&&this.events.fire(s.ItemEvent.beforeShow,[this.getValue()])&&(this.config.hidden=!1,this.events.fire(s.ItemEvent.afterShow,[this.getValue()]))},t.prototype.hide=function(e){void 0===e&&(e=!1),this.config.hidden&&!e||!this.events.fire(s.ItemEvent.beforeHide,[this.getValue(),e])||(this.config.hidden=!0,this.events.fire(s.ItemEvent.afterHide,[this.getValue(),e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.focus=function(){var e=this;(0,c.awaitRedraw)().then((function(){e.getRootView().refs.button.el.focus(),e.paint()}))},t.prototype.blur=function(){var e=this;(0,c.awaitRedraw)().then((function(){e.getRootView().refs.button.el.blur(),e.paint()}))},t.prototype.disable=function(){this.config.disabled=!0,this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return!!this.config.disabled},t.prototype.setProperties=function(e){if(e&&!(0,h.isEmptyObj)(e)&&this.events.fire(s.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this.props.includes(t)&&(this.config[t]=e[t]);this.events.fire(s.ItemEvent.afterChangeProperties,[this.getProperties()])}},t.prototype.getProperties=function(){for(var e={},t=0,i=this.props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.destructor=function(){this.events.clear(),this.unmount()},t.prototype.draw=function(){var e=this.config,t=e.id,i=e.name,n=e.selected,o=e.disabled,r=e.hidden,a=e.text,s=e.offText,l=e.icon,u=e.offIcon,d=e.full,h=e.$group,f=e.$gap,p=e.$extraCss,v=e.css;return(0,c.el)("button.dhx_toggle",{"data-dhx-id":i||t,role:"button",type:"button","aria-pressed":n,"aria-label":a||i,disabled:o,class:(h?"":"dhx_form-group dhx_form-group--toggle ")+(n?"dhx_toggle--selected ":"")+(o?"dhx_toggle--disabled ":"")+(r?"dhx_toggle--hidden ":"")+(d?"dhx_toggle--full ":"")+(h&&p||"")+(h&&v||""),style:{marginLeft:f},onclick:this.handlers.onclick,onfocus:this.handlers.onfocus,onblur:this.handlers.onblur,onkeydown:this.handlers.onkeydown,_ref:"button"},[l&&(0,c.el)("i.dhx_toggle__icon",{class:n?l:u||l}),a&&(0,c.el)("span.dhx_toggle__text",{},n?a:s||a)])},t.prototype.initHandlers=function(){var e=this;this.handlers={onclick:function(){return e.setValue(!e.config.selected)},onfocus:function(){return e.events.fire(s.ItemEvent.focus,[e.getValue()])},onblur:function(){return e.events.fire(s.ItemEvent.blur,[e.getValue()])},onkeydown:function(t){return e.events.fire(s.ItemEvent.keydown,[t])}}},t}(l.View);t.ToggleButton=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Window=void 0;var n=i(0),o=i(1),r=i(4),a=i(25),s=i(16),l=i(18),c=i(32),u=i(262),d=i(48),h=i(263),f=i(22),p=function(){function e(e){var t=this;this.config=(0,n.extend)({movable:!1,resizable:!1,closable:e.modal},e),this.config.node&&"string"==typeof this.config.node?this.config.node=document.getElementById(this.config.node):this.config.node||(this.config.node=document.body),this._uid=(0,n.uid)(),this.events=new r.EventSystem(this);var i=this._popup=document.createElement("div");i.tabIndex=1,i.setAttribute("role","dialog"),i.setAttribute("aria-modal","".concat(this.config.modal||!1)),this.config.modal||h.default.add(this._uid,this._popup),this._fullScreen=!1,this._isActive=!1,this._keyManager=new a.KeyManager((function(e,i){return i===t._uid||t.getContainer().contains(document.activeElement)})),this._initHandlers(),this._initUI(),this.config.html&&this.attachHTML(this.config.html)}return e.prototype.paint=function(){this._layout.paint()},e.prototype.isFullScreen=function(){return this._fullScreen},e.prototype.setFullScreen=function(){this._fullScreen||(this._fullScreen=!0,this.setSize(window.innerWidth,window.innerHeight),this.setPosition(window.pageXOffset,window.pageYOffset))},e.prototype.unsetFullScreen=function(){this._fullScreen&&(this._fullScreen=!1,this.setSize(this._oldSizes.width,this._oldSizes.height),this.setPosition(this._oldPosition.left,this._oldPosition.top))},e.prototype.setSize=function(e,t){this._oldSizes={width:this._popup.offsetWidth,height:this._popup.offsetHeight};var i={width:this._oldSizes.width,height:this._oldSizes.height};(0,n.isDefined)(e)&&(this.config.width=i.width=e),(0,n.isDefined)(t)&&(this.config.height=i.height=t),this._popup.style.width=i.width+"px",this._popup.style.height=i.height+"px",this.events.fire(d.WindowEvents.resize,[i,this._oldSizes,{left:!0,top:!0,bottom:!0,right:!0}])},e.prototype.getSize=function(){return{width:this._popup.offsetWidth,height:this._popup.offsetHeight}},e.prototype.setPosition=function(e,t){this._oldPosition={left:this._popup.offsetLeft,top:this._popup.offsetTop};var i={left:this._oldPosition.left,top:this._oldPosition.top};(0,n.isDefined)(e)&&(this.config.left=i.left=e),(0,n.isDefined)(t)&&(this.config.top=i.top=t),this._popup.style.left=i.left+"px",this._popup.style.top=i.top+"px",this.events.fire(d.WindowEvents.resize,[i,this._oldPosition,{left:!0,top:!0,bottom:!0,right:!0}])},e.prototype.getPosition=function(){return{left:this._popup.offsetLeft,top:this._popup.offsetTop}},e.prototype.show=function(e,t){if(void 0===e&&(e=this.config.left),void 0===t&&(t=this.config.top),this.events.fire(d.WindowEvents.beforeShow,[{left:e,top:t}])){this.isVisible()&&this.hide(),h.default.setActive(this._uid),this._popup.className+=" dhx_popup dhx_widget"+(this.config.modal?" dhx_popup--window_modal":" dhx_popup--window")+(this.config.css?" "+this.config.css:""),this._popup.style.position=this.config.modal?"fixed":"absolute",this._popup.setAttribute("data-dhx-widget-id",this._uid);var i=this._getContainerParams(),o=i.containerInnerWidth,r=i.containerInnerHeight,a=i.containerXOffset,l=i.containerYOffset,c=this.config.width="number"==typeof this.config.width&&this.config.width||"number"==typeof this.config.minWidth&&this.config.minWidth||o/2,u=this.config.height="number"==typeof this.config.height&&this.config.height||"number"==typeof this.config.minHeight&&this.config.minHeight||r/2;if(this.config.left=e=(0,n.isDefined)(e)?e:(o-c)/(this.config.modal?2:2+a),this.config.top=t=(0,n.isDefined)(t)?t:(r-u)/(this.config.modal?2:2+l),this._isActive)return this._popup.style.left=e+"px",void(this._popup.style.top=t+"px");this.config.viewportOverflow&&h.default.openFreeWindow(this.config.node),this.config.modal&&this._blockScreen();var f=this._layout.getCell("content");f.isVisible()?f.paint():f.show(),this._popup.style.width=c+"px",this._popup.style.height=u+"px",this._popup.style.left=e+"px",this._popup.style.top=t+"px",this.config.node.appendChild(this._popup),this._popup.focus(),this._isActive=!0,this.events.fire(d.WindowEvents.afterShow,[{left:e,top:t}]),s.focusManager.setFocusId(this._uid)}},e.prototype.hide=function(){this._hide()},e.prototype._hide=function(e){this._isActive&&this.events.fire(d.WindowEvents.beforeHide,[{left:this.config.left,top:this.config.top},e])&&(this.config.viewportOverflow&&h.default.closeFreeWindow(this.config.node),this._blocker&&(this.config.node.removeChild(this._blocker),this.config.closable&&this._keyManager.removeHotKey(null,this),this._blocker=null),this.config.node.removeChild(this._popup),this._layout.getCell("content").hide(),this._isActive=!1,this.events.fire(d.WindowEvents.afterHide,[{left:this.config.left,top:this.config.top},e]))},e.prototype.isVisible=function(){return this._isActive},e.prototype.getWidget=function(){return this._layout.getCell("content").getWidget()},e.prototype.getContainer=function(){return this.getRootView().data._container},e.prototype.attach=function(e,t){this._layout.getCell("content").attach(e,t)},e.prototype.attachHTML=function(e){this._layout.getCell("content").attachHTML(e)},e.prototype.getRootView=function(){return this._layout.getRootView()},e.prototype.destructor=function(){this._isActive&&this.hide(),this.header&&this.header.destructor(),this.footer&&this.footer.destructor(),this.events&&this.events.clear(),this._keyManager&&this._keyManager.destructor(),this._layout&&this._layout.destructor(),this.config=this.header=this.footer=this.events=null,this._popup=this._uid=this._handlers=this._isActive=this._keyManager=this._fullScreen=this._oldSizes=this._oldPosition=null},e.prototype.fullScreen=function(){this.setFullScreen()},e.prototype._initHandlers=function(){var e=this;this._handlers={headerDblClick:function(t){return e.events.fire(d.WindowEvents.headerDoubleClick,[t])},move:function(t){3!==t.which&&(t.preventDefault(),(0,u.detectDrag)(t).then((function(t){t&&e._startDrag(t.x,t.y)})))},resize:{".dhx_window-resizer":function(t){3!==t.which&&(t.preventDefault(),h.default.setActive(e._uid),(0,u.detectDrag)(t).then((function(i){if(i){var n=t.target.classList;n.contains("dhx_window-resizer--left")?e._startResize({left:!0}):n.contains("dhx_window-resizer--right")?e._startResize({right:!0}):n.contains("dhx_window-resizer--top")?e._startResize({top:!0}):n.contains("dhx_window-resizer--bottom")?e._startResize({bottom:!0}):n.contains("dhx_window-resizer--bottom_left")?e._startResize({left:!0,bottom:!0}):n.contains("dhx_window-resizer--bottom_right")?e._startResize({bottom:!0,right:!0}):n.contains("dhx_window-resizer--top_left")?e._startResize({top:!0,left:!0}):n.contains("dhx_window-resizer--top_right")&&e._startResize({top:!0,right:!0})}})))}},setActive:function(){h.default.setActive(e._uid)}}},e.prototype._initUI=function(){var e=this,t=[],i=(this.config.header||this.config.title||this.config.closable||this.config.movable)&&!1!==this.config.header;i&&t.push({id:"header",height:"content",css:"dhx_window-header "+(this.config.movable?"dhx_window-header--movable":""),on:{mousedown:this.config.movable&&this._handlers.move,dblclick:this._handlers.headerDblClick}}),t.push({id:"content",css:i?"dhx_window-content":"dhx_window-content-without-header"}),this.config.footer&&t.push({id:"footer",height:"content",css:"dhx_window-footer"}),this.config.resizable&&t.push({id:"resizers",height:"content",css:"resizers"});var n=this._layout=new l.Layout(this._popup,{css:"dhx_window"+(this.config.modal?" dhx_window--modal":""),rows:t,on:{mousedown:this._handlers.setActive},id:this._uid});if(i){var o=this.header=new c.Toolbar;this.config.title&&(this.header.data.add({type:"title",value:this.config.title,id:"title",css:"title_max"}),this._popup.setAttribute("aria-label",this.config.title)),this.config.closable&&(this.header.data.add({type:"spacer"}),this.header.data.add({id:"close",type:"button",view:"link",size:"medium",color:"secondary",circle:!0,icon:"dxi dxi-close"}),o.events.on(f.NavigationBarEvents.click,(function(t,i){"close"===t&&e._hide(i)}))),n.getCell("header").attach(o)}if(this.config.footer){var r=this.footer=new c.Toolbar;n.getCell("footer").attach(r)}this.config.resizable&&n.getCell("resizers").attach((function(){return e._drawResizers()}))},e.prototype._drawResizers=function(){return(0,o.el)(".dhx-resizers",{onmousedown:this._handlers.resize},[(0,o.el)(".dhx_window-resizer.dhx_window-resizer--left",{_ref:"left"}),(0,o.el)(".dhx_window-resizer.dhx_window-resizer--right",{_ref:"right"}),(0,o.el)(".dhx_window-resizer.dhx_window-resizer--bottom",{_ref:"bottom"}),(0,o.el)(".dhx_window-resizer.dhx_window-resizer--top",{_ref:"top"}),(0,o.el)(".dhx_window-resizer.dhx_window-resizer--bottom_right",{_ref:"bottomRight"}),(0,o.el)(".dhx_window-resizer.dhx_window-resizer--bottom_left",{_ref:"bottomLeft"}),(0,o.el)(".dhx_window-resizer.dhx_window-resizer--top_right",{_ref:"topRight"}),(0,o.el)(".dhx_window-resizer.dhx_window-resizer--top_left",{_ref:"topLeft"})])},e.prototype._startDrag=function(e,t){var i=this;this.config.node.classList.add("dhx_window--stop_selection");var n=e-this._popup.offsetLeft,o=t-this._popup.offsetTop,r=this._popup.offsetWidth,a=this._popup.offsetHeight,s=function(e){var t={left:i._popup.offsetLeft,top:i._popup.offsetTop},s=e.pageX-n,l=e.pageY-o;if(!i.config.viewportOverflow){var c=i._getContainerParams(),u=c.containerXOffset,h=c.containerYOffset,f=c.containerInnerWidth,p=c.containerInnerHeight;s<u?s=u:s>u+f-r&&(s=u+f-r),l<h?l=h:l>h+p-a&&(l=h+p-a)}i.config.left=s,i.config.top=l,i._popup.style.left=s+"px",i._popup.style.top=l+"px";var v={left:s,top:l};i.events.fire(d.WindowEvents.move,[v,t,{left:!0,top:!0,bottom:!0,right:!0}])},l=function(){document.removeEventListener("mouseup",l),document.removeEventListener("mousemove",s),i.config.node.classList.remove("dhx_window--stop_selection")};document.addEventListener("mouseup",l),document.addEventListener("mousemove",s)},e.prototype._startResize=function(e){var t,i,n=this,o=100|this.config.minWidth,r=100|this.config.minHeight,a=this._popup.offsetLeft,s=this._popup.offsetTop,l=this._popup.offsetWidth,c=this._popup.offsetHeight,u=this.getRootView().refs;switch(!0){case e.bottom&&e.left:i="dhx_window-body-pointer--bottom_left",t=u.bottomLeft;break;case e.bottom&&e.right:i="dhx_window-body-pointer--bottom_right",t=u.bottomLeft;break;case e.top&&e.left:i="dhx_window-body-pointer--top_left",t=u.bottomLeft;break;case e.top&&e.right:i="dhx_window-body-pointer--top-right",t=u.right;break;case e.top:i="dhx_window-body-pointer--top",t=u.bottomLeft;break;case e.bottom:i="dhx_window-body-pointer--bottom",t=u.bottomLeft;break;case e.left:i="dhx_window-body-pointer--left",t=u.bottomLeft;break;case e.right:i="dhx_window-body-pointer--right",t=u.right}t.el.classList.add("dhx_window-resizer--active"),this.config.node.classList.add("dhx_window--stop_selection"),this.config.node.classList.add(i);var h=function(t){var i=n._getContainerParams(),u=i.containerInnerWidth,h=i.containerInnerHeight,f=i.containerXOffset,p=i.containerYOffset,v={width:n._notInNode()?t.pageX-a:t.pageX-n.config.node.offsetLeft-a,height:n._notInNode()?t.pageY-s:t.pageY-n.config.node.offsetTop-s,left:n._notInNode()?t.pageX:t.pageX-n.config.node.offsetLeft,top:n._notInNode()?t.pageY:t.pageY-n.config.node.offsetTop};e.right&&(v.width<o?v.width=o:v.width>f+u-a&&(v.width=f+u-a),n._popup.style.width=v.width+"px"),e.bottom&&(v.height<r?v.height=r:v.height>p+h-s&&(v.height=p+h-s),n._popup.style.height=v.height+"px"),e.left&&(a+l-v.left<o&&(v.left=a+l-o),v.width=a+l-v.left,n.config.left=v.left,n._popup.style.left=v.left+"px",n._popup.style.width=v.width+"px"),e.top&&(v.top<p?v.top=p:s+c-v.top<r&&(v.top=s+c-r),v.height=s+c-v.top,n.config.top=v.top,n._popup.style.top=v.top+"px",n._popup.style.height=v.height+"px"),n.config.width=n._popup.offsetWidth,n.config.height=n._popup.offsetHeight,n.events.fire(d.WindowEvents.resize,[v,{left:a,top:s,height:c,width:l},e])},f=function(){document.removeEventListener("mouseup",f),document.removeEventListener("mousemove",h),n.config.node.classList.remove("dhx_window--stop_selection"),n.config.node.classList.remove(i),t.el.classList.remove("dhx_window-resizer--active")};document.addEventListener("mouseup",f),document.addEventListener("mousemove",h)},e.prototype._blockScreen=function(){var e=this,t=document.createElement("div");t.className="dhx_window__overlay",this.config.node.appendChild(t),this._blocker=t,this.config.closable&&(t.addEventListener("click",(function(t){return e._hide(t)})),this._keyManager.addHotKey("escape",(function(t){var i=Array.prototype.slice.call(document.querySelectorAll(".dhx_popup--window_modal")),n=Array.prototype.slice.call(document.querySelectorAll(".dhx_popup--window")),o=i.concat(n);1!==o.length?(o.sort((function(e,t){return+window.getComputedStyle(t).zIndex-+window.getComputedStyle(e).zIndex})),o[o.length-1]===e._popup&&e._hide(t)):e._hide(t)})))},e.prototype._notInNode=function(){return this.config.node===document.body||this.config.modal},e.prototype._getContainerParams=function(){var e=this._notInNode();return{containerInnerWidth:e?window.innerWidth:this.config.node.offsetWidth,containerInnerHeight:e?window.innerHeight:this.config.node.offsetHeight,containerXOffset:e?window.pageXOffset:this.config.node.scrollLeft,containerYOffset:e?window.pageYOffset:this.config.node.scrollTop}},e}();t.Window=p},function(e,t,i){"use strict";
/*! @license DOMPurify 2.4.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.7/LICENSE */function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function r(e,t,i){return r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,i){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return i&&o(r,i.prototype),r},r.apply(null,arguments)}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var l=Object.hasOwnProperty,c=Object.setPrototypeOf,u=Object.isFrozen,d=Object.getPrototypeOf,h=Object.getOwnPropertyDescriptor,f=Object.freeze,p=Object.seal,v=Object.create,g="undefined"!=typeof Reflect&&Reflect,_=g.apply,m=g.construct;_||(_=function(e,t,i){return e.apply(t,i)}),f||(f=function(e){return e}),p||(p=function(e){return e}),m||(m=function(e,t){return r(e,a(t))});var y,b=A(Array.prototype.forEach),w=A(Array.prototype.pop),x=A(Array.prototype.push),C=A(String.prototype.toLowerCase),E=A(String.prototype.toString),S=A(String.prototype.match),I=A(String.prototype.replace),k=A(String.prototype.indexOf),O=A(String.prototype.trim),M=A(RegExp.prototype.test),R=(y=TypeError,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return m(y,t)});function A(e){return function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return _(e,t,n)}}function P(e,t,i){var n;i=null!==(n=i)&&void 0!==n?n:C,c&&c(e,null);for(var o=t.length;o--;){var r=t[o];if("string"==typeof r){var a=i(r);a!==r&&(u(t)||(t[o]=a),r=a)}e[r]=!0}return e}function T(e){var t,i=v(null);for(t in e)!0===_(l,e,[t])&&(i[t]=e[t]);return i}function D(e,t){for(;null!==e;){var i=h(e,t);if(i){if(i.get)return A(i.get);if("function"==typeof i.value)return A(i.value)}e=d(e)}return function(e){return console.warn("fallback value for",e),null}}var F=f(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),V=f(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),L=f(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),N=f(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),H=f(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),j=f(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),z=f(["#text"]),$=f(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),B=f(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),q=f(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),W=f(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),G=p(/\{\{[\w\W]*|[\w\W]*\}\}/gm),U=p(/<%[\w\W]*|[\w\W]*%>/gm),X=p(/\${[\w\W]*}/gm),Y=p(/^data-[\-\w.\u00B7-\uFFFF]/),K=p(/^aria-[\-\w]+$/),J=p(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Z=p(/^(?:\w+script|data):/i),Q=p(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ee=p(/^html$/i),te=function(){return"undefined"==typeof window?null:window};var ie=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te(),i=function(t){return e(t)};if(i.version="2.4.7",i.removed=[],!t||!t.document||9!==t.document.nodeType)return i.isSupported=!1,i;var o=t.document,r=t.document,s=t.DocumentFragment,l=t.HTMLTemplateElement,c=t.Node,u=t.Element,d=t.NodeFilter,h=t.NamedNodeMap,p=void 0===h?t.NamedNodeMap||t.MozNamedAttrMap:h,v=t.HTMLFormElement,g=t.DOMParser,_=t.trustedTypes,m=u.prototype,y=D(m,"cloneNode"),A=D(m,"nextSibling"),ie=D(m,"childNodes"),ne=D(m,"parentNode");if("function"==typeof l){var oe=r.createElement("template");oe.content&&oe.content.ownerDocument&&(r=oe.content.ownerDocument)}var re=function(e,t){if("object"!==n(e)||"function"!=typeof e.createPolicy)return null;var i=null,o="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(o)&&(i=t.currentScript.getAttribute(o));var r="dompurify"+(i?"#"+i:"");try{return e.createPolicy(r,{createHTML:function(e){return e},createScriptURL:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+r+" could not be created."),null}}(_,o),ae=re?re.createHTML(""):"",se=r,le=se.implementation,ce=se.createNodeIterator,ue=se.createDocumentFragment,de=se.getElementsByTagName,he=o.importNode,fe={};try{fe=T(r).documentMode?r.documentMode:{}}catch(e){}var pe={};i.isSupported="function"==typeof ne&&le&&void 0!==le.createHTMLDocument&&9!==fe;var ve,ge,_e=G,me=U,ye=X,be=Y,we=K,xe=Z,Ce=Q,Ee=J,Se=null,Ie=P({},[].concat(a(F),a(V),a(L),a(H),a(z))),ke=null,Oe=P({},[].concat(a($),a(B),a(q),a(W))),Me=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Re=null,Ae=null,Pe=!0,Te=!0,De=!1,Fe=!0,Ve=!1,Le=!1,Ne=!1,He=!1,je=!1,ze=!1,$e=!1,Be=!0,qe=!1,We=!0,Ge=!1,Ue={},Xe=null,Ye=P({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ke=null,Je=P({},["audio","video","img","source","image","track"]),Ze=null,Qe=P({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),et="http://www.w3.org/1998/Math/MathML",tt="http://www.w3.org/2000/svg",it="http://www.w3.org/1999/xhtml",nt=it,ot=!1,rt=null,at=P({},[et,tt,it],E),st=["application/xhtml+xml","text/html"],lt=null,ct=r.createElement("form"),ut=function(e){return e instanceof RegExp||e instanceof Function},dt=function(e){lt&&lt===e||(e&&"object"===n(e)||(e={}),e=T(e),ve=ve=-1===st.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,ge="application/xhtml+xml"===ve?E:C,Se="ALLOWED_TAGS"in e?P({},e.ALLOWED_TAGS,ge):Ie,ke="ALLOWED_ATTR"in e?P({},e.ALLOWED_ATTR,ge):Oe,rt="ALLOWED_NAMESPACES"in e?P({},e.ALLOWED_NAMESPACES,E):at,Ze="ADD_URI_SAFE_ATTR"in e?P(T(Qe),e.ADD_URI_SAFE_ATTR,ge):Qe,Ke="ADD_DATA_URI_TAGS"in e?P(T(Je),e.ADD_DATA_URI_TAGS,ge):Je,Xe="FORBID_CONTENTS"in e?P({},e.FORBID_CONTENTS,ge):Ye,Re="FORBID_TAGS"in e?P({},e.FORBID_TAGS,ge):{},Ae="FORBID_ATTR"in e?P({},e.FORBID_ATTR,ge):{},Ue="USE_PROFILES"in e&&e.USE_PROFILES,Pe=!1!==e.ALLOW_ARIA_ATTR,Te=!1!==e.ALLOW_DATA_ATTR,De=e.ALLOW_UNKNOWN_PROTOCOLS||!1,Fe=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Ve=e.SAFE_FOR_TEMPLATES||!1,Le=e.WHOLE_DOCUMENT||!1,je=e.RETURN_DOM||!1,ze=e.RETURN_DOM_FRAGMENT||!1,$e=e.RETURN_TRUSTED_TYPE||!1,He=e.FORCE_BODY||!1,Be=!1!==e.SANITIZE_DOM,qe=e.SANITIZE_NAMED_PROPS||!1,We=!1!==e.KEEP_CONTENT,Ge=e.IN_PLACE||!1,Ee=e.ALLOWED_URI_REGEXP||Ee,nt=e.NAMESPACE||it,Me=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&ut(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Me.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&ut(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Me.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Me.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ve&&(Te=!1),ze&&(je=!0),Ue&&(Se=P({},a(z)),ke=[],!0===Ue.html&&(P(Se,F),P(ke,$)),!0===Ue.svg&&(P(Se,V),P(ke,B),P(ke,W)),!0===Ue.svgFilters&&(P(Se,L),P(ke,B),P(ke,W)),!0===Ue.mathMl&&(P(Se,H),P(ke,q),P(ke,W))),e.ADD_TAGS&&(Se===Ie&&(Se=T(Se)),P(Se,e.ADD_TAGS,ge)),e.ADD_ATTR&&(ke===Oe&&(ke=T(ke)),P(ke,e.ADD_ATTR,ge)),e.ADD_URI_SAFE_ATTR&&P(Ze,e.ADD_URI_SAFE_ATTR,ge),e.FORBID_CONTENTS&&(Xe===Ye&&(Xe=T(Xe)),P(Xe,e.FORBID_CONTENTS,ge)),We&&(Se["#text"]=!0),Le&&P(Se,["html","head","body"]),Se.table&&(P(Se,["tbody"]),delete Re.tbody),f&&f(e),lt=e)},ht=P({},["mi","mo","mn","ms","mtext"]),ft=P({},["foreignobject","desc","title","annotation-xml"]),pt=P({},["title","style","font","a","script"]),vt=P({},V);P(vt,L),P(vt,N);var gt=P({},H);P(gt,j);var _t=function(e){x(i.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=ae}catch(t){e.remove()}}},mt=function(e,t){try{x(i.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){x(i.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!ke[e])if(je||ze)try{_t(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},yt=function(e){var t,i;if(He)e="<remove></remove>"+e;else{var n=S(e,/^[\r\n\t ]+/);i=n&&n[0]}"application/xhtml+xml"===ve&&nt===it&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var o=re?re.createHTML(e):e;if(nt===it)try{t=(new g).parseFromString(o,ve)}catch(e){}if(!t||!t.documentElement){t=le.createDocument(nt,"template",null);try{t.documentElement.innerHTML=ot?ae:o}catch(e){}}var a=t.body||t.documentElement;return e&&i&&a.insertBefore(r.createTextNode(i),a.childNodes[0]||null),nt===it?de.call(t,Le?"html":"body")[0]:Le?t.documentElement:a},bt=function(e){return ce.call(e.ownerDocument||e,e,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},wt=function(e){return"object"===n(c)?e instanceof c:e&&"object"===n(e)&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},xt=function(e,t,n){pe[e]&&b(pe[e],(function(e){e.call(i,t,n,lt)}))},Ct=function(e){var t,n;if(xt("beforeSanitizeElements",e,null),(n=e)instanceof v&&("string"!=typeof n.nodeName||"string"!=typeof n.textContent||"function"!=typeof n.removeChild||!(n.attributes instanceof p)||"function"!=typeof n.removeAttribute||"function"!=typeof n.setAttribute||"string"!=typeof n.namespaceURI||"function"!=typeof n.insertBefore||"function"!=typeof n.hasChildNodes))return _t(e),!0;if(M(/[\u0080-\uFFFF]/,e.nodeName))return _t(e),!0;var o=ge(e.nodeName);if(xt("uponSanitizeElement",e,{tagName:o,allowedTags:Se}),e.hasChildNodes()&&!wt(e.firstElementChild)&&(!wt(e.content)||!wt(e.content.firstElementChild))&&M(/<[/\w]/g,e.innerHTML)&&M(/<[/\w]/g,e.textContent))return _t(e),!0;if("select"===o&&M(/<template/i,e.innerHTML))return _t(e),!0;if(!Se[o]||Re[o]){if(!Re[o]&&St(o)){if(Me.tagNameCheck instanceof RegExp&&M(Me.tagNameCheck,o))return!1;if(Me.tagNameCheck instanceof Function&&Me.tagNameCheck(o))return!1}if(We&&!Xe[o]){var r=ne(e)||e.parentNode,a=ie(e)||e.childNodes;if(a&&r)for(var s=a.length-1;s>=0;--s)r.insertBefore(y(a[s],!0),A(e))}return _t(e),!0}return e instanceof u&&!function(e){var t=ne(e);t&&t.tagName||(t={namespaceURI:nt,tagName:"template"});var i=C(e.tagName),n=C(t.tagName);return!!rt[e.namespaceURI]&&(e.namespaceURI===tt?t.namespaceURI===it?"svg"===i:t.namespaceURI===et?"svg"===i&&("annotation-xml"===n||ht[n]):Boolean(vt[i]):e.namespaceURI===et?t.namespaceURI===it?"math"===i:t.namespaceURI===tt?"math"===i&&ft[n]:Boolean(gt[i]):e.namespaceURI===it?!(t.namespaceURI===tt&&!ft[n])&&!(t.namespaceURI===et&&!ht[n])&&!gt[i]&&(pt[i]||!vt[i]):!("application/xhtml+xml"!==ve||!rt[e.namespaceURI]))}(e)?(_t(e),!0):"noscript"!==o&&"noembed"!==o&&"noframes"!==o||!M(/<\/no(script|embed|frames)/i,e.innerHTML)?(Ve&&3===e.nodeType&&(t=e.textContent,t=I(t,_e," "),t=I(t,me," "),t=I(t,ye," "),e.textContent!==t&&(x(i.removed,{element:e.cloneNode()}),e.textContent=t)),xt("afterSanitizeElements",e,null),!1):(_t(e),!0)},Et=function(e,t,i){if(Be&&("id"===t||"name"===t)&&(i in r||i in ct))return!1;if(Te&&!Ae[t]&&M(be,t));else if(Pe&&M(we,t));else if(!ke[t]||Ae[t]){if(!(St(e)&&(Me.tagNameCheck instanceof RegExp&&M(Me.tagNameCheck,e)||Me.tagNameCheck instanceof Function&&Me.tagNameCheck(e))&&(Me.attributeNameCheck instanceof RegExp&&M(Me.attributeNameCheck,t)||Me.attributeNameCheck instanceof Function&&Me.attributeNameCheck(t))||"is"===t&&Me.allowCustomizedBuiltInElements&&(Me.tagNameCheck instanceof RegExp&&M(Me.tagNameCheck,i)||Me.tagNameCheck instanceof Function&&Me.tagNameCheck(i))))return!1}else if(Ze[t]);else if(M(Ee,I(i,Ce,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==k(i,"data:")||!Ke[e]){if(De&&!M(xe,I(i,Ce,"")));else if(i)return!1}else;return!0},St=function(e){return e.indexOf("-")>0},It=function(e){var t,o,r,a;xt("beforeSanitizeAttributes",e,null);var s=e.attributes;if(s){var l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ke};for(a=s.length;a--;){var c=t=s[a],u=c.name,d=c.namespaceURI;if(o="value"===u?t.value:O(t.value),r=ge(u),l.attrName=r,l.attrValue=o,l.keepAttr=!0,l.forceKeepAttr=void 0,xt("uponSanitizeAttribute",e,l),o=l.attrValue,!l.forceKeepAttr&&(mt(u,e),l.keepAttr))if(Fe||!M(/\/>/i,o)){Ve&&(o=I(o,_e," "),o=I(o,me," "),o=I(o,ye," "));var h=ge(e.nodeName);if(Et(h,r,o)){if(!qe||"id"!==r&&"name"!==r||(mt(u,e),o="user-content-"+o),re&&"object"===n(_)&&"function"==typeof _.getAttributeType)if(d);else switch(_.getAttributeType(h,r)){case"TrustedHTML":o=re.createHTML(o);break;case"TrustedScriptURL":o=re.createScriptURL(o)}try{d?e.setAttributeNS(d,u,o):e.setAttribute(u,o),w(i.removed)}catch(e){}}}else mt(u,e)}xt("afterSanitizeAttributes",e,null)}},kt=function e(t){var i,n=bt(t);for(xt("beforeSanitizeShadowDOM",t,null);i=n.nextNode();)xt("uponSanitizeShadowNode",i,null),Ct(i)||(i.content instanceof s&&e(i.content),It(i));xt("afterSanitizeShadowDOM",t,null)};return i.sanitize=function(e){var r,a,l,u,d,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((ot=!e)&&(e="\x3c!--\x3e"),"string"!=typeof e&&!wt(e)){if("function"!=typeof e.toString)throw R("toString is not a function");if("string"!=typeof(e=e.toString()))throw R("dirty is not a string, aborting")}if(!i.isSupported){if("object"===n(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof e)return t.toStaticHTML(e);if(wt(e))return t.toStaticHTML(e.outerHTML)}return e}if(Ne||dt(h),i.removed=[],"string"==typeof e&&(Ge=!1),Ge){if(e.nodeName){var f=ge(e.nodeName);if(!Se[f]||Re[f])throw R("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof c)1===(a=(r=yt("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===a.nodeName||"HTML"===a.nodeName?r=a:r.appendChild(a);else{if(!je&&!Ve&&!Le&&-1===e.indexOf("<"))return re&&$e?re.createHTML(e):e;if(!(r=yt(e)))return je?null:$e?ae:""}r&&He&&_t(r.firstChild);for(var p=bt(Ge?e:r);l=p.nextNode();)3===l.nodeType&&l===u||Ct(l)||(l.content instanceof s&&kt(l.content),It(l),u=l);if(u=null,Ge)return e;if(je){if(ze)for(d=ue.call(r.ownerDocument);r.firstChild;)d.appendChild(r.firstChild);else d=r;return(ke.shadowroot||ke.shadowrootmod)&&(d=he.call(o,d,!0)),d}var v=Le?r.outerHTML:r.innerHTML;return Le&&Se["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&M(ee,r.ownerDocument.doctype.name)&&(v="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+v),Ve&&(v=I(v,_e," "),v=I(v,me," "),v=I(v,ye," ")),re&&$e?re.createHTML(v):v},i.setConfig=function(e){dt(e),Ne=!0},i.clearConfig=function(){lt=null,Ne=!1},i.isValidAttribute=function(e,t,i){lt||dt({});var n=ge(e),o=ge(t);return Et(n,o,i)},i.addHook=function(e,t){"function"==typeof t&&(pe[e]=pe[e]||[],x(pe[e],t))},i.removeHook=function(e){if(pe[e])return w(pe[e])},i.removeHooks=function(e){pe[e]&&(pe[e]=[])},i.removeAllHooks=function(){pe={}},i}();e.exports=ie},function(e,t,i){i(112),i(113),i(114),i(115),i(116),e.exports=i(117)},function(e,t){Object.values=Object.values?Object.values:function(e){var t=Object.prototype.toString.call(e);if(null==e)throw new TypeError("Cannot convert undefined or null to object");if(~["[object String]","[object Object]","[object Array]","[object Function]"].indexOf(t)){if(Object.keys)return Object.keys(e).map((function(t){return e[t]}));var i=[];for(var n in e)e.hasOwnProperty(n)&&i.push(e[n]);return i}return[]},Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){"use strict";for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),o=0;o<t.length;o++){var r=t[o];if(null!=r)for(var a=Object.keys(Object(r)),s=0,l=a.length;s<l;s++){var c=a[s],u=Object.getOwnPropertyDescriptor(r,c);void 0!==u&&u.enumerable&&(n[c]=r[c])}}return n}})},function(e,t){Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0===n)return!1;var o,r,a=0|t,s=Math.max(a>=0?a:n-Math.abs(a),0);for(;s<n;){if((o=i[s])===(r=e)||"number"==typeof o&&"number"==typeof r&&isNaN(o)&&isNaN(r))return!0;s++}return!1},configurable:!0,writable:!0}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],o=0;o<i;){var r=t[o];if(e.call(n,r,o,t))return r;o++}},configurable:!0,writable:!0}),Array.prototype.findIndex||(Array.prototype.findIndex=function(e){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,i=Object(this),n=i.length>>>0,o=arguments[1],r=0;r<n;r++)if(t=i[r],e.call(o,t,r,i))return r;return-1})},function(e,t){String.prototype.includes||(String.prototype.includes=function(e,t){"use strict";return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{value:function(e,t){var i=this.toString();(void 0===t||t>i.length)&&(t=i.length),t-=e.length;var n=i.indexOf(e,t);return-1!==n&&n===t}}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return t=t||0,this.indexOf(e,t)===t}}),String.prototype.padStart||(String.prototype.padStart=function(e,t){return e>>=0,t=String(t||" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))}),String.prototype.padEnd||(String.prototype.padEnd=function(e,t){return e>>=0,t=String(t||" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),String(this)+t.slice(0,e))})},function(e,t){if(Element&&!Element.prototype.matches){var i=Element.prototype;i.matches=i.matchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector}if("classList"in SVGElement.prototype||Object.defineProperty(SVGElement.prototype,"classList",{get:function(){var e=this;return{contains:function(t){return-1!==e.className.baseVal.split(" ").indexOf(t)},add:function(t){return e.setAttribute("class",e.getAttribute("class")+" "+t)},remove:function(t){var i=e.getAttribute("class").replace(new RegExp("(\\s|^)".concat(t,"(\\s|$)"),"g"),"$2");e.classList.contains(t)&&e.setAttribute("class",i)},toggle:function(e){this.contains(e)?this.remove(e):this.add(e)}}},configurable:!0}),!Object.entries){var n=Function.bind.call(Function.call,Array.prototype.reduce),o=Function.bind.call(Function.call,Object.prototype.propertyIsEnumerable),r=Function.bind.call(Function.call,Array.prototype.concat);Object.entries=function(e){return n(Object.keys(e),(function(t,i){return r(t,"string"==typeof i&&o(e,i)?[[i,e[i]]]:[])}),[])}}Event.prototype.composedPath||(Event.prototype.composedPath=function(){if(this.path)return this.path;var e=this.target;for(this.path=[];null!==e.parentNode;)this.path.push(e),e=e.parentNode;return this.path.push(document,window),this.path})},function(e,t){Math.sign=Math.sign||function(e){return 0===(e=+e)||isNaN(e)?e:e>0?1:-1}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Spreadsheet=t.css=t.i18n=t.setTheme=t.message=void 0;var n=i(118);Object.defineProperty(t,"css",{enumerable:!0,get:function(){return n.cssManager}});var o=i(12);i(119);var r=i(62),a=i(19);Object.defineProperty(t,"message",{enumerable:!0,get:function(){return a.message}});var s=i(1);Object.defineProperty(t,"setTheme",{enumerable:!0,get:function(){return s.setTheme}});var l=window.dhx=window.dhx||{};t.i18n=l.i18n||{},t.i18n.setLocale=r.setLocale,t.i18n.spreadsheet=t.i18n.spreadsheet||o.default,t.i18n.formulas=t.i18n.formulas||o.formulas,l.css=l.css||n.cssManager;var c=i(127);Object.defineProperty(t,"Spreadsheet",{enumerable:!0,get:function(){return c.Spreadsheet}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cssManager=t.CssManager=void 0;var n=i(0),o=function(){function e(){this._classes={};var e=document.createElement("style");e.id="dhx_generated_styles",this._styleCont=document.head.appendChild(e)}return e.prototype.update=function(){this._styleCont.innerHTML!==this._generateCss()&&(document.head.appendChild(this._styleCont),this._styleCont.innerHTML=this._generateCss())},e.prototype.remove=function(e){delete this._classes[e],this.update()},e.prototype.add=function(e,t,i){void 0===i&&(i=!1);var n=this._toCssString(e),o=this._findSameClassId(n);return o&&t&&t!==o?(this._classes[t]=this._classes[o],t):o||this._addNewClass(n,t,i)},e.prototype.get=function(e){if(this._classes[e]){for(var t={},i=0,n=this._classes[e].split(";");i<n.length;i++){var o=n[i];if(o){var r=o.split(":");t[r[0]]=r[1]}}return t}return null},e.prototype.destructor=function(){this._classes=this._styleCont=null},e.prototype._findSameClassId=function(e){for(var t in this._classes)if(e===this._classes[t])return t;return null},e.prototype._addNewClass=function(e,t,i){var o=t||"dhx_generated_class_".concat((0,n.uid)());return this._classes[o]=e,i||this.update(),o},e.prototype._toCssString=function(e){var t="";for(var i in e){var n=e[i],o=i.replace(/[A-Z]{1}/g,(function(e){return"-".concat(e.toLowerCase())}));t+="".concat(o,":").concat(n,";")}return t},e.prototype._generateCss=function(){var e="";for(var t in this._classes){var i=this._classes[t];e+=".".concat(t,"{").concat(i,"}\n")}return e},e}();t.CssManager=o,t.cssManager=new o},function(e,t,i){"use strict";i.r(t)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.message=void 0;var n=i(0),o=i(3),r=i(49),a=new WeakMap,s=new Map;function l(e,t){var i=document.createElement("div");return i.setAttribute("data-position",t),i.className="dhx_message-container dhx_message-container--"+t+(e===document.body?" dhx_message-container--in-body":""),i}t.message=function(e){var t;"string"==typeof e&&(e={text:e}),e.position=e.position||r.MessageContainerPosition.topRight;var i=document.createElement("div");i.className="dhx_widget dhx_message "+(e.css||""),i.setAttribute("role","alert");var c=e.text&&(0,n.uid)();c&&i.setAttribute("aria-describedby",c),e.html?i.innerHTML=e.html:(i.innerHTML='<span class="dhx_message__text" id='.concat(c,"></span>\n\t\t").concat(e.icon?'<span class="dhx_message__icon dxi '.concat(e.icon,'"></span>'):""),i.querySelector("#".concat(c)).textContent=e.text);var u=e.node?(0,o.toNode)(e.node):document.body;"static"===getComputedStyle(u).position&&(u.style.position="relative");var d=s.get(u);d?d[e.position]||(d[e.position]={stack:[],container:l(u,e.position)}):s.set(u,((t={})[e.position]={stack:[],container:l(u,e.position)},t));var h=s.get(u)[e.position],f=h.stack,p=h.container;function v(e){void 0===e&&(e=!0),i&&(!function(e,t){t&&clearTimeout(a.get(e));var i=e.parentNode,n=i.getAttribute("data-position"),o=i.parentNode,r=s.get(o);if(r){var l=r[n];if(l){var c=l.stack,u=c.indexOf(e);-1!==u&&(i.removeChild(e),c.splice(u,1),0===c.length&&o.removeChild(i))}}}(i,e),i=null)}if(0===f.length&&u.appendChild(p),f.push(i),p.appendChild(i),e.expire){var g=setTimeout((function(){return v(!1)}),e.expire);a.set(i,g)}return i.onclick=function(){return v()},{close:function(){return v()}}}},function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.alert=void 0;var n=i(63),o=i(64),r=i(0);t.alert=function(t){var i=t.buttons&&t.buttons[0]?t.buttons[0]:n.default.apply,a=(0,o.blockScreen)(t.blockerCss);return new e((function(e){var n="dhx_alert__".concat((0,r.uid)(),"_content"),o="dhx_alert__".concat((0,r.uid)(),"_header"),s=document.createElement("div");s.setAttribute("role","alert"),s.setAttribute("aria-modal","true"),t.text&&s.setAttribute("aria-describedby",n),t.header&&s.setAttribute("aria-labelledby",o),s.className="dhx_widget dhx_alert "+(t.css||"");var l=function(t){"Escape"!==t.key&&"Esc"!==t.key||(c(t),e(!1))};function c(e){e.preventDefault(),a(),document.body.removeChild(s),document.removeEventListener("keydown",l)}s.innerHTML="\n\t\t\t".concat(t.header?"<div id=".concat(o,' class="dhx_alert__header"> ').concat(!1!==t.htmlEnable?t.header:""," </div>"):"","\n\t\t\t").concat(t.text?"<div id=".concat(n,' class="dhx_alert__content">').concat(!1!==t.htmlEnable?t.text:"","</div>"):"",'\n\t\t\t<div class="dhx_alert__footer ').concat(t.buttonsAlignment?"dhx_alert__footer--"+t.buttonsAlignment:"",'">\n\t\t\t\t<button type="button" aria-label="confirm" class="dhx_alert__apply-button dhx_button dhx_button--view_flat dhx_button--color_primary dhx_button--size_medium">').concat(i,"</button>\n\t\t\t</div>"),!1===t.htmlEnable&&(t.header&&(s.querySelector("#".concat(o)).textContent=t.header),t.text&&(s.querySelector("#".concat(n)).textContent=t.text)),document.body.appendChild(s),s.querySelector(".dhx_alert__apply-button").focus(),s.querySelector("button").addEventListener("click",(function(t){c(t),e(!0)})),document.addEventListener("keydown",l)}))}}).call(this,i(15))},function(e,t,i){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function r(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new r(o.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},i(123),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,i(50))},function(e,t,i){(function(e,t){!function(e,i){"use strict";if(!e.setImmediate){var n,o,r,a,s,l=1,c={},u=!1,d=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick((function(){p(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,i=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=i,t}}()?e.MessageChannel?((r=new MessageChannel).port1.onmessage=function(e){p(e.data)},n=function(e){r.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(o=d.documentElement,n=function(e){var t=d.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):n=function(e){setTimeout(p,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&p(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),n=function(t){e.postMessage(a+t,"*")}),h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),i=0;i<t.length;i++)t[i]=arguments[i+1];var o={callback:e,args:t};return c[l]=o,n(l),l++},h.clearImmediate=f}function f(e){delete c[e]}function p(e){if(u)setTimeout(p,0,e);else{var t=c[e];if(t){u=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(i,n)}}(t)}finally{f(e),u=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,i(50),i(124))},function(e,t){var i,n,o=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(i===setTimeout)return setTimeout(e,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(e){i=r}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var l,c=[],u=!1,d=-1;function h(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&f())}function f(){if(!u){var e=s(h);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];c.push(new p(e,t)),1!==c.length||u||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.confirm=void 0;var n=i(63),o=i(64),r=i(0);t.confirm=function(t){t.buttonsAlignment=t.buttonsAlignment||"right";var i=t.buttons&&t.buttons[1]?t.buttons[1]:n.default.apply,a=t.buttons&&t.buttons[0]?t.buttons[0]:n.default.reject,s=(0,o.blockScreen)("dhx_alert__overlay-confirm "+(t.blockerCss||""));return new e((function(e){var n=document.createElement("div");n.setAttribute("role","alertdialog"),n.setAttribute("aria-modal","true");var o,l=t.header&&(0,r.uid)(),c=t.header&&(0,r.uid)();c&&n.setAttribute("aria-describedby",c),l&&n.setAttribute("aria-labelledby",l);var u=function(t){s(),n.removeEventListener("click",d),document.removeEventListener("keydown",h),document.body.removeChild(n),e(t)},d=function(e){"BUTTON"===e.target.tagName&&u(e.target.classList.contains("dhx_alert__confirm-aply"))},h=function(e){"Escape"===e.key||"Esc"===e.key?(n.querySelector(".dhx_alert__confirm-aply").focus(),u(e.target.classList.contains("dhx_alert__confirm-reject"))):"Tab"===e.key&&("aply"===o?(o="reject",n.querySelector(".dhx_alert__confirm-reject").focus()):(o="aply",n.querySelector(".dhx_alert__confirm-aply").focus()),e.preventDefault())};n.className="dhx_widget dhx_alert dhx_alert--confirm"+(t.css?" "+t.css:""),n.innerHTML="\n\t\t".concat(t.header?'<div class="dhx_alert__header" id='.concat(l,"> ").concat(!1!==t.htmlEnable?t.header:""," </div>"):"","\n\t\t").concat(t.text?'<div class="dhx_alert__content" id='.concat(c,">").concat(!1!==t.htmlEnable?t.text:"","</div>"):"",'\n\t\t\t<div class="dhx_alert__footer ').concat(t.buttonsAlignment?"dhx_alert__footer--"+t.buttonsAlignment:"",'">\n\t\t\t\t<button type="button" aria-label="reject" class="dhx_alert__confirm-reject dhx_button dhx_button--view_link dhx_button--color_primary dhx_button--size_medium">').concat(a,'</button>\n\t\t\t\t<button type="button"  aria-label="aply"class="dhx_alert__confirm-aply dhx_button dhx_button--view_flat dhx_button--color_primary dhx_button--size_medium">').concat(i,"</button>\n\t\t\t</div>"),!1===t.htmlEnable&&(t.header&&(n.querySelector("#".concat(l)).textContent=t.header),t.text&&(n.querySelector("#".concat(c)).textContent=t.text)),document.body.appendChild(n),o="aply",n.querySelector(".dhx_alert__confirm-aply").focus(),n.addEventListener("click",d),document.addEventListener("keydown",h)}))}}).call(this,i(15))},function(e,t,i){
/**
* Copyright (c) 2017, Leon Sorokin
* All rights reserved. (MIT Licensed)
*
* domvm.js (DOM ViewModel)
* A thin, fast, dependency-free vdom view layer
* @preserve https://github.com/leeoniya/domvm (v3.2.6, micro build)
*/
e.exports=function(){"use strict";var e=1,t=2,i=3,n=4,o=5,r="undefined"!=typeof window,a=(r?window:{}).requestAnimationFrame,s={};function l(){}var c=Array.isArray;function u(e){return null!=e}function d(e){return null!=e&&e.constructor===Object}function h(e,t,i,n){e.splice.apply(e,[i,n].concat(t))}function f(e){var t=typeof e;return"string"===t||"number"===t}function p(e){return"function"==typeof e}function v(e){return"object"==typeof e&&p(e.then)}function g(e){for(var t=arguments,i=1;i<t.length;i++)for(var n in t[i])e[n]=t[i][n];return e}function _(e,t,i){for(var n;n=t.shift();)0===t.length?e[n]=i:e[n]=e=e[n]||{}}function m(e,t){for(var i=[],n=t;n<e.length;n++)i.push(e[n]);return i}function y(e,t){for(var i in e)if(e[i]!==t[i])return!1;return!0}function b(e,t){var i=e.length;if(t.length!==i)return!1;for(var n=0;n<i;n++)if(e[n]!==t[n])return!1;return!0}function w(e){if(!a)return e;var t,i,n;function o(){t=0,e.apply(i,n)}return function(){i=this,n=arguments,t||(t=a(o))}}function x(e,t,i){return function(){return e.apply(i,t)}}function C(e){var t,i,n=e.slice(),o=[];o.push(0);for(var r=0,a=e.length;r<a;++r){var s=o[o.length-1];if(e[s]<e[r])n[r]=s,o.push(r);else{for(t=0,i=o.length-1;t<i;){var l=(t+i)/2|0;e[o[l]]<e[r]?t=l+1:i=l}e[r]<e[o[t]]&&(t>0&&(n[r]=o[t-1]),o[t]=r)}}for(i=o[(t=o.length)-1];t-- >0;)o[t]=i,i=n[i];return o}function E(e,t){var i,n=0,o=t.length-1;if(o<=2147483647)for(;n<=o;){if(t[i=n+o>>1]===e)return i;t[i]<e?n=i+1:o=i-1}else for(;n<=o;){if(t[i=Math.floor((n+o)/2)]===e)return i;t[i]<e?n=i+1:o=i-1}return n==t.length?null:n}function S(e){return"o"===e[0]&&"n"===e[1]}function I(e){return"_"===e[0]}function k(e){return"style"===e}function O(e){e&&e.el&&e.el.offsetHeight}function M(e){return null!=e.node&&null!=e.node.el}function R(e,t){switch(t){case"value":case"checked":case"selected":return!0}return!1}function A(e){for(e=e||s;null==e.vm&&e.parent;)e=e.parent;return e.vm}function P(){}var T=P.prototype={constructor:P,type:null,vm:null,key:null,ref:null,data:null,hooks:null,ns:null,el:null,tag:null,attrs:null,body:null,flags:0,_class:null,_diff:null,_dead:!1,_lis:!1,idx:null,parent:null};function D(e){var i=new P;return i.type=t,i.body=e,i}var F={},V=/\[(\w+)(?:=(\w+))?\]/g;function L(e){var t,i,n,o,r=F[e];if(null==r)for(F[e]=r={tag:(t=e.match(/^[-\w]+/))?t[0]:"div",id:(i=e.match(/#([-\w]+)/))?i[1]:null,class:(n=e.match(/\.([-\w.]+)/))?n[1].replace(/\./g," "):null,attrs:null};o=V.exec(e);)null==r.attrs&&(r.attrs={}),r.attrs[o[1]]=o[2]||"";return r}var N=1,H=2,j=4,z=8;function $(t,i,n,o){var r=new P;r.type=e,u(o)&&(r.flags=o),r.attrs=i;var a=L(t);if(r.tag=a.tag,a.id||a.class||a.attrs){var s=r.attrs||{};if(a.id&&!u(s.id)&&(s.id=a.id),a.class&&(r._class=a.class,s.class=a.class+(u(s.class)?" "+s.class:"")),a.attrs)for(var l in a.attrs)u(s[l])||(s[l]=a.attrs[l]);r.attrs=s}var c=r.attrs;return u(c)&&(u(c._key)&&(r.key=c._key),u(c._ref)&&(r.ref=c._ref),u(c._hooks)&&(r.hooks=c._hooks),u(c._data)&&(r.data=c._data),u(c._flags)&&(r.flags=c._flags),u(r.key)||(u(r.ref)?r.key=r.ref:u(c.id)?r.key=c.id:u(c.name)&&(r.key=c.name+("radio"===c.type||"checkbox"===c.type?c.value:"")))),null!=n&&(r.body=n),r}function B(e,t,i){_(e,["refs"].concat(t.split(".")),i)}function q(e){for(;e=e.parent;)e.flags|=N}function W(e,t,i,r){if(e.type!==o&&e.type!==n){e.parent=t,e.idx=i,e.vm=r,null!=e.ref&&B(A(e),e.ref,e);var a=e.hooks,s=r&&r.hooks;(a&&(a.willRemove||a.didRemove)||s&&(s.willUnmount||s.didUnmount))&&q(e),c(e.body)&&G(e)}}function G(e){for(var i=e.body,n=0;n<i.length;n++){var o=i[n];!1===o||null==o?i.splice(n--,1):c(o)?h(i,o,n--,1):(null==o.type&&(i[n]=o=D(""+o)),o.type===t?null==o.body||""===o.body?i.splice(n--,1):n>0&&i[n-1].type===t?(i[n-1].body+=o.body,i.splice(n--,1)):W(o,e,n,null):W(o,e,n,null))}}var U={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,order:!0,lineClamp:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function X(e,t){return isNaN(t)||U[e]?t:t+"px"}function Y(e,t){var i=(e.attrs||s).style,n=t?(t.attrs||s).style:null;if(null==i||f(i))e.el.style.cssText=i;else{for(var o in i){var r=i[o];(null==n||null!=r&&r!==n[o])&&(e.el.style[o]=X(o,r))}if(n)for(var a in n)null==i[a]&&(e.el.style[a]="")}}var K=[];function J(e,t,i,n,o){if(null!=e){var r=i.hooks[t];if(r){if("d"!==t[0]||"i"!==t[1]||"d"!==t[2])return r(i,n);o?O(i.parent)&&r(i,n):K.push([r,i,n])}}}function Z(e){var t;if(K.length)for(O(e.node);t=K.shift();)t[0](t[1],t[2])}var Q=r?document:null;function ee(e){for(;null==e._node;)e=e.parentNode;return e._node}function te(e,t){return null!=t?Q.createElementNS(t,e):Q.createElement(e)}function ie(e){return Q.createTextNode(e)}function ne(e){return Q.createComment(e)}function oe(e){return e.nextSibling}function re(e){return e.previousSibling}function ae(e){var t=e.vm,i=null!=t&&J(t.hooks,"willUnmount",t,t.data),n=J(e.hooks,"willRemove",e);if((e.flags&N)===N&&c(e.body))for(var o=0;o<e.body.length;o++)ae(e.body[o]);return i||n}function se(e,t,i){var n=t._node,o=n.vm;if(c(n.body))if((n.flags&N)===N)for(var r=0;r<n.body.length;r++)se(t,n.body[r].el);else ce(n);delete t._node,e.removeChild(t),J(n.hooks,"didRemove",n,null,i),null!=o&&(J(o.hooks,"didUnmount",o,o.data,i),o.node=null)}function le(e,t){var i=t._node;if(!i._dead){var n=ae(i);null!=n&&v(n)?(i._dead=!0,n.then(x(se,[e,t,!0]))):se(e,t)}}function ce(e){for(var t=e.body,i=0;i<t.length;i++){var n=t[i];delete n.el._node,null!=n.vm&&(n.vm.node=null),c(n.body)&&ce(n)}}function ue(e){var t=e.el;if(0==(e.flags&N))c(e.body)&&ce(e),t.textContent=null;else{var i=t.firstChild;do{var n=oe(i);le(t,i)}while(i=n)}}function de(e,t,i){var n=t._node,o=null!=t.parentNode,r=t!==i&&o?null:n.vm;null!=r&&J(r.hooks,"willMount",r,r.data),J(n.hooks,o?"willReinsert":"willInsert",n),e.insertBefore(t,i),J(n.hooks,o?"didReinsert":"didInsert",n),null!=r&&J(r.hooks,"didMount",r,r.data)}function he(e,t,i){de(e,t,i?oe(i):null)}var fe={};function pe(e){g(fe,e)}function ve(e){var t=this,i=t,n=m(arguments,1).concat(i,i.data);do{var o=t.onemit,r=o?o[e]:null;if(r){r.apply(t,n);break}}while(t=t.parent());fe[e]&&fe[e].apply(t,n)}var ge=l;function _e(e){ge=e.onevent||ge,e.onemit&&pe(e.onemit)}function me(e,t,i){e[t]=i}function ye(e,t,i,n,o){var r=e.apply(o,t.concat([i,n,o,o.data]));o.onevent(i,n,o,o.data,t),ge.call(null,i,n,o,o.data,t),!1===r&&(i.preventDefault(),i.stopPropagation())}function be(e){var t,i,n=ee(e.target),o=A(n),r=e.currentTarget._node.attrs["on"+e.type];if(c(r))ye(t=r[0],i=r.slice(1),e,n,o);else for(var a in r)if(e.target.matches(a)){var s=r[a];c(s)?(t=s[0],i=s.slice(1)):(t=s,i=[]),ye(t,i,e,n,o)}}function we(e,t,i,n){if(i!==n){var o=e.el;null==i||p(i)?me(o,t,i):null==n&&me(o,t,be)}}function xe(e,t,i){"."===t[0]&&(t=t.substr(1),i=!0),i?e.el[t]="":e.el.removeAttribute(t)}function Ce(e,t,i,n,o){var r=e.el;null==i?!o&&xe(e,t,!1):null!=e.ns?r.setAttribute(t,i):"class"===t?r.className=i:"id"===t||"boolean"==typeof i||n?r[t]=i:"."===t[0]?r[t.substr(1)]=i:r.setAttribute(t,i)}function Ee(e,t,i){var n=e.attrs||s,o=t.attrs||s;if(n===o);else{for(var r in n){var a=n[r],l=R(e.tag,r),c=l?e.el[r]:o[r];a===c||(k(r)?Y(e,t):I(r)||(S(r)?we(e,r,a,c):Ce(e,r,a,l,i)))}for(var r in o)!(r in n)&&!I(r)&&xe(e,r,R(e.tag,r)||S(r))}}function Se(e,t,i,o){return e.type===n&&(t=e.data,i=e.key,o=e.opts,e=e.view),new We(e,t,i,o)}function Ie(e){for(var t=0;t<e.body.length;t++){var r=e.body[t],a=r.type;if(a<=i)de(e.el,ke(r));else if(a===n)a=(s=Se(r.view,r.data,r.key,r.opts)._redraw(e,t,!1)).node.type,de(e.el,ke(s.node));else if(a===o){var s;(s=r.vm)._redraw(e,t),a=s.node.type,de(e.el,s.node.el)}}}function ke(n,o){return null==n.el&&(n.type===e?(n.el=o||te(n.tag,n.ns),null!=n.attrs&&Ee(n,s,!0),(n.flags&z)===z&&n.body.body(n),c(n.body)?Ie(n):null!=n.body&&""!==n.body&&(n.el.textContent=n.body)):n.type===t?n.el=o||ie(n.body):n.type===i&&(n.el=o||ne(n.body))),n.el._node=n,n.el}function Oe(e,t){return t[e.idx+1]}function Me(e,t){return t[e.idx-1]}function Re(e){return e.parent}window.lisMove=De;var Ae=1,Pe=2;function Te(e,t,i,n,o,r,a,s){return function(l,c,u,d,h,f){var p,v;if(null!=d[n]){if(null==(p=d[n]._node))return void(d[n]=e(d[n]));if(Re(p)!==l)return v=e(d[n]),null!=p.vm?p.vm.unmount(!0):le(c,d[n]),void(d[n]=v)}if(d[o]==h)return Pe;if(null==d[o].el)i(c,ke(d[o]),d[n]),d[o]=t(d[o],u);else if(d[o].el===d[n])d[o]=t(d[o],u),d[n]=e(d[n]);else{if(f||p!==d[a])return f&&null!=d[n]?De(e,t,i,n,o,c,u,p,d):Ae;v=d[n],d[n]=e(v),s(c,v,d[r]),d[r]=v}}}function De(e,t,i,n,o,r,a,s,l){if(s._lis)i(r,l[o].el,l[n]),l[o]=t(l[o],a);else{var c=E(s.idx,l.tombs);s._lis=!0;var u=e(l[n]);i(r,l[n],null!=c?a[l.tombs[c]].el:c),null==c?l.tombs.push(s.idx):l.tombs.splice(c,0,s.idx),l[n]=u}}var Fe=Te(oe,Oe,de,"lftSib","lftNode","rgtSib","rgtNode",he),Ve=Te(re,Me,he,"rgtSib","rgtNode","lftSib","lftNode",de);function Le(e,t){var i=t.body,n=e.el,o=e.body,r={lftNode:o[0],rgtNode:o[o.length-1],lftSib:(i[0]||s).el,rgtSib:(i[i.length-1]||s).el};e:for(;;){for(;;){var a=Fe(e,n,o,r,null,!1);if(a===Ae)break;if(a===Pe)break e}for(;;){var l=Ve(e,n,o,r,r.lftNode,!1);if(l===Ae)break;if(l===Pe)break e}Ne(e,n,o,r);break}}function Ne(e,t,i,n){for(var o=Array.prototype.slice.call(t.childNodes),r=[],a=0;a<o.length;a++){var s=o[a]._node;s.parent===e&&r.push(s.idx)}for(var l=C(r).map((function(e){return r[e]})),c=0;c<l.length;c++)i[l[c]]._lis=!0;for(n.tombs=l;Fe(e,t,i,n,null,!0)!==Pe;);}function He(e){return e.el._node.parent!==e.parent}function je(e,t,i){return t[i]}function ze(e,t,i){for(;i<t.length;i++){var r=t[i];if(null!=r.vm){if(e.type===n&&r.vm.view===e.view&&r.vm.key===e.key||e.type===o&&r.vm===e.vm)return r}else if(!He(r)&&e.tag===r.tag&&e.type===r.type&&e.key===r.key&&(e.flags&~N)==(r.flags&~N))return r}return null}function $e(e,t,i){return t[t._keys[e.key]]}function Be(e,i){J(i.hooks,"willRecycle",i,e);var n=e.el=i.el,o=i.body,r=e.body;if(n._node=e,e.type!==t||r===o){null==e.attrs&&null==i.attrs||Ee(e,i,!1);var a=c(o),s=c(r),l=(e.flags&z)===z;a?s||l?qe(e,i):r!==o&&(null!=r?n.textContent=r:ue(i)):s?(ue(i),Ie(e)):r!==o&&(n.firstChild?n.firstChild.nodeValue=r:n.textContent=r),J(i.hooks,"didRecycle",i,e)}else n.nodeValue=r}function qe(t,r){var a=t.body,s=a.length,l=r.body,c=l.length,u=(t.flags&z)===z,d=(t.flags&H)===H,h=(t.flags&j)===j,f=!d&&t.type===e,p=!0,v=h?$e:d||u?je:ze;if(h){for(var g={},_=0;_<l.length;_++)g[l[_].key]=_;l._keys=g}if(f&&0===s)return ue(r),void(u&&(t.body=[]));var m,y,b=0,w=!1,x=0;if(u)var C={key:null},E=Array(s);for(_=0;_<s;_++){if(u){var S=!1,I=null;p&&(h&&(C.key=a.key(_)),m=v(C,l,x)),null!=m?(y=m.idx,!0===(I=a.diff(_,m))?((k=m).parent=t,k.idx=_,k._lis=!1):S=!0):S=!0,S&&(W(k=a.tpl(_),t,_),k._diff=null!=I?I:a.diff(_),null!=m&&Be(k,m)),E[_]=k}else{var k,O=(k=a[_]).type;if(O<=i)(m=p&&v(k,l,x))&&(Be(k,m),y=m.idx);else if(O===n){if(m=p&&v(k,l,x)){y=m.idx;var R=m.vm._update(k.data,t,_)}else R=Se(k.view,k.data,k.key,k.opts)._redraw(t,_,!1);O=R.node.type}else if(O===o){var A=M(k.vm);O=(R=k.vm._update(k.data,t,_,A)).node.type}}if(!h&&null!=m&&(y===x?++x===c&&s>c&&(m=null,p=!1):w=!0,c>100&&w&&++b%10==0))for(;x<c&&He(l[x]);)x++}u&&(t.body=E),f&&Le(t,r)}function We(e,t,i,n){var o=this;o.view=e,o.data=t,o.key=i,n&&(o.opts=n,o.config(n));var r=d(e)?e:e.call(o,o,t,i,n);p(r)?o.render=r:(o.render=r.render,o.config(r)),o._redrawAsync=w((function(e){return o.redraw(!0)})),o._updateAsync=w((function(e){return o.update(e,!0)})),o.init&&o.init.call(o,o,o.data,o.key,n)}var Ge=We.prototype={constructor:We,_diff:null,init:null,view:null,key:null,data:null,state:null,api:null,opts:null,node:null,hooks:null,onevent:l,refs:null,render:null,mount:Ue,unmount:Xe,config:function(e){var t=this;e.init&&(t.init=e.init),e.diff&&(t.diff=e.diff),e.onevent&&(t.onevent=e.onevent),e.hooks&&(t.hooks=g(t.hooks||{},e.hooks)),e.onemit&&(t.onemit=g(t.onemit||{},e.onemit))},parent:function(){return A(this.node.parent)},root:function(){for(var e=this.node;e.parent;)e=e.parent;return e.vm},redraw:function(e){var t=this;return e?t._redraw(null,null,M(t)):t._redrawAsync(),t},update:function(e,t){var i=this;return t?i._update(e,null,null,M(i)):i._updateAsync(e),i},_update:Je,_redraw:Ke,_redrawAsync:null,_updateAsync:null};function Ue(e,t){var i=this;return t?(ue({el:e,flags:0}),i._redraw(null,null,!1),e.nodeName.toLowerCase()!==i.node.tag?(ke(i.node),de(e.parentNode,i.node.el,e),e.parentNode.removeChild(e)):de(e.parentNode,ke(i.node,e),e)):(i._redraw(null,null),e&&de(e,i.node.el)),e&&Z(i),i}function Xe(e){var t=this,i=t.node;le(i.el.parentNode,i.el),e||Z(t)}function Ye(e,t,i,n){return null!=i&&(i.body[n]=t,t.idx=n,t.parent=i,t._lis=!1),e}function Ke(e,t,i){var n,o,r=null==e,a=this,s=a.node&&a.node.el&&a.node.el.parentNode,l=a.node;if(null!=a.diff&&(n=a._diff,a._diff=o=a.diff(a,a.data),null!=l)){var u=c(n)?b:y;if(n===o||u(n,o))return Ye(a,l,e,t)}s&&J(a.hooks,"willRedraw",a,a.data);var d=a.render.call(a,a,a.data,n,o);if(d===l)return Ye(a,l,e,t);if(a.refs=null,null!=a.key&&d.key!==a.key&&(d.key=a.key),a.node=d,e?(W(d,e,t,a),e.body[t]=d):l&&l.parent?(W(d,l.parent,l.idx,a),l.parent.body[l.idx]=d):W(d,null,null,a),!1!==i)if(l)if(l.tag!==d.tag||l.key!==d.key){l.vm=d.vm=null;var h=l.el.parentNode,f=oe(l.el);le(h,l.el),de(h,ke(d),f),l.el=d.el,d.vm=a}else Be(d,l);else ke(d);return s&&J(a.hooks,"didRedraw",a,a.data),r&&s&&Z(a),a}function Je(e,t,i,n){var o=this;return null!=e&&o.data!==e&&(J(o.hooks,"willUpdate",o,e),o.data=e),o._redraw(t,i,n)}function Ze(e,t,i,n){var o,r;return null==i?d(t)?o=t:r=t:(o=t,r=i),$(e,o,r,n)}var Qe="http://www.w3.org/2000/svg";function et(e,t,i,n){var o=Ze(e,t,i,n);return o.ns=Qe,o}function tt(e){var t=new P;return t.type=i,t.body=e,t}function it(e,t,i,n){this.view=e,this.data=t,this.key=i,this.opts=n}function nt(e,t,i,n){return new it(e,t,i,n)}function ot(e){this.vm=e}function rt(e){return new ot(e)}function at(t){var i=new P;return i.type=e,i.el=i.key=t,i}function st(e,t){var i=e.length,n={items:e,length:i,key:function(i){return t.key(e[i],i)},diff:function(i,n){var o=t.diff(e[i],i);if(null==n)return o;var r=n._diff;return(o===r||c(r)?b(o,r):y(o,r))||o},tpl:function(i){return t.tpl(e[i],i)},map:function(e){return t.tpl=e,n},body:function(e){for(var t=Array(i),o=0;o<i;o++){var r=n.tpl(o);r._diff=n.diff(o),t[o]=r,W(r,e,o)}e.body=t}};return n}it.prototype={constructor:it,type:n,view:null,data:null,key:null,opts:null},ot.prototype={constructor:ot,type:o,vm:null};var lt={config:_e,ViewModel:We,VNode:P,createView:Se,defineElement:Ze,defineSvgElement:et,defineText:D,defineComment:tt,defineView:nt,injectView:rt,injectElement:at,lazyList:st,FIXED_BODY:H,DEEP_REMOVE:N,KEYED_LIST:j,LAZY_LIST:z};function ct(e,t){ut(this,e,t)}function ut(e,t,i){if(null!=t.type){if(null!=e.vm)return;W(t,e.parent,e.idx,null),e.parent.body[e.idx]=t,Be(t,e),i&&O(t),Z(A(t))}else{var n=Object.create(e);n.attrs=g({},e.attrs);var o=g(e.attrs,t);if(null!=e._class){var r=o.class;o.class=null!=r&&""!==r?e._class+" "+r:e._class}Ee(e,n),i&&O(e)}}function dt(e,t){var i=e.body;if(c(i))for(var n=0;n<i.length;n++){var o=i[n];null!=o.vm?t.push(o.vm):dt(o,t)}return t}function ht(e){var t,i,n=arguments,o=n.length;if(o>1){var r=1;d(n[1])&&(i=n[1],r=2),t=o===r+1&&(f(n[r])||c(n[r])||i&&(i._flags&z)===z)?n[r]:m(n,r)}return $(e,i,t)}function ft(){var e=ht.apply(null,arguments);return e.ns=Qe,e}return T.patch=ct,Ge.emit=ve,Ge.onemit=null,Ge.body=function(){return dt(this.node,[])},lt.defineElementSpread=ht,lt.defineSvgElementSpread=ft,lt}()},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i},s=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Spreadsheet=void 0;var l=i(1),c=i(4),u=i(3),d=i(9),h=i(11),f=i(52),p=i(18),v=i(93),g=i(43),_=i(94),m=i(215),y=i(216),b=i(30),w=i(220),x=i(221),C=i(13),E=i(2),S=i(95),I=i(37),k=i(222),O=i(12),M=i(223),R=i(224),A=i(5),P=i(22),T=i(0),D=i(225),F=i(226),V=i(227),L=i(24),N=i(228),H=i(16),j=i(29),z=i(21),$=i(229),B=i(230),q=i(231),W=i(265),G=i(19),U=i(266),X=i(267),Y=i(268),K=i(269),J=i(34),Z=i(270),Q=i(275),ee={decimal:".",thousands:",",currency:"$",dateFormat:"%d/%m/%Y",timeFormat:12},te=function(e){function t(t,i){var n=e.call(this,t,i)||this;n.container=null===t?t:(0,u.toNode)(t),n._sizes={rowsCount:1e3,colsCount:200},n._editors={},(0,L.addMethodBatch)(L.dateMethods),(0,L.addMethodBatch)(L.financialMethods),(0,L.addMethodBatch)(L.numberMethods),(0,L.addMethodBatch)(L.textMethods),n.config=(0,E.extendConfig)({rowsCount:{validate:function(e){return e>=0},default:1e3},colsCount:{validate:function(e){return e>=0},default:26},menu:{validate:function(e){return"boolean"==typeof e},default:!1},editLine:{validate:function(e){return"boolean"==typeof e},default:!0},readonly:{validate:function(e){return"boolean"==typeof e},default:!1},autoFormat:{validate:function(e){return"boolean"==typeof e},default:!0},importModulePath:{validate:function(e){return"string"==typeof e},default:"https://cdn.dhtmlx.com/libs/excel2json/1.3/worker.js?vx"},exportModulePath:{validate:function(e){return"string"==typeof e},default:"https://cdn.dhtmlx.com/libs/json2excel/1.3.2/worker.js?vx"},multiSheets:{validate:function(e){return"boolean"==typeof e},default:!0},formats:{validate:function(e){return e instanceof Array},default:[]}},n.config),n._store=new K.Store,n.events=new c.EventSystem,n._serviceEvents=new c.EventSystem,n.sheets=new Z.Sheets({store:n._store,events:n.events,serviceEvents:n._serviceEvents,config:n.config});var o=r(r(r({},ee),{dateFormat:n.config.dateFormat||ee.dateFormat,timeFormat:n.config.timeFormat||ee.timeFormat}),n.config.localization);n.config.localization=o,n._range={cell:"",mode:0,cursor:0,editor:null,inline:0},(0,C.initFormat)(n.config,n.config.localization),n._initLayout(),n._linkForm=new U.LinkForm(n._grid,n.insertLink.bind(n),n.events,n._store),n._setEventsHandlers(),n._setServiceEventsHandlers(),n._actionsManager=new g.ActionsManager({store:n._store,spreadsheet:n,editLine:n._editLine,grid:n._grid,dataStore:n._dataStore,events:n.events,serviceEvents:n._serviceEvents}),n._buffer=new w.BufferManager(n,n._callAction.bind(n),n._store,n._serviceEvents),dhx.css.add({textDecoration:"underline",color:"#163FA2"},"dhx_spreadsheet_link"),n.selection=new M.Selection(n,n._grid,n._buffer,n._store,n._serviceEvents);var a=n._grid.getRootView();a.hooks=a.hooks||{},a.hooks.didMount=function(e){n._updateGridSizes();var t=n.selection.getFocusedCell(),i=n.getValue(t);n._editLine.setValue(i),n.config.readonly||e.node.el.addEventListener("contextmenu",(function(e){var t=n._store.getSelectedCell();n.contextMenu.data.update("lock",{value:n.isLocked(t)?O.default.unlockCell:O.default.lockCell});var i=n._store.getPageMeta(),o=i.selectedCells,r=i.freezedCol,a=i.freezedRow,s=o.at(-1),l=(0,E.isRangeId)(s)?n._store.getRangeIndexes(s).end:n._store.getCellIndex(s),c=l.col,u=l.row,d=(0,E.getLetterFromNumber)(c);r?n.contextMenu.show("unfreeze-cols"):n.contextMenu.hide("unfreeze-cols"),a?n.contextMenu.show("unfreeze-rows"):n.contextMenu.hide("unfreeze-rows"),n.contextMenu.show("hide-rows");var h=n._store.getRangeIndexes(s),f=h.start,p=h.end;n.contextMenu.data.update("freeze-cols",{value:O.default.freezeToCol.replace("{col}",d)}),n.contextMenu.data.update("freeze-rows",{value:O.default.freezeToRow.replace("{row}","".concat(u+1))}),n.contextMenu.data.update("hide-cols",{value:O.default[f.col!==p.col?"hideCols":"hideCol"].replace("{col}","".concat((0,E.getLetterFromNumber)(f.col)).concat(f.col!==p.col?"-".concat((0,E.getLetterFromNumber)(p.col)):""))}),n.contextMenu.data.update("hide-rows",{value:O.default[f.row!==p.row?"hideRows":"hideRow"].replace("{row}","".concat(f.row+1).concat(f.row!==p.row?"-".concat(p.row+1):""))});for(var v=n._grid.data._pull,g=!1,_=f.row;_<p.row;_++)v[_+1].hidden&&(_=p.row,g=!0);g?n.contextMenu.show("show-rows"):n.contextMenu.hide("show-rows");var m=!1,y=n._grid.config.columns;for(_=f.col;_<p.col;_++)y[_+1].hidden&&(_=p.col,m=!0);m?n.contextMenu.show("show-cols"):n.contextMenu.hide("show-cols"),n._contextMenuVisible=!0,n.contextMenu.showAt(e),e.preventDefault()})),n.container=n._layout.getRootView().node.el,a.hooks.didRedraw=function(e){n.events.fire(A.SpreadsheetEvents.gridRedraw,[e])}},n._initHotkeys(),n._generateGridStruct(),n.export=new D.Exporter(n);var s=(0,l.create)({render:function(){return n._render()}});return n.mount(t,s),H.focusManager.setFocusId(n._uid),n._spanControl=new Y.Merge(n._callAction.bind(n),n._store,n.isLocked.bind(n)),n._filterForm=new X.FilterForm(n._grid,n.setFilter.bind(n),n._serviceEvents,n._store),n}return o(t,e),t.prototype.destructor=function(){var e,t;this.unmount(),this._layout.unmount(),this.contextMenu.destructor(),this.menu.destructor(),this.toolbar.destructor(),this.sheets.destructor(),this._editLine.destructor(),null===(e=this._searchForm)||void 0===e||e.destructor(),null===(t=this._linkForm)||void 0===t||t.destructor()},t.prototype.paint=function(){this.config.rowsCount===this._sizes.rowsCount&&this.config.colsCount===this._sizes.colsCount||this._generateGridStruct(),this._layout.paint(),this._grid.paint()},t.prototype.load=function(e,t){var i=this;if("xlsx"===t||"json"===t&&!e){if(!(0,E.isWasmSupported)())throw new Error("WebAssembly is not supported by your browser");return this._xlsxProxy=this._xlsxProxy||new V.FileProxy(this.config.importModulePath),this._xlsxProxy.load(t,e).then((function(e){i.parse(e,t)}))}return(0,h.toProxy)(e).load().then((function(e){i.parse(e,t)}))},t.prototype.parse=function(e,t){var i,n,o=this;"csv"===t&&(t=new x.CustomCsvDriver),"xlsx"===t&&(t=new F.XlsxDriver),e=(0,h.toDataDriver)(t||"json").toJsonArray(e,this._grid),this._grid.config.columns.map((function(e){e.$cellCss={}}));var a={sheets:[]},l=this.config,c=l.multiSheets,u=l.leftSplit,d=void 0===u?-1:u,f=l.topSplit,p=void 0===f?-1:f,v=l.colsCount,g=l.rowsCount;if(this.sheets.parseSheets([]),"sheets"in e)for(var _=0;_<(c?e.sheets.length:1);_++){var m=e.sheets[_];m.name=m.name||this.sheets._generateNewSheetName(),a.sheets.push(m)}else"data"in e&&a.sheets.push(r({name:this.sheets.getActive().name||this.sheets._generateNewSheetName()},e));var y=[];if("styles"in e){var b=e.styles;for(var w in b){var C=b[w],S=(0,E.convertStyles)(C),I=dhx.css.add(r({"white-space":"nowrap"},S),w);"wrap"===S.multiline&&y.push(I)}dhx.css.update()}Array.isArray(e)&&a.sheets.push({data:e,name:this.sheets._generateNewSheetName()}),this.sheets.parseSheets(a.sheets.map((function(e){return{name:e.name,id:e.id}})));var k=function(e){for(var t=a.sheets[e],r=O._dataStore.getPage(t.name),l=s([],t.data,!0),c=[];l.length;)c.push(l.splice(0,1e4));for(var u=O._grid.config.rowHeight,h=t.cols||[],f=t.rows||[];f.length<g;)f.push({height:u});for(;h.length<v;)h.push({width:120});var _=t.merged||[],m=new Map,b=new Map;_.forEach((function(e){var t=e.from,i=e.to,n=i.row>f.length?f.length:i.row,o=i.column>h.length?h.length:i.column,r=t.row,a=t.column,s=(0,T.uid)(),l={id:s,cell:{row:t.row,column:t.column+1},rowspan:n-r,colspan:o-a};if((0,E.checkSpan)(l,d,p)){m.set(s,l);for(var c=r;c<=n;c++)for(var u=a;u<=o;u++){var v=(0,E.getCellNameByIndex)(c,u+1);b.set(v,l)}}})),r.setMeta({cols:h,rows:f,merged:m,freezedCol:(null===(i=t.freeze)||void 0===i?void 0:i.col)?(0,E.getLetterFromNumber)(t.freeze.col):0,freezedRow:null===(n=t.freeze)||void 0===n?void 0:n.row});var w=e===a.sheets.length-1;c.forEach((function(e,t){var i=w&&t===c.length-1;t?setTimeout((function(){return o._parseCells(e,r,y,b,i)})):o._parseCells(e,r,y,b,i)}))},O=this;for(_=0;_<a.sheets.length;_++)k(_);this._grid.data.events.fire(h.DataEvents.change);var M=this.sheets.getAll();this._changeSheet(M[0].id),this._updateGridSizes(),this._grid.paint(),this.config&&!this.config.readonly&&this.selection.setSelectedCell("A1",!1)},t.prototype._parseCells=function(e,t,i,n,o){var s,l,c;void 0===i&&(i=[]),void 0===o&&(o=!1);for(var u=this.config.formats,d=void 0===u?[]:u,h=function(e){var o=e.cell,u=a(e,["cell"]),h=r({},u),p=(0,E.getCellIds)(o.toUpperCase()),v=p.row,g=p.col,_=n.get(o.toUpperCase());_&&(h.spanId=_.id,h.isSpanStart=_.cell.column===g&&_.cell.row===v);var m=void 0,y=void 0,w=h.css||"",x="General"===h.format?d.find((function(e){return"common"===e.id})):d.find((function(e){return e.id===h.format||e.mask===h.format})),S=r({},(0,C.detectFormat)(h.value));y=r({},x||S),!x&&h.format&&(y=r({},(0,C.addNewFormat)((0,E.analyzeMSOFormat)(h.format),f.toolbar.data,d)||S)),h.format=y.mask;var I=(0,T.isDefined)(h.value)?(0,C.getCleanValue)(h.value,y):"";"object"==typeof h.css&&(h.css=h.css.join(" "));var k=(0,E.getStylesObject)(h.css),O=!!k["text-align"],M=(0,C.isNumeric)(I);((null===(s=h.link)||void 0===s?void 0:s.href)||!M&&"".concat(I).startsWith("http")&&1==="".concat(I).split(" ").length)&&(h.css="dhx_spreadsheet_link ".concat(w)),h.css instanceof Array&&(h.css=h.css.join(" ")),M&&"@"!==(null==y?void 0:y.mask)?(m=I,"common"===y.id&&h.value!==m&&(y.$value=h.value),O||(k["text-align"]="right",h.css=dhx.css.add((0,E.convertStyles)(k)))):m=(0,T.isDefined)(h.value)?h.value:(null===(l=h.link)||void 0===l?void 0:l.text)||(null===(c=h.link)||void 0===c?void 0:c.href)||"";var R=y.id;(R.includes("date")||R.includes("time"))&&m&&(m=(0,C.isNumeric)(m)?+m:m instanceof Date?(0,j.getExcelDateFromJs)(m):(0,j.getExcelDateFromString)(m,y)),t.setValue(v,g,m,"@"===y.mask?1:0);var A=(0,E.doesContainUrl)(m),P=h.link||(A?{href:A}:null);P&&!P.text&&m&&(P.text=m);var D=h.css;delete h.value,t.setCell(v,g,r(r({},h),{format:r({},y),css:D,editor:h.editor,link:P,$toolbarAlign:O})),i.includes(D)&&(0,b.setAutoHeightToRow)(o.toUpperCase(),f._grid,t,"wrap")},f=this,p=0,v=e;p<v.length;p++){h(v[p])}o&&(this.events.fire(A.SpreadsheetEvents.afterDataLoaded),this._updateGridSizes(),this._updateGridState(),this._serviceEvents.fire(A.SpreadsheetServiceEvents.applyFilter,[this._store.activePage]),this._grid.paint())},t.prototype.serialize=function(){var e=this,t={},i=[];return this.sheets.getAll().forEach((function(n){if("add-sheet"!==n.id){var o=n.name,r=e._dataStore.getPage(o),a=e._store.getPageMeta(r),s=a.cols,l=void 0===s?[]:s,c=a.rows,u=void 0===c?[]:c,d=a.merged,h=a.freezedCol,f=a.freezedRow,p=e._store.activePage.getSize(),v=p[0],g=p[1],_=[];null==d||d.forEach((function(e,t){var i=e.cell,n=e.rowspan,o=e.colspan,r=i.row,a=i.column;_.push({from:{row:r,column:a-1},to:{row:r+n,column:a+o-1}})}));for(var m=r.serialize(!0),y={name:o,id:n.id,data:[],freeze:{col:h?(0,E.getNumberFromLetter)(h):0,row:f||0},cols:l.slice(0,g).map((function(e){return{width:e.width,hidden:e.hidden||!1}})),rows:u.slice(0,v).map((function(e){return{height:e.height,hidden:e.hidden||!1}})),merged:_},b=function(e){var i=(0,E.getCellNameById)((e[0]+1).toString(),(e[1]+1).toString()),n=e[2];if(n){var o=n.value,r=n.css,a=n.format,s=n.editor,l={};if(Object.keys(n).forEach((function(e){!e.startsWith("$")&&(0,T.isDefined)(n[e])&&"cell"!==e&&(l[e]=n[e])})),l.cell=i,r){l.css=r;for(var c=0,u=r.split(" ");c<u.length;c++){var d=u[c];dhx.css.get(d)&&(t[d]=dhx.css.get(d))}}if((0,T.isDefined)(a)){var h=(0,C.getFormat)((0,C.getDefaultFormatsMap)()[a.mask]);l.format=(null==h?void 0:h.id)||a.id}(o||"number"==typeof o)&&(l.value=o),i&&(l.value||"number"==typeof l.value||r||s)&&y.data.push(l)}},w=0,x=m;w<x.length;w++){b(x[w])}i.push(y)}})),{sheets:i,styles:t,formats:this.config.formats}},t.prototype.setValue=function(e,t){if(e&&(this._checkForMissedCells(e),this.events.fire(A.SpreadsheetEvents.beforeValueChange,[e,t]))){var i=this._parseCell(e),n=i.page,o=i.cleanCell;if(n){e=o.toUpperCase();var r=(0,E.getCellIds)(o);this._callAction({row:r.row,col:r.col,cell:e,val:t,action:A.Actions.setCellValue,groupAction:A.Actions.groupAction,dataStore:this._dataStore,page:n}),this._grid.paint()}}},t.prototype.getValue=function(e){if(e){var t=this._parseCell(e),i=t.page,n=t.cleanCell;if(i){if(e=n.toUpperCase(),(0,E.isRangeId)(e)){var o=[];return this.eachCell((function(e){var t=(0,E.getCellIds)(e);o.push(i.getValue(t.row,t.col))}),e),o}var r=(0,E.getCellIds)(e);return i.getValue(r.row,r.col)}}},t.prototype.getCellIndex=function(e){return(0,E.getCellIds)(e)},t.prototype.getFormula=function(e){var t=this,i=this._parseCell(e),n=i.page,o=i.cleanCell;if(n){if(e=o.toUpperCase(),(0,E.isRangeId)(e)){var r=[];return this.eachCell((function(e){r.push(t._getMath(e,n)||"")}),e),r}var a=this._getMath(e,n);return a?a.source:""}},t.prototype.getSheets=function(){return this.sheets.getAll()},t.prototype._getMath=function(e,t){if(void 0===t&&(t=this._store.activePage),e){var i=(0,E.getCellIds)(e),n=i.row,o=i.col,r=(0,L.toId)(n,o,t.getID());return this._math.getMath(r)||null}},t.prototype.eachCell=function(e,t){t=t||this.selection.getSelectedCell();for(var i=0,n=(0,E.getCellsArray)(t);i<n.length;i++){var o=n[i],r=(0,E.getCellIds)(o),a=r.row,s=r.col;e(o,this._store.activePage.getValue(a,s))}},t.prototype.getStyle=function(e,t){if(void 0===t&&(t=!0),e){var i=this._parseCell(e),n=i.page,o=i.cleanCell;if(n){if(e=o.toUpperCase(),(0,E.isRangeId)(e)){var a=[];return this.eachCell((function(e){var i=(0,E.getCellInfo)(e,n),o=[];i.css&&(o="string"==typeof i.css?i.css.split(t?" ":"dhx_spreadsheet_link"):[i.css]);for(var s={},l=0,c=o;l<c.length;l++){var u=c[l];s=r(r({},s),dhx.css.get(u))}a.push(s)}),e),a}var s=(0,E.getCellInfo)(e,this._store.activePage),l=[];s.css&&(l="string"==typeof s.css?s.css.split(t?" ":"dhx_spreadsheet_link").map((function(e){return e.trim()})):[s.css]);for(var c={},u=0,d=l;u<d.length;u++){var h=d[u];c=r(r({},c),dhx.css.get(h))}return c}}},t.prototype.setStyle=function(e,t){if(e&&t&&this.events.fire(A.SpreadsheetEvents.beforeStyleChange,[e,t])){var i=(0,E.getCellIds)(e),n=i.row,o=i.col;Object.keys(t).length?this._callAction({val:t,row:n,col:o,cell:e,action:A.Actions.setCellStyle,groupAction:A.Actions.groupAction}):this._callAction({row:n,col:o,cell:e,action:A.Actions.removeCellStyles,groupAction:A.Actions.groupAction,dataStore:this._dataStore})}},t.prototype.setFilter=function(e,t){e&&(0,E.isRangeId)(e)&&e.includes(",")||this._callAction({val:t,cell:null!=e?e:"A1",action:A.Actions.filter})},t.prototype.getFilter=function(e){var t=this.sheets.get(e)||this.sheets.getActive(),i=this._dataStore.getPage(t.name);if(i)return i.getMeta().filter},t.prototype.getFormat=function(e){var t;if(e){var i=this._parseCell(e),n=i.page,o=i.cleanCell;if(n){if(e=o.toUpperCase(),(0,E.isRangeId)(e)){var r=[];return this.eachCell((function(e){var t;r.push((null===(t=(0,E.getCellInfo)(e,n).format)||void 0===t?void 0:t.id)||"common")}),e),r}var a=null===(t=(0,E.getCellInfo)(e,n).format)||void 0===t?void 0:t.mask;return(0,C.getDefaultFormatsMap)()[a]||a}}},t.prototype.setFormat=function(e,t){if(e){var i=this._parseCell(e),n=i.page,o=i.cleanCell;n&&(e=o.toUpperCase(),this._callAction({val:t,cell:e,action:A.Actions.setCellFormat,groupAction:A.Actions.groupAction,dataStore:this._dataStore,page:n}))}},t.prototype.clearSheet=function(e){this.sheets.clear(e)},t.prototype.clear=function(){this.events.fire(A.SpreadsheetEvents.beforeClear,[])&&(this._callAction({action:A.Actions.clear,groupAction:A.Actions.groupAction,dataStore:this._dataStore}),this.events.fire(A.SpreadsheetEvents.afterClear,[]))},t.prototype.isLocked=function(e){if(e){var t=this._parseCell(e),i=t.page,n=t.cleanCell;if(i){if(e=n.toUpperCase(),"start"in(0,E.getCellIds)(e)){var o=!1;return this.eachCell((function(e){if(!o){var t=(0,E.getCellInfo)(e,i).locked;o=t}}),e),o}return!!(0,E.getCellInfo)(e,i).locked}}},t.prototype.lock=function(e){if(e){var t=this._parseCell(e),i=t.page,n=t.cleanCell;if(i){e=n.toUpperCase();var o=(0,E.getCellIds)(e);this._callAction({row:o.row,col:o.col,val:!0,cell:e,action:A.Actions.lockCell,groupAction:A.Actions.groupAction,dataStore:this._dataStore,page:i}),this._grid.paint()}}},t.prototype.unlock=function(e){if(e){var t=this._parseCell(e),i=t.page,n=t.cleanCell;if(i){e=n.toUpperCase();var o=(0,E.getCellIds)(e);this._callAction({row:o.row,col:o.col,val:!1,cell:e,action:A.Actions.lockCell,groupAction:A.Actions.groupAction,dataStore:this._dataStore,page:i}),this._grid.paint()}}},t.prototype.addRow=function(e){this.events.fire(A.SpreadsheetEvents.beforeRowAdd,[e])&&((0,E.isRangeId)(e)&&(e=e.split(":")[0]),this._callAction({cell:e,action:A.Actions.addRow,groupAction:A.Actions.groupRowAction,dataStore:this._dataStore}),this.events.fire(A.SpreadsheetEvents.afterRowAdd,[e]))},t.prototype.deleteRow=function(e){if(this.events.fire(A.SpreadsheetEvents.beforeRowDelete,[e])){var t=(0,E.getCellIds)(e);this._callAction({row:t.row,col:t.col,cell:e,action:A.Actions.deleteRow,groupAction:A.Actions.groupRowAction,dataStore:this._dataStore}),this.events.fire(A.SpreadsheetEvents.afterRowDelete,[e])}},t.prototype.addColumn=function(e){this.events.fire(A.SpreadsheetEvents.beforeColumnAdd,[e])&&((0,E.isRangeId)(e)&&(e=e.split(":")[0]),this._callAction({cell:e,action:A.Actions.addColumn,groupAction:A.Actions.groupColAction,dataStore:this._dataStore}),this.events.fire(A.SpreadsheetEvents.afterColumnAdd,[e]))},t.prototype.deleteColumn=function(e){this.events.fire(A.SpreadsheetEvents.beforeColumnDelete,[e])&&(this._callAction({cell:e,action:A.Actions.deleteColumn,groupAction:A.Actions.groupColAction,dataStore:this._dataStore}),this.events.fire(A.SpreadsheetEvents.afterColumnDelete,[e]))},t.prototype.undo=function(){this._actionsManager.undo()},t.prototype.redo=function(){this._actionsManager.redo()},t.prototype.startEdit=function(e,t){if(!this.config.readonly&&!this._range.mode){if(this._editMode)return this._editLine.setValueAtRedactor(t);var i=this.selection.getFocusedCell();if(e||(e=i),e=e.toUpperCase(),this._checkForMissedCells(e),this.events.fire(A.SpreadsheetEvents.beforeEditStart,[e,t])&&!this.isLocked(e)){i!==e&&(this.endEdit(!0),this.selection.setSelectedCell(e,!1));var n=this._store.activePage,o=(0,E.getCellInfo)(e,n),r=o.edited,a=o.link;if(this.selection.getSelectedCell()||this.selection.setSelectedCell(e,!1),a)return this._showLinkPopup(e);if(!r){var s=(0,E.getCellIds)(e),l=s.row,c=s.col,u=(0,L.toId)(l,c,n.getID()),d=this._math.getMath(u),h=(0,E.getCellInfo)(e,n).format;d&&!t&&(t=(0,C.getFormattedFormula)({formula:"="+d.source,format:h,store:this._math})),n.setCell(l,c,{edited:!0,nextValue:t,editorValue:t}),t&&this._editLine.setValue(t),this.events.fire(A.SpreadsheetEvents.afterEditStart,[e,t])}}}},t.prototype.endEdit=function(e){var t,i=this._store.activePage,n=this._store.getPageMeta(i).contextPage,o=(null==n?void 0:n.cell)||this.selection.getFocusedCell(),r=(null==n?void 0:n.page)||i,a=(0,E.getCellInfo)(o,r),s=a.edited,l=a.nextValue,c=a.format,u=a.value;if(s){if(!this.events.fire(A.SpreadsheetEvents.beforeEditEnd,[o,l]))return;if(l&&r.setMeta({inserted:!0}),!e&&void 0!==l){if((null===(t=null==c?void 0:c.id)||void 0===t?void 0:t.includes("time"))&&(0,C.isNumeric)(u))if((h=(0,j.timeStringToJS)(l))instanceof Date)(f=(0,j.excelDateToJSDate)(u)).setHours(h.getHours(),h.getMinutes(),h.getSeconds()),l=(0,j.getExcelDateFromJs)(f);var d=this.config.localization.dateFormat;if("date"===(null==c?void 0:c.id)&&(0,C.isNumeric)(u)&&(0,z.stringToDate)(l,d,!0)){var h=(0,z.stringToDate)(l,d),f=(0,j.excelDateToJSDate)(u);h.setHours(f.getHours(),f.getMinutes(),f.getSeconds()),l=(0,j.getExcelDateFromJs)(h)}var p=n?"".concat(n.pageName,"!").concat(n.cell):o;this.setValue(p,l)}var v=(0,E.getCellIds)(o),g=v.row,_=v.col;r.setCell(g,_,{nextValue:void 0,edited:!1}),this._editLine.blur(),this.events.fire(A.SpreadsheetEvents.afterEditEnd,[o,l])}},t.prototype.addSheet=function(e){return this.sheets.add(e)},t.prototype.removeSheet=function(e){this.sheets.remove(e)},t.prototype.getActiveSheet=function(){return this.sheets.getActive()},t.prototype.setActiveSheet=function(e){this.endEdit(),this._changeSheet(e)},t.prototype.setValidation=function(e,t){var i=this._parseCell(e),n=i.page,o=i.cleanCell;n&&(e=o.toUpperCase(),this._callAction({val:(0,E.isRangeId)(e)?[t]:t,cell:e,action:A.Actions.setValidation,groupAction:A.Actions.groupAction,dataStore:this._dataStore,page:n}))},t.prototype.search=function(e,t,i){void 0===e&&(e=""),void 0===t&&(t=!1),this._searchForm||(this._searchForm=new W.SearchForm(this,this._serviceEvents)),this.endEdit();var n=this._store.activePage,o=n,r=this.sheets.get(i);if((0,T.isDefined)(i)){if(!r)return;o=this._dataStore.getPage(r.name)}return n!==o&&r&&t&&this._changeSheet(r.id),t&&this._searchForm.show(o),this._searchForm.search(e,o)},t.prototype.hideSearch=function(){var e;null===(e=this._searchForm)||void 0===e||e.hide()},t.prototype.insertLink=function(e,t){e&&this._callAction({val:t,cell:e,action:A.Actions.insertLink})},t.prototype.fitColumn=function(e){this._callAction({cell:e,action:A.Actions.fitColumn})},t.prototype.sortCells=function(e,t){void 0===t&&(t=1),this._callAction({action:A.Actions.sortCells,groupAction:A.Actions.sortCells,cell:e,dir:t})},t.prototype.mergeCells=function(e,t){void 0===t&&(t=!1),this._spanControl.doAction(e,t)},t.prototype.freezeCols=function(e){this._callAction({action:A.Actions.toggleFreeze,cell:e||this._store.getSelectedCell(),type:"freeze",target:"col"})},t.prototype.unfreezeCols=function(e){this._callAction({action:A.Actions.toggleFreeze,cell:e||this._store.getSelectedCell(),type:"unfreeze",target:"col"})},t.prototype.freezeRows=function(e){this._callAction({action:A.Actions.toggleFreeze,cell:e||this._store.getSelectedCell(),type:"freeze",target:"row"})},t.prototype.unfreezeRows=function(e){this._callAction({action:A.Actions.toggleFreeze,cell:e||this._store.getSelectedCell(),type:"unfreeze",target:"row"})},t.prototype.hideRows=function(e){void 0===e&&(e=this.selection.getSelectedCell()),this._callAction({action:A.Actions.toggleVisibility,cell:e,type:"hide",target:"row"})},t.prototype.showRows=function(e){void 0===e&&(e=this.selection.getSelectedCell()),this._callAction({action:A.Actions.toggleVisibility,cell:e,type:"show",target:"row"})},t.prototype.showCols=function(e){void 0===e&&(e=this.selection.getSelectedCell()),this._callAction({action:A.Actions.toggleVisibility,cell:e,type:"show",target:"col"})},t.prototype.hideCols=function(e){void 0===e&&(e=this.selection.getSelectedCell()),this._callAction({action:A.Actions.toggleVisibility,cell:e,type:"hide",target:"col"})},t.prototype._showLinkPopup=function(e){e&&!this._contextMenuVisible&&this._linkForm.show(e,(0,E.getCellInfo)(e,this._store.activePage))},t.prototype._showFilter=function(e,t){t.stopPropagation();var i=this._store.activePage,n=i.getMeta().filter;this._filterForm.show(e,t,n,i)},t.prototype._checkValidation=function(e){var t=this._store.activePage,i=(0,E.getCellInfo)(e,t),n=i.editor,o=i.value;if(!n)return!0;var r=n.options;if("string"==typeof r){var a=(0,E.getCellIds)(r),s=a.start,l=a.end,c=a.row,u=a.col;r=(r=c?[t.getValue(c,u)]:t.getRange(s.row,s.col,l.row,l.col)).map((function(e){return"".concat(e)}))}return"number"!=typeof o&&!o||r.includes("".concat(o))},t.prototype._changeSheet=function(e){this.sheets.setActive(e)},t.prototype._callAction=function(e){var t=this,i=this._store.activePage,n={dataStore:this._dataStore,page:i,cell:this.selection.getFocusedCell()};if(e&&!this.config.readonly)if(Array.isArray(e))(e=e.map((function(e){return t._prepareActionConfig(e)})))&&this._actionsManager.execute(e);else{var o=e.page||i,a=e.cell;if(null==a?void 0:a.includes("!")){var s=a.split("!");if(a=s[1],!(o=this._dataStore.getPage(s[0])))return}var l=this._store.getPageMeta(o),c=l.name,u=l.id;(e=r(r({},e),{cell:a,page:o,pageId:u,pageName:c})).dataStore=this._dataStore,(0,E.isRangeId)(e.cell)&&e.groupAction?this._actionsManager.execute(e.groupAction,r(r({},n),e)):this._actionsManager.execute(e.action,r(r({},n),e))}},t.prototype._prepareActionConfig=function(e){var t=this._store.activePage,i={dataStore:this._dataStore,page:t,cell:this.selection.getFocusedCell()};if(e&&!this.config.readonly){var n=e.page||t,o=e.cell;if(null==o?void 0:o.includes("!")){var a=o.split("!");if(o=a[1],!(n=this._dataStore.getPage(a[0])))return}return e=r(r(r({},i),e),{cell:o,page:n,dataStore:this._dataStore})}},t.prototype._initLayout=function(){this._grid=new f.Grid(null,{rowHeight:32,headerRowHeight:32,headerSort:!1,tooltip:!1,sortable:!1,leftSplit:1+(this.config.leftSplit||0),topSplit:this.config.topSplit||0}),this.menu=new v.Menu(null,{navigationType:"click"}),this.menu.data.parse((0,m.getMenuStruct)(this.config)),this._spreadsheetToolbar=new Q.SpreadsheetToolbar({config:this.config,store:this._store,uid:this._uid,serviceEvents:this._serviceEvents}),this.toolbar=this._spreadsheetToolbar.toolbar,this.contextMenu=new v.ContextMenu(null,{}),this.contextMenu.data.parse((0,_.getContextMenuStruct)()),this._dataStore=this._store.dataStore,this._math=this._dataStore.getStore(),this._editLine=new y.EditLine(null,{events:this.events,grid:this._grid,store:this._store,localization:this.config.localization,math:this._math,serviceEvents:this._serviceEvents});var e=this._layout=new p.Layout(null,{height:"100%",rows:[{id:"menu",css:"menu_wrapper",height:"content"},{id:"toolbar",css:"toolbar_wrapper",height:"content"},{id:"editLine",css:"editLine_wrapper",height:"content"},{id:"grid",css:"dhx-spreadsheet-grid dhx_layout-cell--gravity"},{id:"tabbar",css:"sheetbar_wrapper",height:"content"}]});e.getCell("menu").attach(this.menu,this),e.getCell("toolbar").attach(this.toolbar,this),e.getCell("grid").attach(this._grid,this),e.getCell("editLine").attach(this._editLine,this),e.getCell("tabbar").attach(this.sheets.tabbar,this),this._store.activePage.setMeta({leftSplit:this.config.leftSplit}),this.config.editLine&&!this.config.readonly||e.getCell("editLine").hide(),this.config.menu&&!this.config.readonly||e.getCell("menu").hide(),!this.config.readonly&&this.toolbar.data.getLength()||e.getCell("toolbar").hide(),this.config.multiSheets||e.getCell("tabbar").hide()},t.prototype._generateGridStruct=function(e){var t=this;void 0===e&&(e=!0);for(var i=this.serialize(),n=this.config,o=n.rowsCount,a=n.colsCount,c=[],u=1;u<=o;u++){for(var d={id:"".concat(u),$index:u},h=1;h<=a;h++)d[h]="";c.push(d)}var f,p=[{id:"$index",width:40,header:[{text:"",css:"dxi dxi-select-all"}],htmlEnable:!0,editable:!1,align:"right",template:function(e,t){return(0,b.getIndexRowCell)(t.$index,{})}}],v=!1,g=function(e){var i=e.el;t._range.editor=i,t._range.inline=1,i.focus(),i.setSelectionRange(i.value.length,i.value.length),t._range.cursor=i.value.length,i.addEventListener("blur",(function(e){t._range.cursor=i.selectionStart,function(e){requestAnimationFrame((function(){var i;v&&((null===(i=e.target)||void 0===i?void 0:i.hasAttribute("data-skip-restore-focus"))||setTimeout((function(){t._restoreFocus(e)})))}))}(e)})),i.addEventListener("focus",(function(){t._range.inline=1})),v=!0},_=function(){t._range.editor=null,v=!1},m=function(e,i){v&&t.events.fire(A.SpreadsheetEvents.cellInput,[e,i.target.value,i])};this.events.on(A.SpreadsheetEvents.gridRedraw,(function(){f=null}));var y=function(e,i,n){var o,a;f||(f=t.selection.getFocusedCell());var c=n.$letter+i.$index,u=(0,E.getCellIds)(c),d=t._store.activePage,h=d.getCell(u.row,u.col)||{},p=d.getMeta().filter,v=!1,y=!1;if(p){var b=p.cell,w=p.rules,x=(0,E.getCellIds)(b),S=x.start,I=x.end;if(S.row===u.row&&u.col>=S.col&&u.col<=I.col){var k=(0,E.getCellNameById)(S.row+1,I.col+1);v=!0;var O=w[(0,E.getCellsArray)("".concat(b.split(":")[0],":").concat(k)).indexOf(c)]||{},M=O.condition,A=O.exclude;y=!(!M&&!A)}}var P=h,D=P.locked,F=P.edited,V=P.nextValue,L=P.editor,N=P.css,H=P.format,z=P.link,q=d.getValue(u.row,u.col,"@"===(null==H?void 0:H.mask)),W=F&&(0,T.isDefined)(V)?V:q;if(f&&F){var G=null==H?void 0:H.id;if((null==G?void 0:G.includes("date"))&&!t._editors[G]&&(t._editors[G]=new R.DateEditor(t.endEdit.bind(t),(0,j.getDHXDateFormat)(null==H?void 0:H.mask),t.events)),(null==G?void 0:G.includes("time"))&&!t._editors[G]&&(t._editors[G]=new B.TimeEditor(t.endEdit.bind(t),(0,j.getDHXDateFormat)(null==H?void 0:H.mask),t.events)),"select"===(null==L?void 0:L.type)){t._editors.select||(t._editors.select=new $.SelectEditor(t.endEdit.bind(t),t.events));var U=L.options;t._editors.select.setValue("string"==typeof U?t.getValue(U.replace(/=|\$/g,"")):U)}var X={oninput:[m,c],_hooks:{didInsert:g.bind(t),didRemove:_.bind(t)},class:N,_key:"selection_input","data-dhx-id":"cell_input",value:null==V?H?(0,C.getFormattedValue)(W,H):W:V};return t._editors[G]?t._editors[G].toHTML(r(r({},X),{format:H})):"select"===(null===(o=h.editor)||void 0===o?void 0:o.type)?t._editors.select.toHTML(X):(0,l.el)("input.dhx_cell_input",X)}var Y=[],K=!L||t._checkValidation(c);if(z&&!z.text){var J=z.href;"".concat(W).split(" ").forEach((function(e){e===J?(Y.push((0,l.el)("span",{class:N||""},[J])),Y.push(" ")):Y.push("".concat(e," "))}))}else if(z){var Z=z.text,Q=z.href,ee=Z||Q;Y.push((0,l.el)("span.dhx_spreadsheet_link",{class:N},[H?(0,C.getFormattedValue)(ee,H):ee]))}else Y.push(H?(0,C.getFormattedValue)(W,H):W);return(0,l.el)(".dhx_spreadsheet_cell",{class:N},s(s([D&&(0,l.el)(".dhx_lock_icon.dxi.dxi-key")],Y,!0),["select"===(null===(a=h.editor)||void 0===a?void 0:a.type)?[(0,l.el)(".dxi.dxi-menu-down.dhx_spreadsheet_cell_icon.drop-down",{onclick:function(){return t.startEdit(c)}}),(0,l.el)(".dhx_spreadsheet_cell-placeholder")]:null,v&&[(0,l.el)(".dxi.dxi-filter-variant.dhx_spreadsheet_cell_icon.filter".concat(y?"-filtered":""),{onclick:function(e){return t._showFilter(c,e)},ondblclick:function(e){return t._showFilter(c,e)}}),(0,l.el)(".dhx_spreadsheet_cell-placeholder")],!K&&(0,l.el)(".dhx_spreadsheet_cell-not_valid")],!1))};for(u=1;u<=a;u++){var w=(0,E.getLetterFromNumber)(u);p.push({id:"".concat(u),width:120,$letter:w,type:"string",header:[{text:(0,b.getHeaderCell)({letter:w,index:u,showMenuIcon:!this.config.readonly}),align:"center"}],htmlEnable:!0,template:y})}this._grid.setColumns(p),this._grid.data.parse(c),e&&this.parse(i),this._sizes.rowsCount=this.config.rowsCount,this._sizes.colsCount=this.config.colsCount},t.prototype._checkForMissedCells=function(e){var t=this._store.activePage;if(e.includes("!")){var i=e.split("!"),n=i[0];e=i[1],t=this._dataStore.getPage(n)}var o=(0,E.isRangeId)(e)?this._store.getRangeIndexes(e).end:this._store.getCellIndex(e),r=this._store.getPageMeta(t),a=r.rows,s=r.cols,l=!1;if(o.row>a.length){for(var c=a.length;c<o.row;c++)a.push({height:this._grid.config.rowHeight});t.setMeta({rows:a}),l=!0}if(o.col>s.length){for(c=s.length;c<o.col;c++)s.push({width:120});t.setMeta({cols:s}),l=!0}l&&this._updateGridSizes()},t.prototype._updateGridSizes=function(){var e,t,i=this,n=this._store.activePage,o=n.getSize(),a=o[0],s=o[1],l=this._grid.config.columns,c=this._grid.data.getLength(),u=this._store.getPageMeta(n),d=u.cols,h=u.rows,f=u.filteredRows,p=void 0===f?[]:f;if(d&&h){var v=this._grid.config.rowHeight,g=this._grid.data.getInitialData();if(s!==l.length||d.length!==s||a!==c||h.length!==c){for(;h.length<a;)h.push({height:v});for(var _=[],m=0;m<h.length;m++){for(var y=r(r({},(0,T.getCloneObject)(g[m])),{hidden:h[m].hidden||p[m],id:"".concat(m+1),$index:m+1,height:h[m].height||v}),w=0;w<=s;w++)y[w]="";_.push(y)}for(;d.length<s;)d.push({width:120});var x=l[0];x=(0,T.getCloneObject)(x);var C=[r(r({},x),{header:[{text:(0,b.getHeaderCell)({letter:"$index",index:0,nextColIsHidden:null===(e=d[0])||void 0===e?void 0:e.hidden,nextHiddenRow:h[0].hidden&&!p[0]}),css:""}],template:function(e,t){return(0,b.getIndexRowCell)(t,i._store.getPageMeta(n))}})],S=(0,T.getCloneObject)(l[l.length-1]);for(m=0;m<d.length;m++){var I=(0,E.getLetterFromNumber)(C.length),k=(0,T.getCloneObject)(l[m+1]||{});C.push(r(r({},k),{id:"".concat(C.length),width:d[m].width||120,hidden:d[m].hidden,$letter:I,type:"string",header:[{text:(0,b.getHeaderCell)({letter:I,index:C.length,showMenuIcon:!this.config.readonly,nextColIsHidden:null===(t=d[m+1])||void 0===t?void 0:t.hidden}),align:"center"}],htmlEnable:!0,template:S.template}))}this._grid.setColumns(C),this._grid.data.parse(_);var O=this.selection.getFocusedCell();if(O){var M=(0,E.getCellIds)(O),R=M.col,A=M.row,P=A>h.length-1,D=R>d.length-1;if(D||P){var F=(0,E.getCellNameById)(P?h.length:A+1,D?d.length:R+1);this.selection.setSelectedCell(F,!1)}}}}},t.prototype._updateGridState=function(){var e=this;this._grid.config.spans=[];var t=this._store.activePage.getMeta(),i=t.scroll,n=void 0===i?{x:0,y:0}:i,o=t.cols,a=t.rows,l=t.merged,c=void 0===l?new Map:l,u=t.freezedCol,d=void 0===u?"":u,h=t.freezedRow,f=void 0===h?0:h,p=this._grid.config.columns,v=p[0],g=p.slice(1),_=n.x,m=n.y;this._grid.scroll(_,m),g.forEach((function(e,t){e.width=o[t]?o[t].width:e.width}));for(var y=d?(0,E.getNumberFromLetter)(d):0,b=0,w=0;w<f;w++)this._grid.data._pull[w+1].hidden&&b++;this._grid.config.leftSplit=1+y,this._grid.config.topSplit=f-b,this._grid.setColumns(s([(0,T.getCloneObject)(v)],g,!0)),this._grid.data.forEach((function(t){var i=t.$index-1;if(a[i]){var n=a[i].height;t.height!==n&&e._grid.data.update(t.id,{height:n})}}));var x=[];c.forEach((function(t){var i=t.cell,n=t.rowspan,o=t.colspan;x.push((0,J.normalizeSpan)({row:"".concat(+i.row+1),column:"".concat(+i.column),rowspan:n+1,colspan:o+1},r({},e._grid.config),e._grid.data))})),this._grid.config.spans=x,setTimeout((function(){e.selection._removeHeadersCss(),e.selection._setHeadersCss(),e._grid.paint()}))},t.prototype._updateToolbar=function(e){void 0===e&&(e=this.selection.getFocusedCell()),e===this.selection.getFocusedCell()&&this._spreadsheetToolbar.updateToolbar()},t.prototype._setServiceEventsHandlers=function(){var e=this;this._serviceEvents.on(A.SpreadsheetServiceEvents.updateGridSizes,(function(){e._updateGridSizes()})),this._serviceEvents.on(A.SpreadsheetServiceEvents.updateGridState,(function(){e._updateGridState()})),this._serviceEvents.on(A.SpreadsheetServiceEvents.changeSheet,(function(t){e._changeSheet(t)})),this._serviceEvents.on(A.SpreadsheetServiceEvents.redraw,(function(){e._grid.paint()})),this._serviceEvents.on(A.SpreadsheetServiceEvents.recalculate,(function(){e._math.refresh(e._store.activePage.getID())})),this._serviceEvents.on(A.SpreadsheetServiceEvents.callAction,(function(t){e._callAction(t)})),this._serviceEvents.on(A.SpreadsheetServiceEvents.startEdit,(function(t){e.startEdit(t)})),this._serviceEvents.on(A.SpreadsheetServiceEvents.fitColumn,(function(t){e.fitColumn(t)})),this._serviceEvents.on(A.SpreadsheetServiceEvents.endEdit,(function(){e.endEdit()})),this._serviceEvents.on(A.SpreadsheetServiceEvents.resetFocus,(function(){H.focusManager.setFocusId(e._uid)})),this._serviceEvents.on(A.SpreadsheetServiceEvents.applyStyles,(function(t,i){e.setStyle(t,i)})),this._serviceEvents.on(A.SpreadsheetServiceEvents.setGridWidgetFocus,this._setFocusOnGrid.bind(this))},t.prototype._setEventsHandlers=function(){var e=this;this.events.on(A.SpreadsheetEvents.afterSheetChange,(function(){e._editMode=e._store.activePage.getMeta().contextPage})),this.events.on(A.SpreadsheetEvents.editLineInput,(function(t){H.focusManager.setFocusId(e._uid);var i=e.selection.getFocusedCell();e.events.fire(A.SpreadsheetEvents.cellInput,[i,t])})),this.events.on(A.SpreadsheetEvents.editLineFocus,(function(){var t=e.selection.getFocusedCell();e.startEdit(t),e._range.inline=0,requestAnimationFrame((function(){e._editLine.focus()}))})),this.events.on(A.SpreadsheetEvents.cellInput,(function(t,i){if(!e.isLocked(t)){var n=(0,E.getCellIds)(t),o=n.row,r=n.col;e._store.activePage.setCell(o,r,{nextValue:i}),e._grid.paint()}})),this._grid.events.on(f.GridEvents.cellMouseDown,(function(t,i,n){if(e.contextMenu._close(),e.sheets.contextMenu._close(),n.target.className.includes("dxi-chevron")){var o=+(0,u.locate)(n.target,"data-dhx-id")+1,r=e._store.getPageMeta().rows.slice(o).findIndex((function(e){return!e.hidden}));r<0&&(r=0);var a="A".concat(o,":A").concat(r+o);e.showRows(a)}})),this._grid.events.on(f.GridEvents.scroll,(function(t){e._linkForm.hideInfo(),e._store.activePage.setMeta({scroll:t})})),this.events.on(A.SpreadsheetEvents.afterPopupHide,(function(){H.focusManager.setFocusId(e._uid)})),this.events.on(A.SpreadsheetEvents.afterAction,(function(t,i){var n,o=e._store.activePage;switch(t){case A.Actions.resizeRow:var a=e._grid.data.map((function(t){return{height:t.$height||e._grid.config.rowHeight,changedByUser:t.changedByUser}}));o.setMeta({rows:a});break;case A.Actions.resizeCol:var s=o,c=s.getMeta().cols,u=e._grid.config.columns.slice(1).map((function(e,t){return r(r({},c[t]),{width:e.width})}));s.setMeta({cols:u});var d=(0,E.getCellsArray)(i.cell)[0],h=(0,E.getCellIds)(d).col,f=(c[h]||{}).wrappedRows,p=!1;(null==f?void 0:f.size)&&f.forEach((function(t){var i=(0,E.getCellNameById)(t+1,h+1),n=!!(0,b.setAutoHeightToRow)(i,e._grid,o,"wrap");p=p||n})),p&&e._updateGridSizes();break;case A.Actions.insertLink:e.selection.setFocusedCell(e.selection.getFocusedCell(),!1),e._grid.paint();break;case A.Actions.filter:case A.Actions.merge:case A.Actions.unmerge:(0,l.awaitRedraw)().then((function(){e._updateGridState(),e._spreadsheetToolbar.updateToolbar()}));break;case A.Actions.sortCells:o.getMeta().filter&&(null===(n=e._filterForm)||void 0===n||n.applyFilter(o)),e._updateGridSizes(),e._grid.paint();break;case A.Actions.setCellValue:case A.Actions.setCellFormat:var v=i.cell,g=i.page;if(v&&g){var _=(0,E.getCellInfo)(v,g),m=_.css,y=void 0===m?"":m,w=_.$toolbarAlign,x=_.format;if(!w){var C=(0,E.getCellIds)(v),S=C.row,I=C.col,k=g.getValue(S,I),O=e.getStyle(v);y=dhx.css.add((0,E.convertStyles)(r(r({},O),{"text-align":"number"==typeof k&&"text"!==(null==x?void 0:x.id)?"right":"left"}))),g.setCell(S,I,{css:y})}}break;case A.Actions.groupAction:e._grid.paint(),(0,l.awaitRedraw)().then((function(){e._updateGridState()}));break;case A.Actions.setCellStyle:case A.Actions.clearSheet:case A.Actions.deleteSheet:case A.Actions.renameSheet:case A.Actions.setValidation:e._grid.paint();break;case A.Actions.fitColumn:case A.Actions.toggleFreeze:e._updateGridState();break;case A.Actions.toggleVisibility:e._updateGridSizes(),e._updateGridState();break;case A.Actions.addRow:case A.Actions.addColumn:case A.Actions.deleteColumn:case A.Actions.deleteRow:e._updateGridSizes()}e._setFocusOnGrid(),e._syncEditLine()})),this.events.on(A.SpreadsheetEvents.beforeAction,(function(t,i){var n=e._grid.getScrollState();switch(e._store.activePage.setMeta({scroll:n}),t){case A.Actions.sortCells:return e._spanControl.checkBeforeAction(i.cell,i.page,O.default.sort,i);case A.Actions.filter:return e._spanControl.checkBeforeAction(i.cell,i.page,O.default.filter,i);case A.Actions.toggleFreeze:return e._spanControl.checkBeforeAction(i.cell,i.page,O.default.freeze,i);default:return!0}})),this.events.on(A.SpreadsheetEvents.beforeSelectionSet,(function(t){var i=e._range;if(i.mode)return!0;var n=e._editLine.isCellExpected(t,!1,i.inline&&i.editor||null);return n>0?(i.cursor=n,i.cell=e.selection.getFocusedCell(),i.mode=1,!0):!e.config.readonly&&(e._linkForm.hide(),e._linkForm.hideInfo(),void e.endEdit())})),this.events.on(A.SpreadsheetEvents.afterSelectionSet,(function(t){var i,n=e._range;!n.mode&&e._editMode&&e._editLine.setCellMath(),1===n.mode&&(n.mode=2,!e._editMode&&e.selection.setSelectedCell(n.cell,!1),n.mode=0,n.cursor=e._editLine.isCellExpected(t,!0,n.inline?n.editor:null,n.cell),n.cell=""),e._grid.paint();var o=(0,E.getCellIds)(t),r=o.row,a=o.col,s=e._store.activePage.getCell(r,a)||{},l=s.link;if((null==l?void 0:l.href)&&e._awaitRedraw((function(){var i;e._contextMenuVisible||(null===(i=e._linkForm)||void 0===i?void 0:i.isVisible())||e._linkForm.showInfo(t,s)})),!e._checkValidation(t)){if((0,E.isRangeId)(t))return;var c=(0,E.getCellIds)(t),u=c.row,d=c.col,h=null===(i=e.getRootNode())||void 0===i?void 0:i.querySelector('[aria-rowindex = "'.concat(u+1,'"].dhx_grid-row [aria-colindex = "').concat(d+2,'"]'));new G.tooltip("Invalid value",{node:h,position:G.Position.right,force:!0,margin:2,css:"dhx_spreadsheet-invalid-tooltip"})}})),this.events.on(A.SpreadsheetEvents.afterFocusSet,(function(t){e._range.mode||e._editMode||e._syncEditLine(t)})),this.events.on(A.SpreadsheetEvents.afterStyleChange,(function(t){e._updateToolbar(t)})),this.events.on(A.SpreadsheetEvents.afterFormatChange,(function(t){e._updateToolbar(t)})),this.events.on(A.SpreadsheetEvents.afterEditStart,(function(){e._grid.paint()})),this.events.on(A.SpreadsheetEvents.afterEditEnd,(function(t){var i;e._grid.paint();var n=(0,E.getCellInfo)(t,e._store.activePage).format;null===(i=e._editors[null==n?void 0:n.id])||void 0===i||i.hidePopup()})),this.toolbar.events.on(P.NavigationBarEvents.click,(function(t,i){"format"!==t&&"valign"!==t&&"halign"!==t&&"multiline"!==t&&(e.endEdit(),e._handleAction(t,i))})),this.contextMenu.events.on(P.NavigationBarEvents.click,(function(t,i){e.endEdit(),e._handleAction(t,i)})),this.contextMenu.events.on(P.NavigationBarEvents.beforeHide,(function(e,t){if("mouseleave"===(null==t?void 0:t.type))return!1})),this.contextMenu.events.on(P.NavigationBarEvents.afterHide,(function(){e._contextMenuVisible=!1,e.contextMenu.hide("fit-col"),e.contextMenu.show("link")})),this._grid.events.on(f.GridEvents.headerCellClick,(function(t,i,n){var o=n.target.className.includes("dhx_header_icon"),r=n.target.className.includes("dhx_hidden_col"),a=n.target.className.includes("dhx_hidden_row");if(o){e.contextMenu.hide("link"),e.contextMenu.show("fit-col");var s=e._store.getPageMeta(),l=s.selectedCells,c=s.freezedCol,d=s.freezedRow,h=l.at(-1),f=(0,E.isRangeId)(h)?e._store.getRangeIndexes(h).end:e._store.getCellIndex(h),p=f.col,v=f.row,g=(0,E.getLetterFromNumber)(p);e.contextMenu.show("hide-rows"),c?e.contextMenu.show("unfreeze-cols"):e.contextMenu.hide("unfreeze-cols"),d?e.contextMenu.show("unfreeze-rows"):e.contextMenu.hide("unfreeze-rows");var _=e._store.getRangeIndexes(h),m=_.start,y=_.end;e.contextMenu.data.update("freeze-cols",{value:O.default.freezeToCol.replace("{col}",g)}),e.contextMenu.data.update("freeze-rows",{value:O.default.freezeToRow.replace("{row}","".concat(v+1))}),e.contextMenu.data.update("hide-cols",{value:O.default[m.col!==y.col?"hideCols":"hideCol"].replace("{col}","".concat((0,E.getLetterFromNumber)(m.col)).concat(m.col!==y.col?"-".concat((0,E.getLetterFromNumber)(y.col)):""))}),e.contextMenu.data.update("hide-rows",{value:O.default[m.row!==y.row?"hideRows":"hideRow"].replace("{row}","".concat(m.row+1).concat(m.row!==y.row?"-".concat(y.row+1):""))});for(var b=e._grid.data._pull,w=!1,x=m.row;x<y.row;x++)b[x+1].hidden&&(x=y.row,w=!0);w?e.contextMenu.show("show-rows"):e.contextMenu.hide("show-rows");var C=!1,S=e._grid.config.columns;for(x=m.col;x<y.col;x++)S[x+1].hidden&&(x=y.col,C=!0);return C?e.contextMenu.show("show-cols"):e.contextMenu.hide("show-cols"),e.contextMenu.show("hide-cols"),e.contextMenu.hide("hide-rows"),void e.contextMenu.showAt(n.target,"right")}if(r){n.stopPropagation(),n.preventDefault(),n.stopImmediatePropagation();var I=+(0,u.locate)(n.target,"data-dhx-id"),k=e._store.getPageMeta().cols,M=k.slice(I).findIndex((function(e){return!e.hidden}));M<0&&!I?M=k.length-1:M<0&&(M=0);var R="".concat((0,E.getLetterFromNumber)(I+1),"1:").concat((0,E.getLetterFromNumber)(M+1+I),"1");e.showCols(R)}if(a){n.stopImmediatePropagation();I=+(0,u.locate)(n.target,"data-dhx-id");var A=e._store.getPageMeta().rows;M=A.slice(I).findIndex((function(e){return!e.hidden}));M<0&&(M=A.length-1);R="A".concat(I,":A").concat(M+I);e.showRows(R)}})),this.menu.events.on(P.NavigationBarEvents.click,(function(t,i){"format"!==t&&"valign"!==t&&"halign"!==t&&(e.endEdit(),e._handleAction(t,i))})),this.menu.events.on(P.NavigationBarEvents.afterHide,this._setFocusOnGrid.bind(this)),this.events.on(A.SpreadsheetEvents.editLineBlur,(function(t,i){e._restoreFocus(i)})),this.events.on(A.SpreadsheetEvents.groupFill,(function(t,i){e._fillCells(t,i)}))},t.prototype._syncEditLine=function(e){void 0===e&&(e=this.selection.getFocusedCell());var t=(0,E.getCellIds)(e),i=t.row,n=t.col,o=this._store.activePage,r=o.getValue(i,n,!0);(0,C.isNumeric)(r)||r||(r="");var a=(0,E.getCellInfo)(e,o);this._spreadsheetToolbar.updateToolbar(),(0,I.updateToolbar)(this.toolbar,this.menu,this._store);var s=a.format;this._editLine.setValue((null==r?void 0:r.toString().startsWith("="))?(0,C.getFormattedFormula)({formula:"".concat(r),format:s,store:this._math}):(0,C.getFormattedValue)(r,s)),a&&a.locked&&this._editLine.lock(),this._grid.paint()},t.prototype._awaitRedraw=function(e){var t=this;(0,l.awaitRedraw)().then((function(){t.getRootView()&&e()}))},t.prototype._handleAction=function(e,t){var i,n=this.selection.getSelectedCell(),o=this.selection.getFocusedCell(),r=this._store.activePage,a="";-1!==(0,T.findIndex)(this.config.formats,(function(t){return t.id===e}))&&(a=e,e="format");var s="",l="",c="";if("".concat(e).includes("align")){var u="".concat(e).split("-");e=u[0],s=u[1]}if("".concat(e).endsWith("sort")){u="".concat(e).split("-");e=u[1],l=u[0]}if("".concat(e).includes("multiline")){u="".concat(e).split("-");e=u[0],c=u[1]}switch(e){case"undo":this._actionsManager.undo();break;case"redo":this._actionsManager.redo();break;case"color":case"background":this._spreadsheetToolbar.showColorpicker(e,t);break;case"border":this._spreadsheetToolbar.showBorderPopup(t);break;case"halign":this.setStyle(n,{"text-align":s});break;case"valign":this.setStyle(n,{"vertical-align":s});break;case"multiline":this.setStyle(n,{multiline:c});break;case"font-weight-bold":case"font-style-italic":case"text-decoration-line-through":case"text-decoration-underline":if(!n)return;for(var d=e.includes("line-through")?["text-decoration","line-through"]:e.split("-"),h=d.pop(),f=d.join("-"),p=0,v=n.split(",");p<v.length;p++){var g=v[p];h=(0,I.getToggledValue)(r,g,f,h,this._grid),this.setStyle(g,((i={})[f]=h,i))}break;case"clear-value":this.setValue(n,"");break;case"clear-styles":this.setStyle(n,{});break;case"clear-all":if(!n)return;this._callAction([{cell:n,action:A.Actions.setCellStyle,groupAction:(0,E.isRangeId)(n)?A.Actions.groupAction:null,val:""},{cell:n,action:A.Actions.setCellValue,groupAction:(0,E.isRangeId)(n)?A.Actions.groupAction:null,val:""},{cell:n,action:A.Actions.setValidation,groupAction:(0,E.isRangeId)(n)?A.Actions.groupAction:null,val:null}]);break;case"lock":if(!n)return;for(var _=0,m=n.split(",");_<m.length;_++){g=m[_];this.isLocked(g)?this.unlock(g):this.lock(g)}break;case"remove-row":this.deleteRow(o);break;case"add-row":this.addRow(o);break;case"remove-col":this.deleteColumn(o);break;case"add-col":this.addColumn(o);break;case"fit-col":this.fitColumn(n.split(":")[0]);break;case"help":window.open("https://docs.dhtmlx.com/spreadsheet/guides/");break;case"format":this.setFormat(n,a),this.paint();break;case"export-xlsx":this.export.xlsx();break;case"import-xlsx":this.load("","xlsx");break;case"validation":this._validationForm||(this._validationForm=new q.ValidationForm(this.events,this.setValidation.bind(this))),this._validationForm.show(n,(0,E.getCellInfo)(n,r));break;case"sort":this.sortCells(n,"asc"===l?1:-1);break;case"search":this.search("",!0);break;case"link":this._contextMenuVisible=!1,this._showLinkPopup(o);break;case"filter":var y=r.getMeta().filter;this.setFilter(n,y?null:[]);break;case"merge":this.mergeCells(n,this.toolbar.data.getItem("merge").active);break;case"freeze-cols":this.freezeCols(n);break;case"freeze-rows":this.freezeRows(n);break;case"unfreeze-cols":this.unfreezeCols(n);break;case"unfreeze-rows":this.unfreezeRows(n);break;case"hide-cols":this.hideCols(n);break;case"hide-rows":this.hideRows(n);break;case"show-rows":this.showRows(n);break;case"show-cols":this.showCols(n)}},t.prototype._parseCell=function(e){var t=this._store.activePage,i=e;if(e.includes("!")){var n=e.split("!");i=n[1],t=this._dataStore.getPage(n[0])}return{cleanCell:i,page:t}},t.prototype._fillCells=function(e,t){var i=this,n=[e],o=[t];if((0,E.isRangeId)(e)){var a=(0,S.getCellsDiff)(e.split(":")[1],t.split(":")[1],this._store).isLargerByX?"row":"col";n=(0,E.getRangeMatrix)(e,this._store,a).map((function(e){return e.length>1?e[0]+":"+e[e.length-1]:e[0]})),o=(0,E.getRangeMatrix)(t,this._store,a).map((function(e){return e.length>1?e[0]+":"+e[e.length-1]:e[0]}))}var l=[],c=[],u=n.reduce((function(e,t,n){var a,s,u=o[n];if((0,E.isRangeId)(t))s=[],i.eachCell((function(e){var t,n=(0,E.getCellIds)(e),o=n.row,a=n.col;if(!(null===(t=i._grid)||void 0===t?void 0:t.isRowHidden(o+1))){var l=r({},i._store.activePage.getCell(o,a)),c=i._store.activePage.getValue(o,a,!0);l.value=!(0,T.isDefined)(c)||(0,E.doesContainUrl)(c)?"":c,s.push(l)}}),t);else{var d=t,h=(0,E.getCellIds)(d),f=r({},i._store.activePage.getCell(h.row,h.col)),p=i._store.activePage.getValue(h.row,h.col,!0);f.value=(0,j.getExcelDateFromString)(p,f.format)||"";var v=(null===(a=f.format)||void 0===a?void 0:a.id)||(0,C.getDefaultFormats)()[0].id;s=v.includes("date")||v.includes("time")||f.spanId?[f]:(0,E.doesContainUrl)(p)?"":p}if(Array.isArray(s)){if(t===u)return e;var g=(0,S.getAutoFilledCells)(s,t,u,i._math,i._store);u=g.cells,s=g.value,l.push.apply(l,g.spans)}var _=i.getStyle(t,!1),m=i.getFormat(t),y=[],b=[];if(i.eachCell((function(e){var t=(0,E.getCellInfo)(e,i._store.activePage),n=t.editor,o=t.link;y.push(null==n?void 0:n.options),b.push(o||null)}),t),i.eachCell((function(e){c.push({cell:e,action:A.Actions.unmerge,groupAction:A.Actions.unmerge,page:i._store.activePage})}),u),e.push({cell:u,action:A.Actions.setCellFormat,groupAction:(0,E.isRangeId)(u)?A.Actions.groupAction:null,val:m,page:i._store.activePage},{cell:u,action:A.Actions.setCellStyle,groupAction:(0,E.isRangeId)(u)?A.Actions.groupAction:null,val:_,page:i._store.activePage,replace:!0},{cell:u,action:A.Actions.setValidation,groupAction:A.Actions.groupAction,val:y,page:i._store.activePage}),"string"==typeof s&&s.startsWith("=")){var w=(0,E.getCellIds)(t);i.eachCell((function(t){var n=(0,E.getCellIds)(t),o=i._math.transposeMath(s,n.row-w.row,n.col-w.col);e.push({cell:t,action:A.Actions.setCellValue,groupAction:null,val:o,page:i._store.activePage})}),u)}else e.push({cell:u,action:A.Actions.setCellValue,groupAction:(0,E.isRangeId)(u)?A.Actions.groupAction:null,val:s,page:i._store.activePage});return e.push({cell:u,action:A.Actions.insertLink,groupAction:A.Actions.groupAction,val:b,page:i._store.activePage}),e}),[]),d=[];l.forEach((function(e){d.push({cell:e,action:A.Actions.merge,groupAction:A.Actions.merge,page:i._store.activePage,$autofill:!0})})),this._callAction(s(s(s([],c,!0),u,!0),d,!0))},t.prototype._setFocusOnGrid=function(){H.focusManager.setFocusId(this._grid._uid)},t.prototype._restoreFocus=function(e){var t,i,n,o=this,r=this._editLine.getRootView().node,a=r&&r.el,s=this._range.cell||this.selection.getFocusedCell(),l=(0,E.getCellIds)(s).col<=this.config.leftSplit;if(!s||(0,E.getCellInfo)(s,this._store.activePage).edited&&!l){var c=H.focusManager.getFocusId();if(c!==this._uid&&c!==this._grid._uid&&(null===(t=this._editLine._suggest)||void 0===t?void 0:t.isVisible())&&c!==(null===(i=this._editLine._suggest._list)||void 0===i?void 0:i._uid)&&c!==(null===(n=this.sheets.tabbar)||void 0===n?void 0:n._uid))return this._spreadsheetToolbar.colorpickerTarget?void(this._activeInput=e.target):void this.endEdit();var u=e.target,d=e.relatedTarget;if(!(a&&a.contains(d)||a&&a.contains(u)&&d&&"cell_input"===d.getAttribute("data-dhx-id")||"cell_input"===(null==d?void 0:d.getAttribute("data-dhx-id"))&&"cell_input"===u.getAttribute("data-dhx-id"))){var h=u;h.focus(),setTimeout((function(){var e=o._range.cursor||h.value.length;h.selectionStart>e&&h.setSelectionRange(e,e)}),100)}}},t.prototype._initHotkeys=function(){var e=this;if(!this.config.readonly){this.keyManager=new k.KeyManager((function(t,i){return i===e._uid||i===e._grid._uid||i===e.toolbar._uid}));var t=(0,N.getKeysHandlers)(this,this._grid,this._buffer,this._editLine,this._store);for(var i in t)this.keyManager.addHotKey(i,t[i]);for(var i in this.config.hotkeys)this.keyManager.addHotKey(i,this.config.hotkeys[i])}},t.prototype._render=function(){return(0,l.el)(".dhx_widget.dhx-spreadsheet",{dhx_widget_id:this._uid,_key:this._uid},[(0,l.inject)(this._layout.getRootView())])},t}(d.View);t.Spreadsheet=te},function(e,t,i){"use strict";(function(e){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Loader=void 0;var o=i(0),r=i(27),a=i(26),s=i(0),l=function(){function t(e,t){this._parent=e,this._changes=t}return t.prototype.load=function(e,t){var i=this;if(!e.config||this._parent.events.fire(a.DataEvents.beforeLazyLoad,[]))return this._parent.loadData=e.load().then((function(e){return e?i.parse(e,t):[]})).catch((function(e){i._parent.events.fire(a.DataEvents.loadError,[e])}))},t.prototype.parse=function(e,t){var i=this;if(void 0===t&&(t=a.DataDriver.json),"json"!==t||(0,r.hasJsonOrArrayStructure)(e)||this._parent.events.fire(a.DataEvents.loadError,["Uncaught SyntaxError: Unexpected end of input"]),!((e=(t=(0,r.toDataDriver)(t)).toJsonArray(e))instanceof Array)){var l=e.total_count-1,c=e.from;if(e=e.data,0!==this._parent.getLength())return e.forEach((function(e,t){var a=c+t,l=i._parent.getId(a);if((0,o.isId)(l)){var u=i._parent.getItem(l);if(u&&u.$empty){var d=e.id||u.id;(0,s.isDefined)(e.id)&&i._parent.changeId(l,d,!0),i._parent.update(d,n(n({},e),{$empty:void 0}),!0)}}else(0,r.dhxWarning)("item not found")})),this._parent.events.fire(a.DataEvents.afterLazyLoad,[c,e.length]),this._parent.events.fire(a.DataEvents.change),e;for(var u=[],d=0,h=0;d<=l;d++)d>=c&&d<=c+e.length-1?(u.push(e[h]),h++):u.push({$empty:!0});e=u}return this._parent.getInitialData()&&this._parent.removeAll(),this._parent.$parse(e),e},t.prototype.save=function(t){for(var i=this,n=this._getUniqueOrder(),o=function(n){if(n.saving||n.pending)(0,r.dhxWarning)("item is saving");else{var o=a._findPrevState(n.id);if(o&&o.saving){var s=new e((function(e,a){o.promise.then((function(){n.pending=!1,e(i._setPromise(n,t))})).catch((function(e){i._removeFromOrder(o),i._setPromise(n,t),(0,r.dhxWarning)(e),a(e)}))}));a._addToChain(s),n.pending=!0}else a._setPromise(n,t)}},a=this,s=0,l=n;s<l.length;s++){o(l[s])}n.length&&this._parent.saveData.then((function(){i._saving=!1}))},t.prototype.updateChanges=function(e){this._changes=e},t.prototype._setPromise=function(e,t){var i,n=this;switch(e.status){case"remove":i="delete";break;case"add":i="insert";break;default:i=e.status}return e.promise=t.save(e.obj,i),e.promise.then((function(){n._removeFromOrder(e)})).catch((function(t){e.saving=!1,e.error=!0,(0,r.dhxError)(t)})),e.saving=!0,this._saving=!0,this._addToChain(e.promise),e.promise},t.prototype._addToChain=function(e){this._parent.saveData&&this._saving?this._parent.saveData=this._parent.saveData.then((function(){return e})):this._parent.saveData=e},t.prototype._findPrevState=function(e){for(var t=0,i=this._changes.order;t<i.length;t++){var n=i[t];if(n.id===e)return n}return null},t.prototype._removeFromOrder=function(e){this._changes.order=this._changes.order.filter((function(t){return!(0,r.isEqualObj)(t,e)}))},t.prototype._getUniqueOrder=function(){return this._changes.order.reduce((function(e,t){var i=e.findIndex((function(e){return e.id===t.id})),n=i>-1?e[i]:null;return n&&!1===n.saving&&"add"===n.status?"remove"===t.status?e.splice(i,1):n.obj=t.obj:n&&!1===n.saving&&"update"===n.status?e.splice(i,1,t):e.push(t),e}),[])},t}();t.Loader=l}).call(this,i(15))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XMLDriver=void 0;var n=i(130);function o(e,t){t=t||{};var i=e.attributes;if(i&&i.length)for(var n=0;n<i.length;n++)t[i[n].name]=i[n].value;var r=e.childNodes;for(n=0;n<r.length;n++){var a=r[n];if(a.nodeType===a.ELEMENT_NODE){var s=a.tagName;t[s]?("function"!=typeof t[s].push&&(t[s]=[t[s]]),t[s].push(o(a,{}))):t[s]=o(a,{})}}return t}var r=function(){function e(){}return e.prototype.toJsonArray=function(e){return this.getRows(e)},e.prototype.toJsonObject=function(e){var t;return"string"==typeof e&&(t=this._fromString(e)),o(t)},e.prototype.serialize=function(e){return(0,n.jsonToXML)(e)},e.prototype.getFields=function(e){return e},e.prototype.getRows=function(e){if("string"==typeof e&&(e=this._fromString(e)),e){var t=e.childNodes&&e.childNodes[0]&&e.childNodes[0].childNodes;return t&&t.length?this._getRows(t):null}return[]},e.prototype._getRows=function(e){for(var t=[],i=0;i<e.length;i++)"item"===e[i].tagName&&t.push(this._nodeToJS(e[i]));return t},e.prototype._fromString=function(e){try{return(new DOMParser).parseFromString(e,"text/xml")}catch(e){return null}},e.prototype._nodeToJS=function(e){var t={};if(this._haveAttrs(e))for(var i=e.attributes,n=0;n<i.length;n++){var o=i[n],r=o.name,a=o.value;t[r]=this._toType(a)}if(e.nodeType===e.TEXT_NODE)return t.value=t.value||this._toType(e.textContent),t;var s=e.childNodes;if(s)for(n=0;n<s.length;n++){var l=s[n],c=l.tagName;c&&("items"===c&&l.childNodes?t[c]=this._getRows(l.childNodes):this._haveAttrs(l)?t[c]=this._nodeToJS(l):t[c]=this._toType(l.textContent))}return t},e.prototype._toType=function(e){return"false"===e||"true"===e?"true"===e:e},e.prototype._haveAttrs=function(e){return e.attributes&&e.attributes.length},e}();t.XMLDriver=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.jsonToXML=void 0;var n=4;function o(e){return" ".repeat(e)}function r(e,t){void 0===t&&(t=n);var i=o(t)+"<item>\n";for(var a in e)Array.isArray(e[a])?(i+=o(t+n)+"<".concat(a,">\n"),i+=e[a].map((function(e){return r(e,t+2*n)})).join("\n")+"\n",i+=o(t+n)+"</".concat(a,">\n")):i+=o(t+n)+"<".concat(a,">").concat(e[a],"</").concat(a,">\n");return i+=o(t)+"</item>"}t.jsonToXML=function(e,t){void 0===t&&(t="root");for(var i='<?xml version="1.0" encoding="iso-8859-1"?>\n<'.concat(t,">"),n=0;n<e.length;n++)i+="\n"+r(e[n]);return i+"\n</".concat(t,">")}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sort=void 0;var n=i(27),o=function(){function e(){}return e.prototype.sort=function(e,t,i){this._createSorter(t),i===t&&(t=null),(i||t)&&this._sort(e,i,t)},e.prototype._createSorter=function(e){var t=this;e&&!e.rule&&(e.rule=function(i,o){var r,a,s=null!==(r=t._checkVal(e.as,i[e.by]))&&void 0!==r?r:"",l=null!==(a=t._checkVal(e.as,o[e.by]))&&void 0!==a?a:"";return(0,n.naturalCompare)(s.toString(),l.toString())})},e.prototype._checkVal=function(e,t){return e?e.call(this,t):t},e.prototype._sort=function(e,t,i){var n=this,o={asc:1,desc:-1},r=e.sort((function(e,r){var a=0;return t&&(a=t.rule.call(n,e,r)*(o[t.dir]||o.asc)),0===a&&i&&(a=i.rule.call(n,e,r)*(o[i.dir]||o.asc)),a})),a=r.findIndex((function(e){return e.$groupSummary}));if(-1!==a){var s=r[a];switch(r.splice(a,1),s.$groupSummary){case"top":r.unshift(s);break;case"bottom":r.push(s)}}return r},e}();t.Sort=o},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Group=void 0;var r=i(0),a=i(70),s=function(){function e(){this._init=[],this._groupSet=new Set}return e.prototype.group=function(e,t,i){return void 0===i&&(i={}),(null==e?void 0:e.length)&&(null==t?void 0:t.length)&&Array.isArray(e)?(this._init=o([],t,!0),this._groupSet.clear(),this._config=this.getGroupConfig(i),this._group(e,t)):t||[]},e.prototype.ungroup=function(e){var t=this._init;if(this._init=[],this._groupSet.clear(),e){for(var i={},o=function(t){var n=e[t];if(n.$group)return"continue";Object.keys(n).forEach((function(e){e.startsWith("$")&&delete n[e]})),delete n.parent,i[n.id]=n},r=0;r<e.length;r++)o(r);return t.map((function(e){return n(n({},e),i[e.id])}))}return t||[]},e.prototype.isGrouped=function(){return!!this._init.length},e.prototype.getGroupedFields=function(){return Array.from(this._groupSet)},e.prototype.getGroupConfig=function(e){var t;return e?{displayMode:e.displayMode||"column",field:e.field||"group",showMissed:null===(t=e.showMissed)||void 0===t||t}:this._config},e.prototype._group=function(e,t,i,o){var a=this;if(void 0===o&&(o=0),!(o>=e.length)){for(var s=[],l={},c=[],u="",d={},h=0;h<t.length;h++){var f=t[h],p=e[o],v="function"==typeof p||"function"==typeof(null==p?void 0:p.by),g=f[(d=this._getOrderConfig(p,f)).by],_=v?d.by:g;v||g||0===g?(this._groupSet.add(d.by),l[_]||(l[_]=[]),l[_].push(f)):(this._config.showMissed&&(delete f.parent,c.push(f)),"string"==typeof this._config.showMissed&&(u=this._config.showMissed))}var m=Object.keys(l);return u&&m.push(u),m.forEach((function(t){var u,h=l[t]||c,f=i?"".concat(i,":").concat(t):"$".concat((0,r.uid)(),":").concat(t),p={};d.map&&Object.keys(d.map).forEach((function(e){p[e]=a._toAggregate(h,d.map[e])}));var v=n(((u={id:f,$group:!0,$row:"row"===a._config.displayMode,$count:h.length})[d.by]=t,u),p);"column"===a._config.displayMode&&(v[a._config.field]=t),i&&(v.parent=i),s.push(v),o<e.length-1&&s.push.apply(s,a._group(e,h,f,o+1)),o===e.length-1&&h.forEach((function(e){s.push(n(n({},e),{parent:f}))})),d.summary&&a._addSummaryRow(s,f,d.summary,p)})),u||s.push.apply(s,c),s}},e.prototype._addSummaryRow=function(e,t,i,o){var r=n({id:"".concat(t,":summary"),parent:t,$groupSummary:i},o);if("top"===i){var a=e.findIndex((function(e){return e.id===t}));e.splice(a+1,0,r)}else e.push(r)},e.prototype._toAggregate=function(e,t){if("function"==typeof t)return t(e);var i=t[0],n=t[1];return a.methods[n]?a.methods[n](e,i):""},e.prototype._getOrderConfig=function(e,t){var i={by:"string"==typeof e&&e||"string"==typeof e.by&&e.by||"function"==typeof e&&e(t)||"function"==typeof e.by&&e.by(t)};return e.map&&(i.map=e.map),e.summary&&(i.summary=e.summary),i},e}();t.Group=s},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.dragManager=void 0;var r=i(3),a=i(134),s=i(26),l=i(27),c=i(0);var u=function(e){var t;return null===(t=e.name)||void 0===t?void 0:t.includes("grid")},d=function(e){return u(e)&&e.hasOwnProperty("scrollView")},h=function(){function e(){var e=this;this._transferData={},this._canMove=!0,this._isDrag=!1,this._lastOverItemId=null,this._onMouseMove=function(t){if(e._transferData.start){var i=(0,r.getElementFromPoint)(t),n=(0,r.locate)(i,"data-dhx-drop-area"),o="common"===n,a=t.targetTouches?t.targetTouches[0].pageX:t.pageX,s=t.targetTouches?t.targetTouches[0].pageY:t.pageY;"column"===e._transferData.type&&"group"===n&&(e._transferData.type="group",e._transferData.isWasColumn=!0),"group"===e._transferData.type&&"column"===n&&e._transferData.isWasColumn&&!e._transferData.groupOnly&&(e._transferData.type="column");var l=(0,r.locate)(i);if(n===e._transferData.type||o){var c=e._transferData,u=c.x,d=c.y,h=c.start,f=c.componentId;if(!e._transferData.ghost){if(Math.abs(u-a)<3&&Math.abs(d-s)<3)return;var p=e._onDragStart(h,f,t);if(!p)return void e._endDrop(t);e._transferData.ghost=p,document.body.appendChild(e._transferData.ghost)}var v=(0,r.locate)(i,"data-dhx-widget-id");"column"!==n&&"group"!==n||v!==f?e._onDrag(t):l!==e._lastOverItemId&&(e._lastOverItemId=l,e._onDrag(t))}else e._canMove&&e.cancelCanDrop(t);e._notAllowedDropArea(n!==e._transferData.type&&!o||!e._transferData.groupable&&"group"===n||e._transferData.groupOnly&&"group"!==n&&!o&&e._transferData.start!=l),e._moveGhost(a,s)}},this._onMouseUp=function(t){e._transferData.x&&(e._transferData.ghost?(e._removeGhost(),e._onDrop(t)):e._endDrop(t),t.targetTouches?(document.removeEventListener("touchmove",e._onMouseMove),document.removeEventListener("touchend",e._onMouseUp)):(document.removeEventListener("mousemove",e._onMouseMove),document.removeEventListener("mouseup",e._onMouseUp)))}}return e.prototype.setItem=function(e,t){a.collectionStore.setItem(e,t)},e.prototype.onMouseDown=function(e){var t=e.event,i=e.itemsForGhost,n=e.ghost,s=e.source,l=e.type,c=e.groupable,d=e.groupOnly;if(1===t.which||t.targetTouches){t.targetTouches?(document.addEventListener("touchmove",this._onMouseMove,!1),document.addEventListener("touchend",this._onMouseUp,!1)):(document.addEventListener("mousemove",this._onMouseMove),document.addEventListener("mouseup",this._onMouseUp));var h=(0,r.getElementFromPoint)(t),f=(0,r.locateNode)(h,"data-dhx-id"),p=f&&f.getAttribute("data-dhx-id"),v=(0,r.locateNode)(h,"data-dhx-widget-id"),g=null==v?void 0:v.getAttribute("data-dhx-widget-id");if(n&&(this._ghost=n),Array.isArray(s)&&s.includes(p)?(this._transferData.source=o([],s,!0),this._itemsForGhost=i):(this._transferData.source=[p],this._itemsForGhost=null),p&&g){var _=(0,r.getBox)(f),m=u(a.collectionStore.getItem(g))?(0,r.getBox)(v).left:_.left,y=t.targetTouches?t.targetTouches[0].pageX:t.pageX,b=t.targetTouches?t.targetTouches[0].pageY:t.pageY;this._transferData.initXOffset="row"===l?y-m:0,this._transferData.initYOffset="row"===l?b-_.top:0,this._transferData.x=y,this._transferData.y=b,this._transferData.componentId=g,this._transferData.start=p,this._transferData.item=f,this._transferData.type=l,this._transferData.groupable=c,this._transferData.groupOnly=d}}},e.prototype.isDrag=function(){return this._isDrag},e.prototype.cancelCanDrop=function(e){this._canMove=!1;var t=this._transferData,i=t.start,n=t.source,o=t.target,r=t.dropComponentId,l={start:i,source:n,target:o,dragItem:t.type},c=a.collectionStore.getItem(r);c&&o&&c.events.fire(s.DragEvents.cancelDrop,[l,e,this._transferData.type]),this._transferData.dropComponentId=null,this._transferData.target=null},e.prototype._moveGhost=function(e,t){this._transferData.ghost&&(this._transferData.ghost.style.left=e-this._transferData.initXOffset+"px",this._transferData.ghost.style.top=t-this._transferData.initYOffset+"px")},e.prototype._removeGhost=function(){this._ghost=null,document.body.removeChild(this._transferData.ghost)},e.prototype._onDrop=function(e){if(this._canMove){var t=this._transferData,i=t.start,n=t.source,o=t.target,r=t.dropComponentId,l={start:i,source:n,target:o,dropPosition:t.dropPosition},c=a.collectionStore.getItem(r),u=c&&c.config;if(c&&"source"!==u.dragMode){if(c.events.fire(s.DragEvents.beforeDrop,[l,e,this._transferData.type])){var d={id:o,component:c},h={id:i,component:this._transferData.component,newId:null};this._move(h,d),h.newId&&h.component!==d.component&&(l.start=h.newId),d.component.events.fire(s.DragEvents.afterDrop,[l,e,this._transferData.type])}this._endDrop(e)}else this._endDrop(e)}else this._endDrop(e)},e.prototype._onDragStart=function(e,t,i){var n=a.collectionStore.getItem(t),o=n.config,r=this._transferData,l={start:r.start,source:r.source,target:r.target};if("target"===o.dragMode||n._pregroupData)return null;var d="row"===this._transferData.type?function(e,t,i){void 0===i&&(i=!1);var n=e.getBoundingClientRect(),o=document.createElement("div"),r=e.cloneNode(!0),a=window.getComputedStyle(e.parentElement).fontSize;return r.style.width=n.width+"px",r.style.height=n.height+"px",r.style.maxHeight=n.height+"px",r.style.opacity="0.8",r.style.fontSize=a,i&&t&&t.length||o.appendChild(r),t&&t.length&&t.forEach((function(e,t){var r=e.cloneNode(!0);r.style.getPropertyPriority("width")||(r.style.width=n.width+"px"),r.style.height=n.height+"px",r.style.maxHeight=n.height+"px",r.style.top=12*(t+1)-n.height-n.height*t+"px",r.style.left=12*(t+1)+"px",r.style.opacity="0.6",r.style.zIndex="".concat(-t-1),i||(r.style.fontSize=a,r.style.overflow="hidden"),o.appendChild(r)})),o.className="dhx_drag-ghost",o}(this._transferData.item,this._itemsForGhost,u(n)):this._ghost;return n.events.fire(s.DragEvents.beforeDrag,[l,i,d,this._transferData.type])&&(0,c.isId)(e)?(n.events.fire(s.DragEvents.dragStart,[l,i,this._transferData.type]),this._isDrag=!0,this._toggleTextSelection(!0),this._transferData.component=n,this._transferData.dragConfig=o,d):null},e.prototype._onDrag=function(e){var t=(0,r.getElementFromPoint)(e),i=(0,r.locate)(t,"data-dhx-widget-id"),n=a.collectionStore.getItem(i);if(n){var o=!!(0,r.locateNodeByClassName)(t,"dhx_grid-header")||!!(0,r.locateNodeByClassName)(t,"dhx_grid-footer"),c=n.config.columns?n.config:void 0,u=c&&("both"===c.dragItem||"column"===c.dragItem);if(!o||u){var d=(0,r.locate)(t,"data-dhx-id"),h=(0,r.locate)(t,"data-dhx-root-id");if(!d&&!h)return this.cancelCanDrop(e),this._transferData.dropComponentId=i,this._transferData.target=null,void this._canDrop(e);var f=this._transferData,p=f.dropComponentId,v=f.start,g=f.source,_=f.target,m=f.componentId,y=f.dropPosition;if("complex"===n.config.dropBehaviour){var b=function(e){var t=e.targetTouches?e.targetTouches[0].clientY:e.clientY,i=(0,r.locateNode)((0,r.getElementFromPoint)(e));if(!i)return null;var n=i.childNodes[0];if(n){var o=n.getBoundingClientRect();return(t-o.top)/o.height}}(e);n.config.group?this._transferData.dropPosition=b<=.5?"top":"bottom":this._transferData.dropPosition=b<=.25?"top":b>=.75?"bottom":"in"}else if((_===d||!d&&_===h)&&p===i)return;var w={id:v,component:this._transferData.component};if("source"!==n.config.dragMode)if(w.component.events.fire(s.DragEvents.dragOut,[{start:v,source:g,target:_},e,this._transferData.type]),i!==m||!(0,l.isTreeCollection)(w.component.data)||(0,l.isTreeCollection)(w.component.data)&&w.component.data.canCopy(w.id,d)){this.cancelCanDrop(e);var x=this._transferData.target=d||h;this._transferData.dropComponentId=i,w.component.events.fire(s.DragEvents.dragIn,[{start:v,source:g,target:x,dropPosition:y},e,this._transferData.type])&&this._canDrop(e)}else this.cancelCanDrop(e)}else this._canMove&&this.cancelCanDrop(e)}else this._canMove&&this.cancelCanDrop(e)},e.prototype._move=function(e,t){var i=e.component,r=t.component,a=e.component.data,s=t.component.data,h=0,f=t.id,p=(0,l.isTreeCollection)(s)?t.component.config.dropBehaviour:void 0,v=e.component.config.columns?e.component.config:void 0,g=v&&("both"===v.dragItem||"column"===v.dragItem)&&v.columns.map((function(e){return e.id})).filter((function(i){return i===e.id||i===t.id})).length;if(g&&e.component===t.component){if(e.id===t.id)return;var _=(m=i.config.columns.map((function(e){return n({},e)}))).findIndex((function(t){return t.id===e.id}));if(-1===(w=m.findIndex((function(e){return e.id===t.id}))))return;return m.splice(w,0,m.splice(_,1)[0]),i.setColumns(m),void i.paint()}if(g&&e.component&&d(e.component)&&t.component&&d(t.component)){_=(m=i.config.columns.map((function(e){return n({},e)}))).findIndex((function(t){return t.id===e.id}));var m,y=r.config.columns.map((function(e){return n({},e)})),b=r.data.getLength(),w=y.findIndex((function(e){return e.id===t.id})),x=[],C=e.id;i.data.forEach((function(t){var i;x.push(((i={id:t.id})[C]=t[e.id],i))})),b?i.data.forEach((function(e,t){var i=r.data.getItem(e.id);i?r.data.update(i.id,n(n({},i),x[t])):r.data.add(x[t])})):r.data.parse(x);var E=m.splice(_,1)[0];return y.find((function(e){return e.id===C}))||y.splice(w,0,E),r.setColumns(y),r.paint(),i.setColumns(m),void i.paint()}var S=t.id===r.config.rootParent;switch(p){case"child":break;case"sibling":f=s.getParent(f),h=s.getIndex(t.id)+1;break;case"complex":var I=this._transferData.dropPosition;if(S)f=t.id,h=s.getLength();else{var k=s.getIndex(e.id);"top"===I?(f=s.getParent(f),h=s.getIndex(t.id)-(-1===k||k>s.getIndex(t.id)?0:1)):"bottom"===I&&(f=s.getParent(f),h=s.getIndex(t.id)+(-1===k||k>s.getIndex(t.id)?1:0))}break;default:(0,c.isId)(t.id)?(s.getIndex(e.id)>-1&&(e.newId=(0,c.uid)()),h=s.getIndex(t.id)):h=-1}if(this._transferData.dragConfig.dragCopy)this._transferData.source instanceof Array&&this._transferData.source.length>1?this._transferData.source.map((function(e){a.copy(e,h,s,f),h>-1&&h++})):a.copy(e.id,h,s,f);else if(this._transferData.source instanceof Array&&this._transferData.source.length>1)a.move(this._transferData.source,h,s,f);else if(u(r)&&!r.config.columns.length){var O=i.data.getItem(e.id);r.data.parse([n({},O)]),r.setColumns(o([],i.config.columns,!0)),r.paint(),i.data.remove(e.id),i.paint()}else a.move(e.id,h,s,f,e.newId)},e.prototype._endDrop=function(e){if(this._toggleTextSelection(!1),this._notAllowedDropArea(!1),this._transferData.component){var t=this._transferData,i={start:t.start,source:t.source,target:t.target};this._transferData.component.events.fire(s.DragEvents.afterDrag,[i,e,this._transferData.type])}this.cancelCanDrop(e),this._canMove=!0,this._isDrag=!1,this._lastOverItemId=null,this._transferData={},this._transferData.target=null,this._transferData.dropComponentId=null},e.prototype._canDrop=function(e){this._canMove=!0;var t=this._transferData,i={start:t.start,source:t.source,target:t.target,dropPosition:t.dropPosition},n=a.collectionStore.getItem(this._transferData.dropComponentId);n&&this._transferData.target&&n.events.fire(s.DragEvents.canDrop,[i,e,this._transferData.type])},e.prototype._toggleTextSelection=function(e){e?document.body.classList.add("dhx_no-select"):document.body.classList.remove("dhx_no-select")},e.prototype._notAllowedDropArea=function(e){e?document.body.classList.contains("dhx_drop-area--not-allowed")||document.body.classList.add("dhx_drop-area--not-allowed"):document.body.classList.remove("dhx_drop-area--not-allowed")},e}(),f=window.dhxHelpers=window.dhxHelpers||{};f.dragManager=f.dragManager||new h,t.dragManager=f.dragManager},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.collectionStore=t.CollectionStore=void 0;var n=i(0),o=function(){function e(){this._store={}}return e.prototype.setItem=function(e,t){this._store[e]=t},e.prototype.getItem=function(e){return(0,n.isId)(e)&&this._store[e]?this._store[e]:null},e}();t.CollectionStore=o;var r=window.dhxHelpers=window.dhxHelpers||{};r.collectionStore=r.collectionStore||new o,t.collectionStore=r.collectionStore},function(e,t,i){"use strict";(function(e){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.LazyDataProxy=void 0;var r=i(33),a=i(0),s=i(51),l=function(t){function i(e,i){var n=t.call(this,e)||this;return n.config=(0,a.extend)({from:0,limit:50,delay:50,prepare:0},i),n.updateUrl(e,{from:n.config.from,limit:n.config.limit}),n}return o(i,t),i.prototype.load=function(){var t=this;return new e((function(e,i){t._timeout?(clearTimeout(t._timeout),t._timeout=setTimeout((function(){s.ajax.get(t.url,{responseType:"text"}).then(e).catch(i),t._cooling=!0}),t.config.delay),t._cooling&&(e(null),t._cooling=!1)):(s.ajax.get(t.url,{responseType:"text"}).then(e).catch(i),t._cooling=!0,t._timeout=setTimeout((function(){})))}))},i}(r.DataProxy);t.LazyDataProxy=l}).call(this,i(15))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Selection=void 0;var n=i(4),o=i(39),r=i(26),a=i(0),s=function(){function e(e,t,i){var o=this;this.events=i||new n.EventSystem(this),this.config=e,this._data=t,this._selected=null,this._data.events.on(r.DataEvents.removeAll,(function(){o._selected=null})),this._data.events.on(r.DataEvents.change,(function(){if((0,a.isId)(o._selected)){var e=o._data.getNearId(o._selected);e!==o._selected&&(o._selected=null,e&&o.add(e))}}))}return e.prototype.getId=function(){return this._selected},e.prototype.getItem=function(){return(0,a.isId)(this._selected)?this._data.getItem(this._selected):null},e.prototype.remove=function(e){return e=null!=e?e:this._selected,!(0,a.isDefined)(e)||!!this.events.fire(o.SelectionEvents.beforeUnSelect,[e])&&(this._data.update(e,{$selected:!1},!0),this._selected=null,this.events.fire(o.SelectionEvents.afterUnSelect,[e]),!0)},e.prototype.add=function(e){this._selected!==e&&!this.config.disabled&&this._data.exists(e)&&(this.remove(),this._addSingle(e))},e.prototype.enable=function(){this.config.disabled=!1},e.prototype.disable=function(){this.remove(),this.config.disabled=!0},e.prototype._addSingle=function(e){this.events.fire(o.SelectionEvents.beforeSelect,[e])&&(this._selected=e,this._data.update(e,{$selected:!0},!0),this.events.fire(o.SelectionEvents.afterSelect,[e]))},e}();t.Selection=s},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Exporter=void 0;var r=i(20),a=i(11),s=i(0),l=i(21),c=i(3),u=i(1);var d=function(){function e(e,t,i){this._name=e,this._version=t,this._view=i}return e.prototype.pdf=function(e){this._rawExport(e,"pdf",this._view)},e.prototype.png=function(e){this._rawExport(e,"png",this._view)},e.prototype.xlsx=function(e){return this._export(e)},e.prototype.csv=function(e){var t;void 0===e&&(e={}),e=n({asFile:!0,rowDelimiter:"\n",columnDelimiter:",",skipHeader:0},e),t="getRoot"in this._view.data&&e.flat?this.getFlatCSV(e):this._getCSV(e);var i=e.name||"grid_export";return e.asFile&&(0,s.downloadFile)(t,"".concat(i,".csv"),"text/csv"),t},e.prototype._export=function(e){var t=this;void 0===e&&(e={});for(var i=this._view.config.columns.filter((function(e){return!e.hidden})),n={},o=(0,r.transpose)(i.map((function(e){return e.header.map((function(e){return e.text||" "}))}))),a=[],s={default:{color:"#000000",background:"#FFFFFF",fontSize:14,bold:!1}},c=[],u={},d={},h=this._view.data.serialize().map((function(e,o){var a=t._view.data.getItem(e.id);a.$css&&(d[a.id]=a.$css),n[e.id]=o;var s=i.map((function(t,i){if(u[t.id]=i,e[t.id]instanceof Date){var n=t.dateFormat||"%M %d %Y";"string"==typeof e[t.id]?e[t.id]=(0,l.getFormattedDate)(n,(0,l.stringToDate)(e[t.id],n)):"object"==typeof e[t.id]&&(e[t.id]=(0,l.getFormattedDate)(n,e[t.id]))}return(0,r.removeHTMLTags)(e[t.id])}));return s})),f=[],p=0,v=i;p<v.length;p++){var g=v[p];if(g.footer){var _=g.footer[0],m=_.text;"function"==typeof m&&(m=m(this._view.getSummary(g.id)),(0,r.isHtmlEnable)(this._view.config,g,_)&&(m=(0,r.removeHTMLTags)(m))),f.push(_.css||m||" ")}var y="number"===g.type?"right":g.align;for(var b in a.push({width:g.$width,align:y}),g.$cellCss){var w="dhx_grid-cell ".concat(g.$cellCss[b].trim()),x=this._getHash(w),C="dhx_grid-row";if(d[b]&&(C+=" ".concat(d[b].trim())),!s[x])(E=(0,r.getStyleByClass)(w,C,s.default))&&(s[x]=E);s[x]&&c.push([n[b],i.indexOf(g),x])}for(var b in d)if(!g.$cellCss[b]){var E,S=this._getHash(d[b]);C="dhx_grid-row ".concat(d[b].trim());if(!s[S])(E=(0,r.getStyleByClass)("dhx_grid-cell",C,s.default))&&(s[S]=E);s[S]&&c.push([n[b],i.indexOf(g),S])}}f.length&&h.push(f);var I={name:e.name||"data",columns:a,header:o,data:h,styles:{cells:c,css:s}};if(e.url){var k=document.createElement("form");k.setAttribute("target","_blank"),k.setAttribute("action",e.url),k.setAttribute("method","POST"),k.style.visibility="hidden";var O=document.createElement("textarea");O.setAttribute("name","data"),O.value=JSON.stringify(I),k.appendChild(O),document.body.appendChild(k),k.submit(),setTimeout((function(){k.parentNode.removeChild(k)}),100)}return I},e.prototype.getFlatCSV=function(e){var t=this._view.data,i=t.getRoot(),n=this._view.config.columns[0],r=t.getMaxLevel(),s="";t.eachChild(i,(function(i){var o=function(e,t){for(var i=[],o=0;o<=r;o++)if(e&&e[n.id]){i[e.$level]=e[n.id];var a=t.getParent(e.id,!0);e=a&&a.id?a:null}else i[o]="";return i}(i,t).join(e.columnDelimiter);s+=o+Object.keys(i).reduce((function(t,n,o){return"id"===n||"parent"===n||n.startsWith("$")||0===o?t:t+e.columnDelimiter+(null===i[n]?"":i[n])}),""),s+=e.rowDelimiter}));var l=this._export(e),c=function(e,t){for(var i=0;i<e.length;i++)e[i]=t;return e}(new Array(r+1),""),u=l.header.map((function(e){return e.splice.apply(e,o([0,1],c,!1)),e}));return new a.CsvDriver(e).serialize(u,!0)+e.rowDelimiter+s},e.prototype._getCSV=function(e){var t=this._export(e),i=t.header,n=new a.CsvDriver(e);return n.serialize(i,!0)+"\n"+n.serialize(t.data,!0)},e.prototype._rawExport=function(e,t,i){var o;void 0===e&&(e={});var r=document.createElement("div");r.setAttribute("style","display: none;");var a=i.config,l=a.$headerHeight,d=void 0===l?0:l,h=a.$footerHeight,f=void 0===h?0:h,p=a.$totalHeight,v=void 0===p?0:p,g=a.$footer,_=a.columns,m="",y=i.config.exportStyles;if(("boolean"==typeof e.exportStyles||Array.isArray(e.exportStyles))&&(y=e.exportStyles),e.url=e.url||"https://export.dhtmlx.com/"+this._name+"/"+t+"/"+this._version,"pdf"===t){var b=e.pdf;e.pdf=n(n({},b),{printBackground:!1,format:null!==(o=null==b?void 0:b.format)&&void 0!==o?o:"A4"})}var w=i.config.$totalWidth,x=v+d;g&&(x+=f);for(var C=[],E=0;E<_.length;E++){var S=_[E];C.push(n(n({},S),{width:S.$width}))}var I=n(n({},i.config),{width:w,height:x,columns:C,data:i.data.getRawData(0,-1,null,2),keyNavigation:!1,selection:!1,resizable:!1}),k=new i.constructor(r,(0,s.getCloneObject)(I));(0,u.awaitRedraw)().then((function(){!0===y?m="".concat((0,c.getPageLinksCss)(),"<style>").concat((0,c.getPageInlineCss)(),"</style>"):Array.isArray(y)&&y.length&&(m="".concat((0,c.getPageLinksCss)(y)));var i=r.children[0];null==i||i.setAttribute("data-dhx-theme",e.theme||"light"),"png"===t&&(null==i||i.setAttribute("style","width: ".concat(w,"px;")));var n="\n\t\t\t\t\t".concat(m,"\n\t\t\t\t\t").concat(r.innerHTML,"\n\t\t\t\t"),o=document.createElement("form");o.setAttribute("method","POST"),o.setAttribute("action",e.url),o.innerHTML='<input type="hidden" name="raw"><input type="hidden" name="config">',o.childNodes[0].value=n,o.childNodes[1].value=JSON.stringify(e),document.body.appendChild(o),o.submit(),setTimeout((function(){var e,t;k.destructor(),null===(e=r.parentNode)||void 0===e||e.removeChild(r),null===(t=o.parentNode)||void 0===t||t.removeChild(o)}),100)})).catch((function(){var e;k.destructor(),null===(e=r.parentNode)||void 0===e||e.removeChild(r)}))},e.prototype._getHash=function(e){return e.split("").reduce((function(e,t){var i=(e<<5)-e+t.charCodeAt(0);return Math.abs(i&i)}),0).toString()},e}();t.Exporter=d},function(e,t,i){"use strict";var n=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Selection=t.GridSelectionEvents=void 0;var o,r=i(1),a=i(11),s=i(0),l=i(4),c=i(8),u=i(16),d=i(23),h=i(20),f=i(31),p=i(17);!function(e){e.beforeUnSelect="beforeUnSelect",e.afterUnSelect="afterUnSelect",e.beforeSelect="beforeSelect",e.afterSelect="afterSelect"}(o||(t.GridSelectionEvents=o={}));var v=function(){function e(e,t,i,n){this._grid=e,this.config=t||{},this._gridId=n,this._selectedCell=null,this._selectedCells=[],this._type=["cell","row","complex"].includes(this._grid.config.selection)&&this._grid.config.selection||"complex",this._multiselection=!!e.config.multiselection,this.events=i||new l.EventSystem(this),this._init()}return e.prototype.setCell=function(e,t,i,o){var a,s,l,c,d,h,f,p,v,g,_,m,y=this;void 0===i&&(i=!1),void 0===o&&(o=!1);var b="tree"===this._grid.config.type;if(this._gridId&&u.focusManager.getFocusId()!==this._gridId&&u.focusManager.setFocusId(this._gridId),"row"===this._type&&(null===(l=this._selectedCells[0])||void 0===l?void 0:l.row.id)===((null==e?void 0:e.id)||e)||"row"!==this._type&&(null===(c=this._selectedCells[0])||void 0===c?void 0:c.row.id)===((null==e?void 0:e.id)||e)&&(null===(d=this._selectedCells[0])||void 0===d?void 0:d.column.id)===((null==t?void 0:t.id)||t)){if(i)return this._removeCell(null===(h=this._selectedCells[0])||void 0===h?void 0:h.row,null===(f=this._selectedCells[0])||void 0===f?void 0:f.column),void(0,r.awaitRedraw)().then((function(){y._grid.paint(),y._setBrowserFocus()}));if(!this._multiselection||this._multiselection&&1===this._selectedCells.length)return}if(!(this.config.disabled||this._grid.config.$editable||!this._multiselection&&this._selectedCells.length&&!this._removeCell(null===(p=this._selectedCell)||void 0===p?void 0:p.row,null===(v=this._selectedCell)||void 0===v?void 0:v.column))){if(this._multiselection){if(i||o||this._removeCells(),this._selectedCells.find((function(i){return"row"===y._type?i.row.id===((null==e?void 0:e.id)||e):i.row.id===((null==e?void 0:e.id)||e)&&i.column.id===((null==t?void 0:t.id)||t)})))return void this.removeCell((null==e?void 0:e.id)||e,(null==t?void 0:t.id)||t);o&&this._selectedCells.length>1&&!b&&n([],this._selectedCells,!0).forEach((function(e,t){var i=e.row,n=e.column;t>0&&y.removeCell(i.id,n.id)}))}e=this._grid.data.getItem(e&&e.id||e);var w=null===(_=null===(g=this._grid.config)||void 0===g?void 0:g.columns)||void 0===_?void 0:_.filter((function(e){return!e.hidden}));if(t||(t=null==w?void 0:w[0]),(t=this._grid.getColumn(t.id||t))&&e){if(this._multiselection&&o&&this._selectedCells.length&&!b){var x=null===(m=this._selectedCells)||void 0===m?void 0:m[0],C=this._grid.data.getIndex(x.row.id),E=this._grid.data.getIndex(e.id);if(C>E&&(C=(a=[E,C])[0],E=a[1]),"cell"===this._type||"complex"===this._type){var S=w.map((function(e){return e.id})),I=S.indexOf(x.column.id),k=S.indexOf(t.id);if(-1!==I&&-1!==k){I>k&&(I=(s=[k,I])[0],k=s[1]);var O=w.slice(I,k+1);this._grid.data.mapRange(C,E,(function(e){O.forEach((function(t){-1===y._findIndex({row:e,column:t})&&y._setCell(e,t)}))}))}}else this._grid.data.mapRange(C,E,(function(e){-1===y._findIndex({row:e,column:t})&&y._setCell(e,t)}))}else this._setCell(e,t);(0,r.awaitRedraw)().then((function(){y._grid.paint(),y._setBrowserFocus()}))}}},e.prototype.removeCell=function(e,t){var i=this;if(e&&t&&("cell"===this._type||"complex"===this._type)){var n=this._selectedCells.find((function(i){var n=i.row,o=i.column;return n.id==e&&o.id==t}));n&&this._removeCell(n.row,n.column)}else if(e){this._selectedCells.filter((function(t){return t.row.id==e})).forEach((function(e){var t=e.row,n=e.column;i._removeCell(t,n)}))}else this._removeCells();(0,r.awaitRedraw)().then((function(){i._grid.paint()}))},e.prototype.getCell=function(){return this._selectedCell},e.prototype.getCells=function(){return this._selectedCells},e.prototype.disable=function(){this.removeCell(),this.config.disabled=!0,this._grid.paint()},e.prototype.enable=function(){this.config.disabled=!1,this._grid.paint()},e.prototype.toHTML=function(){var e=this;if(!this._isUnselected()){if(this._multiselection){var t=[],i={};return this._selectedCells.forEach((function(n,o,r){var a=(0,f.normalizeCell)(n,e._grid);t.push(e._toHTML(a.row,a.column,o===r.length-1||"cell"===e._type||"complex"===e._type,i[n.row.id])),i[n.row.id]=!0})),t}var n=(0,f.normalizeCell)(this._selectedCell,this._grid);return this._toHTML(n.row,n.column,!0)}},e.prototype._setCell=function(e,t){e&&t&&(0,s.isDefined)(e.id)&&(0,s.isDefined)(t.id)&&this.events.fire(o.beforeSelect,[e,t])&&(this._selectedCell={row:e,column:t},this._multiselection?this._selectedCells.push(this._selectedCell):this._selectedCells=[this._selectedCell],this.events.fire(o.afterSelect,[e,t]))},e.prototype._removeCell=function(e,t,i){var n,r;if(void 0===i&&(i=!1),!(e&&t&&(0,s.isDefined)(e.id)&&(0,s.isDefined)(t.id)))return!1;if(!i&&!this.events.fire(o.beforeUnSelect,[e,t]))return!1;var a=this._selectedCells.findIndex((function(i){return i.row.id===e.id&&i.column.id===t.id}));return this._selectedCells.splice(a,1),this._selectedCell&&t.id===this._selectedCell.column.id&&e.id===this._selectedCell.row.id&&(this._selectedCell=(null===(n=this._selectedCells)||void 0===n?void 0:n[(null===(r=this._selectedCells)||void 0===r?void 0:r.length)-1])||null),!i&&this.events.fire(o.afterUnSelect,[e,t]),!0},e.prototype._removeCells=function(e){var t=this;void 0===e&&(e=!1),n([],this._selectedCells,!0).forEach((function(i){t._removeCell(null==i?void 0:i.row,null==i?void 0:i.column,e)}))},e.prototype._init=function(){var e=this;this._grid.events.on(c.GridEvents.cellClick,(function(t,i,n){e.setCell(t,i,n.ctrlKey||n.metaKey,n.shiftKey)})),this._grid.data.events.on(a.DataEvents.beforeRemove,(function(t){var i,n;if(t&&e._selectedCell&&e._selectedCell.row&&e._selectedCell.row.id===t.id){var o=void 0,r=e._grid.data.getIndex(t.id);if(e._grid.data instanceof a.TreeCollection){var l=e._grid.data.getItems(t.parent);o=(null===(i=l[r+1])||void 0===i?void 0:i.id)||(null===(n=l[r-1])||void 0===n?void 0:n.id)||t.parent}else o=e._grid.data.getId(r+1)||e._grid.data.getId(r-1);(0,s.isId)(o)&&(e.setCell(o),e._grid.paint())}})),this._grid.data.events.on(a.DataEvents.removeAll,(function(){e._removeCells()})),this._grid.data.events.on(a.DataEvents.load,(function(){e._removeCells(!0)}))},e.prototype._toHTML=function(e,t,i,n){var o,a,l,u,f,v,g,_,m,y,b,w,x;void 0===i&&(i=!1),void 0===n&&(n=!1);var C=this._grid.data.getRawData(0,-1,null,2);if(-1===(0,s.findIndex)(C,(function(t){return t.id==e.id})))return null;var E=this._grid.config,S=E.topSplit,I=E.bottomSplit,k=E.$totalWidth,O=E.$totalHeight,M=E.columns,R=null==M?void 0:M.filter((function(e){return!e.hidden})),A={left:(0,d.getCurrFixedCols)(this._grid.config,c.Split.left),right:(0,d.getCurrFixedCols)(this._grid.config,c.Split.right)},P=this._grid.data.getLength(),T={top:S?this._grid.data.getRawData(0,S):[],bottom:I?this._grid.data.getRawData(P-I,P):[]},D={left:null===(o=null==A?void 0:A.left)||void 0===o?void 0:o.map((function(e){return e.id})),right:null===(a=null==A?void 0:A.right)||void 0===a?void 0:a.map((function(e){return e.id}))},F={top:T.top.map((function(e){return e.id})),bottom:T.bottom.map((function(e){return e.id}))},V=null===(l=null==A?void 0:A.left)||void 0===l?void 0:l.reduce((function(e,t){return e+(t.$width||0)}),0),L=null===(u=null==A?void 0:A.right)||void 0===u?void 0:u.reduce((function(e,t){return e+(t.$width||0)}),0),N=T.top.reduce((function(e,t){return e+(0,p.getTotalRowHeight)(t)}),0),H=T.bottom.reduce((function(e,t){return e+(0,p.getTotalRowHeight)(t)}),0),j=this._grid.getCellRect(e.id,t.id);e.$subRowHeight&&e.$opened&&(j.height=j.height-e.$subRowHeight);var z,$,B,q,W=this._grid.getScrollState(),G=j.y,U=null===(f=F.top)||void 0===f?void 0:f.includes(e.id),X=null===(v=D.left)||void 0===v?void 0:v.includes(t.id),Y=A.left.length&&V>j.x-W.x,K=T.top.length&&N>j.y-W.y,J=j.width,Z=j.height-1,Q=null,ee=null,te=Y?V+W.x:j.x;if(Y&&(J-=(X?(0,h.getTotalWidth)(A.left.slice(0,R.indexOf(t))):V)-(j.x-W.x)),K&&(Z-=(U?(0,h.getTotalHeight)(T.top.slice(0,C.indexOf(e))):N)-(j.y-W.y)-1,G+=j.height-Z),U)if(G=j.y+W.y,(ne=this._grid.getSpan(e.id,t.id))&&ne.rowspan>1){var ie=C.indexOf(e);Q=(0,h.getTotalHeight)(T.top.slice(ie,ie+ne.rowspan))}else Z=S===F.top.indexOf(e.id)+1?j.height-1:j.height;if(X)if(te=j.x+W.x,(ne=this._grid.getSpan(e.id,t.id))&&ne.colspan>1){ie=null==R?void 0:R.indexOf(t);ee=(0,h.getTotalWidth)(A.left.slice(ie,ie+ne.colspan))}else J=A.left.length===D.left.indexOf(t.id)+1?j.width-1:j.width;if((null===(g=A.right)||void 0===g?void 0:g.length)||I){var ne=this._grid.getSpan(e.id,t.id),oe=this._getReverseScrollState(W);if((null===(_=A.right)||void 0===_?void 0:_.length)&&(z=(null===(m=D.right)||void 0===m?void 0:m.includes(t.id))||ne&&R.indexOf(t)+(ne.colspan||1)>R.length-A.right.length,($=k-L<oe.x+j.x+j.width)&&!z&&(J-=oe.x+j.x+j.width-k+L),z))if(ne&&!(null===(y=D.right)||void 0===y?void 0:y.includes(ne.column))){ie=R.length-R.indexOf(t)-(ne.colspan||1);var re=k-L;te=j.x+oe.x<re+1?j.x:re-oe.x+1,ee=(0,h.getTotalWidth)(ie?A.right.slice(0,-ie):A.right)-1,J=j.width-oe.x}else{var ae=(null===(b=D.right)||void 0===b?void 0:b.indexOf(t.id))?0:1;te=j.x-oe.x+ae,J=j.width-ae}if(I&&(B=F.bottom.includes(e.id)||ne&&C.indexOf(e)+(ne.rowspan||1)>C.length-I,(q=O-H<oe.y+j.y+j.height)&&!B&&(Z-=oe.y+j.y+j.height-O+H),B))if(ne&&!F.bottom.includes(ne.row)){var se=O-H;ae=(ie=C.length-C.indexOf(e)-(ne.rowspan||1))?0:1;G=j.y+oe.y<se?j.y:se-oe.y,Q=(0,h.getTotalHeight)(ie?T.bottom.slice(0,-ie):T.bottom)-ae,Z=j.height-oe.y-ae}else G=j.y-oe.y,Z=j.height-(I===F.bottom.indexOf(e.id)+1?1:0)}var le=null;"row"!==this._type&&"complex"!==this._type||n||(le=(0,r.el)(".dhx_grid-selected-row",{style:{width:(null===(w=A.left)||void 0===w?void 0:w.length)?k-W.x:k,height:Z,minHeight:Q,minWidth:ee,display:Z<0&&!Q?"none":"flex",top:G,left:(null===(x=A.left)||void 0===x?void 0:x.length)?W.x:0,position:"absolute"}}));var ce=null;return"cell"!==this._type&&"complex"!==this._type||!i||(ce=(0,r.el)(".dhx_grid-selected-cell",{style:{width:J,height:Z,top:G,minHeight:Q,minWidth:ee,left:te,position:"absolute",display:J<0&&!ee||Z<0&&!Q?"none":"flex",borderLeft:Y&&!X?"none":null,borderRight:$&&!z?"none":null,borderTop:K&&!U?"none":null,borderBottom:q&&!B?"none":null}})),(0,r.el)(".dhx_grid-selection",{style:{zIndex:20}},[le,ce])},e.prototype._isUnselected=function(){return!this._selectedCell||!this._selectedCell.row||!this._selectedCell.column||0===this._selectedCells.length},e.prototype._findIndex=function(e){var t=this;void 0===e&&(e=this._selectedCell);var i=-1;return this._selectedCells.some((function(n,o){if("cell"===t._type||"complex"===t._type){if((0,s.compare)(n.row,e.row)&&(0,s.compare)(n.column,e.column))return i=o,!0}else if("row"===t._type&&(0,s.compare)(n.row,e.row))return i=o,!0})),i},e.prototype._setBrowserFocus=function(){var e=this._grid.getRootView().data.getRootNode();if(e){var t=e.querySelector(".dhx_grid_data");if(t&&this._selectedCell&&this._selectedCell.row&&this._selectedCell.column){var i=t.querySelector('[data-dhx-id="'.concat(this._selectedCell.row.id,'"]')),n=this._grid.getSpan(this._selectedCell.row.id,this._selectedCell.column.id);if(i){var o=n?e.querySelector(".dhx_span-spans"):null,r=o?o.querySelector('[data-dhx-col-id="'.concat(n.column,'"][data-dhx-id="').concat(n.row,'"]')):i.querySelector('[data-dhx-col-id="'.concat(this._selectedCell.column.id,'"]'));r&&(r.tabIndex=0,r.focus({preventScroll:!0}))}}}},e.prototype._getReverseScrollState=function(e){var t,i=(0,d.calcScrollBarWidth)(this._grid.config,!!(null===(t=this._grid.scrollView)||void 0===t?void 0:t.config.enable)),n=this._grid.config.$totalWidth-this._grid.config.$width+d.BORDERS+i.y,o=this._grid.config.$totalHeight-this._grid.config.$height+this._grid.config.$headerHeight+this._grid.config.$footerHeight+d.BORDERS+i.x;return{x:n>0?n-e.x:0,y:o>0?o-e.y:0}},e}();t.Selection=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEditor=void 0;var n,o=i(8),r=i(140),a=i(141),s=i(142),l=i(151),c=i(152),u=i(159),d={cell:{row:null,col:null},editor:null,gridId:null};t.getEditor=function(e,t,i,h){var f="boolean"===t.type?"checkbox":i.$editable.editorType;if(void 0===f&&(f=i.autoHeight?"textarea":"input"),d.cell.row===e.id&&d.cell.col===t.id&&d.gridId===i.gridId&&i.$editable.editor)return d.editor;switch("checkbox"!==f&&(d={cell:{row:e.id,col:t.id},editor:d.editor,gridId:i.gridId}),n||(n=function(){d={cell:{row:null,col:null},editor:null,gridId:null}},i.events.on(o.GridEvents.afterEditEnd,n)),f){case"input":default:return d.editor=new r.InputEditor(e,t,i);case"textarea":return d.editor=new u.TextAreaEditor(e,t,i,h);case"select":return d.editor=new a.SelectEditor(e,t,i);case"datePicker":return d.editor=new s.DateEditor(e,t,i);case"checkbox":return new l.CheckboxEditor(e,t,i);case"multiselect":case"combobox":return d.editor=new c.ComboboxEditor(e,t,i)}}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.InputEditor=void 0;var o=i(1),r=i(8),a=i(0),s=i(40),l=function(){function e(e,t,i){this.prevValue="",this._config=i,this._cell={row:e,col:t},this.type=t.type,this._initHandlers()}return e.prototype.endEdit=function(e){if(this._config.$editable){var t;if(!e&&(t=this._removeValuePattern(this._input.value,!0),"number"===this.type||this._cell.col.numberMask))if(t=parseFloat(t),Number.isNaN(t))t="";else{var i=this._cell.col.editorConfig,n=parseFloat(null==i?void 0:i.min),o=parseFloat(null==i?void 0:i.max);(0,a.isDefined)(null==i?void 0:i.min)&&t<n&&(t=n),(0,a.isDefined)(null==i?void 0:i.max)&&t>o&&(t=o)}this._config.events.fire(r.GridEvents.beforeEditEnd,[t,this._cell.row,this._cell.col])?(this._cell.row=this._config.datacollection.getItem(this._cell.row.id),this._config.$editable=null,this._config.events.fire(r.GridEvents.afterEditEnd,[t,this._cell.row,this._cell.col])):this._input.focus()}},e.prototype.toHTML=function(e){var t;(0,a.isDefined)(e)&&(this.type="string"),e=null!==(t=this._input?this._input.value:null!=e?e:this._cell.row[this._cell.col.id])&&void 0!==t?t:"";var i=this._cell.col.numberMask;return(0,a.isDefined)(null==i?void 0:i.maxDecLength)&&(i=n(n({},i),{maxDecLength:void 0})),e=this._applyValuePattern(e,this._input,!0,i),this._config.$editable.editor=this,(0,o.el)("input.dhx_cell-editor.dhx_cell-editor__input",{_hooks:{didInsert:this._handlers.didInsert},_key:"cell_editor","data-dhx-id":"cell_editor",onblur:this._handlers.onBlur,oninput:this._handlers.onInput,value:e})},e.prototype._initHandlers=function(){var e=this;this._handlers={onBlur:function(){e.endEdit()},onInput:function(){var t=e._removeValuePattern(e._input.value);"number"===e.type&&(e._isValidWord(t)?e.prevValue=t:t=e.prevValue,!e.prevValue.length||"-"===e.prevValue||e._isCorrectRange(parseFloat(e.prevValue))?e._input.classList.remove("dhx_cell-editor__input--not-valid"):e._input.classList.add("dhx_cell-editor__input--not-valid")),e._input.value=e._applyValuePattern(t,e._input)},didInsert:function(t){e._input=t.el,e._input.focus()}}},e.prototype._isValidWord=function(e){var t,i=null===(t=e[e.length-1])||void 0===t?void 0:t.toLocaleLowerCase(),n=function(e,t){return e.toLocaleLowerCase().split(t.toLocaleLowerCase()).length-1};return!e.length||"-"===e||"."===e||"-."===e&&this._cell.col.numberMask||!isNaN(Number(e))&&e.trim().length===e.length||e.replace("-","").length>1&&"e"===i&&!n(this.prevValue,"e")||e.replace("-","").length>1&&"e"===i&&1===n(e,"e")},e.prototype._isCorrectRange=function(e){var t=!0,i=this._cell.col.editorConfig,n=parseFloat(null==i?void 0:i.min),o=parseFloat(null==i?void 0:i.max);return(0,a.isDefined)(null==i?void 0:i.min)&&(0,a.isDefined)(null==i?void 0:i.max)?t=e>=n&&e<=o:(0,a.isDefined)(null==i?void 0:i.min)?t=e>n:(0,a.isDefined)(null==i?void 0:i.max)&&(t=e<o),t},e.prototype._applyValuePattern=function(e,t,i,o){return void 0===i&&(i=!1),this._cell.col.numberMask?(0,s.numberMask)(e.toString(),n(n({},o||this._cell.col.numberMask),{onlyView:i}),t):this._cell.col.patternMask?(0,s.patternMask)(e.toString(),this._cell.col.patternMask,t):e},e.prototype._removeValuePattern=function(e,t){return void 0===t&&(t=!1),this._cell.col.numberMask?(0,s.removeNumberMask)(e,n(n({},this._cell.col.numberMask),{lastCall:t})):this._cell.col.patternMask?(0,s.removePatternMask)(e,this._cell.col.patternMask):e},e}();t.InputEditor=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectEditor=void 0;var n=i(1),o=i(8),r=i(17),a=function(){function e(e,t,i){this._config=i,this._cell={row:e,col:t},this._initHandlers()}return e.prototype.endEdit=function(e){var t;this._config.$editable&&(e||(t=this._input.value),this._config.events.fire(o.GridEvents.beforeEditEnd,[t,this._cell.row,this._cell.col])?(this._input.removeEventListener("blur",this._handlers.onBlur),this._input.removeEventListener("keydown",this._handlers.onkeydown),this._cell.row=this._config.datacollection.getItem(this._cell.row.id),this._config.$editable=null,this._config.events.fire(o.GridEvents.afterEditEnd,[t,this._cell.row,this._cell.col])):this._input.focus())},e.prototype.toHTML=function(){var e=(0,r.getEditorOptions)(this._cell.col,this._cell.row).map((function(e){return"string"==typeof e?{id:"".concat(e),value:e}:e}))||[],t=this._cell.row[this._cell.col.id];this._input&&(t=this._input.options[this._input.selectedIndex].value);var i=e.map((function(e){return(0,n.el)("option",{selected:e.id.toString()===(null==t?void 0:t.toString()),value:e.id},e.value)}));return this._config.$editable.editor=this,(0,n.el)("select.dhx_cell-editor.dhx_cell-editor__select",{_hooks:{didInsert:this._handlers.didInsert},_key:"cell_editor","data-dhx-id":"cell_editor"},i)},e.prototype._initHandlers=function(){var e=this;this._handlers={onBlur:function(){e.endEdit()},onkeydown:function(t){"Escape"===t.key&&e.endEdit()},didInsert:function(t){var i=t.el;e._input=i,i.focus(),i.addEventListener("blur",e._handlers.onBlur),i.addEventListener("keydown",e._handlers.onkeydown)}}},e}();t.SelectEditor=a},function(e,t,i){"use strict";var n=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]])}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.DateEditor=void 0;var o=i(1),r=i(8),a=i(41),s=i(21),l=i(10),c=function(){function e(e,t,i){var n=this;this._config=i,this._cell={row:e,col:t},this._editorConfig=this._cleanConfig(t),this._calendar=new a.Calendar(null,this._editorConfig),this._calendar.setValue(this._getValue(this._cell.row[this._cell.col.id])),this._value=this._calendar.getValue(),this._cell.row[this._cell.col.id]=this._value,this._popup=new l.Popup,this._popup.attach(this._calendar),this._calendar.events.on(a.CalendarEvents.change,(function(){n.endEdit(!1,!0)})),this._popup.events.on(l.PopupEvents.afterHide,(function(){n.endEdit()})),this._initHandlers()}return e.prototype.endEdit=function(e,t){var i=this;if(this._handlers&&this._config.$editable){var n=this._calendar.config.dateFormat,a=this._cell.row[this._cell.col.id],l=this._input.value;if(!e){if(a instanceof Date||t)return this._value=this._calendar.getValue(),this._input.value=this._value,void this._popup.hide();!(0,s.stringToDate)(l,n,!0)&&l||(!a||l.length!==a.length)&&a&&l||(this._value=l)}var c=this._calendar.getValue(this._editorConfig.asDateObject);this._config.events.fire(r.GridEvents.beforeEditEnd,[c,this._cell.row,this._cell.col])?(this._input.removeEventListener("focus",this._handlers.onFocus),this._input.removeEventListener("change",this._handlers.onChange),document.removeEventListener("mousedown",this._handlers.onOuterClick),(0,o.awaitRedraw)().then((function(){i._popup.destructor(),i._calendar.destructor()})),this._cell.row=this._config.datacollection.getItem(this._cell.row.id),this._config.$editable=null,this._config.events.fire(r.GridEvents.afterEditEnd,[c,this._cell.row,this._cell.col])):this._input.focus()}},e.prototype.toHTML=function(){var e=this._getValue(this._cell.row[this._cell.col.id]);return this._config.$editable.editor=this,document.addEventListener("mousedown",this._handlers.onOuterClick),(0,o.el)("input.dhx_cell-editor.dhx_cell-editor__input.dhx_cell-editor__datepicker",{_hooks:{didInsert:this._handlers.didInsert},_key:"cell_editor","data-dhx-id":"cell_editor",value:e})},e.prototype._cleanConfig=function(e){var t=e.editorConfig||{},i=(t.value,t.range,t.dateFormat,n(t,["value","range","dateFormat"]));return i.dateFormat=e.dateFormat,i},e.prototype._initHandlers=function(){var e=this;this._handlers={onFocus:function(){(0,o.awaitRedraw)().then((function(){e._popup.show(e._input,{centering:!0,mode:"bottom",theme:e._input})}))},onChange:function(){e.endEdit()},onOuterClick:function(t){if(t.target instanceof Node){var i=e._input&&e._input.contains(t.target),n=e._popup&&e._popup.getRootNode()&&e._popup.getRootNode().contains(t.target);i||n||e._popup.hide()}},didInsert:function(t){var i=t.el;e._input=i,e._input.addEventListener("focus",e._handlers.onFocus),e._input.addEventListener("change",e._handlers.onChange),i.focus(),i.setSelectionRange(i.value.length,i.value.length)}}},e.prototype._getValue=function(e){var t=this._calendar.config.dateFormat||"%M %d %Y";if("string"==typeof e&&!(0,s.stringToDate)(e,t,!0)){var i=new Date(e);if(!(null==i?void 0:i.valueOf()))return"";e=i}return e},e}();t.DateEditor=c},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Calendar=void 0;var s=i(0),l=i(1),c=i(4),u=i(9),d=i(53),h=i(150),f=i(21),p=i(81),v=i(3),g=function(e){function t(t,i){void 0===i&&(i={});var n=e.call(this,t,(0,s.extend)({weekStart:"sunday",thisMonthOnly:!1,dateFormat:window&&window.dhx&&window.dhx.dateFormat,width:"250px"},i))||this;switch(n._selected=[],n.events=new c.EventSystem,n.config.disabledDates=n.config.disabledDates||n.config.block,n.config.mode=n.config.mode||n.config.view,n.config.dateFormat||(n.config.timePicker?12===n.config.timeFormat?n.config.dateFormat="%d/%m/%y %h:%i %A":n.config.dateFormat="%d/%m/%y %H:%i":n.config.dateFormat="%d/%m/%y"),n.config.value&&n._setSelected(n.config.value),n.config.date?n._currentDate=f.DateHelper.toDateObject(n.config.date,n.config.dateFormat):n._getSelected()?n._currentDate=f.DateHelper.copy(n._getSelected()):n._currentDate=new Date,n.config.mode){case"month":n._currentViewMode="month";break;case"year":n._currentViewMode="year";break;case"timepicker":n._currentViewMode=n.config.timePicker?"timepicker":"calendar";break;default:n._currentViewMode="calendar"}if(n._initHandlers(),n.config.timePicker){n._timepicker=new d.Timepicker(null,{timeFormat:n.config.timeFormat,controls:!0});var o=n._getSelected()||new Date;n._timepicker.setValue(o),n._time=n._timepicker.getValue(),n._timepicker.events.on(d.TimepickerEvents.afterClose,(function(){n._timepicker.setValue(n._time),n.showDate(null,"calendar")})),n._timepicker.events.on(d.TimepickerEvents.afterApply,(function(){var e=n._timepicker.getValue(!0),t=e.hour,i=e.minute,o=e.AM,r=n._getSelected(),a=f.DateHelper.withHoursAndMinutes(n._getSelected()||new Date,t,i,o);n.events.fire(p.CalendarEvents.beforeChange,[a,r,!0])&&(n._selected[n._selected.length-1]=a,n.events.fire(p.CalendarEvents.change,[a,r,!0])),n._time=n._timepicker.getValue(),n.showDate(null,"calendar")}))}return n.mount(t,(0,l.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype.setValue=function(e){if(!e||e instanceof Array&&0===e.length)return!1;var t=e instanceof Array?e[0]:e,i=f.DateHelper.toDateObject(t,this.config.dateFormat),n=f.DateHelper.copy(this._getSelected());return!!this.events.fire(p.CalendarEvents.beforeChange,[i,n,!1])&&(this._selected=[],this._setSelected(e),this._timepicker&&(this._timepicker.setValue(i),this._time=this._timepicker.getValue()),this.showDate(this._getSelected()),this.events.fire(p.CalendarEvents.change,[i,n,!1]),this.paint(),!0)},t.prototype.getValue=function(e){var t=this;return void 0===e&&(e=!1),this._selected[0]?this.config.range?e?this._selected.map((function(e){return f.DateHelper.copy(e)})):this._selected.map((function(e){return(0,f.getFormattedDate)(t.config.dateFormat,e)})):e?f.DateHelper.copy(this._selected[0]):(0,f.getFormattedDate)(this.config.dateFormat,this._selected[0]):""},t.prototype.getCurrentMode=function(){return this._currentViewMode},t.prototype.showDate=function(e,t){e&&(this._currentDate=f.DateHelper.copy(e)),t&&(this._currentViewMode=t),this.paint()},t.prototype.destructor=function(){this._linkedCalendar&&this._unlink(),this._timepicker&&this._timepicker.destructor(),this.events&&this.events.clear(),this.config=this.events=null,this._uid=this._selected=this._currentDate=this._currentViewMode=this._handlers=this._timepicker=this._time=null,this.unmount()},t.prototype.clear=function(){var e=this.getValue(!0);this.events.fire(p.CalendarEvents.beforeChange,["",e,!1])&&(this.config.timePicker&&(this._timepicker.clear(),this._time=this._timepicker.getValue()),this._selected=[],this.showDate(null,this.config.mode),this.events.fire(p.CalendarEvents.change,[this.getValue(!0),e,!1,"clear"]))},t.prototype.link=function(e){var t=this;this._linkedCalendar&&this._unlink(),this._linkedCalendar=e;var i=this.getValue(!0),n=e.getValue(!0),o=i&&f.DateHelper.dayStart(i),r=n&&f.DateHelper.dayStart(n);this.config.$rangeMark&&this._linkedCalendar.config.$rangeMark||(this.config.$rangeMark=this._linkedCalendar.config.$rangeMark=function(e){if(o&&r)return e>=o&&e<=r&&function(e){if(f.DateHelper.isSameDay(r,o))return null;var t="dhx_calendar-day--in-range";return f.DateHelper.isSameDay(e,o)&&(t+=" dhx_calendar-day--first-date"),f.DateHelper.isSameDay(e,r)&&(t+=" dhx_calendar-day--last-date"),t}(e)}),this.config.disabledDates&&this._linkedCalendar.config.disabledDates||(this.config.disabledDates=function(e){if(r)return e>r},this._linkedCalendar.config.disabledDates=function(e){if(o)return e<o}),this.config.thisMonthOnly=!0,e.config.thisMonthOnly=!0,this.events.on(p.CalendarEvents.change,(function(e){o=e?f.DateHelper.dayStart(e):null,t._linkedCalendar.paint()}),"link"),this._linkedCalendar.events.on(p.CalendarEvents.change,(function(e){r=e?f.DateHelper.dayStart(e):null,t.paint()}),"link"),this._linkedCalendar.paint(),this.paint()},t.prototype._unlink=function(){this._linkedCalendar&&(this.config.$rangeMark=this._linkedCalendar.config.$rangeMark=null,this.config.disabledDates=this._linkedCalendar.config.disabledDates=null,this.events.detach(p.CalendarEvents.change,"link"),this._linkedCalendar.events.detach(p.CalendarEvents.change,"link"),this._linkedCalendar.paint(),this._linkedCalendar=null)},t.prototype._setSelected=function(e){var t=this,i=e instanceof Array?e[0]:e,n=f.DateHelper.toDateObject(i,this.config.dateFormat);if(e instanceof Array&&this.config.range){var o=[];e.forEach((function(e,i){i<2&&o.push(f.DateHelper.toDateObject(e,t.config.dateFormat))})),2===o.length&&o[0]<o[1]?o.forEach((function(e){return t._selected.push(e)})):this._selected[0]=o[0]}else this._selected[0]=n},t.prototype._getSelected=function(){return this._selected[this._selected.length-1]},t.prototype._draw=function(){switch(this._currentViewMode){case"calendar":return this.events.fire(p.CalendarEvents.modeChange,["calendar"]),this._drawCalendar();case"month":return this.events.fire(p.CalendarEvents.modeChange,["month"]),this._drawMonthSelector();case"year":return this.events.fire(p.CalendarEvents.modeChange,["year"]),this._drawYearSelector();case"timepicker":return this.events.fire(p.CalendarEvents.modeChange,["timepicker"]),this._drawTimepicker()}},t.prototype._initHandlers=function(){var e=this,t={Up:"ArrowUp",Down:"ArrowDown",Right:"ArrowRight",Left:"ArrowLeft",Esc:"Escape",Spacebar:"Space"},i=function(t){void 0===t&&(t=!1);var i=0;switch(e._currentViewMode){case"calendar":i=t?-7:7;break;case"month":case"year":i=t?-4:4}return i};this._handlers={onkeydown:{".dhx_calendar-year, .dhx_calendar-month, .dhx_calendar-day":function(n,o){switch(function(e){var i;if(e.which>=48&&e.which<=57||e.which>=65&&e.which<=90)i=String.fromCharCode(e.which);else{var n=32===e.which?e.code:e.key;i=(0,v.isIE)()&&t[n]||n}return i}(n)){case"Enter":e._selectDate(n,o);break;case"ArrowLeft":e._moveBrowseFocus(n,o,-1);break;case"ArrowRight":e._moveBrowseFocus(n,o,1);break;case"ArrowUp":e._moveBrowseFocus(n,o,i(!0));break;case"ArrowDown":e._moveBrowseFocus(n,o,i())}}},onclick:{".dhx_calendar-year, .dhx_calendar-month, .dhx_calendar-day":function(t,i){e._selectDate(t,i)},".dhx_calendar-action__cancel":function(){e.showDate(e._getSelected(),"calendar"),e.events.fire(p.CalendarEvents.cancelClick,[])},".dhx_calendar-action__show-month":function(){return e.showDate(null,"month")},".dhx_calendar-action__show-year":function(){return e.showDate(null,"year")},".dhx_calendar-action__next":function(){var t;switch(e._currentViewMode){case"calendar":t=f.DateHelper.addMonth(e._currentDate,1);break;case"month":t=f.DateHelper.addYear(e._currentDate,1);break;case"year":t=f.DateHelper.addYear(e._currentDate,12)}e.showDate(t)},".dhx_calendar-action__prev":function(){var t;switch(e._currentViewMode){case"calendar":t=f.DateHelper.addMonth(e._currentDate,-1);break;case"month":t=f.DateHelper.addYear(e._currentDate,-1);break;case"year":t=f.DateHelper.addYear(e._currentDate,-12)}e.showDate(t)},".dhx_calendar-action__show-timepicker":function(){e._currentViewMode="timepicker",e.paint()}},onmouseover:{".dhx_calendar-day":function(t,i){e.events.fire(p.CalendarEvents.dateMouseOver,[new Date(i.attrs._date),t]),e.events.fire(p.CalendarEvents.dateHover,[new Date(i.attrs._date),t])}}}},t.prototype._getData=function(e){var t,i=this;switch(this._isSelectedInCurrentRange=!1,this.config.weekStart){case"saturday":t=-1;break;case"monday":t=1;break;default:t=0}for(var n=[],o=6,r=f.DateHelper.weekStart(f.DateHelper.monthStart(e),t);o--;){for(var a=f.DateHelper.getWeekNumber(r),s=0,l=7,c=[],u=function(){var t=f.DateHelper.isWeekEnd(r),n=e.getMonth()===r.getMonth(),o=d.config.disabledDates&&d.config.disabledDates(r),a=[];if(d.config.range&&d._selected[0]&&d._selected[1]){var l=function(){if(i._selected[0]&&i._selected[1]){var e=f.DateHelper.dayStart(i._selected[0]),t=f.DateHelper.dayStart(i._selected[1]);return r>=e&&r<=t&&(f.DateHelper.isSameDay(i._selected[0],i._selected[1])?null:"dhx_calendar-day--in-range")}};d.config.$rangeMark=l}if(t&&a.push("dhx_calendar-day--weekend"),n||(d.config.thisMonthOnly?(s++,a.push("dhx_calendar-day--hidden")):a.push("dhx_calendar-day--muffled")),d.config.mark){var u=d.config.mark(r);u&&a.push(u)}d.config.$rangeMark&&((l=d.config.$rangeMark(r))&&a.push(l));o&&(t?a.push("dhx_calendar-day--weekend-disabled"):a.push("dhx_calendar-day--disabled")),d._selected.forEach((function(e,t){if(e&&f.DateHelper.isSameDay(e,r)){i._isSelectedInCurrentRange=!0;var n="dhx_calendar-day--selected";i.config.range&&(n+=" dhx_calendar-day--selected-".concat(0===t?"first ":"last")),a.push(n)}})),c.push({date:r,day:r.getDate(),css:a.join(" ")}),r=f.DateHelper.addDay(r)},d=this;l--;)u();n.push({weekNumber:a,days:c,disabledWeekNumber:7===s})}return n},t.prototype._drawCalendar=function(){var e,t=this,i=this._currentDate,n=this.config,o=n.weekStart,s=n.thisMonthOnly,c=n.css,u=n.timePicker,d=n.width;switch(o){case"saturday":e=a([f.locale.daysShort[6]],f.locale.daysShort.slice(0,-1),!0);break;case"monday":e=a(a([],f.locale.daysShort.slice(1),!0),[f.locale.daysShort[0]],!1);break;default:e=f.locale.daysShort}for(var h,p=e.map((function(e){return(0,l.el)(".dhx_calendar-weekday",e)})),v=this._getData(i),g=!0,_=this._getSelected(),m=function(e){var i={role:"button",tabindex:-1,"aria-pressed":"false"};return e&&(t._isSelectedInCurrentRange?function(e){return e&&_&&e.getTime()===_.getTime()}(e.date)&&(i.tabindex=0,i["aria-pressed"]="true"):g&&(i.tabindex=0),g=!1),i},y=[],b=[],w=0,x=v;w<x.length;w++){var C=x[w],E=C.days.map((function(e){return(0,l.el)("div.dhx_calendar-day",r({class:e.css,_date:e.date},m(e)),e.day)}));!this.config.weekNumbers||C.disabledWeekNumber&&s||b.push((0,l.el)("div",{class:"dhx_calendar-week-number"},C.weekNumber)),y=y.concat(E)}this.config.weekNumbers&&(h=(0,l.el)(".dhx_calendar__week-numbers",b));var S="dhx_calendar dhx_widget"+(c?" "+c:"")+(u?" dhx_calendar--with_timepicker":"")+(this.config.weekNumbers?" dhx_calendar--with_week-numbers":"");return(0,l.el)("div",r({class:S,style:{width:this.config.weekNumbers?parseInt(d.toString())+48+"px":d}},this._handlers),[(0,l.el)(".dhx_calendar__wrapper",[this._drawHeader((0,l.el)("button.dhx_calendar-action__show-month.dhx_button.dhx_button--view_link.dhx_button--size_small.dhx_button--color_secondary.dhx_button--circle",{"aria-live":"polite",type:"button"},f.locale.months[i.getMonth()]+" "+i.getFullYear())),this.config.weekNumbers&&(0,l.el)(".dhx_calendar__dates-wrapper",[(0,l.el)(".dhx_calendar__weekdays",p),(0,l.el)(".dhx_calendar__days",y),h]),!this.config.weekNumbers&&(0,l.el)(".dhx_calendar__weekdays",p),!this.config.weekNumbers&&(0,l.el)(".dhx_calendar__days",y),u?(0,l.el)(".dhx_timepicker__actions",[(0,l.el)("button.dhx_calendar__timepicker-button.dhx_button.dhx_button--view_link.dhx_button--size_small.dhx_button--color_secondary.dhx_button--width_full.dhx_button--circle.dhx_calendar-action__show-timepicker",{type:"button"},[(0,l.el)("span.dhx_button__icon.dxi.dxi-clock-outline"),(0,l.el)("span.dhx_button__text",this._time)])]):null])])},t.prototype._drawMonthSelector=function(){var e=this._currentDate,t=e.getMonth(),i=this._getSelected()?this._getSelected().getFullYear():null,n=this.config,o=n.css,a=n.timePicker,s=n.weekNumbers,c=n.width,u=n.mode,d="dhx_calendar dhx_widget"+(o?" "+o:"")+(a?" dhx_calendar--with_timepicker":"")+(s?" dhx_calendar--with_week-numbers":""),h=!0,p=i===e.getFullYear(),v=function(e){return p&&t===e};return(0,l.el)("div",r({class:d,style:{width:s?parseInt(c.toString())+48+"px":c}},this._handlers),[(0,l.el)(".dhx_calendar__wrapper",[this._drawHeader((0,l.el)("button.dhx_calendar-action__show-year.dhx_button.dhx_button--view_link.dhx_button--size_small.dhx_button--color_secondary.dhx_button--circle",{"aria-live":"polite",type:"button"},e.getFullYear())),(0,l.el)(".dhx_calendar__months",f.locale.monthsShort.map((function(e,t){return(0,l.el)("div",r(r({class:"dhx_calendar-month"+(v(t)?" dhx_calendar-month--selected":"")},function(e,t){var i={role:"button",tabindex:-1,"aria-pressed":"false"};return e&&(p?v(t)&&(i.tabindex=0,i["aria-pressed"]="true"):h&&(i.tabindex=0),h=!1),i}(e,t)),{_date:t}),e)}))),"month"!==u?(0,l.el)(".dhx_calendar__actions",[(0,l.el)("button.dhx_button.dhx_button--color_primary.dhx_button--view_link.dhx_button--size_small.dhx_button--width_full.dhx_button--circle.dhx_calendar-action__cancel",{type:"button"},f.locale.cancel)]):null])])},t.prototype._drawYearSelector=function(){var e=this,t=this._currentDate,i=f.DateHelper.getTwelweYears(t),n=this.config,o=n.css,a=n.timePicker,s=n.weekNumbers,c=n.width,u=n.mode,d="dhx_calendar dhx_widget"+(o?" "+o:"")+(a?" dhx_calendar--with_timepicker":"")+(s?" dhx_calendar--with_week-numbers":""),h=!0,p=this._getSelected()&&i.includes(this._getSelected().getFullYear()),v=function(t){return e._getSelected()&&t===e._getSelected().getFullYear()};return(0,l.el)("div",r({class:d,style:{width:s?parseInt(c.toString())+48+"px":c}},this._handlers),[(0,l.el)(".dhx_calendar__wrapper",[this._drawHeader((0,l.el)("button.dhx_button.dhx_button--view_link.dhx_button--size_small.dhx_button--color_secondary.dhx_button--circle",{"aria-live":"polite",type:"button"},i[0]+"-"+i[i.length-1])),(0,l.el)(".dhx_calendar__years",i.map((function(e){return(0,l.el)("div",r({class:"dhx_calendar-year"+(v(e)?" dhx_calendar-year--selected":""),_date:e},function(e){var t={role:"button",tabindex:-1,"aria-pressed":"false"};return e&&(p?v(e)&&(t.tabindex=0,t["aria-pressed"]="true"):h&&(t.tabindex=0),h=!1),t}(e)),e)}))),"year"!==u&&"month"!==u?(0,l.el)(".dhx_calendar__actions",[(0,l.el)("button.dhx_button.dhx_button--color_primary.dhx_button--view_link.dhx_button--size_small.dhx_button--width_full.dhx_button--circle.dhx_calendar-action__cancel",{type:"button"},f.locale.cancel)]):null])])},t.prototype._drawHeader=function(e){return(0,l.el)(".dhx_calendar__navigation",[(0,l.el)("button.dhx_calendar-navigation__button.dhx_calendar-action__prev"+h.linkButtonClasses+".dhx_button--icon.dhx_button--circle",{"aria-label":"prev",type:"button"},[(0,l.el)(".dhx_button__icon.dxi.dxi-chevron-left")]),e,(0,l.el)("button.dhx_calendar-navigation__button.dhx_calendar-action__next"+h.linkButtonClasses+".dhx_button--icon.dhx_button--circle",{"aria-label":"next",type:"button"},[(0,l.el)(".dhx_button__icon.dxi.dxi-chevron-right")])])},t.prototype._drawTimepicker=function(){var e=this.config,t=e.css,i=e.weekNumbers,n=e.width;return(0,l.el)(".dhx_widget.dhx-calendar",{class:t?" "+t:"",style:{width:i?parseInt(n.toString())+48+"px":n}},[(0,l.inject)(this._timepicker.getRootView())])},t.prototype._selectDate=function(e,t){var i=t.attrs._date,n=f.DateHelper.copy(this._getSelected());switch(this._currentViewMode){case"calendar":var o=this.config.timePicker?f.DateHelper.mergeHoursAndMinutes(i,this._getSelected()||this._currentDate):i;if(!this.events.fire(p.CalendarEvents.beforeChange,[o,n,!0]))return;this.config.range&&1===this._selected.length&&this._selected[0]<o?this._selected.push(o):(this._selected=[],this._selected[0]=o),t.el.blur(),this.showDate(this._getSelected()),this.events.fire(p.CalendarEvents.change,[i,n,!0]);break;case"month":if("month"!==this.config.mode)f.DateHelper.setMonth(this._currentDate,i),this.showDate(null,"calendar"),this.events.fire(p.CalendarEvents.monthSelected,[i]);else{var r=f.DateHelper.fromYearAndMonth(this._currentDate.getFullYear()||this._getSelected().getFullYear(),i);if(!this.events.fire(p.CalendarEvents.beforeChange,[r,n,!0]))return;this._currentDate=r,this._selected[0]=r,this.events.fire(p.CalendarEvents.change,[this._getSelected(),n,!0]),this.events.fire(p.CalendarEvents.monthSelected,[i]),this.paint()}break;case"year":if("year"!==this.config.mode)f.DateHelper.setYear(this._currentDate,i),this.showDate(null,"month"),this.events.fire(p.CalendarEvents.yearSelected,[i]);else{r=f.DateHelper.fromYear(i);if(!this.events.fire(p.CalendarEvents.beforeChange,[r,n,!0]))return;this._currentDate=r,this._selected[0]=r,this.events.fire(p.CalendarEvents.change,[this._getSelected(),n,!0]),this.events.fire(p.CalendarEvents.yearSelected,[i]),this.paint()}}},t.prototype._moveBrowseFocus=function(e,t,i){if(t){var n=t.parent.body[t.idx+i];if(n){var o=n.el;o&&(e.target.tabIndex=-1,o.tabIndex=0,o.focus({preventScroll:!0}))}}},t}(u.View);t.Calendar=g},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Timepicker=void 0;var a=i(0),s=i(1),l=i(4),c=i(9),u=i(18),d=i(77),h=i(148),f=i(149),p=i(80),v=i(3);function g(e,t){return isNaN(e)?0:Math.min(t,Math.max(0,e))}var _=function(e){function t(t,i){void 0===i&&(i={});var n=e.call(this,t,(0,a.extend)({timeFormat:24,controls:!1,valueFormat:"string",actions:!1},i))||this;return n.events=new l.EventSystem(n),n._time={hour:0,minute:0,AM:!0},12===n.config.timeFormat&&(n._time.hour=12),n.config.controls=n.config.controls||n.config.actions,n.config.value&&n._setValue(n.config.value),n._initUI(t),n._initHandlers(),n._initEvents(),n}return o(t,e),t.prototype.getValue=function(e){return 12===this.config.timeFormat&&(this._time.hour=this._time.hour%12||12),this._getValue(this._time,e)},t.prototype.setValue=function(e){this._setValue(e),this._hoursSlider.setValue(this._time.hour),this._minutesSlider.setValue(this._time.minute),this._inputsView.paint()},t.prototype.clear=function(){24===this.config.timeFormat?this.setValue("00:00"):this.setValue("12:00AM")},t.prototype.destructor=function(){this._minutesSlider&&this._minutesSlider.destructor(),this._hoursSlider&&this._hoursSlider.destructor(),this.events&&this.events.clear(),this.layout&&this.layout.destructor(),this.config=this.events=null,this._handlers=this._time=this._inputsView=this._minutesSlider=this._hoursSlider=null,this.unmount()},t.prototype.getRootView=function(){return this.layout.getRootView()},t.prototype._getValue=function(e,t){var i=e.hour,n=e.minute,o=e.AM;if(t){var r={hour:i,minute:n};return 12===this.config.timeFormat&&(r.AM=o),r}return(i<10?"0"+i:i)+":"+(n<10?"0"+n:n)+(12===this.config.timeFormat?o?"AM":"PM":"")},t.prototype._setValue=function(e){var t,i=0,n=0;if("number"==typeof e&&(e=new Date(e)),e instanceof Date)i=e.getMinutes(),n=e.getHours();else if(Array.isArray(e))n=g(e[0],23),i=g(e[1],59),e[2]&&"pm"===e[2].toLowerCase()&&(t=!0);else if("string"==typeof e){var o=e.match(/\d+/g);n=g(+o[0],23),i=g(+o[1],59),e.toLowerCase().includes("pm")&&(t=!0)}else"object"==typeof e&&e.hasOwnProperty("hour")&&e.hasOwnProperty("minute")&&(n=e.hour,i=e.minute,t=!e.AM);return t&&n<12&&(n+=12),12===this.config.timeFormat&&!(0,f.isTimeCheck)(e)&&n>=12&&(t=!0),this._time={hour:n,minute:i,AM:!t}},t.prototype._initUI=function(e){var t=this,i={gravity:!1,css:"dhx_widget dhx_timepicker "+(this.config.css?this.config.css:"")+(this.config.controls?" dhx_timepicker--with-controls":""),rows:[{id:"timepicker",css:"dhx_timepicker__inputs"},{id:"hour-slider",css:"dhx_timepicker__hour"},{id:"minute-slider",css:"dhx_timepicker__minute"}]};this.config.controls&&(i.rows.unshift({id:"close-action",css:"dhx_timepicker__close"}),i.rows.push({id:"save-action",css:"dhx_timepicker__save"}));var n=this.layout=new u.Layout(e,i),o=(0,s.create)({render:function(){return t._draw()}}),r=this._inputsView=(0,c.toViewLike)(o),a=this._minutesSlider=new d.Slider(null,{min:0,max:59,step:1,tooltip:!1,labelPosition:"top",label:h.default.minutes,value:this.config.value?this._time.minute:0}),l=this._hoursSlider=new d.Slider(null,{min:0,max:23,step:1,tooltip:!1,labelPosition:"top",label:h.default.hours,value:this.config.value?12===this._time.hour&&this._time.AM?0:this._time.hour:0});if(n.getCell("timepicker").attach(r),n.getCell("hour-slider").attach(l),n.getCell("minute-slider").attach(a),this.config.controls){n.getCell("save-action").attach((function(){return(0,s.el)("button.dhx_timepicker__button-save.dhx_button.dhx_button--view_flat.dhx_button--color_primary.dhx_button--size_small.dhx_button--circle.dhx_button--width_full",{onclick:t._outerHandlers.save,type:"button"},h.default.save)})),n.getCell("close-action").attach((function(){return(0,s.el)("button.dhx_timepicker__button-close.dhx_button.dhx_button--view_link.dhx_button--size_medium.dhx_button--view_link.dhx_button--color_secondary.dhx_button--icon.dhx_button--circle",{_ref:"close",onclick:t._outerHandlers.close,type:"button","aria-label":"close timepicker"},[(0,s.el)("span.dhx_button__icon.dxi.dxi-close")])}))}},t.prototype._initHandlers=function(){var e=this,t=function(t){var i=g(parseInt(t.value,10),59);t.value=i.toString(),e._minutesSlider.setValue(i)},i=function(t){var i=g(parseInt(t.value,10),23);t.value=i.toString(),e._hoursSlider.setValue(i)};this._handlers={onchange:{".dhx_timepicker-input--hour":function(e){return i(e.target)},".dhx_timepicker-input--minutes":function(e){return t(e.target)}},oninput:{".dhx_timepicker-input--hour":function(e){((0,v.isSafari)()||(0,v.isFirefox)())&&i(e.target)},".dhx_timepicker-input--minutes":function(e){((0,v.isSafari)()||(0,v.isFirefox)())&&t(e.target)}}},this._outerHandlers={close:function(){e.events.fire(p.TimepickerEvents.beforeClose,[e.getValue(e._isTimeObj())])&&(e.events.fire(p.TimepickerEvents.afterClose,[e.getValue(e._isTimeObj())]),e.events.fire(p.TimepickerEvents.close,[]))},save:function(){e.events.fire(p.TimepickerEvents.beforeApply,[e.getValue(e._isTimeObj())])&&(e.events.fire(p.TimepickerEvents.afterApply,[e.getValue(e._isTimeObj())]),e.events.fire(p.TimepickerEvents.apply,[e.getValue()]),e.events.fire(p.TimepickerEvents.save,[e._time]))}}},t.prototype._initEvents=function(){var e=this;this._hoursSlider.events.on(d.SliderEvents.beforeChange,(function(t){if(!(t<e._hoursSlider.config.min||t>e._hoursSlider.config.max)){var i=r({},e._time);12===e.config.timeFormat?(i.AM=t<12,i.hour=t%12||12):i.hour=t;var n=e._isTimeObj();return e.events.fire(p.TimepickerEvents.beforeChange,[e._getValue(i,n)])}})),this._hoursSlider.events.on(d.SliderEvents.change,(function(t){if(!(t<e._hoursSlider.config.min||t>e._hoursSlider.config.max)){12===e.config.timeFormat?(e._time.AM=t<12,e._time.hour=t%12||12):e._time.hour=t;var i=e._isTimeObj();e.events.fire(p.TimepickerEvents.change,[e.getValue(i)]),e._inputsView.paint()}})),this._minutesSlider.events.on(d.SliderEvents.beforeChange,(function(t){if(!(t<e._minutesSlider.config.min||t>e._minutesSlider.config.max)){var i=r(r({},e._time),{minute:t}),n=e._isTimeObj();return e.events.fire(p.TimepickerEvents.beforeChange,[e._getValue(i,n)])}})),this._minutesSlider.events.on(d.SliderEvents.change,(function(t){if(!(t<e._minutesSlider.config.min||t>e._minutesSlider.config.max)){e._time.minute=t;var i=e._isTimeObj();e.events.fire(p.TimepickerEvents.change,[e.getValue(i)]),e._inputsView.paint()}}))},t.prototype._draw=function(){return this._minutesSlider.config.label=h.default.minutes,this._hoursSlider.config.label=h.default.hours,(0,s.el)(".dhx_timepicker-inputs",r({},this._handlers),[(0,s.el)("input.dhx_timepicker-input.dhx_timepicker-input--hour",{_key:"hour",_ref:"hour",value:this.getValue(!0).hour.toString().length>1?this.getValue(!0).hour:"0"+this.getValue(!0).hour,"aria-label":"hours"}),(0,s.el)("span.dhx_timepicker-delimer",":"),(0,s.el)("input.dhx_timepicker-input.dhx_timepicker-input--minutes",{_key:"minute",value:this.getValue(!0).minute.toString().length>1?this.getValue(!0).minute:"0"+this.getValue(!0).minute,"aria-label":"minutes"}),12===this.config.timeFormat?(0,s.el)(".dhx_timepicker-ampm",this._time.AM?"AM":"PM"):null])},t.prototype._isTimeObj=function(){var e;return"timeobject"===(null===(e=this.config.valueFormat)||void 0===e?void 0:e.toLowerCase())},t}(c.View);t.Timepicker=_},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMarginSize=t.getBlockRange=void 0,t.getBlockRange=function(e,t,i){return void 0===i&&(i=!0),i?{min:e.left+window.pageXOffset,max:t.right+window.pageXOffset}:{min:e.top+window.pageYOffset,max:t.bottom+window.pageYOffset}},t.getMarginSize=function(e){return e&&("space"===e.type||"wide"===e.type)?12:0}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Slider=void 0;var a=i(0),s=i(1),l=i(4),c=i(25),u=i(9),d=i(10),h=i(79),f=i(3);function p(e,t,i){return e<t?t:e>i?i:e}var v=function(e){function t(t,i){var n=e.call(this,t,(0,a.extend)({mode:"horizontal",min:0,max:100,step:1,tooltip:!0},i))||this;n._disabled=!1,n.config.helpMessage=n.config.helpMessage||n.config.help,void 0!==n.config.thumbLabel&&(n.config.tooltip=n.config.thumbLabel),n.config.labelInline&&(n.config.labelPosition="left"),n.events=new l.EventSystem(n),n._axis="horizontal"===n.config.mode?"clientX":"clientY",n._initStartPosition(),n._keyManager=new c.KeyManager((function(){var e,t;return document.activeElement===(null===(t=null===(e=n.getRootView().refs)||void 0===e?void 0:e[n._isExtraActive?"extraRunner":"runner"])||void 0===t?void 0:t.el)})),n._initHotkeys();var o=(0,s.create)({render:function(){return n._draw()},hooks:{didMount:function(){return n._calcSliderPosition()},didRedraw:function(){return n._calcSliderPosition()}}});return n._initHandlers(),n.mount(t,o),n}return o(t,e),t.prototype.disable=function(){this._disabled=!0,this.paint()},t.prototype.enable=function(){this._disabled=!1,this.paint()},t.prototype.isDisabled=function(){return this._disabled},t.prototype.focus=function(e){this.getRootView().refs[e?"extraRunner":"runner"].el.focus()},t.prototype.blur=function(){this.getRootView().refs[this._isExtraActive?"extraRunner":"runner"].el.blur()},t.prototype.getValue=function(){var e;if(this.config.range){var t=this._getValue(this._currentPosition),i=this._getValue(this._extraCurrentPosition);e=t<i?[t,i]:[i,t]}else e=[this._getValue(this._currentPosition)];return e},t.prototype.setValue=function(e){var t=this._getValue(this._currentPosition);if(Array.isArray(e)&&e.length>1){var i=this._getValue(this._extraCurrentPosition);this.events.fire(h.SliderEvents.beforeChange,[e[0],t,!1])&&(this._setValue(e[0],!1),this.events.fire(h.SliderEvents.change,[e[0],t,!1])),this.events.fire(h.SliderEvents.beforeChange,[e[1],i,!0])&&(this._setValue(e[1],!0),this.events.fire(h.SliderEvents.change,[e[1],i,!0]))}else{if(e=parseFloat(e),isNaN(e))throw new Error("Wrong value type, for more info check documentation https://docs.dhtmlx.com/suite/slider__api__slider_setvalue_method.html");this.events.fire(h.SliderEvents.beforeChange,[e,t,!1])&&(this._setValue(e),this.events.fire(h.SliderEvents.change,[e,t,!1]))}this.paint()},t.prototype.destructor=function(){this._keyManager&&this._keyManager.destructor(),document.body.contains(this._tooltip)&&document.body.removeChild(this._tooltip),this._tooltip=null,this.unmount()},t.prototype._calcSliderPosition=function(){var e=this.getRootView();if(e){var t=e.refs.track.el.getBoundingClientRect();this._offsets={left:t.left+window.pageXOffset,top:t.top+window.pageYOffset},this._length="horizontal"===this.config.mode?t.width:t.height}},t.prototype._initHotkeys=function(){var e=this,t={arrowLeft:function(t){t.preventDefault(),e._move(-e.config.step,t.target.classList.contains("dhx_slider__thumb--extra"))},arrowRight:function(t){t.preventDefault(),e._move(e.config.step,t.target.classList.contains("dhx_slider__thumb--extra"))},arrowUp:function(t){t.preventDefault(),e._move(e.config.step,t.target.classList.contains("dhx_slider__thumb--extra"))},arrowDown:function(t){t.preventDefault(),e._move(-e.config.step,t.target.classList.contains("dhx_slider__thumb--extra"))}};for(var i in t)this._keyManager.addHotKey(i,t[i])},t.prototype._move=function(e,t){void 0===t&&(t=!1),this.config.inverse&&(e=-e);var i=this.config,n=i.max,o=i.min,r=t?this._getValue(this._extraCurrentPosition):this._getValue(this._currentPosition),a=r+e;(a>n||a<o)&&(a=r),this.events.fire(h.SliderEvents.beforeChange,[a,r,t])&&(this._setValue(r+e,t),this.events.fire(h.SliderEvents.change,[a,r,t]),this.paint())},t.prototype._initStartPosition=function(){var e=this.config,t=e.max,i=e.min,n=e.range,o=function(e,t,i){var n;return(n=void 0===e?[]:Array.isArray(e)?e:"string"==typeof e?e.split(",").map((function(e){return parseInt(e,10)})):[e])[0]=void 0===n[0]?t:p(n[0],t,i),n[1]=void 0===n[1]?i:p(n[1],t,i),n}(this.config.value,this.config.min,this.config.max),r=o[0],a=o[1];this._currentPosition=(r-i)/(t-i)*100,n&&(this._extraCurrentPosition=(t-a)/(t-i)*100),this._currentPosition=(r-i)/(t-i)*100,n&&(this._extraCurrentPosition=(a-i)/(t-i)*100),this._isInverse()&&(this._currentPosition=100-this._currentPosition,n&&(this._extraCurrentPosition=100-this._extraCurrentPosition))},t.prototype._getValue=function(e){this._isInverse()&&(e=100-e);var t=this.config,i=t.min,n=t.max,o=t.step;if(100===e)return n;if(0===e)return i;var r=e*(n-i)/100,a=r%o,s=a>=o/2?o:0;return+(Number(i)+Number(r)-a+s).toFixed(5)},t.prototype._setValue=function(e,t){void 0===t&&(t=!1);var i=this.config,n=i.max,o=i.min;if(e>n||e<o)return!1;var r=(e-o)/(n-o)*100,a=this._isInverse()?100-r:r;t?this._extraCurrentPosition=a:this._currentPosition=a},t.prototype._initHandlers=function(){var e=this,t=function(t){t.cancelable&&t.preventDefault();var i=((t.targetTouches?t.targetTouches[0][e._axis]:t[e._axis])-e._getBegining())/e._length*100;if(e._findNewDirection){if(Math.abs(e._currentPosition-i)<1)return;i>e._currentPosition?e._possibleRange=[e._currentPosition,100]:e._possibleRange=[0,e._currentPosition],e._findNewDirection=null}e._inSide(i)&&e._updatePosition(i,e._isExtraActive),e.paint()},i=function(n){e.events.fire(h.SliderEvents.mouseup,[n]),setTimeout((function(){e._isMouseMoving=!1,e.paint()}),4),n.targetTouches?(document.removeEventListener("touchend",i),document.removeEventListener("touchmove",t)):(document.removeEventListener("mouseup",i),document.removeEventListener("mousemove",t))},n=function(t){var i;if(!e._disabled&&3!==t.which)if(e.events.fire(h.SliderEvents.mousedown,[t]),e._isMouseMoving=!0,t.target.classList.contains("dhx_slider__thumb--extra")?(e._isExtraActive=!0,i=e._extraCurrentPosition):(e._isExtraActive=!1,i=e._currentPosition),e._findNewDirection=null,e.config.range){var n=e._currentPosition>e._extraCurrentPosition?[e._currentPosition,e._extraCurrentPosition]:[e._extraCurrentPosition,e._currentPosition],o=n[0],r=n[1];e._currentPosition===e._extraCurrentPosition?(e._findNewDirection=i,e._possibleRange=[0,100]):e._possibleRange=i<o?[0,o]:[r,100]}else e._possibleRange=[0,100]};this.config.helpMessage&&(this._helper=new d.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"}),this._helper.attachHTML(this.config.helpMessage)),this._handlers={showHelper:function(t){t.preventDefault(),t.stopPropagation(),e._helper.show(t.target,{theme:t.target})},onmousedown:function(e){n(e),document.addEventListener("mousemove",t),document.addEventListener("mouseup",i)},ontouchstart:function(o){e._setTooltip(o),e._mouseIn=!1,n(o),document.addEventListener("touchmove",t,{passive:!1}),document.addEventListener("touchend",i),e.paint()},ontouchend:function(t){e._setTooltip(t),e._mouseIn=!1,e.paint()},onlabelClick:function(){e.getRootView().refs.runner.el.focus()},onclick:function(t){if(!e._disabled&&!e._isMouseMoving&&3!==t.which){var i=(t[e._axis]-e._getBegining())/e._length*100,n=e.getRootView().refs;if(e.config.range)Math.abs(e._currentPosition-i)<Math.abs(e._extraCurrentPosition-i)?(e._updatePosition(i,!1),n.runner.el.focus()):(e._updatePosition(i,!0),n.extraRunner.el.focus());else e._updatePosition(i,!1),n.runner.el.focus();e.paint()}},onmouseover:function(t){e._setTooltip(t),e._mouseIn=!0,e.paint()},onmouseout:function(t){e._setTooltip(t),e._mouseIn=!1,e.paint()},onfocus:function(t){e._setTooltip(t),e._focusIn=!0,e.events.fire(h.SliderEvents.focus,[]),e.paint()},onblur:function(t){e._setTooltip(t),e._focusIn=!1,e.events.fire(h.SliderEvents.blur,[]),e.paint()},onkeydown:function(t){e.events.fire(h.SliderEvents.keydown,[t])}}},t.prototype._getBegining=function(){return"horizontal"===this.config.mode?this._offsets.left-window.pageXOffset:this._offsets.top-window.pageYOffset},t.prototype._inSide=function(e){var t=this._possibleRange;return e<t[0]?(this._updatePosition(t[0],this._isExtraActive),!1):!(e>t[1])||(this._updatePosition(t[1],this._isExtraActive),!1)},t.prototype._updatePosition=function(e,t){void 0===t&&(t=!1),e>100&&(e=100),e<0&&(e=0);var i=this.config,n=i.max,o=i.min,r=t?this._extraCurrentPosition:this._currentPosition,a=this._getValue(r),s=this._getValue(e);if(a!==s&&this.events.fire(h.SliderEvents.beforeChange,[s,a,t])){var l=(s-o)/(n-o)*100,c=this._isInverse()?100-l:l;t?this._extraCurrentPosition=c:this._currentPosition=c,this.events.fire(h.SliderEvents.change,[s,a,t])}},t.prototype._getRunnerStyle=function(e){var t;void 0===e&&(e=!1);var i="horizontal"===this.config.mode?"left":"top",n=e?this._extraCurrentPosition:this._currentPosition;return(t={})[i]=n+"%",t},t.prototype._isInverse=function(){return this.config.inverse&&"horizontal"===this.config.mode||!this.config.inverse&&"vertical"===this.config.mode},t.prototype._getRunnerCss=function(e){return void 0===e&&(e=!1),"dhx_slider__thumb"+(e?" dhx_slider__thumb--extra":"")+(this._isMouseMoving&&(e&&this._isExtraActive||!e&&!this._isExtraActive)?" dhx_slider__thumb--active":"")+(this._disabled?" dhx_slider__thumb--disabled":"")+(this._isNullable(e?this._extraCurrentPosition:this._currentPosition)&&!this.config.range?" dhx_slider__thumb--nullable":"")},t.prototype._draw=function(){var e=this.config,t=e.labelPosition,i=e.mode,n=e.hiddenLabel,o=e.tick,a=e.majorTick,l=e.css,c=e.helpMessage,u=(0,f.getLabelStyle)(r(r({},this.config),{required:!1}));return!this._tooltip||this._mouseIn&&this._focusIn&&this._isMouseMoving||document.body.contains(this._tooltip)&&document.body.removeChild(this._tooltip),(0,s.el)("div",{class:"dhx_slider dhx_slider--mode_"+i+("left"===t?" dhx_slider--label-inline":"")+(n?" dhx_slider--label_sr":"")+(o?" dhx_slider--ticks":"")+(a?" dhx_slider--major-ticks":"")+(l?" "+l:"")+(this._disabled?" dhx_slider--disabled":""),style:{paddingBottom:this.config.tick?"16px":null}},[u?(0,s.el)("label.dhx_label.dhx_slider__label",{style:u.style,class:c?"dhx_label--with-help":"",onclick:this._handlers.onlabelClick},c?[u.label&&(0,s.el)("span.dhx_label__holder",u.label),(0,s.el)("span.dhx_label-help.dxi.dxi-help-circle-outline",{tabindex:"0",role:"button",onclick:this._handlers.showHelper})]:u.label):null,this._drawSlider()])},t.prototype._drawSlider=function(){return(0,s.el)(".dhx_widget.dhx_slider__track-holder",{"data-dhx-widget-id":this._uid},[(0,s.el)(".dhx_slider__track",{_ref:"track",onmouseover:this._handlers.onmouseover,onmouseout:this._handlers.onmouseout,onclick:this._handlers.onclick},[this._getDetector(),(0,s.el)("div",{_ref:"runner",class:this._getRunnerCss(),ontouchstart:this._handlers.ontouchstart,ontouchend:this._handlers.ontouchend,onmousedown:this._handlers.onmousedown,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,style:this._getRunnerStyle(),tabindex:0}),this.config.tooltip&&(this._mouseIn||this._focusIn||this._isMouseMoving)?this._drawTooltip():null,this.config.tooltip&&this.config.range&&(this._mouseIn||this._focusIn||this._isMouseMoving)?this._drawTooltip(!0):null,this.config.range?(0,s.el)("div",{_ref:"extraRunner",class:this._getRunnerCss(!0),ontouchstart:this._handlers.ontouchstart,ontouchend:this._handlers.ontouchend,onmousedown:this._handlers.onmousedown,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,style:this._getRunnerStyle(!0),tabindex:0}):null]),this.config.tick?this._drawTicks():null])},t.prototype._getDetector=function(){var e,t,i;if(this._disabled)return(0,s.el)(".dhx_slider__range");var n="horizontal"===this.config.mode?"left":"top",o="horizontal"===this.config.mode?"width":"height";if(this.config.range){var r=this._currentPosition>this._extraCurrentPosition?[this._currentPosition,this._extraCurrentPosition]:[this._extraCurrentPosition,this._currentPosition],a=r[0],l=r[1];return(0,s.el)(".dhx_slider__range",{style:(e={},e[n]=l+"%",e[o]=a-l+"%",e)})}return this._isInverse()?(0,s.el)(".dhx_slider__range",{style:(t={},t[n]=this._currentPosition+"%",t[o]=100-this._currentPosition+"%",t)}):(0,s.el)(".dhx_slider__range",{style:(i={},i[n]=0,i[o]=this._currentPosition+"%",i)})},t.prototype._drawTooltip=function(e){if(void 0===e&&(e=!1),"none"!==this._activeTooltip&&this.getRootView()){var t="extraTooltip"===this._activeTooltip?this._extraCurrentPosition:this._currentPosition,i="horizontal"===this.config.mode?"left":"top",n="";(e&&this._isExtraActive||!e&&!this._isExtraActive)&&(n+=" dhx_slider__thumb-label--active"),this._tooltip||(this._tooltip=document.createElement("div"));var o="tooltip"===this._activeTooltip?this.getRootView().refs.runner.el.getBoundingClientRect():this.getRootView().refs.extraRunner.el.getBoundingClientRect();this._tooltip.className="dhx_slider__thumb-label"+n,this._tooltip.style.left=o.x+("left"===i?6:-30)+window.pageXOffset+"px",this._tooltip.style.top=o.y+("left"===i?-30:6)+window.pageYOffset+"px",this._tooltip.innerText=this._getValue(t).toString(),document.body.appendChild(this._tooltip)}},t.prototype._getTicks=function(){for(var e=this.config,t=e.max,i=e.min,n=e.step,o=e.tick,r=e.majorTick,a=t-i,s=n*o/a,l=[],c=0,u=0;c<1;){var d=+(Number(i)+c*a).toFixed(5),h=u%r==0;l.push({position:(this._isInverse()?100*(1-c):100*c)+"%",isMultiple:h,label:h&&"function"==typeof this.config.tickTemplate?this.config.tickTemplate(d):null}),c+=s,u++}return l.push({position:(this._isInverse()?0:100)+"%",isMultiple:!0,label:"function"==typeof this.config.tickTemplate?this.config.tickTemplate(t):null}),l},t.prototype._drawTicks=function(){var e="horizontal"===this.config.mode?"left":"top";return(0,s.el)(".dhx_slider__ticks-holder",this._getTicks().map((function(t){var i;return(0,s.el)("div",{class:"dhx_slider__tick"+(t.isMultiple?" dhx_slider__tick--major":""),style:(i={},i[e]=t.position,i)},void 0!==t.label?[(0,s.el)(".dhx_slider__tick-label",t.label)]:null)})))},t.prototype._isNullable=function(e){return this._isInverse()?100===e:0===e},t.prototype._setTooltip=function(e){e.target.classList.contains("dhx_slider__thumb--extra")?this._activeTooltip="extraTooltip":e.target.classList.contains("dhx_slider__thumb")?this._activeTooltip="tooltip":this._activeTooltip="none"},t}(u.View);t.Slider=v},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Popup=void 0;var a=i(0),s=i(1),l=i(4),c=i(3),u=i(9),d=i(78),h=function(e){function t(t){void 0===t&&(t={});var i=e.call(this,null,(0,a.extend)({},t))||this,n=i._popup=document.createElement("div");return n.className="dhx_widget dhx_popup"+(i.config.css?" "+i.config.css:""),n.style.position="absolute",n.setAttribute("role","dialog"),n.setAttribute("aria-modal","true"),n.setAttribute("aria-live","polite"),i.config.theme&&i._setTheme(i.config.theme),i.mount(n,(0,s.create)({render:function(){return i.toVDOM()}})),i._clickEvent=function(e){return i.events.fire(d.PopupEvents.click,[e])},i.events=t.events||new l.EventSystem(i),i._isActive=!1,i}return o(t,e),t.prototype.show=function(e,t,i){var n=this;void 0===t&&(t={}),this.events.fire(d.PopupEvents.beforeShow,[e])&&(e=(0,c.toNode)(e),this._isActive?this._setPopupSize(e,t):(i&&this.attach(i),t.theme&&this._setTheme(t.theme),this._popup.style.left="0",this._popup.style.top="0",(0,s.awaitRedraw)().then((function(){n._setPopupSize(e,t),n._popup.style.position="fixed",document.body.appendChild(n._popup),n._isActive=!0})).then((function(){n._popup.style.position="absolute",n.events.fire(d.PopupEvents.afterShow,[e]),n._outerClickDestructor=n._detectOuterClick(e)}))))},t.prototype.hide=function(){this._hide(!1,null)},t.prototype.isVisible=function(){return this._isActive},t.prototype.attach=function(e,t){return this._html=null,"object"==typeof e?this._ui=e:"string"==typeof e?this._ui=new window.dhx[e](null,t):"function"==typeof e&&(e.prototype instanceof u.View?this._ui=new e(null,t):this._ui={getRootView:function(){return e(t)}}),this.paint(),this._ui},t.prototype.attachHTML=function(e){this._html=e,this.paint()},t.prototype.getWidget=function(){return this._ui},t.prototype.getContainer=function(){return this.getRootView().refs.content.el},t.prototype.toVDOM=function(){var e;return this._html?e=(0,s.el)(".dhx_popup__inner-html-content",{".innerHTML":this._html}):(e=this._ui?this._ui.getRootView():null)&&e.render&&(e=(0,s.inject)(e)),(0,s.el)("div",{class:"dhx_popup-content",tabindex:0,onclick:this._clickEvent,_key:this._uid,_ref:"content"},[e])},t.prototype.destructor=function(){this.events&&this.events.clear(),this.hide(),this._outerClickDestructor&&this._outerClickDestructor(),this._popup=null},t.prototype._setTheme=function(e){var t;if("string"==typeof e)this._popup.setAttribute("data-dhx-theme",e);else{var i=null===(t=null==e?void 0:e.closest("[data-dhx-theme]"))||void 0===t?void 0:t.getAttribute("data-dhx-theme");i&&this._popup.setAttribute("data-dhx-theme",i)}},t.prototype._setPopupSize=function(e,t,i){var n=this;void 0===i&&(i=3);var o=this._popup.getBoundingClientRect(),a=o.width,s=o.height;if(this._timeout&&(clearTimeout(this._timeout),this._timeout=null),!i||0!==a&&0!==s){var l=(0,c.fitPosition)(e,r(r({centering:!0,mode:"bottom"},t),{width:a,height:s})),u=l.left,d=l.top;if(this._popup.style.left=u,this._popup.style.top=d,t.indent&&0!==t.indent)switch(t.mode){case"top":this._popup.style.top=parseInt(this._popup.style.top.slice(0,-2),null)-parseInt(t.indent.toString(),null)+"px";break;case"bottom":default:this._popup.style.top=parseInt(this._popup.style.top.slice(0,-2),null)+parseInt(t.indent.toString(),null)+"px";break;case"left":this._popup.style.left=parseInt(this._popup.style.left.slice(0,-2),null)-parseInt(t.indent.toString(),null)+"px";break;case"right":this._popup.style.left=parseInt(this._popup.style.left.slice(0,-2),null)+parseInt(t.indent.toString(),null)+"px"}}else this._timeout=setTimeout((function(){n._isActive&&(n._setPopupSize(e,t,i-1),n._timeout=null)}))},t.prototype._detectOuterClick=function(e){var t=this,i=!1,n=new WeakMap,o=function(r){var a=r.target,s=document.querySelectorAll(".dhx_popup");for(i?s.forEach((function(e){return n.has(e)||n.set(e,t._popup)})):(i=Boolean(s.length))&&s.forEach((function(e){return n.set(e,!0)}));a;){if(a===e||a===t._popup||n.get(a)===t._popup)return;a=a.parentNode}t._hide(!0,r)&&document.removeEventListener("mousedown",o)};return document.addEventListener("mousedown",o),function(){return document.removeEventListener("mousedown",o)}},t.prototype._hide=function(e,t){if(this._isActive)return!!this.events.fire(d.PopupEvents.beforeHide,[e,t])&&(document.body.removeChild(this._popup),this._isActive=!1,this._outerClickDestructor&&(this._outerClickDestructor(),this._outerClickDestructor=null),this.events.fire(d.PopupEvents.afterHide,[t]),!0)},t}(u.View);t.Popup=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={hours:"Hours",minutes:"Minutes",save:"Save"}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTimeCheck=void 0,t.isTimeCheck=function(e){return/(^12:[0-5][0-9]?AM$)/i.test(e)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linkButtonClasses=void 0,t.linkButtonClasses=".dhx_button.dhx_button--view_link.dhx_button--icon.dhx_button--size_medium.dhx_button--color_secondary"},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxEditor=void 0;var n=i(0),o=i(1),r=i(8),a=function(){function e(e,t,i){this._config=i,this._cell={row:e,col:t},this._initHandlers()}return e.prototype.endEdit=function(){var e=this._checked;this._config.events.fire(r.GridEvents.beforeEditEnd,[e,this._cell.row,this._cell.col])?(this._cell.row=this._config.datacollection.getItem(this._cell.row.id),this._config.events.fire(r.GridEvents.afterEditEnd,[e,this._cell.row,this._cell.col])):this._input.checked=!e},e.prototype.toHTML=function(){void 0===this._checked&&(this._checked=this._cell.row[this._cell.col.id]);var e=(0,n.uid)();return(0,o.el)("div.dhx_checkbox.dhx_cell-editor__checkbox",[(0,o.el)("label",{style:{display:"none"},for:e},this._checked||"false"),(0,o.el)("input.dhx_checkbox__input",{type:"checkbox",_hooks:{didInsert:this._handlers.didInsert},_key:"cell_editor","data-dhx-id":"cell_editor","data-dhx-checked":(!!this._checked).toString(),checked:this._checked,id:e,style:{userSelect:"none"}}),(0,o.el)("span.dhx_checkbox__visual-input")])},e.prototype._initHandlers=function(){var e=this;this._handlers={onClick:function(){var t=!e._input.checked;e._config.events.fire(r.GridEvents.beforeEditStart,[e._cell.row,e._cell.col,"checkbox"])?(e._checked=t,e._config.events.fire(r.GridEvents.afterEditStart,[e._cell.row,e._cell.col,"checkbox"]),e.endEdit()):e._input.checked=!t},didInsert:function(t){e._checkbox=t.el.parentNode.lastChild,e._input=t.el.parentNode.querySelector("input"),t.el.parentNode.addEventListener("click",e._handlers.onClick)}}},e}();t.CheckboxEditor=a},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ComboboxEditor=void 0;var o=i(1),r=i(8),a=i(56),s=i(16),l=i(17),c=function(){function e(e,t,i){this._config=i,this._cell={row:e,col:t},this._initHandlers()}return e.prototype.endEdit=function(e){var t=this;if(this._config.$editable){var i;if(!e){var n=this._input.getValue();i="multiselect"===this._cell.col.editorType?n.split(",").join(", "):n}if(this._config.events.fire(r.GridEvents.beforeEditEnd,[i,this._cell.row,this._cell.col])){var o=(0,l.getEditorOptions)(this._cell.col,this._cell.row);this._input.popup.hide(),document.removeEventListener("mousedown",this._handlers.onOuterClick),this._cell.row=this._config.datacollection.getItem(this._cell.row.id),s.focusManager.setFocusId(this._config.gridId),"multiselect"===this._cell.col.editorType?null==i||i.toString().split(", ").forEach((function(e){return t._setCustomOptions(e,o)})):this._setCustomOptions(null==i?void 0:i.toString(),o),this._config.$editable=null,this._config.events.fire(r.GridEvents.afterEditEnd,[i,this._cell.row,this._cell.col])}else this._input.focus()}},e.prototype.toHTML=function(){var e=this,t=(0,l.getEditorOptions)(this._cell.col,this._cell.row).map((function(e){return"string"==typeof e?{id:"".concat(e),value:e}:e}))||[];if(!this._input){this._input=new a.ProCombobox(null,n({itemHeight:37,css:"dhx_cell-editor__combobox",multiselection:"multiselect"===this._cell.col.editorType,htmlEnable:this._cell.col.htmlEnable},this._cell.col.editorConfig)),this._input.data.parse(t);var i=this._cell.row[this._cell.col.id],r="multiselect"===this._cell.col.editorType?((null==i?void 0:i.toString())||"").split(", "):i;this._input.setValue(r),this._input.events.on("keydown",this._handlers.onkeydown),this._input.data.events.on("beforeAdd",(function(t){if(t.id!==t.value)return e._input.addOption({id:t.value,value:t.value},!0),!1}))}return document.addEventListener("mousedown",this._handlers.onOuterClick),this._config.$editable.editor=this,(0,o.awaitRedraw)().then((function(){var t=e._input.getRootView().refs.holder.el;e._input.popup.getContainer().style.width=t.offsetWidth+"px",e._input._filter(),e._input.popup.show(t)})),s.focusManager.setFocusId(this._input._uid),(0,o.inject)(this._input.getRootView())},e.prototype._initHandlers=function(){var e=this;this._handlers={onOuterClick:function(t){if(t.target instanceof Node){var i=e._input&&e._input.getRootNode()&&e._input.getRootNode().contains(t.target),n=e._input.popup&&e._input.popup.getRootNode()&&e._input.popup.getRootNode().contains(t.target);i||n||e.endEdit()}},onkeydown:function(t){"Escape"!==t.key&&"Tab"!==t.key||e.endEdit()}}},e.prototype._setCustomOptions=function(e,t){var i=t.find((function(t){return"string"==typeof t?t===e:t.id.toString()===e}));e&&!i&&(this._cell.col.$customOptions||(this._cell.col.$customOptions=[]),this._cell.col.$customOptions.push(this._input.data.getItem(e)))},e}();t.ComboboxEditor=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KEY_CODES=void 0,t.KEY_CODES={BACKSPACE:8,ENTER:13,ESC:27,DOWN_ARROW:40,UP_ARROW:38,LEFT_ARROW:37,RIGHT_ARROW:39}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEditor=void 0;var n=i(155);t.getEditor=function(e,t){return new n.InputEditor(e,t)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InputEditor=void 0;var n=i(1),o=i(57),r=function(){function e(e,t){var i=this;this._list=t,this._config=t.config,this._item=e,this._list.events.on(o.ListEvents.focusChange,(function(e,t){i._mode&&t!==i._item.id&&i.endEdit()})),this._initHandlers()}return e.prototype.endEdit=function(){if(this._input){var e=this._input.value;this._list.events.fire(o.ListEvents.beforeEditEnd,[e,this._item.id])?(this._input.removeEventListener("blur",this._handlers.onBlur),this._input.removeEventListener("change",this._handlers.onChange),this._input.removeEventListener("keydown",this._handlers.onKeyDown),this._handlers={},this._mode=!1,this._list.events.fire(o.ListEvents.afterEditEnd,[e,this._item.id])):this._input.focus()}},e.prototype.toHTML=function(){this._mode=!0;var e=this._config.itemHeight;return(0,n.el)(".dhx_input__wrapper",{role:"presentation"},[(0,n.el)("div.dhx_input__container",{role:"presentation"},[(0,n.el)("input.dhx_input",{class:this._item.css?" "+this._item.css:"",style:{height:e,width:"100%",padding:"8px 12px"},_hooks:{didInsert:this._handlers.didInsert},_key:this._item.id,"data-dhx-id":this._item.id})])])},e.prototype._initHandlers=function(){var e=this;this._handlers={onBlur:function(){e.endEdit()},onChange:function(){e.endEdit()},onKeyDown:function(t){"Enter"===t.key&&e._item.value===e._input.value&&e.endEdit(),"Escape"===t.key&&(e._input.value=e._item.value,e.endEdit())},didInsert:function(t){var i=t.el;e._input=i,i.focus(),i.value=e._item.value,i.setSelectionRange(0,i.value.length),i.addEventListener("change",e._handlers.onChange),i.addEventListener("blur",e._handlers.onBlur),i.addEventListener("keydown",e._handlers.onKeyDown)}}},e}();t.InputEditor=r},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ProList=void 0;var s=i(1),l=i(35),c=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.scrollView=new l.ScrollView((function(){return n.getRootView()})),n.paint(),n}return o(t,e),t.prototype.destructor=function(){e.prototype.destructor.call(this),this.scrollView=null},t.prototype.scrollTo=function(e){var t,i,n=this.getRootView();if(n&&n.node&&n.node.el&&void 0!==e){var o=(null===(t=this.scrollView)||void 0===t?void 0:t.config.enable)?null===(i=this.getRootNode())||void 0===i?void 0:i.querySelector(".scroll-view"):this.getRootNode();this._scrollTo(e,o)}},t.prototype._renderList=function(){var e=this,t=this._getRange(),i=this.data.getRawData(t[0],t[1]).map((function(t,i){return e._renderItem(t,i)}));this.config.virtual&&(i=a(a([(0,s.el)(".div",{style:{height:t[2]+"px"}})],i,!0),[(0,s.el)(".div",{style:{height:t[3]+"px"}})],!1));var n=this.scrollView&&this.scrollView.config.enable,o=(this.config.css?this.config.css:"")+(this.config.multiselection&&this.selection.getItem()?" dhx_no-select--pointer":"")+(n?" dhx_list--scroll-view":"");return(0,s.el)("ul.dhx_widget.dhx_list",r(r({style:{"max-height":this.config.height,position:"relative"},id:this._uid,class:o,"data-dhx-widget-id":this._uid,"data-dhx-drop-area":"row"},this._handlers),this._getListAriaAttrs(this.config,this.data.getLength())),n?[].concat(this.scrollView.render(i)):i)},t}(i(83).List);t.ProList=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyListener=void 0;var n=function(){function e(){var e=this;this._handler=function(t){if(e._isActive){var i=t.key;"Backspace"===i&&e._sequence.length>0&&(e._sequence=e._sequence.slice(0,e._sequence.length-1),e._change()),i.length<2&&(e._sequence+=i,e._change())}},this._sequence="",document.addEventListener("keydown",this._handler)}return e.prototype.startNewListen=function(e){this._isActive=!0,this._sequence="",this._currentAction=e},e.prototype.endListen=function(){this._currentAction=null,this.reset(),this._isActive=!1},e.prototype.reset=function(){this._sequence=""},e.prototype.destructor=function(){document.removeEventListener("keydown",this._handler)},e.prototype._change=function(){this._currentAction(this._sequence),this._addClearTimeout()},e.prototype._addClearTimeout=function(){var e=this;this._clearTimeout&&clearTimeout(this._clearTimeout),this._clearTimeout=setTimeout((function(){e.reset(),e._clearTimeout=null}),2e3)},e}();t.KeyListener=n},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ProCombobox=void 0;var r=i(82),a=i(28),s=i(18),l=i(86),c=function(e){function t(t,i){return e.call(this,t,i)||this}return o(t,e),t.prototype._createLayout=function(){var e=this.list=new a.ProList(null,{$template:r.$template,template:this.config.template,htmlEnable:this.config.htmlEnable,virtual:this.config.virtual,keyNavigation:!0,multiselection:this.config.multiselection,itemHeight:this.config.itemHeight,height:this.config.listHeight,data:this.data,eventHandlers:this.config.eventHandlers}),t=this._layout=new s.ProLayout(this.popup.getContainer(),{css:"dhx_combobox-options dhx_combobox__options",rows:[{id:"select-unselect-all",hidden:!this.config.multiselection||!this.config.selectAllButton},{id:"list",height:"content"},{id:"not-found",hidden:!0}],on:{click:{".dhx_combobox__action-select-all":this._handlers.selectAll,".dhx_combobox-options__action-create-option":this._handlers.addOption}}});t.getCell("list").attach(e),this.config.multiselection&&this.config.selectAllButton&&t.getCell("select-unselect-all").attach(l.selectAllView)},t}(r.Combobox);t.ProCombobox=c},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.TextAreaEditor=void 0;var o=i(1),r=i(8),a=i(0),s=i(17),l=i(40),c=function(){function e(e,t,i,n){this._config=i,this._cell={row:e,col:t},this.type=this._cell.col.type,this._width=this._getCellWidth(n),this._config.firstColId===this._cell.col.id&&this._cell.row.hasOwnProperty("$level")&&(this._width-=(0,s.getTreeCellWidthOffset)(this._cell.row)-12),this._initHandlers()}return e.prototype.endEdit=function(e){var t;this._config.$editable&&(e||(t=this._removeValuePattern(this._input.value,!0),("number"===this.type||this._cell.col.numberMask)&&(t=parseFloat(t),Number.isNaN(t)&&(t=""))),this._config.events.fire(r.GridEvents.beforeEditEnd,[t,this._cell.row,this._cell.col])?(this._cell.row=this._config.datacollection.getItem(this._cell.row.id),this._config.$editable=null,this._config.events.fire(r.GridEvents.afterEditEnd,[t,this._cell.row,this._cell.col])):this._input.focus())},e.prototype.toHTML=function(e){var t;(0,a.isDefined)(e)&&(this.type="string"),e=null!==(t=this._input?this._input.value:null!=e?e:this._cell.row[this._cell.col.id])&&void 0!==t?t:"";var i=this._cell.col.numberMask;(0,a.isDefined)(null==i?void 0:i.maxDecLength)&&(i=n(n({},i),{maxDecLength:void 0})),e=this._applyValuePattern(e,this._input,!0,i),this._config.$editable.editor=this;var r=void 0!==this._cell.row.height||this._cell.col.htmlEnable?"dhx_cell-editor dhx_cell-editor__textarea_constant-height":"dhx_cell-editor dhx_cell-editor__textarea";return(0,o.el)("textarea",{_hooks:{didInsert:this._handlers.didInsert},_ref:"textarea",_key:"cell_editor","data-dhx-id":"cell_editor",value:e,onblur:this._handlers.onBlur,oninput:this._handlers.onInput,onkeydown:this._handlers.onKeydown,class:r,style:{width:this._width}})},e.prototype._initHandlers=function(){var e=this;this._handlers={onBlur:function(){e.endEdit()},onInput:function(t){var i,o;if(void 0===e._cell.row.height&&!e._cell.col.htmlEnable){var a=e._removeValuePattern(e._input.value);e._cell.row[e._cell.col.id]=a,e._input.value=e._applyValuePattern(a,e._input);var l=e._getCurrentHeight(e._input.value,{width:e._cell.col.$width-2,maxHeight:e._config.rowHeight}),c=n(n({},e._cell.row),((i={})[e._cell.col.id]=e._input.value,i)),u=(0,s.getCalculatedRowHeight)((0,s.getMaxRowHeight)({row:c,cols:e._config.columns})),d=(0,s.getCalculatedRowHeight)((0,s.getMaxRowHeight)({row:(o={},o[e._cell.col.id]=c[e._cell.col.id],o),cols:e._config.columns}));if(e._minHeight=u===d?e._config.rowHeight:u,l>=e._minHeight&&l!==e._prevHeight){if(!e._config.events.fire(r.GridEvents.beforeRowResize,[e._cell.row,t,l]))return;e._config.events.fire(r.GridEvents.afterRowResize,[e._cell.row,t,l])}e._updateHeight(t,e._input.value)}},onKeydown:function(t){"Escape"===t.key&&e._updateHeight(t,e._initialValue),"Enter"!==t.key||t.shiftKey||t.preventDefault()},didInsert:function(t){e._input=t.el,e._initialValue=t.el.value,e._input.focus()}}},e.prototype._getCurrentHeight=function(e,t){t=n({width:100,maxHeight:40,lineHeight:20},t);var i=document.createElement("textarea");i.className="dhx_cell-editor dhx_cell-editor__textarea",i.value=e,i.style.width="".concat(t.width,"px"),i.style.lineHeight="".concat(t.lineHeight,"px"),i.style.maxHeight="".concat(t.maxHeight,"px"),i.style.boxSizing="border-box",document.body.appendChild(i);var o=this._getElementHeight(i),r=i.value.split("\n").length,a=Math.round(o/t.lineHeight),s=o<t.maxHeight?t.maxHeight:o;return document.body.removeChild(i),1===r&&r===a?t.maxHeight:s},e.prototype._getElementHeight=function(e){return e.scrollHeight},e.prototype._applyValuePattern=function(e,t,i,o){return void 0===i&&(i=!1),this._cell.col.numberMask?(0,l.numberMask)(e.toString(),n(n({},o||this._cell.col.numberMask),{onlyView:i}),t):this._cell.col.patternMask?(0,l.patternMask)(e.toString(),this._cell.col.patternMask,t):e},e.prototype._removeValuePattern=function(e,t){return void 0===t&&(t=!1),this._cell.col.numberMask?(0,l.removeNumberMask)(e,n(n({},this._cell.col.numberMask),{lastCall:t})):this._cell.col.patternMask?(0,l.removePatternMask)(e,this._cell.col.patternMask):e},e.prototype._getCellWidth=function(e){return e?this._config.columns.slice(e.$colsVisibility[0],e.$colsVisibility[1]+1).reduce((function(e,t){return e+t.$width}),0):this._cell.col.$width},e.prototype._updateHeight=function(e,t){var i,o;if(void 0===this._cell.row.height&&!this._cell.col.htmlEnable){var a=this._getCurrentHeight(t,{width:this._width-2,maxHeight:this._config.rowHeight}),l=n(n({},this._cell.row),((i={})[this._cell.col.id]=t,i)),c=(0,s.getCalculatedRowHeight)((0,s.getMaxRowHeight)({row:l,cols:this._config.columns})),u=(0,s.getCalculatedRowHeight)((0,s.getMaxRowHeight)({row:(o={},o[this._cell.col.id]=l[this._cell.col.id],o),cols:this._config.columns}));if(this._minHeight=c===u?this._config.rowHeight:c,a>=this._minHeight&&a!==this._prevHeight){if(!this._config.events.fire(r.GridEvents.beforeRowResize,[this._cell.row,e,a]))return;this._config.events.fire(r.GridEvents.afterRowResize,[this._cell.row,e,a])}this._prevHeight=a}},e}();t.TextAreaEditor=c},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.getGroupPanel=t.getGroupItem=void 0;var r=i(1),a=i(8),s=i(3),l=i(58);var c={onclick:function(e,t){var i=(0,s.locate)(t,"data-dhx-group-item-id");i&&e.events.fire(a.GridEvents.groupPanelItemClick,[i,t])},onmousedown:function(e,t){var i=(0,s.locate)(t,"data-dhx-group-item-id");i&&e.events.fire(a.GridEvents.groupPanelItemMouseDown,[i,t])},ontouchstart:function(e,t){var i=(0,s.locate)(t,"data-dhx-group-item-id");i&&e.events.fire(a.GridEvents.groupPanelItemMouseDown,[i,t])},ontouchmove:function(e,t){var i=(0,s.locate)(t,"data-dhx-group-item-id");i&&e._events.fire(a.GridSystemEvents.groupPanelItemTouchMove,[i,t])},ontouchend:function(e,t){var i=(0,s.locate)(t,"data-dhx-group-item-id");i&&e._events.fire(a.GridSystemEvents.groupPanelItemItemTouchEnd,[i,t])}};function u(e){var t=e.id,i=e.label,n=e.sortDir,o=e.sortOrder,a=e.mode,s=void 0===a?"basic":a,l=e.sortable,c=void 0===l||l,u=e.closable,d=void 0===u||u;return(0,r.el)("div",{role:"option",class:"dhx_grid-group_item dhx_grid-group_item--".concat(s),"data-dhx-group-item-id":t,"data-dhx-id":t,_key:t},[c&&(n&&(0,r.el)("div.dhx_grid-sort",[(0,r.el)("i.dxi.dxi-arrow-up.dhx_grid-group_item-sort.dhx_grid-group_item-sort--".concat(n),{"aria-hidden":"true"}),o&&(0,r.el)("div.dhx_grid-sort-counter",{"aria-hidden":"true"},[o])||null])||(0,r.el)("i.dxi.dxi-sort.dhx_grid-group_item-sort.dhx_grid-group_item-unsorted"))||null,(0,r.el)("span.dhx_grid-group_item-label",i),d&&(0,r.el)("i.dxi.dxi-close-circle.dhx_grid-group_item-remove",{"data-dhx-group-item-remove":"true"})||null])}t.getGroupItem=u,t.getGroupPanel=function(e,t){var i,a;void 0===e&&(e=[]);var s=[];e.forEach((function(t,i){s.push(u(t)),i!==e.length-1&&s.push(function(e){var t=e.id;return(0,r.el)("div.dhx_grid-group_chain",{"aria-hidden":"true","data-dhx-id":t,_key:"chain_".concat(t)},[(0,r.el)("i.dxi.dxi-chevron-right")])}(t))}));var d=Object.entries(c).reduce((function(e,i){var o,r=i[0],a=i[1];return n(n({},e),((o={})[r]=[a,t],o))}),{});return(0,r.el)("div",n({class:"dhx_grid-group_panel","data-dhx-drop-area":"group",role:"presentation",style:{height:(null===(a=null===(i=t.config)||void 0===i?void 0:i.group)||void 0===a?void 0:a.panelHeight)||40}},d),[(0,r.el)("div",{class:"dhx_grid-group_title"},l.default.dropAreaTitle),(0,r.el)("div",{class:"dhx_grid-group_drop-area",role:"listbox"},o([],s.length?s:[(0,r.el)("span",{class:"dhx_grid-group_drop-area-placeholder"},l.default.dropAreaPlaceholder)],!0))])}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.setSubRowCell=t.getSubRowContent=void 0;var o=i(1),r=i(20),a=i(90),s=i(76),l=i(23);function c(e,t,i,o){var r=t(e),l=new s.ProCell(null,{id:"cell"+e.id,css:"dhx_grid_subrow "+(i.css||""),html:"string"==typeof r&&r||null,height:e.$subRowHeight,padding:i.padding});o.set(e.id,n(n(n({},a.defaultSubRowConfig),i),{cell:l})),"function"==typeof(null==r?void 0:r.paint)&&l.attach(r)}t.getSubRowContent=function(e){var t,i=[],n=null===(t=e.subRowConfig)||void 0===t?void 0:t.fullWidth;return e.$subRowCells&&e.currentRows.forEach((function(t){var a;if(t.$opened){var s=e.$subRowCells.get(t.id),c=null===(a=null==s?void 0:s.cell)||void 0===a?void 0:a.getRootView();if(c){var u=(0,r.getTotalHeight)(e.data.slice(0,t.$index))+t.$height;i.push((0,o.el)(".dhx_grid_subrow__container",{_key:"sub"+t.id,role:"region","aria-labelledby":"row-".concat(t.id),"data-dhx-id":t.id,"data-dhx-root-widget-id":e.gridId,tabindex:0,style:{position:"absolute",top:u,width:n?e.$totalWidth:e.$width-e.$scrollBarWidth.y-l.BORDERS}},[(0,o.inject)(c)]))}}})),i.length?(0,o.el)(".dhx_grid_subrow__data",{_flags:o.KEYED_LIST,style:{left:n?0:e.scroll.left},role:"presentation"},i):[]},t.setSubRowCell=function(e,t){for(var i=e.config,o=i.subRowConfig,r=i.$subRowCells,s=i.subRow,l=new Map,u=0;u<t.length;u++){var d=t[u];if(!r.has(d.id)||!r.get(d.id).cell){var h=n(n({},a.defaultSubRowConfig),("function"==typeof o?o(d):o)||{});r.set(d.id,h),(d.$opened||h.preserve)&&d.$subRowHeight&&c(d,s,h,r)}l.set(d.id,d.$opened)}r.forEach((function(e,t){var i;e.preserve||(l.has(t)||r.delete(t),l.get(t)||((null==e?void 0:e.cell)&&(null===(i=e.cell)||void 0===i||i.destructor()),delete e.cell))}))}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getContent=void 0;var n=i(1),o=i(17),r=i(0),a=i(163),s=i(164),l=i(165);t.getContent=function(){return{inputFilter:{element:{},toHtml:function(e,t){var i=this,n=(0,r.uid)(),o=e.id.toString(),a=this.element[o];return a?a.value=this.value[o]:((a=new l.InputFilter(e,t,n,this.value[o])).events.on("change",(function(e){i.value[o]=e})),this.element[o]=a),a.toHTML()},match:function(e){var t=e.val,i=e.match,n=e.col;if(!(0,r.isDefined)(t))return!1;for(var a=[(0,o.applyPattern)(t,n),t.toString()],s="",l=0;l<i.length;l++){var c=i.charCodeAt(l);s+=c>32&&c<48||63===c||c>90&&c<95||124===c?"\\"+i[l]:i[l]}return a.some((function(e){return new RegExp("".concat(s),"i").test(e)}))},value:{}},selectFilter:{element:{},toHtml:function(e,t){var i=this,n=e.id.toString(),o=this.element[n];return o?(o.value=this.value[n],o.data=e.$activeFilterData||e.$uniqueData):((o=new s.SelectFilter(e,t,e.$uniqueData,this.value[n])).events.on("change",(function(e){i.value[n]=e})),this.element[n]=o),o.toHTML()},match:function(e){var t=e.val,i=e.match,n=e.col,r=(0,o.applyPattern)(t,n);return!i||(r||"boolean"==typeof r)&&r.toString()==i},value:{}},comboFilter:{element:{},toHtml:function(e,t){var i=this,o=e.id.toString(),r=this.element[o];if(r)r.data=e.$uniqueData;else{var s=e.header.filter((function(e){return void 0!==e.filterConfig}))[0];(r=new a.ComboFilter(e,t,e.$uniqueData,this.value[o],s)).events.on("change",(function(e){i.value[o]=e})),this.element[o]=r}return(0,n.inject)(r.getFilter().getRootView())},match:function(e){var t=e.val,i=e.match,n=void 0===i?"":i,r=e.multi,a=void 0!==r&&r,s=e.col,l=(0,o.applyPattern)(t,s);if(Array.isArray(n)){for(var c=void 0,u=function(e){if(c=a&&"string"==typeof l?l.split(", ").some((function(t){return t===n[e]})):n[e]===l)return"break"},d=0;d<n.length;d++){if("break"===u(d))break}return!n||!n.length||c}return void 0===n||l===n},destroy:function(){this.value={};var e=this.element;for(var t in e)e[t].destructor(),delete e[t]},value:{}}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ComboFilter=void 0;var n=i(56),o=i(4),r=i(11),a=i(0),s=i(8),l=function(){function e(e,t,i,n,r){var s;this.events=new o.EventSystem,this._silentMode=!1,this.column=e,this.config=t,this.data=i,this.value=n,this.filterConfig=(null==r?void 0:r.filterConfig)||{},(this.column.htmlEnable||(null===(s=this.config)||void 0===s?void 0:s.htmlEnable)&&!1!==this.column.htmlEnable)&&(this.column.template||!1===this.filterConfig.readonly||(this.filterConfig.readonly=!0),this.filterConfig.template||(this.filterConfig.template=function(e){return e.value})),this.filterConfig.filter||(this.filterConfig.filter=function(e,t){return(0,a.isExistValue)(e.value,t)}),this.initFilter(),this.config&&this.initHandlers()}return e.prototype.initFilter=function(){this._filter=new n.ProCombobox(null,Object.assign({},this.filterConfig)),this.data&&this._filter.data&&this._setData()},e.prototype.initHandlers=function(){var e,t,i,n=this,o=this.column.id.toString();this.config.events.on(r.DataEvents.load,(function(){return n._setData()}),this),this._filter.events.on("change",(function(e){var t,i;e&&((Array.isArray(e)?e.find((function(e){return n._filter.data.getItem(e)})):n._filter.data.getItem(e))&&(i=n._filter.config.multiselection?n._filter.list.selection.getItem().map((function(e){if(e&&n._filter.data.getItem(e.id))return e.value})):n._filter.list.selection.getItem().value));n.value=i,null===(t=n.config.events)||void 0===t||t.fire(s.GridEvents.filterChange,[n.value,o,"comboFilter",n._silentMode]),n._silentMode&&void 0===n.value&&(n._silentMode=!1)})),this.config.events.on(s.GridEvents.filterChange,(function(e){return n.events.fire(s.HeaderFilterEvent.change,[e])}),this),this._filter.popup.events.on("afterHide",(function(){n.filterConfig.multiselection||n._filter.list.selection.getItem()||n.clear()})),this._filter.popup.events.on("afterShow",(function(){!n.filterConfig.multiselection&&(""===n.value||n.filterConfig.readonly&&void 0!==n.value)&&n.clear()})),null===(e=this.config.events)||void 0===e||e.on(s.GridEvents.scroll,(function(){var e;n._isFocused&&(null===(e=n._filter.getRootView().refs)||void 0===e?void 0:e.input)&&n._filter.focus()}),this),null===(t=this.config.events)||void 0===t||t.on(s.GridEvents.headerCellMouseDown,(function(e,t){t.id!==n.column.id&&n.blur()}),this),null===(i=this.config.events)||void 0===i||i.on(s.GridEvents.cellMouseDown,(function(){return n.blur()}),this),this.config.events.on(r.DataEvents.change,(function(e,t){n.column.hidden||"add"!==t&&"update"!==t&&"remove"!==t||("add"!==t&&n._checkValue(),n._setData(!0))}),this),this.config.events.on(r.DataEvents.removeAll,(function(){n.clear(!0),n._setData()}),this),this.config.events.on(s.GridEvents.afterRowShow,(function(){return n._setData(!0)}),this),this.config.events.on(s.GridEvents.afterRowHide,(function(){n.column.hidden||(n._checkValue(),n._setData(!0))}),this),this.config.events.on(r.DataEvents.filter,(function(e){n.column.hidden||(!e||(0,r.isOnlyPermanentFilters)(e)?n.clear(!0):n._checkValue(),n.filterConfig.multiselection&&n._filter.popup.isVisible()||n._setData(!0))}),this),this.config.events.on(s.GridEvents.afterColumnShow,(function(){n.filterConfig.multiselection||(n._checkValue(),n._setData())}),this),this.config.events.on(s.GridEvents.afterColumnHide,(function(){n.filterConfig.multiselection||n._setData()}),this)},e.prototype.getFilter=function(){return this._filter},e.prototype.setValue=function(e,t){var i,n,o=this;if(this.filterConfig.multiselection||!Array.isArray(e))if((0,a.isDefined)(e)){if((null==e?void 0:e.length)||""===e){var r=this.filterConfig.multiselection&&Array.isArray(e)?e.map((function(e){var t;return null===(t=o._filter.data.find((function(t){return t.value===e})))||void 0===t?void 0:t.id})):null===(n=this._filter.data.find((function(t){return t.value===e})))||void 0===n?void 0:n.id;this._filter.setValue(r,t)}}else t&&(this._silentMode=!0),this._filter.clear(),this.filterConfig.multiselection||void 0===this.value||(this.value=void 0,null===(i=this.config.events)||void 0===i||i.fire(s.GridEvents.filterChange,[this.value,this.column.id,"comboFilter"]))},e.prototype.clear=function(e){void 0!==this.value&&this.setValue(null,e)},e.prototype.focus=function(){var e;this._isFocused=!0,(null===(e=this._filter.getRootView().refs)||void 0===e?void 0:e.input)&&this._filter.focus()},e.prototype.blur=function(){var e;this._isFocused=!1,(null===(e=this._filter.getRootView().refs)||void 0===e?void 0:e.input)&&this._filter.blur()},e.prototype.destructor=function(){var e=this.config.events;if(e)for(var t in e.events)this.config.events.detach(t,this);this.events.clear(),this._filter&&this._filter.destructor(),this.config=this.filterConfig=this.data=this.column=this.value=this.events=null},e.prototype._setData=function(e){var t=this;void 0===e&&(e=!1);var i=function(){var e=t.column.$activeFilterData||t.column.$uniqueData;if(t.column.header.some((function(e){var t;return null===(t=e.filterConfig)||void 0===t?void 0:t.filter}))){var i=t._filter.data.reduce((function(e,t){return e[t.value]=t.id,e}),{}),n=e.map((function(e){return i[e]?{id:i[e],value:e}:{value:e}}));t._filter.data.parse(n)}else t._filter.data.parse(e.map((function(e){return{value:e}})))};void 0===this.value?i():e&&this.filterConfig.multiselection&&(i(),this.setValue(this.value,!0))},e.prototype._checkValue=function(){if(void 0!==this.value)for(var e=Array.isArray(this.value)?this.value:[this.value],t=function(t){if(i.column.$uniqueData.includes(t))return"continue";if(e.length>1){var n=i._filter.data.find((function(e){return e.value===t}));i._filter.list.selection.remove(n.id)}else i.clear();return"break"},i=this,n=0,o=e;n<o.length;n++){if("break"===t(o[n]))break}},e}();t.ComboFilter=l},function(e,t,i){"use strict";var n=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectFilter=void 0;var o=i(1),r=i(4),a=i(8),s=function(){function e(e,t,i,n){this.events=new r.EventSystem,this.column=e,this.config=t,this.data=i,this.value=n||"",this.initHandlers(),this.toHTML()}return e.prototype.toHTML=function(){var e,t=this;return(0,o.el)("label.dhx_grid-filter__label.dxi.dxi-menu-down",{_ref:"".concat(this.column.id,"_filter")},[(0,o.el)("select.dxi.dxi-menu-down",{type:"text",class:"dhx_input dhx_grid-filter dhx_grid-filter--select",onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,_key:this.column.id},n([(0,o.el)("option",{value:"",_key:0},"")],null===(e=(this.value?[this.value]:this.data)||[])||void 0===e?void 0:e.map((function(e){return""!==(e=null!=e?e:"")&&(0,o.el)("option",{_key:e,value:e,selected:t.value===e.toString()},e)})),!0))])},e.prototype.getFilter=function(){return this.toHTML()},e.prototype.setValue=function(e,t){var i;this.value=e||"",this.events.fire(a.HeaderFilterEvent.change,[e]),null===(i=this.config.events)||void 0===i||i.fire(a.GridEvents.filterChange,[this.value,this.column.id,"selectFilter",t])},e.prototype.clear=function(e){this.setValue("",e)},e.prototype.focus=function(){var e,t,i,n;this._isFocused=!0;var o=null===(n=null===(i=null===(t=null===(e=this.config.events)||void 0===e?void 0:e.context)||void 0===t?void 0:t.getRootView())||void 0===i?void 0:i.refs["".concat(this.column.id,"_filter")])||void 0===n?void 0:n.el;o&&o.focus()},e.prototype.blur=function(){var e,t,i,n;this._isFocused=!1;var o=null===(n=null===(i=null===(t=null===(e=this.config.events)||void 0===e?void 0:e.context)||void 0===t?void 0:t.getRootView())||void 0===i?void 0:i.refs["".concat(this.column.id,"_filter")])||void 0===n?void 0:n.el;o&&o.blur()},e.prototype.initHandlers=function(){var e,t,i,n=this;this._handlers={onchange:function(e){var t,i,o,r,a=(null===(t=e.target)||void 0===t?void 0:t.value)||(null===(o=null===(i=e.composedPath())||void 0===i?void 0:i[0])||void 0===o?void 0:o.value)||(null===(r=e.explicitOriginalTarget)||void 0===r?void 0:r.value);n.setValue(a)},onfocus:function(){n._isFocused=!0},onblur:function(){n._isFocused=!1}},null===(e=this.config.events)||void 0===e||e.on(a.GridEvents.scroll,(function(){var e,t,i,r,a=null===(r=null===(i=null===(t=null===(e=n.config.events)||void 0===e?void 0:e.context)||void 0===t?void 0:t.getRootView())||void 0===i?void 0:i.refs["".concat(n.column.id,"_filter")])||void 0===r?void 0:r.el;n._isFocused&&a&&(0,o.awaitRedraw)().then((function(){a.focus()}))})),null===(t=this.config.events)||void 0===t||t.on(a.GridEvents.headerCellMouseDown,(function(e,t){t.id!==n.column.id&&n.blur()})),null===(i=this.config.events)||void 0===i||i.on(a.GridEvents.cellMouseDown,(function(){return n.blur()}))},e}();t.SelectFilter=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InputFilter=void 0;var n=i(1),o=i(4),r=i(8),a=function(){function e(e,t,i,n){this.events=new o.EventSystem,this.column=e,this.config=t,this.id=i,this.value=n||"",this.initHandlers(),this.toHTML()}return e.prototype.toHTML=function(){return(0,n.el)("div.dhx_grid-filter__label.dxi.dxi-magnify",{"aria-label":"Type to search",_ref:"".concat(this.column.id,"_filter")},[(0,n.el)("label",{style:{display:"none"},"aria-label":"Type to search",for:this.id},"Type to search"),(0,n.el)("input",{type:"text",class:"dhx_input dhx_grid-filter",oninput:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,_key:this.column.id,id:this.id,value:this.value})])},e.prototype.getFilter=function(){return this.toHTML()},e.prototype.setValue=function(e,t){var i;this.value=e||"",this.events.fire(r.HeaderFilterEvent.change,[this.value]),null===(i=this.config.events)||void 0===i||i.fire(r.GridEvents.filterChange,[this.value,this.column.id,"inputFilter",t])},e.prototype.clear=function(e){this.setValue("",e)},e.prototype.focus=function(){var e,t,i,n,o;this._isFocused=!0;var r=null===(n=null===(i=null===(t=null===(e=this.config.events)||void 0===e?void 0:e.context)||void 0===t?void 0:t.getRootView())||void 0===i?void 0:i.refs["".concat(this.column.id,"_filter")])||void 0===n?void 0:n.el;r&&(null===(o=r.querySelector("input"))||void 0===o||o.focus())},e.prototype.blur=function(){var e,t,i,n,o;this._isFocused=!1;var r=null===(n=null===(i=null===(t=null===(e=this.config.events)||void 0===e?void 0:e.context)||void 0===t?void 0:t.getRootView())||void 0===i?void 0:i.refs["".concat(this.column.id,"_filter")])||void 0===n?void 0:n.el;r&&(null===(o=r.querySelector("input"))||void 0===o||o.blur())},e.prototype.initHandlers=function(){var e,t,i,o=this;this._handlers={onchange:function(e){var t,i,n,r,a=(null===(t=e.target)||void 0===t?void 0:t.value)||(null===(n=null===(i=e.composedPath())||void 0===i?void 0:i[0])||void 0===n?void 0:n.value)||(null===(r=e.explicitOriginalTarget)||void 0===r?void 0:r.value);o._inputDelay&&clearTimeout(o._inputDelay),o._inputDelay=setTimeout((function(){return o.setValue(a)}),500)},onfocus:function(){o._isFocused=!0},onblur:function(){o._isFocused=!1}},null===(e=this.config.events)||void 0===e||e.on(r.GridEvents.scroll,(function(){var e,t,i,r,a=null===(r=null===(i=null===(t=null===(e=o.config.events)||void 0===e?void 0:e.context)||void 0===t?void 0:t.getRootView())||void 0===i?void 0:i.refs["".concat(o.column.id,"_filter")])||void 0===r?void 0:r.el;o._isFocused&&a&&(0,n.awaitRedraw)().then((function(){var e;null===(e=a.querySelector("input"))||void 0===e||e.focus()}))})),null===(t=this.config.events)||void 0===t||t.on(r.GridEvents.headerCellMouseDown,(function(e,t){t.id!==o.column.id&&o.blur()})),null===(i=this.config.events)||void 0===i||i.on(r.GridEvents.cellMouseDown,(function(){return o.blur()}))},e}();t.InputFilter=a},function(e,t,i){"use strict";var n=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.startResize=void 0;var o=i(0),r=i(8),a=i(23);t.startResize=function(e,t,i,s){var l,c=e.config.rightSplit;i.targetTouches&&i.preventDefault();var u=i.targetTouches?i.targetTouches[0].clientX:i.clientX,d=e.config.columns.filter((function(e){return!e.hidden})),h=c?d.slice(-c).map((function(e){return e.id})):[],f=!!(null===(l=e.scrollView)||void 0===l?void 0:l.config.enable),p=c?(0,a.calcScrollBarWidth)(e.config,f).xState:null,v=0;e.config.$resizing=t;var g=function(i){var s,l=(0,o.findIndex)(d,(function(e){return e.id===t})),g=i.targetTouches?i.targetTouches[0].clientX:i.clientX,_=g-e.getRootNode().getBoundingClientRect().left,m=(0,a.calcScrollBarWidth)(e.config,f);if(!(e.config.leftSplit===l+1&&_>=e.config.$width-m.y-2||c&&h.includes(t)&&m.xState!==p)){v=v||d[l].$width;var y=40;"function"==typeof e.data.getMaxLevel&&0===l&&(y*=e.data.getMaxLevel());var b,w=d[l].minWidth||y,x=d[l].maxWidth,C=g-u,E=n([],d,!0),S=v+(p&&h.includes(t)?-C:C);x&&S>=x||S<=w?(S<=w&&(b=w),S>=x&&(b=x)):b=S,E[l].$width=b;for(var I=0;I<E.length;I++){(null!==(s=E[I].adjust)&&void 0!==s?s:e.config.adjust)||(E[I].$fixedWidth=I<=l)}e.events.fire(r.GridEvents.resize,[d[l],i]),e.paint()}},_=function(){i.targetTouches?(document.removeEventListener("touchmove",g),document.removeEventListener("touchend",_)):(document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",_)),s()};i.targetTouches?(document.addEventListener("touchmove",g),document.addEventListener("touchend",_)):(document.addEventListener("mousemove",g),document.addEventListener("mouseup",_)),e.paint()}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.getKeysHandlers=t.selectionMove=void 0;var o=i(8),r=i(3),a=i(31),s=i(16),l=function(e,t){var i=t.getIndex(e),n=t.getParent(e);if(i>0){var o=t.getItems(n)[i-1];if(!t.haveItems(o.id)||!o.$opened)return o.id;for(;t.haveItems(o.id)&&o.$opened;){var r=t.getItems(o.id);o=r[r.length-1]}return o.id}return n===t.getRoot()?null:n},c=function(e,t,i){void 0===i&&(i=!1);var n=t.getItem(e);if(t.haveItems(e)&&n.$opened&&!i)return t.getItems(e)[0].id;var o=t.getParent(e),r=t.getItems(o),a=r.findIndex((function(t){return t.id===e}));return a+1<r.length?r[a+1].id:o===t.getRoot()?null:c(o,t,!0)},u=function(e,t,i){void 0===i&&(i=!0);for(var n=t.getItem(e);n&&n.$opened&&t.haveItems(e);){var o=t.getItems(e);if(e=o[o.length-1].id,!i)break;n=t.getItem(e)}return n?e:null};function d(e,t,i,n,o,a,s){if(void 0===o&&(o=!1),void 0===a&&(a=!1),void 0===s&&(s=!1),!t.config.$editable&&t.config.selection&&!(0,r.locateNodeByClassName)(e,"dhx_grid-header-cell")){e&&e.preventDefault();var d=t.selection.getCell(),h=t.config.columns.filter((function(e){return!e.hidden}));if(d)if("vertical"===i)if(o){var f=t.data.getItem(t.data.getId(0));if(1===n){var p=t.data.getId(t.data.getLength()-1);"tree"===t.config.type&&(p=u(p,t.data)),f=t.data.getItem(p)}t.scrollTo(f.id.toString(),d.column.id.toString()),t.selection.setCell(f.id,d.column.id,a,s)}else{f=null;if("tree"===t.config.type)f=t.data.getItem(n<0?l(d.row.id,t.data):c(d.row.id,t.data));else(v=t.data.getIndex(d.row.id.toString()))+n>=0&&v+n<t.data.getLength()&&(f=t.data.getItem(t.data.getId(v+n)));f&&(t.scrollTo(f.id.toString(),d.column.id.toString()),t.selection.setCell(f.id,d.column.id,a,s))}else if(o){f=1===n?h[h.length-1]:h[0];t.scrollTo(d.row.id.toString(),f.id.toString()),t.selection.setCell(d.row.id,f.id,a,s)}else{var v;(v=h.indexOf(d.column))+n>=0&&v+n<h.length&&(t.scrollTo(d.row.id.toString(),h[v+n].id.toString()),t.selection.setCell(d.row.id,h[v+n].id,a,s))}}}function h(e,t){var i,n,o=e.selection.getCell(),r=o&&e.getSpan(o.row.id,o.column.id);if(r){if("up"===t||"down"===t){var a=null===(i=e.config.data)||void 0===i?void 0:i.findIndex((function(e){return e.id===r.row})),s=null===(n=e.config.data)||void 0===n?void 0:n.findIndex((function(e){return e.id===o.row.id}));return"up"===t?a-s-1:a+(r.rowspan||1)-s}var l=e.config.columns.filter((function(e){return!e.hidden}));a=l.findIndex((function(e){return e.id===r.column})),s=l.findIndex((function(e){return e.id===o.column.id}));return"left"===t?a-s-1:a+(r.colspan||1)-s}return"down"===t||"right"===t?1:-1}t.selectionMove=d,t.getKeysHandlers=function(e){var t,i,l,c="cell"===e.config.selection||"complex"===e.config.selection||!0===e.config.selection,u={};if(e.getRootView()){var f=null===(l=null===(i=null===(t=e.getRootView())||void 0===t?void 0:t.refs)||void 0===i?void 0:i.grid_body)||void 0===l?void 0:l.el;if(!f)return;u={pageUp:function(e){e.preventDefault(),f.scrollTop-=f.clientHeight},pageDown:function(e){e.preventDefault(),f.scrollTop+=f.clientHeight},home:function(e){e.preventDefault(),f.scrollTop=0},end:function(e){e.preventDefault(),f.scrollTop+=f.scrollHeight}}}return n({enter:function(){if(c){var t=(0,a.normalizeCell)(e.selection.getCell(),e);if(t&&(!1!==t.column.editable&&e.config.editable||t.column.editable))if(e.config.$editable)e.editEnd();else if("boolean"===t.column.type){if(!e.events.fire(o.GridEvents.beforeEditStart,[t.row,t.column,"checkbox"]))return;if(e.events.fire(o.GridEvents.afterEditStart,[t.row,t.column,"checkbox"]),!e.events.fire(o.GridEvents.beforeEditEnd,[!t.row[t.column.id],t.row,t.column]))return;e.events.fire(o.GridEvents.afterEditEnd,[!t.row[t.column.id],t.row,t.column])}else e.editCell(t.row.id,t.column.id,t.column.editorType)}else e.config.$editable&&e.editEnd()},space:function(t){var i,n=(0,a.normalizeCell)(e.selection.getCell(),e);if(c&&(null!==(i=null==n?void 0:n.column.editable)&&void 0!==i?i:e.config.editable)&&!e.config.$editable&&n&&"boolean"===n.column.type){if(t.preventDefault(),!e.events.fire(o.GridEvents.beforeEditStart,[n.row,n.column,"checkbox"]))return;if(e.events.fire(o.GridEvents.afterEditStart,[n.row,n.column,"checkbox"]),!e.events.fire(o.GridEvents.beforeEditEnd,[!n.row[n.column.id],n.row,n.column]))return;e.events.fire(o.GridEvents.afterEditEnd,[!n.row[n.column.id],n.row,n.column])}},escape:function(){e.config.$editable&&e.editEnd(!0)},tab:function(t){if(e.config.selection&&!(0,r.locateNodeByClassName)(t,"dhx_grid-header-cell")){e.config.$editable&&e.editEnd();var i=e.selection.getCell(),n=e.config.columns.filter((function(e){return!e.hidden}));if(i){if(i.row.$opened&&i.row.$subRowHeight){var o=e.getSubRow(i.row.id),a=o.view,l=o.element;return void((null==a?void 0:a.name.includes("grid"))?(a.selection.setCell(a.data.getId(0)),s.focusManager.setFocusId(a._uid)):l.focus())}var c=n.indexOf(i.column)+h(e,"right");if(c>=0&&c<n.length)t&&t.preventDefault(),e.scrollTo(i.row.id.toString(),n[c].id.toString()),e.selection.setCell(i.row.id,n[c].id);else if(c>=0){var u=e.data.getIndex(i.row.id.toString())+1;u<e.data.getLength()&&(t&&t.preventDefault(),e.scrollTo(e.data.getId(u).toString(),n[0].id.toString()),e.selection.setCell(e.data.getId(u),n[0].id))}}}},"shift+tab":function(t){var i,n,o;if(e.config.selection&&!(0,r.locateNodeByClassName)(t,"dhx_grid-header-cell")){e.config.$editable&&e.editEnd();var a=e.selection.getCell(),l=e.config.columns.filter((function(e){return!e.hidden}));if(a){var c=(0,r.locate)(null===(o=null===(n=null===(i=e.getRootView().node)||void 0===i?void 0:i.parent)||void 0===n?void 0:n.parent)||void 0===o?void 0:o.el,"data-dhx-root-widget-id");if(c)return void s.focusManager.setFocusId(c);var u=l.indexOf(a.column)+h(e,"left");if(u>=0&&u<l.length)t&&t.preventDefault(),e.scrollTo(a.row.id.toString(),l[u].id.toString()),e.selection.setCell(a.row.id,l[u].id);else if(u<e.data.getLength()){var d=e.data.getIndex(a.row.id.toString())-1;d>=0&&(t&&t.preventDefault(),e.scrollTo(e.data.getId(d).toString(),l[l.length-1].id.toString()),e.selection.setCell(e.data.getId(d),l[l.length-1].id))}}}},arrowUp:function(t){d(t,e,"vertical",h(e,"up"))},"ctrl+enter":function(){var t=(0,a.normalizeCell)(e.selection.getCell(),e);t&&(t.row.$opened?e.collapse(t.row.id):e.expand(t.row.id))},"ctrl+arrowUp":function(t){d(t,e,"vertical",-1,!0)},"shift+arrowUp":function(t){e.config.multiselection&&d(t,e,"vertical",-1,!1,!1,!0)},"ctrl+shift+arrowUp":function(t){e.config.multiselection&&d(t,e,"vertical",-1,!0,!1,!0)},arrowDown:function(t){d(t,e,"vertical",h(e,"down"))},"ctrl+arrowDown":function(t){d(t,e,"vertical",1,!0)},"shift+arrowDown":function(t){e.config.multiselection&&d(t,e,"vertical",1,!1,!1,!0)},"ctrl+shift+arrowDown":function(t){e.config.multiselection&&d(t,e,"vertical",1,!0,!1,!0)},arrowRight:function(t){d(t,e,"horizontal",h(e,"right"))},"ctrl+arrowRight":function(t){d(t,e,"horizontal",1,!0)},"shift+arrowRight":function(t){e.config.multiselection&&d(t,e,"horizontal",1,!1,!1,!0)},"ctrl+shift+arrowRight":function(t){e.config.multiselection&&d(t,e,"horizontal",1,!0,!1,!0)},arrowLeft:function(t){d(t,e,"horizontal",h(e,"left"))},"ctrl+arrowLeft":function(t){d(t,e,"horizontal",-1,!0)},"shift+arrowLeft":function(t){e.config.multiselection&&d(t,e,"horizontal",-1,!1,!1,!0)},"ctrl+shift+arrowLeft":function(t){e.config.multiselection&&d(t,e,"horizontal",-1,!0,!1,!0)}},u)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVisibleRowNode=t.getRowNode=void 0,t.getRowNode=function(e,t,i){var n=i?".dhx_grid__cols_".concat(i,"--fixed"):":not(.dhx_grid-fixed-cols-wrap)";return t.querySelector("".concat(n,' .dhx_grid-row[data-dhx-id="').concat(e,'"]'))},t.getVisibleRowNode=function(e,t,i){var n=document.createElement("div");return n.style.width=t+"px",n.style.overflow="hidden",e.style.width=t-i+"px",e.style.marginLeft=i+"px",n.appendChild(e),n}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProGrid=void 0;var n=i(0),o=i(170),r=i(91),a=function(){function e(e,t){var i;void 0===t&&(t={}),(i="tree"===t.type||t.group?new o.TreeGrid(e,t):new r.ExtendedGrid(e,t)).name="progrid",(0,n.extendComponent)(this,i)}return e.prototype.paint=function(){throw new Error("Method not implemented.")},e.prototype.destructor=function(){throw new Error("Method not implemented.")},e.prototype.expand=function(e){throw new Error("Method not implemented.")},e.prototype.collapse=function(e){throw new Error("Method not implemented.")},e.prototype.expandAll=function(){throw new Error("Method not implemented.")},e.prototype.collapseAll=function(){throw new Error("Method not implemented.")},e.prototype.showColumn=function(e){throw new Error("Method not implemented.")},e.prototype.hideColumn=function(e){throw new Error("Method not implemented.")},e.prototype.isColumnHidden=function(e){throw new Error("Method not implemented.")},e.prototype.showRow=function(e){throw new Error("Method not implemented.")},e.prototype.hideRow=function(e){throw new Error("Method not implemented.")},e.prototype.isRowHidden=function(e){throw new Error("Method not implemented.")},e.prototype.scrollTo=function(e,t){throw new Error("Method not implemented.")},e.prototype.scroll=function(e,t){throw new Error("Method not implemented.")},e.prototype.getScrollState=function(){throw new Error("Method not implemented.")},e.prototype.setColumns=function(e){throw new Error("Method not implemented.")},e.prototype.addRowCss=function(e,t){throw new Error("Method not implemented.")},e.prototype.removeRowCss=function(e,t){throw new Error("Method not implemented.")},e.prototype.addCellCss=function(e,t,i){throw new Error("Method not implemented.")},e.prototype.removeCellCss=function(e,t,i){throw new Error("Method not implemented.")},e.prototype.adjustColumnWidth=function(e,t){throw new Error("Method not implemented.")},e.prototype.getCellRect=function(e,t){throw new Error("Method not implemented.")},e.prototype.getColumn=function(e){throw new Error("Method not implemented.")},e.prototype.addSpan=function(e){throw new Error("Method not implemented.")},e.prototype.getSpan=function(e,t){throw new Error("Method not implemented.")},e.prototype.removeSpan=function(e,t){throw new Error("Method not implemented.")},e.prototype.editCell=function(e,t,i){throw new Error("Method not implemented.")},e.prototype.editEnd=function(e){throw new Error("Method not implemented.")},e.prototype.getHeaderFilter=function(e){throw new Error("Method not implemented.")},e.prototype.getSummary=function(e){throw new Error("Method not implemented.")},e.prototype.getSubRow=function(e){throw new Error("Method not implemented.")},e.prototype.getRootNode=function(){throw new Error("Method not implemented.")},e.prototype.getRootView=function(){throw new Error("Method not implemented.")},e.prototype.getSortingState=function(){throw new Error("Method not implemented.")},e}();t.ProGrid=a},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(171),t),o(i(172),t),o(i(92),t)},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.TreeGrid=void 0;var a=i(52),s=i(0),l=i(11),c=i(92),u=function(e){function t(t,i){var n=e.call(this,t,r({type:"tree",dropBehaviour:"complex",dragExpand:!0},i))||this;return n.config.subRow&&(n.config.subRow=null),n}return o(t,e),t.prototype.expand=function(e){if(this.data.haveItems(e)){if(!this._expand(this.data.getItem(e)))return;this._normalizeSpans(),this.paint()}},t.prototype.collapse=function(e){if(this.data.haveItems(e)){if(!this._collapse(this.data.getItem(e)))return;this._normalizeSpans(),this.paint()}},t.prototype.expandAll=function(){var e=this;this.data.eachChild(this.data.getRoot(),(function(t){return e.data.haveItems(t.id)&&e._expand(t)})),this._normalizeSpans(),this.paint()},t.prototype.collapseAll=function(){var e=this;this.data.forEach((function(t){return e.data.haveItems(t.id)&&e._collapse(t)})),this._normalizeSpans(),this.paint()},t.prototype.showRow=function(e){var t=this;if((0,s.isDefined)(e)){var i=this.data.getItem(e);i&&i.hidden&&this.events.fire(a.GridEvents.beforeRowShow,[i])&&(this.data.update(e,{hidden:!1,wasHidden:!1}),this.data.restoreOrder(),this.data.eachChild(e,(function(e){e.wasHidden||t.data.update(e.id,{hidden:!1},!0)})),this._checkFilters(!0),this.paint(),this.events.fire(a.GridEvents.afterRowShow,[i]))}},t.prototype.hideRow=function(e){var t=this;if((0,s.isDefined)(e)){var i=this.data.getItem(e);i&&!i.hidden&&this.events.fire(a.GridEvents.beforeRowHide,[i])&&(this.data.update(e,{hidden:!0,wasHidden:!0}),this.data.eachChild(e,(function(e){return t.data.update(e.id,{hidden:!0},!0)})),this._checkFilters(!0),this.paint(),this.events.fire(a.GridEvents.afterRowHide,[i]))}},t.prototype.getCellRect=function(e,t){var i,n=this.config.columns.filter((function(e){return!e.hidden})),o=this.data.mapVisible((function(e){return e})),r=this.getSpan(e,t),s=n.findIndex((function(e){return e.id==(r?r.column:t)})),l=o.findIndex((function(t){return t.id==(r?r.row:e)}));return{x:(0,a.getTotalWidth)(n.slice(0,s)),y:(0,a.getTotalHeight)(o.slice(0,l)),height:(null==r?void 0:r.rowspan)>1?(0,a.getSpanHeight)(o,r):(0,a.getTotalRowHeight)(o[l])||0,width:(null==r?void 0:r.colspan)>1?(0,a.getWidth)(this.config.columns,r.colspan,this.config.columns.findIndex((function(e){return e.id===r.column}))):(null===(i=n[s])||void 0===i?void 0:i.$width)||0}},t.prototype.getSpan=function(e,t){var i=this;if(this.config.spans){var n=null,o=0;n=function(t,r,a){var s=function(t,r){if(o++,t===e)return!0;if(o===r)return!1;for(var a=i.data.getItems(t),s=0;s<a.length;s++){if(a[s].$items)return n(a,a[s].id,r);if(o++,a[s].id===e)return!0;if(o===r)return!1}return-1}(r,a);if(-1!==s)return o=0,s;var l=(t=t||i.data.getItems(i.data.getParent(r)))[i.data.getIndex(r)+1];if(l)return n(t,l.id,a);var c=i.data.getParent(r),u=(t=i.data.getItems(i.data.getParent(c)))[i.data.getIndex(c)+1];return!!u&&n(t,u.id,a)};var r=this.config.spans,a=this.config.columns.findIndex((function(e){return e.id===t}));return r[(0,s.findIndex)(r,(function(t){var o=t.row,r=t.column,s=t.rowspan,l=void 0===s?1:s,c=t.colspan,u=void 0===c?1:c,d=i.config.columns.findIndex((function(e){return e.id===r}));return a>=d&&a<d+u&&!(o!==e&&1===l)&&n(null,o,l)}))]}},t.prototype._adjustColumnsWidth=function(e){var t,i,n,o,r,s=this,l=e.rows,c=e.cols,u=e.totalCols,d=e.adjust,h=void 0===d?this.config.adjust:d,f={};if("header"===h||!0===h){var p=c.filter((function(e){return e.header}));if(b=(0,a.getMaxColsWidth)(this._prepareColumnData(p,"header"),p,{font:"bold 14.4px Arial"},"header"))for(var v=0,g=Object.entries(b);v<g.length;v++){var _=g[v],m=_[0],y=_[1];f=Object.assign(f,((t={})[m]=+y+24+(r=this.getColumn(m),(0,a.isSortable)(s.config,r)?16:0),t))}}if("footer"===h||!0===h){var b;p=c.filter((function(e){return e.footer}));if(b=(0,a.getMaxColsWidth)(this._prepareColumnData(p,"footer"),p,{font:"bold 14.4px Arial"},"footer"))for(var w=0,x=Object.entries(b);w<x.length;w++){var C=x[w];m=C[0],y=C[1];(f[m]&&f[m]<+y+24||!f[m])&&(f=Object.assign(f,((i={})[m]=+y+24,i)))}}if(("data"===h||!0===h)&&(b=(0,a.getMaxColsWidth)(l,c,{font:"normal 14.4px Arial"},"data")))for(var E=0,S=Object.entries(b);E<S.length;E++){var I=S[E],k=(m=I[0],y=I[1],(null===(o=u[0])||void 0===o?void 0:o.id)===m?24*this.data.getMaxLevel()+14:24);(f[m]&&f[m]<+y+k||!f[m])&&(f=Object.assign(f,((n={})[m]=+y+k,n)))}return f},t.prototype._createCollection=function(){this.data=new c.TreeGridCollection({rootId:this.config.rootParent,collapsed:this.config.collapsed},this.events)},t.prototype._getRowIndex=function(e){return(0,s.findIndex)(this._serialize(),(function(t){return t.id==e}))},t.prototype._applyLocalFilter=function(t){void 0===t&&(t=!1),this.data.isGrouped()||e.prototype._applyLocalFilter.call(this,t)},t.prototype._setEventHandlers=function(){var t=this;e.prototype._setEventHandlers.call(this),this.events.on(l.DragEvents.dragIn,(function(e){var i=e.target;if(t.config.dragExpand){var n=t.data.getItem(i);n&&!n.$opened&&t.expand(i)}})),this.events.on(l.DragEvents.afterDrop,(function(e){var i=e.target,n=t.data.getItem(i);n&&!n.$opened&&t.expand(i)})),this.events.detach(a.GridEvents.filterChange,this),this.events.on(a.GridEvents.filterChange,(function(e,i,n,o){var r,s,l;if(t.events.fire(a.GridEvents.beforeFilter,[e,i])){e=null!=e?e:"",t._activeFilters||(t._activeFilters={});var c=t.getColumn(i),u=null==c?void 0:c.header.filter((function(e){return e.content===n&&void 0!==e.customFilter}))[0];if(""!==e){var d=(0,a.getEditorOptions)(c);"combobox"!==c.editorType&&"select"!==c.editorType&&"multiselect"!==c.editorType||!d||(e=Array.isArray(e)?e.map((function(e){var t;return(null===(t=d.find((function(t){return"string"==typeof t?t===e:t.value===e})))||void 0===t?void 0:t.id)||e})):null!==(s=null===(r=d.find((function(t){return"string"==typeof t?t===e:t.value===e})))||void 0===r?void 0:r.id)&&void 0!==s?s:e);t._activeFilters[i]={by:i,match:e,compare:null!==(l=null==u?void 0:u.customFilter)&&void 0!==l?l:function(e){var i=t.getColumn(e);return function(e,o,r){return t.content[n].match({val:e,match:o,obj:r,col:i})}}(i)}}else delete t._activeFilters[i];o||t.data.filter(t._activeFilters)}}))},t.prototype._serialize=function(e){var t=this;void 0===e&&(e=l.DataDriver.json);var i=[];this.data.eachChild(this.data.getRoot(),(function(e){if(e){var n=r(r({},e),{$level:e.$level||t.data.getLevel(e.id),$items:t.data.haveItems(e.id)});t.data.haveItems(e.id)&&void 0===e.$opened&&(e.$opened=n.$opened=!0),i.push(n)}}));var n=(0,l.toDataDriver)(e);if(n)return n.serialize(i)},t}(a.ExtendedGrid);t.TreeGrid=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ContextMenu=void 0;var r=i(0),a=i(3),s=i(19),l=i(22),c=function(e){function t(t,i){var n=e.call(this,t,(0,r.extend)({$name:"context-menu"},i))||this;return n._isContextMenu=!0,n}return o(t,e),t.prototype.showAt=function(e,t){if(void 0===t&&(t="bottom"),e instanceof MouseEvent)this._close(e),this._changeActivePosition({left:window.pageXOffset+e.x+1,right:window.pageXOffset+e.x+1,top:window.pageYOffset+e.y,bottom:window.pageYOffset+e.y,zIndex:(0,s.getZIndex)(e.target)},t);else if(window.TouchEvent&&e instanceof TouchEvent)this._close(e),this._changeActivePosition({left:window.pageXOffset+e.touches[0].clientX,right:window.pageXOffset+e.touches[0].clientX,top:window.pageYOffset+e.touches[0].clientY,bottom:window.pageYOffset+e.touches[0].clientY,zIndex:(0,s.getZIndex)(e.target)},t);else if(e instanceof HTMLElement||"string"==typeof e){var i=(0,a.toNode)(e);this._changeActivePosition((0,a.getRealPosition)(i),t)}},t.prototype._getFactory=function(){return(0,l.createFactory)({widget:this,defaultType:"menuItem",allowedTypes:["menuItem","spacer","separator","customHTML","customHTMLButton"],widgetName:"context-menu"})},t.prototype._close=function(t){var i=this;this.events.on(l.NavigationBarEvents.afterHide,(function(){i._activeMenu=null,i._changeActivePosition(null,null)})),e.prototype._close.call(this,t)},t.prototype._getMode=function(e,t,i){return i?this._mode:"right"},t.prototype._changeActivePosition=function(e,t){this._activePosition=e,this._mode=t,this._listenOuterClick(),this.paint()},t}(l.Navbar);t.ContextMenu=c},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Navbar=void 0;var a=i(0),s=i(1),l=i(4),c=i(19),u=i(3),d=i(25),h=i(9),f=i(11),p=i(42);var v=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n._isContextMenu=!1,n._documentHaveListener=!1,n.config=(0,a.extend)({rootId:"string"==typeof t&&t||n._uid},i),n._rootItem={},Array.isArray(n.config.data)?(n.events=new l.EventSystem(n),n.data=new f.TreeCollection({rootId:n.config.rootId},n.events)):n.config.data&&n.config.data.events?(n.data=n.config.data,n.events=n.data.events,n.events.context=n):(n.events=new l.EventSystem(n),n.data=new f.TreeCollection({rootId:n.config.rootId},n.events)),n._documentClick=function(e){if(n._documentHaveListener){var t=(0,u.locateNode)(e),i=n.data.getRoot(),o=t&&t.getAttribute("data-dhx-id"),r=n.data.getParent(o),s="ontouchstart"in window||navigator.msMaxTouchPoints;if(document.removeEventListener("click",n._documentClick),n._documentHaveListener=!1,(0,a.isId)(o)&&n._currentRoot===o)return;((!s||t)&&n._isContextMenu||i!==r&&r&&n.data.getItem(o))&&r&&n.data.getItem(o)&&(!n._isContextMenu||i===(0,u.locate)(e,"data-dhx-widget-id"))||n._close(e)}},n._currentRoot=n.data.getRoot(),n._factory=n._getFactory(),n._initHandlers(),n._keyManager=new d.KeyManager((function(e,t){return t===n._uid})),n._initEvents(),Array.isArray(n.config.data)&&n.data.parse(n.config.data),n}return o(t,e),t.prototype.paint=function(){e.prototype.paint.call(this),this._isContextMenu&&!this._vpopups&&this._init(),this._vpopups&&this._vpopups.redraw()},t.prototype.disable=function(e){var t=this;void 0!==e?this._setProp(e,"disabled",!0):this.data.forEach((function(e){var i=e.id;return t._setProp(i,"disabled",!0)}))},t.prototype.enable=function(e){var t=this;void 0!==e?this._setProp(e,"disabled",!1):this.data.forEach((function(e){var i=e.id;return t._setProp(i,"disabled",!1)}))},t.prototype.isDisabled=function(e){var t=this.data.getItem(e);if(t)return t.disabled||!1},t.prototype.show=function(e){var t=this;void 0!==e?this._setProp(e,"hidden",!1):this.data.forEach((function(e){var i=e.id;return t._setProp(i,"hidden",!1)}))},t.prototype.hide=function(e){var t=this;void 0!==e?this._setProp(e,"hidden",!0):this.data.forEach((function(e){var i=e.id;return t._setProp(i,"hidden",!0)}))},t.prototype.destructor=function(){this.events.clear(),this._keyManager&&this._keyManager.destructor(),this._vpopups&&this._vpopups.node&&this._vpopups.unmount(),this.unmount()},t.prototype.select=function(e,t){var i=this;if(void 0===t&&(t=!0),!(0,a.isId)(e))throw new Error("Function argument cannot be empty, for more info check documentation https://docs.dhtmlx.com");t&&this.unselect(),this.data.update(e,{active:!0}),this.data.eachParent(e,(function(e){i.data.update(e.id,{active:!0})}))},t.prototype.unselect=function(e){var t=this;(0,a.isId)(e)?(this.data.update(e,{active:!1}),this.data.eachChild(e,(function(e){t.data.update(e.id,{active:!1})}))):this.data.forEach((function(e){t.data.update(e.id,{active:!1})}))},t.prototype.isSelected=function(e){if((0,a.isId)(e)&&this.data.getItem(e))return!!this.data.getItem(e).active},t.prototype.getSelected=function(){var e=[];return this.data.forEach((function(t){t.active&&e.push(t.id)})),e},t.prototype._customHandlers=function(){return{}},t.prototype._close=function(e){var t=this;this._popupActive&&this.events.fire(p.NavigationBarEvents.beforeHide,[this._activeMenu,e])&&(this._activeParents&&this._activeParents.forEach((function(e){return t.data.exists(e)&&t.data.update(e,{$activeParent:!1})})),"click"===this.config.navigationType&&(this._isActive=!1),clearTimeout(this._currentTimeout),this._popupActive=!1,this._activeMenu=null,this._vpopups.node&&this._vpopups.unmount(),this._vpopups=null,this.events.fire(p.NavigationBarEvents.afterHide,[e]),this.paint())},t.prototype._init=function(){var e,t=this;if(!this._isContextMenu||this._activePosition){var i=this.getRootNode()||document.documentElement,n=null===(e=null==i?void 0:i.closest("[data-dhx-theme]"))||void 0===e?void 0:e.getAttribute("data-dhx-theme");this._vpopups=(0,s.create)({render:function(){var e;return(0,s.el)("div",{"data-dhx-widget-id":t._uid,"data-dhx-theme":n||"light",class:"dhx_".concat(null===(e=t.config)||void 0===e?void 0:e.$name,"--popup-menu ").concat(t._isContextMenu?" dhx_context-menu":""," ").concat(t.config.css?t.config.css.split(" ").map((function(e){return t._isContextMenu?e:e+"--popup-menu"})).join(" "):""),onmousemove:t._handlers.onmousemove,onmouseleave:t._handlers.onmouseleave,onclick:t._handlers.onclick,onmousedown:t._handlers.onmousedown,onkeydown:t._handlers.onkeydown},t._drawPopups())}}),this._vpopups.mount(document.body)}},t.prototype._initHandlers=function(){var e=this;this._isActive="click"!==this.config.navigationType,this._handlers=r({onkeydown:function(t){var i=(0,u.locate)(t)||void 0;(0,u.locateNode)(t,"data-dhx-widget-id").contains(document.activeElement)&&e.events.fire(p.NavigationBarEvents.keydown,[t,i])},onmousemove:function(t){if(e._isActive){var i=(0,u.locateNode)(t);if(i){var n=i.getAttribute("data-dhx-id");if(e._activeMenu!==n){if(e.data.haveItems(n)){e._vpopups||e._init(),e._setRoot(n);var o=(0,u.getRealPosition)(i);e.data.update(n,{$position:o},!1)}e._activeItemChange(n,t)}}}},onmouseleave:function(t){if("click"!==e.config.navigationType)if(e._popupActive){var i=(0,u.locateNode)(t,"data-dhx-id","relatedTarget");if(i){var n=i.getAttribute("data-dhx-id");if(e.data.getItem(n)||(e._close(t),e._activeItemChange(null,t)),e.data.haveItems(n)){e._vpopups||e._init(),e._setRoot(n);var o=(0,u.getRealPosition)(i);e.data.update(n,{$position:o},!1),e._activeItemChange(n,t)}}else e._close(t),e._activeItemChange(null,t)}else e._activeItemChange(null,t)},onclick:function(t){var i=(0,u.locateNode)(t);if(i){var n=i.getAttribute("data-dhx-id");if(!e.isDisabled(n)){var o=e.data.getItem(n);if(!(null==o?void 0:o.multiClick)){if(e._currentRoot===n)return e.events.fire(p.NavigationBarEvents.click,[n,t]),void("click"===e.config.navigationType&&e._close(t));if(e.data.haveItems(n)){e._vpopups||e._init(),e._isActive||(e._isActive=!0),e._setRoot(n);var r=(0,u.getRealPosition)(i);e.data.update(n,{$position:r},!1),e._activeItemChange(n,t),e.events.fire(p.NavigationBarEvents.click,[n,t])}else switch(null==o?void 0:o.type){case"input":case"title":break;case"menuItem":case"selectButton":e._onMenuItemClick(n,t);break;case"imageButton":case"button":case"customButton":case"customHTML":case"navItem":o.twoState&&e.data.update(o.id,{active:!o.active}),e.events.fire(p.NavigationBarEvents.click,[n,t]),e._close(t);break;default:e._close(t)}}}}},onmousedown:function(t){var i=(0,u.locateNode)(t);if(i){var n=i.getAttribute("data-dhx-id"),o=e.data.getItem(n);if(null==o?void 0:o.multiClick){var r,a=365,s=function(){e.events.fire(p.NavigationBarEvents.click,[n,t]),a>50&&(a-=55),r=setTimeout(s,a)},l=function(){clearTimeout(r),document.removeEventListener("mouseup",l)};s(),document.addEventListener("mouseup",l)}}}},this._customHandlers())},t.prototype._initEvents=function(){var e=this,t=null;[p.DataEvents.change,p.DataEvents.filter].forEach((function(i){e.events.on(i,(function(){return e.paint(),t&&clearTimeout(t),void(t=setTimeout((function(){var i={};e.data.eachChild(e.data.getRoot(),(function(e){e.group&&(e.twoState=!0,function(e,t){e[t.group]?(t.active&&(e[t.group].active=t.id),e[t.group].elements.push(t.id)):e[t.group]={active:t.active?t.id:null,elements:[t.id]}}(i,e))}),!0),e._groups=i,e._resetHotkeys(),t=null,e.paint()}),100))}))})),this.events.on(p.NavigationBarEvents.click,(function(t){var i=e.data.getItem(t),n=e.data.getItem(null==i?void 0:i.parent);if(n&&"selectButton"===n.type&&e.data.update(i.parent,{value:i.value,icon:i.icon}),null==i?void 0:i.group){var o=e._groups[i.group];o.active&&e.data.update(o.active,{active:!1}),o.active=i.id,e.data.update(i.id,{active:!0})}})),this.events.on(p.NavigationBarEvents.inputChange,(function(t,i){e.data.update(t,{value:i})})),this._customInitEvents()},t.prototype._getMode=function(e,t,i){return void 0===i&&(i=!1),e.parent===t?"bottom":"right"},t.prototype._drawMenuItems=function(e,t){var i=this;return void 0===t&&(t=!0),this.data.map((function(e){return i._factory(e,t)}),e,!1)},t.prototype._setRoot=function(e){},t.prototype._getParents=function(e,t){var i=[],n=!1,o=this.data.getItem(e),r=o&&o.disabled;return this.data.eachParent(e,(function(e){e.id===t?(i.push(e.id),n=!0):n||i.push(e.id)}),!r),this._isContextMenu&&this._activePosition&&i.push(t),i},t.prototype._listenOuterClick=function(){this._documentHaveListener||(document.addEventListener("click",this._documentClick,!0),this._documentHaveListener=!0)},t.prototype._customInitEvents=function(){},t.prototype._drawPopups=function(){var e=this,t=this._activeMenu;if(!this._isContextMenu&&!t)return null;var i=this.getRootNode(),n=i&&i.offsetParent&&i.offsetParent.offsetParent,o=(0,c.getZIndex)(n),a=this._currentRoot,l=this._getParents(t,a);return this._activeParents=l,l.forEach((function(t){return e.data.exists(t)&&e.data.update(t,{$activeParent:!0},!1)})),l.map((function(t){if(!e.data.haveItems(t))return null;var i=e.data.getItem(t)||e._rootItem;return e._popupActive=!0,(0,s.el)("ul",r({class:"dhx_widget dhx_menu"+(e.config.menuCss?" "+e.config.menuCss:""),_key:t,_hooks:{didInsert:function(n){var s=n.el.getBoundingClientRect(),l=s.width,c=s.height,d=e._isContextMenu&&e._activePosition&&t===a?e._activePosition:i.$position,h=e._getMode(i,a,d===e._activePosition),f=(0,u.calculatePosition)(d,{mode:h,auto:!0,width:l,height:c});i.$style=r(r({},f),{zIndex:e._activePosition&&e._activePosition.zIndex||o}),n.patch({style:i.$style})},didRecycle:function(n,s){if(e._isContextMenu&&e._activePosition&&t===a){var l=s.el.getBoundingClientRect(),c=l.width,d=l.height,h=(0,u.calculatePosition)(e._activePosition,{mode:e._getMode(i,a,!0),width:c,height:d});i.$style=r(r({},h),{zIndex:e._activePosition.zIndex||o}),s.patch({style:i.$style})}}},tabindex:0,style:i.$style||{position:"absolute"}},function(e){return{role:"menu","aria-labeledby":e.id,"aria-live":"polite"}}(i)),e._drawMenuItems(t))})).reverse()},t.prototype._onMenuItemClick=function(e,t){var i=this.data.getItem(e);i.disabled||(i.twoState&&this.data.update(i.id,{active:!i.active}),this.events.fire(p.NavigationBarEvents.click,[e,t]),this._close(t))},t.prototype._activeItemChange=function(e,t){var i=this;if(this._activeParents){var n=this._getParents(e,this._currentRoot);this._activeParents.forEach((function(e){i.data.exists(e)&&!n.includes(e)&&i.data.update(e,{$activeParent:!1},!1)}))}(0,a.isId)(e)&&!this._documentHaveListener&&this._listenOuterClick(),(0,a.isId)(e)&&this.data.haveItems(e)?(this._activeMenu===e&&this._popupActive||this.events.fire(p.NavigationBarEvents.openMenu,[e]),clearTimeout(this._currentTimeout),this.paint()):(clearTimeout(this._currentTimeout),this._currentTimeout=setTimeout((function(){return i.paint()}),400)),this._activeMenu=e},t.prototype._resetHotkeys=function(){var e=this;this._keyManager.removeHotKey(null,this),this.data.map((function(t){t.hotkey&&e._keyManager.addHotKey(t.hotkey,(function(){return e._onMenuItemClick(t.id,null)}))}))},t.prototype._setProp=function(e,t,i){var n,o=this;Array.isArray(e)?e.forEach((function(e){var n;return o.data.update(e,((n={})[t]=i,n))})):this.data.update(e,((n={})[t]=i,n))},t}(h.View);t.Navbar=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFactory=void 0;var n=i(176),o=i(177),r=i(178),a=i(179),s=i(180),l=i(181),c=i(182),u=i(183),d=i(184),h=i(185),f=i(36);t.createFactory=function(e){for(var t=e.defaultType,i=e.allowedTypes,p=e.widgetName,v=e.widget,g=new Set,_=0,m=i;_<m.length;_++){var y=m[_];g.add(y)}var b=v.config,w=v.events,x=v.data;return function(e,i){if(e.hidden)return null;if(!(e.type&&"button"!==e.type&&"navItem"!==e.type&&"menuItem"!==e.type||e.value||e.icon||e.html))return null;e.type=e.type||t,g&&!g.has(e.type)&&(e.type=t),"imageButton"===e.type&&"ribbon"!==p&&(e.active=!1),i&&"spacer"!==e.type&&"separator"!==e.type&&"customHTML"!==e.type&&(e.type="menuItem"),x.haveItems(e.id)&&function(e,t,i){switch(e){case"sidebar":case"context-menu":t.$openIcon="right";break;case"toolbar":t.parent===i.getRoot()?t.$openIcon="right":t.$openIcon="bottom";break;case"menu":t.parent!==this.data.getRoot()&&(t.$openIcon="right");break;case"ribbon":var n=i.getItem(t.parent);n&&"block"!==t.type&&("block"===n.type?t.$openIcon="bottom":t.$openIcon="right")}}(p,e,x),"toolbar"===p&&e.items&&e.items.forEach((function(e){e.type||(e.type="menuItem")}));var v="customHTML"!==e.type&&function(e,t,i,f){switch(e.type){case"navItem":case"selectButton":return(0,o.navItem)(e,i,f.collapsed);case"button":return(0,n.button)(e,i);case"title":return(0,d.title)(e,i);case"separator":return(0,c.separator)(e,i);case"spacer":return(0,u.spacer)(e,i);case"input":return(0,s.input)(e,t,i);case"imageButton":return(0,a.imageButton)(e,i);case"menuItem":return(0,l.menuItem)(e,i,f.asMenuItem);case"customHTMLButton":return(0,r.customHTMLButton)(e,i,f.asMenuItem);case"datePicker":return(0,h.datePicker)(e,t,i);default:throw new Error("unknown item type "+e.type)}}(e,w,p,{asMenuItem:i,collapsed:"sidebar"!==p||b.collapsed});return(0,f.navbarComponentMixin)(p,e,i,v)}}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.button=void 0;var o=i(1),r=i(36);t.button=function(e,t){var i=e.icon&&!e.value,a=i?" dhx_navbar-count--absolute":" dhx_navbar-count--button-inline";return(0,o.el)("button.dhx_button",n({class:(0,r.getNavbarButtonCSS)(e,t),"data-dhx-id":e.id,disabled:e.disabled,type:"button"},function(e){var t=e.active||e.$activeParent,i={"aria-disabled":e.disabled?"true":"false","aria-label":e.value||e.tooltip||e.id||""+" ".concat(e.count||"")};return e.items&&(i.id=e.id,i["aria-haspopup"]="menu",t&&(i["aria-expanded"]="true")),i}(e)),[e.icon?(0,r.getIcon)(e.icon,"button"):null,e.html?(0,o.el)("div.dhx_button__text",{".innerHTML":e.html}):e.value&&(0,o.el)("span.dhx_button__text",e.value),e.count>0&&(0,r.getCount)(e,a,i),e.value&&e.$openIcon?(0,o.el)("span.dhx_button__icon.dhx_button__icon--menu.dxi.dxi-menu-right",{"aria-hidden":"true"}):null,e.loading&&(0,o.el)("span.dhx_button__loading",{"aria-hidden":"true"},[(0,o.el)("span.dhx_button__loading-icon.dxi.dxi-loading")])])}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.navItem=void 0;var o=i(1),r=i(36);t.navItem=function(e,t,i){var a=" dhx_"+t+"-button";return(0,o.el)("button",n({class:"dhx_button"+a+(e.active||e.$activeParent?a+"--active":"")+(e.disabled?a+"--disabled":"")+(e.$openIcon?a+"--select":"")+(e.circle?a+"--circle":"")+(e.size?" "+a+"--"+e.size:"")+(!e.value&&e.icon?a+"--icon":"")+(e.css?" "+e.css:""),"data-dhx-id":e.id,disabled:e.disabled,type:"button"},function(e){var t={"aria-disabled":e.disabled?"true":"false","aria-label":e.value||" "},i=e.active||e.$activeParent;return"selectButton"===e.type||e.items?(t.id=e.id,t["aria-haspopup"]="menu",i&&(t["aria-expanded"]="true")):((e.twoState||i)&&(t["aria-pressed"]=i?"true":"false"),!e.value&&e.icon&&e.tooltip&&(t["aria-label"]="".concat(e.tooltip," ").concat(e.count||""))),t}(e)),[e.icon&&(0,o.el)("span",{class:e.icon+a+"__icon","aria-hidden":"true"}),e.html&&(0,o.el)("div",{class:a.trim()+"__html",".innerHTML":e.html}),!e.html&&e.value&&(0,o.el)("span",{class:a.trim()+"__text"},e.value),e.count>0&&(0,r.getCount)(e,a+"__count",i),e.$openIcon&&(0,o.el)("span.dxi.dxi-menu-right",{class:a+"__caret","aria-hidden":"true"})])}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.customHTMLButton=void 0;var o=i(1);t.customHTMLButton=function(e,t,i){var r=i?" dhx_button dhx_menu-button":" dhx_button dhx_nav-menu-button";return(0,o.el)("button",n({class:"dhx_custom-button"+r+(e.$activeParent?r+"--active":""),"data-dhx-id":e.id,type:"button",".innerHTML":e.html},function(e){var t={"aria-disabled":e.disabled?"true":"false"};return(e.twoState||e.active||e.$activeParent)&&(t["aria-pressed"]=e.active||e.$activeParent?"true":"false"),t}(e)),e.html?"":e.value)}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.imageButton=void 0;var o=i(1),r=i(36);t.imageButton=function(e,t){var i="dhx_"+t+"-button-image",a="ribbon"===t;return(0,o.el)("button.dhx_button",n({class:i+(e.size?" "+i+"--"+e.size:"")+(!e.value&&e.src?" "+i+"--icon":"")+(a&&e.$openIcon?" "+i+"--select":"")+(e.active?" "+i+"--active":""),"data-dhx-id":e.id,type:"button"},function(e){var t={"aria-disabled":e.disabled?"true":"false"};return(e.twoState||e.active)&&(t["aria-pressed"]=e.active?"true":"false"),!e.value&&e.src&&e.tooltip&&(t["aria-label"]="".concat(e.tooltip," ").concat(e.count||"")),t}(e)),[a&&e.value&&e.$openIcon&&(0,o.el)("span.dxi.dxi-menu-right",{class:i+"__caret","aria-hidden":"true"}),e.html?(0,o.el)("div",{class:i+"__text",".innerHTML":e.html}):e.value&&(0,o.el)("span",{class:i+"__text"},e.value),e.src&&(0,o.el)("span",{class:i+"__image",style:{backgroundImage:"url(".concat(e.src,")")},role:"presentation"}),e.count>0&&(0,r.getCount)(e,i+"__count",!0)])}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.input=void 0;var n=i(1),o=i(42);function r(e,t){e.fire(o.NavigationBarEvents.inputBlur,[t])}function a(e,t){e.fire(o.NavigationBarEvents.inputFocus,[t])}function s(e,t,i){e.fire(o.NavigationBarEvents.inputChange,[t,i.target.value])}t.input=function(e,t,i){return(0,n.el)(".dhx_form-group.dhx_form-group--no-message-holder"+(e.hiddenLabel?".dhx_form-group--label_sr":".dhx_form-group--inline")+".dhx_".concat(i,"__input"),{style:{width:e.width?e.width:"200px"},role:"presentation"},[e.label&&(0,n.el)("label.dhx_label",{for:e.id,style:{maxWidth:e.hiddenLabel?null:"100%"}},e.label),(0,n.el)(".dhx_input__wrapper",{role:"presentation"},[(0,n.el)("input.dhx_input",{id:e.id,placeholder:e.placeholder,class:e.icon?"dhx_input--icon-padding":"",autocomplete:e.autocomplete?"on":"off",value:e.value,disabled:e.disabled,onblur:[r,t,e.id],onfocus:[a,t,e.id],onchange:[s,t,e.id],"data-dhx-id":e.id,_hooks:{didInsert:function(i){t&&t.fire(o.NavigationBarEvents.inputCreated,[e.id,i.el])}},_key:e.id,"aria-label":e.label||e.helpMessage||"type ".concat(e.placeholder?"text like "+e.placeholder:"text")}),e.icon?(0,n.el)(".dhx_input__icon",{class:e.icon,"aria-hidden":"true"}):null])])}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.menuItem=void 0;var o=i(1),r=i(36),a=i(0);t.menuItem=function(e,t,i){var s=i?" dhx_menu-button":" dhx_nav-menu-button",l=(0,a.isDefined)(e.count);return(0,o.el)("button",n({class:"dhx_button"+s+(e.disabled?s+"--disabled":"")+(e.active||e.$activeParent?s+"--active":""),disabled:e.disabled,"data-dhx-id":e.id,type:"button"},function(e){var t={role:"menuitem","aria-disabled":e.disabled?"true":"false"};return e.items&&(t["aria-haspopup"]="true"),t}(e)),i?[e.icon||e.value||e.html?(0,o.el)("span.dhx_menu-button__block.dhx_menu-button__block--left",[e.icon&&(0,o.el)("span.dhx_menu-button__icon",{class:e.icon}),e.html?(0,o.el)("div.dhx_menu-button__text",{".innerHTML":e.html}):e.value&&(0,o.el)("span.dhx_menu-button__text",e.value)]):null,l||e.hotkey||e.items?(0,o.el)("span.dhx_menu-button__block.dhx_menu-button__block--right",[l&&(0,r.getCount)(e," dhx_menu-button__count",!1),e.hotkey&&(0,o.el)("span.dhx_menu-button__hotkey",e.hotkey),e.items&&(0,o.el)("span.dhx_menu-button__caret.dxi.dxi-menu-right")]):null]:[e.icon&&(0,o.el)("span.dhx_menu-button__icon",{class:e.icon}),e.html?(0,o.el)("div.dhx_menu-button__text",{".innerHTML":e.html}):e.value&&(0,o.el)("span.dhx_nav-menu-button__text",e.value),l&&(0,r.getCount)(e," dhx_menu-button__count",!1)])}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.separator=void 0,t.separator=function(e,t){return null}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.spacer=void 0,t.spacer=function(e,t){return null}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.title=void 0;var n=i(1);t.title=function(e,t){return(0,n.el)("span",{class:"dhx_navbar-title dhx_navbar-title--"+t,"data-dhx-id":e.id,".innerHTML":e.html,"aria-label":e.value||""},e.html?null:e.value)}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.datePicker=void 0;var o=i(1),r=i(41),a=i(10),s=i(42),l=i(21),c=i(3);function u(e,t,i){var n=i.target;n&&(n.value=t.$calendar.getValue()),e.fire(s.NavigationBarEvents.inputBlur,[null==t?void 0:t.id])}function d(e,t,i){(0,o.awaitRedraw)().then((function(){return t.$popup.show(i.target,{theme:i.target})})),e.fire(s.NavigationBarEvents.inputFocus,[null==t?void 0:t.id])}function h(e,t,i){var n=i.target.value,o=e.$calendar.config.dateFormat;return n.length?(0,l.stringToDate)(n,o,!0)&&e.$calendar.setValue((0,l.stringToDate)(n,o)):e.$calendar.clear(),t.fire(s.NavigationBarEvents.input,[(0,c.locate)(i),n]),!1}t.datePicker=function(e,t,i){e.$popup||(e.$popup=new a.Popup),e.$calendar||(e.$calendar=new r.Calendar(null,n(n({},e),{css:"dhx_widget--bordered"})),e.$popup.attach(e.$calendar),e.$calendar.events.on("change",(function(i,n,o){var r;o&&e.$popup.isVisible()&&e.$popup.hide();var a="date"===(null===(r=e.valueFormat)||void 0===r?void 0:r.toLowerCase());t.fire(s.NavigationBarEvents.inputChange,[e.id,e.$calendar.getValue(a)])})));var l=e.$calendar.getValue();return e.mode&&"calendar"!==e.mode&&e.$calendar.showDate(void 0,e.mode),(0,o.el)(".dhx_form-group.dhx_form-group--no-message-holder"+(e.hiddenLabel?".dhx_form-group--label_sr":".dhx_form-group--inline")+".dhx_".concat(i,"__input"),{style:{width:e.width?e.width:"200px"},role:"presentation"},[e.label&&(0,o.el)("label.dhx_label",{for:e.id,style:{maxWidth:e.hiddenLabel?null:"100%"}},e.label),(0,o.el)(".dhx_input__wrapper",{role:"presentation"},[(0,o.el)("input.dhx_input",{id:e.id,placeholder:e.placeholder,class:e.icon?"dhx_input--icon-padding":"",value:l,disabled:e.disabled,onblur:[u,t,e],onfocus:[d,t,e],oninput:[h,e,t],"data-dhx-id":e.id,readOnly:!0!==e.editable,_hooks:{didInsert:function(i){t&&t.fire(s.NavigationBarEvents.inputCreated,[e.id,i.el])}},_key:e.id,"aria-label":e.label||e.helpMessage||"type ".concat(e.placeholder?"text like "+e.placeholder:"text")}),e.icon?(0,o.el)(".dhx_input__icon",{class:e.icon,"aria-hidden":"true"}):null])])}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.Menu=void 0;var r=i(0),a=i(1),s=i(22),l=function(e){function t(t,i){var n=e.call(this,t,(0,r.extend)({$name:"menu"},i))||this;return n.mount(t,(0,a.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype._getFactory=function(){return(0,s.createFactory)({widget:this,defaultType:"menuItem",allowedTypes:["menuItem","spacer","separator","customHTML","customHTMLButton"],widgetName:"menu-nav"})},t.prototype._getMode=function(e,t){return e.id===t?"bottom":"right"},t.prototype._close=function(t){this._activePosition=null,this._currentRoot=null,e.prototype._close.call(this,t)},t.prototype._setRoot=function(e){this.data.getParent(e)===this.data.getRoot()&&(this._currentRoot=e)},t.prototype._draw=function(){return(0,a.el)("ul.dhx_widget",{"data-dhx-widget-id":this._uid,onmousemove:this._handlers.onmousemove,onmouseleave:this._handlers.onmouseleave,onclick:this._handlers.onclick,onmousedown:this._handlers.onmousedown,onkeydown:this._handlers.onkeydown,class:"dhx_menu-nav "+(this.config.css?this.config.css:"")},this._drawMenuItems(this.data.getRoot(),!1))},t}(s.Navbar);t.Menu=l},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.AddColumn=void 0;var r=i(2),a=i(5),s=i(30),l=i(0),c=function(){function e(e){var t;this.config=e,this._sheetName=null===(t=e.spreadsheet)||void 0===t?void 0:t.getActiveSheet().name}return e.prototype.do=function(){var e=this.config,t=e.cell,i=e.serviceEvents,c=e.store;if(t){this._index||(this._index=(0,r.getCellIds)(t).col);var u=c.activePage,d=c.getPageMeta(u),h=d.cols,f=d.freezedCol,p=d.filter;this._prev={cols:o([],h,!0),freezedCol:f,filter:p},f&&this._index<=(0,r.getNumberFromLetter)(f)&&u.setMeta({freezedCol:(0,r.getLetterFromNumber)((0,r.getNumberFromLetter)(f)+1)});var v=h.slice(0,this._index),g=h.slice(this._index);u.setMeta({cols:o(o(o([],v,!0),[{width:120}],!1),g,!0)});var _=(0,s.updateSpans)(1,0,t,u,c);if(p){var m=c.getRangeIndexes(p.cell),y=m.start,b=m.end,w=y.col,x=b.col,C=(0,l.copy)(p);if(y.col-1>=this._index&&(w=y.col+1),b.col-1>=this._index){var E=this._index-(y.col-1),S=o([],C.rules,!0);S.splice(E,0,{}),C=n(n({},C),{rules:S}),x=b.col+1}var I=(0,r.getCellNameByIndex)(y.row,w),k=(0,r.getCellNameByIndex)(b.row,x);C=n(n({},C),{cell:"".concat(I,":").concat(k)}),u.setMeta({filter:C})}_&&(this._prev.merged=_.prev,u.setMeta({merged:_.next}),i.fire(a.SpreadsheetServiceEvents.updateGridState)),u.addColumn(this._index,1),u.parseBlock(_.nextBlock)}},e.prototype.undo=function(){var e=this.config,t=e.serviceEvents,i=e.store.dataStore.getPage(this._sheetName);i.removeColumn(this._index,1),i.setMeta(this._prev),this._prev.merged&&t.fire(a.SpreadsheetServiceEvents.updateGridState)},e}();t.AddColumn=c},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.AddRow=void 0;var r=i(2),a=i(5),s=i(30),l=function(){function e(e){var t;this.config=e,this._sheetName=null===(t=e.spreadsheet)||void 0===t?void 0:t.getActiveSheet().name}return e.prototype.do=function(){var e=this.config,t=e.cell,i=e.grid,l=e.dataStore,c=e.serviceEvents,u=e.store;if(t){this._index||(this._index=(0,r.getCellIds)(t).row);var d=l.getPage(this._sheetName),h=u.getPageMeta(d),f=h.rows,p=h.freezedRow,v=h.filter;this._prev={rows:o([],f,!0),filter:v};var g=f.slice(0,this._index),_=f.slice(this._index);d.setMeta({rows:o(o(o([],g,!0),[{height:null==i?void 0:i.config.rowHeight}],!1),_,!0)}),p&&this._index<=p&&d.setMeta({freezedRow:p+1});var m=(0,s.updateSpans)(0,1,t,d,u);if(v){var y=u.getRangeIndexes(v.cell),b=y.start,w=y.end,x=b.row,C=w.row,E=n({},v);b.row>=this._index&&(x=b.row+1),w.row>=this._index&&(C=w.row+1);var S=(0,r.getCellNameByIndex)(x,b.col),I=(0,r.getCellNameByIndex)(C,w.col);E=n(n({},v),{cell:"".concat(S,":").concat(I)}),d.setMeta({filter:E}),c.fire(a.SpreadsheetServiceEvents.applyFilter,[d])}m&&(this._prev.merged=m.prev,d.setMeta({merged:m.next}),c.fire(a.SpreadsheetServiceEvents.updateGridState)),d.addRow(this._index,1),d.parseBlock(m.nextBlock)}},e.prototype.undo=function(){var e=this.config,t=e.dataStore,i=e.serviceEvents,n=t.getPage(this._sheetName);n.removeRow(this._index,1),n.setMeta(this._prev),this._prev.merged&&i.fire(a.SpreadsheetServiceEvents.updateGridState),i.fire(a.SpreadsheetServiceEvents.applyFilter,[n])},e}();t.AddRow=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddSheet=void 0;var n=i(5),o=function(){function e(e){this.config=e,this._store=e.dataStore}return e.prototype.do=function(){var e=this.config,t=e.sheets,i=e.val,o=e.serviceEvents,r=e.store;if(!t.find((function(e){return e.value===i}))){this._store.addPage(i);for(var a=[],s=[],l=0;l<this.config.spreadsheet.config.colsCount;l++)a.push({width:120});for(l=0;l<this.config.spreadsheet.config.rowsCount;l++)s.push({height:this.config.spreadsheet._grid.config.rowHeight});var c=r.activePage.getMeta().id,u=t.getIndex(c);this._id=t.add({value:i,id:this._id||null},u+1),this._store.getPage(i).setMeta({focusedCell:{cell:"A1"},selectedCells:["A1"],cols:a,rows:s,id:this._id,merged:new Map}),this.config.spreadsheet.events.fire(n.SpreadsheetEvents.afterSheetAdd,[{name:i,id:this._id}]),this.config.id=this._id,o.fire(n.SpreadsheetServiceEvents.changeSheet,[this._id])}},e.prototype.undo=function(){var e=this.config,t=e.serviceEvents,i=e.val,o=e.prev;this._store.removePage(i),this.config.sheets.remove(this._id),t.fire(n.SpreadsheetServiceEvents.changeSheet,[o])},e}();t.AddSheet=o},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteColumn=void 0;var r=i(2),a=i(5),s=i(30),l=i(12),c=i(0),u=function(){function e(e){var t;this._recalculateFilter=!1,this.config=e,this._sheetName=null===(t=e.spreadsheet)||void 0===t?void 0:t.getActiveSheet().name}return e.prototype.do=function(){var e=this.config,t=e.cell,i=e.dataStore,u=e.serviceEvents,d=e.store;if(t){var h=(0,r.getCellIds)(t).col;this._index||(this._index=h);var f=i.getPage(this._sheetName),p=d.getPageMeta(f),v=p.cols,g=p.freezedCol,_=p.filter;if(1===v.length)return(0,r.showAlert)(l.default.removeAlert.replace("$name",l.default.col));var m=f.getSize()[0];this._cells=f.getCellRange(0,h,m-1,h),f.removeColumn(this._index,1),g&&this._index<(0,r.getNumberFromLetter)(g)&&f.setMeta({freezedCol:(0,r.getLetterFromNumber)((0,r.getNumberFromLetter)(g)-1)}),this._prev={cols:o([],v,!0),freezedCol:g,filter:_};var y=v.slice(0,this._index),b=v.slice(this._index+1),w=o(o([],y,!0),b,!0);f.setMeta({cols:w});var x=(0,s.updateSpans)(-1,0,t,f,d);if(_){var C=d.getRangeIndexes(_.cell),E=C.start,S=C.end,I=E.col,k=S.col,O=(0,c.copy)(_);if(this._recalculateFilter=!1,E.col-1>this._index&&(I=E.col-1),S.col-1>=this._index&&(k=S.col-1),E.col-1===this._index&&(k=S.col-1),E.col-1<=this._index&&S.col-1>=this._index){var M=this._index-(E.col-1),R=o([],O.rules,!0);Object.keys(R[M]).length&&(this._recalculateFilter=!0),R.splice(M,1),O=n(n({},O),{rules:R})}if(E.col===S.col&&E.col-1===this._index)O=null,f.setMeta({filter:O}),this._recalculateFilter=!0;else{var A=(0,r.getCellNameByIndex)(E.row,I),P=(0,r.getCellNameByIndex)(S.row,k);O=n(n({},O),{cell:"".concat(A,":").concat(P)}),f.setMeta({filter:O})}this._recalculateFilter&&u.fire(a.SpreadsheetServiceEvents.applyFilter,[f])}x&&(this._prev.merged=x.prev,f.setMeta({merged:x.next}),u.fire(a.SpreadsheetServiceEvents.updateGridState))}},e.prototype.undo=function(){var e=this.config,t=e.dataStore,i=e.serviceEvents,n=(e.store,t.getPage(this._sheetName));n.addColumn(this._index,1);for(var o=0;o<this._cells.length;o++)this._cells[o]&&n.setCell(o,this._index,this._cells[o]);n.setMeta(this._prev),this._prev.merged&&i.fire(a.SpreadsheetServiceEvents.updateGridState),this._recalculateFilter&&i.fire(a.SpreadsheetServiceEvents.applyFilter,[n])},e}();t.DeleteColumn=u},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteRow=void 0;var r=i(2),a=i(5),s=i(30),l=i(12),c=function(){function e(e){var t;this.config=e,this._sheetName=null===(t=e.spreadsheet)||void 0===t?void 0:t.getActiveSheet().name}return e.prototype.do=function(){var e=this.config,t=e.cell,i=e.dataStore,c=e.serviceEvents,u=e.store;if(t){var d=(0,r.getCellIds)(t).row;this._row||(this._row=d);var h=i.getPage(this._sheetName),f=h.getSize()[1];this._cells=h.getCellRange(d,0,d,f-1),h.removeRow(this._row,1);var p=u.getPageMeta(h),v=p.rows,g=p.freezedRow,_=p.filter;if(1===v.length)return(0,r.showAlert)(l.default.removeAlert.replace("$name",l.default.row));g&&this._row<g&&h.setMeta({freezedRow:g-1}),this._prev={rows:o([],v,!0),freezedRow:g,filter:_};var m=v.slice(0,this._row),y=v.slice(this._row+1),b=o(o([],m,!0),y,!0);h.setMeta({rows:b});var w=(0,s.updateSpans)(0,-1,t,h,u);if(_){var x=u.getRangeIndexes(_.cell),C=x.start,E=x.end,S=C.row,I=E.row,k=n({},_);if(C.row>this._row&&(S=C.row-1),E.row>=this._row&&(I=E.row-1),C.row===this._row&&(I=E.row-1),C.row===E.row&&C.row===this._row)k=null,h.setMeta({filter:k}),c.fire(a.SpreadsheetServiceEvents.applyFilter,[h]);else{var O=(0,r.getCellNameByIndex)(S,C.col),M=(0,r.getCellNameByIndex)(I,E.col);k=n(n({},_),{cell:"".concat(O,":").concat(M)}),h.setMeta({filter:k})}}w&&(this._prev.merged=w.prev,h.setMeta({merged:w.next}),c.fire(a.SpreadsheetServiceEvents.updateGridState))}},e.prototype.undo=function(){var e=this.config,t=e.dataStore,i=e.serviceEvents,n=e.store,o=t.getPage(this._sheetName);o.addRow(this._row,1);for(var r=0;r<this._cells.length;r++)this._cells[r]&&o.setCell(this._row,r,this._cells[r]);o.setMeta(this._prev),this._prev.merged&&i.fire(a.SpreadsheetServiceEvents.updateGridState);var s=n.getPageMeta(o).filter;this._prev.filter&&!s&&i.fire(a.SpreadsheetServiceEvents.applyFilter,[o])},e}();t.DeleteRow=c},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteSheet=void 0;var o=i(5),r=function(){function e(e){this.config=e,this._store=e.dataStore,this._deletedSheet=n({},e.sheets.getItem(e.prev))}return e.prototype.do=function(){var e=this.config,t=e.sheets,i=e.val,n=e.serviceEvents,r=e.store,a=this._store.getPage(i);this._data=a?a.serialize(!0):[],this._sheetMeta=a?a.getMeta():{},this._store.removePage(i);var s=this._index=t.getIndex(this._deletedSheet.id),l=r.getPageMeta(r.activePage).id;i===t.getItem(l).value&&n.fire(o.SpreadsheetServiceEvents.changeSheet,[t.getId(1===s?s+1:s-1)]),t.remove(this._deletedSheet.id)},e.prototype.undo=function(){var e=this.config,t=e.sheets,i=e.val,n=e.serviceEvents;this._store.addPage(i),t.add(this._deletedSheet,this._index);var r=this._store.getPage(i);r.setMeta(this._sheetMeta),r.parse(this._data),this._store.getStore().recalculate(!0,r.getContext()),n.fire(o.SpreadsheetServiceEvents.changeSheet,[this._deletedSheet.id])},e}();t.DeleteSheet=r},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.GroupAction=void 0;var o=i(2),r=i(5),a=i(43),s=function(){function e(e){this.config=e,this._actions=[]}return e.prototype.do=function(){var e=this,t=this.config,i=t.spreadsheet,s=t.action,l=t.page,c=t.store,u=i.events;if(!this._actions.length){var d=this.config.val,h=0;if(Array.isArray(d)&&(d=d[h]),!u.fire(r.SpreadsheetEvents.beforeAction,[s,(0,o.cleanActionConfig)(this.config)]))return;var f=c.getPageMeta(l).filteredRows,p=void 0===f?[]:f;i.eachCell((function(t){var i=(0,o.getCellIds)(t),r=i.row,s=i.col;if(!p[r]){var l=(0,o.getCellIds)(t),c=new a.actions[e.config.action](n(n({},e.config),{row:r||l.row,col:s||l.col,cell:t,val:d}));e._actions.push(c),Array.isArray(e.config.val)&&(h+1>=e.config.val.length?h=0:h+=1,d=e.config.val[h])}}),this.config.cell)}for(var v=0,g=this._actions;v<g.length;v++){g[v].do()}u.fire(r.SpreadsheetEvents.afterAction,[s,(0,o.cleanActionConfig)(this.config)])},e.prototype.undo=function(){var e=this.config,t=e.spreadsheet,i=e.action,n=t.events;if(n.fire(r.SpreadsheetEvents.beforeAction,[i,(0,o.cleanActionConfig)(this.config)])){for(var a=0,s=this._actions;a<s.length;a++){s[a].undo()}var l=this.config.cell.split(":")[0];setTimeout((function(){t.selection.setSelectedCell(l,!1)})),n.fire(r.SpreadsheetEvents.afterAction,[i,(0,o.cleanActionConfig)(this.config)])}},e}();t.GroupAction=s},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.GroupColAction=void 0;var o=i(2),r=i(43),a=function(){function e(e){this.config=e,this._actions=[]}return e.prototype.do=function(){var e=this,t=this.config,i=t.spreadsheet,a=t.cell;if(!this._actions.length){var s=(0,o.getCellIds)(a).start.row,l=a.split(":")[0];i.eachCell((function(t){var i=(0,o.getCellIds)(t),a=i.row,c=i.col;if(a===s){var u=new r.actions[e.config.action](n(n({},e.config),{row:a,col:c,cell:l}));e._actions.push(u)}}),this.config.cell)}for(var c=this._actions.length-1;c>=0;c--)this._actions[c].do()},e.prototype.undo=function(){for(var e=0;e<this._actions.length;e++)this._actions[e].undo()},e}();t.GroupColAction=a},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.GroupRowAction=void 0;var o=i(2),r=i(43),a=function(){function e(e){this.config=e,this._actions=[]}return e.prototype.do=function(){var e=this,t=this.config,i=t.cell,a=t.spreadsheet;if(!this._actions.length){var s=(0,o.getCellIds)(i).start.col,l=i.split(":")[0];a.eachCell((function(t){var i=(0,o.getCellIds)(t),a=i.row,c=i.col;if(c===s){var u=new r.actions[e.config.action](n(n({},e.config),{row:a,col:c,cell:l}));e._actions.push(u)}}),this.config.cell)}for(var c=this._actions.length-1;c>=0;c--)this._actions[c].do()},e.prototype.undo=function(){for(var e=this._actions.length-1;e>=0;e--)this._actions[e].undo()},e}();t.GroupRowAction=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LockCell=void 0;var n=i(2),o=function(){function e(e){this.config=e,this._store=e.dataStore,this._page=e.page}return e.prototype.do=function(){var e=this.config,t=e.val,i=e.cell,o=(0,n.getCellIds)(i),r=o.row,a=o.col;this._page.setCell(r,a,{locked:t}),t?this.config.editLine.lock():this.config.editLine.unlock()},e.prototype.undo=function(){var e=this.config,t=e.val,i=e.cell,o=(0,n.getCellIds)(i),r=o.row,a=o.col;this._page.setCell(r,a,{locked:!t}),t?this.config.editLine.unlock():this.config.editLine.lock()},e}();t.LockCell=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoveCellStyles=void 0;var n=i(2),o=i(5),r=function(){function e(e){this.config=e,this._page=e.page}return e.prototype.do=function(){var e=this.config,t=e.cell,i=e.events,r=(0,n.getCellIds)(t),a=r.row,s=r.col,l=(0,n.getCellInfo)(t,this._page);l.locked||(this.config.prev=l.css,this._page.setCell(a,s,{css:""}),i.fire(o.SpreadsheetEvents.afterStyleChange,[t,{}]))},e.prototype.undo=function(){var e=this.config,t=e.cell,i=e.events,r=(0,n.getCellIds)(t),a=r.row,s=r.col;(0,n.getCellInfo)(t,this._page).locked||(this._page.setCell(a,s,{css:this.config.prev}),i.fire(o.SpreadsheetEvents.afterStyleChange,[t,{}]))},e}();t.RemoveCellStyles=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenameSheet=void 0;var n=function(){function e(e){this.config=e}return e.prototype.do=function(){var e=this.config,t=e.sheets,i=e.dataStore,n=e.val,o=e.prev,r=t.getItem(o);r.prevValue||t.update(r.id,{prevValue:r.value}),this.page=i.getPage(r.prevValue),i.renamePage(r.prevValue,n),this.page.setMeta({name:n}),t.update(o,{value:n,prevValue:r.prevValue})},e.prototype.undo=function(){var e=this.config,t=e.sheets,i=e.dataStore,n=e.val,o=e.prev,r=t.getItem(o);i.renamePage(n,r.prevValue),this.page.setMeta({name:r.prevValue}),t.update(o,{value:r.prevValue,prevValue:r.prevValue})},e}();t.RenameSheet=n},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SetCellFormat=void 0;var o=i(13),r=i(2),a=i(5),s=function(){function e(e){this.config=e,this._page=e.page}return e.prototype.do=function(){var e,t=this.config,i=t.cell,s=t.spreadsheet,l=t.events,c=this.config.val,u=(0,r.getCellIds)(i),d=u.row,h=u.col,f=c?n({},(0,o.getFormat)(c)):(0,o.getFormat)("common");c=f&&f.mask||c;var p=(0,r.getCellInfo)(i,this._page);if(!p.locked&&l.fire(a.SpreadsheetEvents.beforeFormatChange,[i,c])){var v=p.format;this.config.prev=null===(e=p.format)||void 0===e?void 0:e.id;var g=s.getFormula(i),_=p.value;"@"!==(null==v?void 0:v.mask)&&"@"===c&&this._page.setValue(d,h,"".concat(g?"="+g:_||""),1),"@"===(null==v?void 0:v.mask)&&"@"!==c&&this._page.setValue(d,h,g?"="+g:_,0),this._page.setCell(d,h,{format:n({},f)}),l.fire(a.SpreadsheetEvents.afterFormatChange,[i,c])}},e.prototype.undo=function(){var e=this.config.val,t=this.config.prev;this.config.val=t,this.config.prev=e,this.do(),this.config.val=e,this.config.prev=t},e}();t.SetCellFormat=s},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SetCellStyle=void 0;var r=i(30),a=i(2),s=i(5),l=i(0),c=function(){function e(e){this.config=e,this._page=e.page}return e.prototype.do=function(){var e=this.config,t=e.cell,i=e.val,c=void 0===i?"":i,u=e.events,d=e.serviceEvents;if(t){var h=(0,a.getCellIds)(t),f=h.row,p=h.col,v=(0,a.getCellInfo)(t,this._page),g=v.locked,_=v.$toolbarAlign,m=v.css||"";if(!g){var y,b=_;if("string"!=typeof c){y=c.multiline;var w=(0,a.getStylesObject)(null==m?void 0:m.split("dhx_spreadsheet_link").join(" "));Array.isArray(c)&&(c=c[0]);var x=void 0;if("string"!=typeof c){if(b=!!c["text-align"],this.config.replace)x=dhx.css.add(n({},c));else{for(var C=(0,a.convertStyles)(c),E=new Map(Object.entries(w)),S=0,I=Object.entries(C);S<I.length;S++){var k=I[S],O=k[0],M=k[1];(0,l.isDefined)(M)?E.set(O,M):E.delete(O)}x=dhx.css.add(Object.fromEntries(E))}c=x}c=(m.includes("dhx_spreadsheet_link")?"dhx_spreadsheet_link ":"")+x}if(u.fire(s.SpreadsheetEvents.beforeStyleChange,[t,dhx.css.get(c)])){if(y){var R=this._page.getMeta();this._page_rows=o([],R.rows,!0),this._page_cols=o([],R.cols,!0),(0,r.setAutoHeightToRow)(t,this.config.grid,this._page,y)&&d.fire(s.SpreadsheetServiceEvents.updateGridState)}this.config.prev=m,this._page.setCell(f,p,{css:c,$toolbarAlign:b}),u.fire(s.SpreadsheetEvents.afterStyleChange,[t,dhx.css.get(c)])}}}},e.prototype.undo=function(){var e=this.config,t=e.serviceEvents,i=e.val,n=e.prev;this.config.val=n||"",this.config.prev=i||"",this.do(),this._page_rows&&(this._page.setMeta({rows:this._page_rows,cols:this._page_cols}),t.fire(s.SpreadsheetServiceEvents.updateGridState)),this.config.val=i,this.config.prev=n},e}();t.SetCellStyle=c},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SetCellValue=void 0;var r=i(24),a=i(30),s=i(13),l=i(2),c=i(5),u=i(0);var d=function(){function e(e){this.config=e,this._page=e.page}return e.prototype.do=function(){var e=this.config,t=e.cell,i=e.events,d=e.serviceEvents,h=e.store,f=(0,l.getCellIds)(t),p=f.row,v=f.col,g=this.config.val,_=this.config.spreadsheet;if(!(null==_?void 0:_.isLocked(t))&&i.fire(c.SpreadsheetEvents.beforeValueChange,[t,g])){var m=_.getFormula(t);this.config.prev=m?"="+m:_.getValue(t);var y=(0,l.getCellInfo)(t,this._page),b=y.format;if(b||(b=n({},(0,s.getDefaultFormats)().filter((function(e){return"common"===e.id}))[0])),this._prevCell=n(n({},y),{format:n({},y.format),value:h.getValue(t,!0,this._page)}),"common"===b.id&&(b.$value=(0,u.isDefined)(g)?g:""),"string"==typeof g&&g.startsWith("=")&&"@"!==(null==b?void 0:b.mask)){for(var w=g.split("").reduce((function(e,t){return"("===t?e+1:e}),0),x=g.split("").reduce((function(e,t){return")"===t?e+1:e}),0);x<w;)g+=")",x++;var C=(0,s.getFormatRule)(b.mask),E=null==C?void 0:C.decimalSeparator;""===(null==C?void 0:C.thousandsSeparator)&&"."===E||(g=function(e,t){for(var i=t._math.parse(e).code,n=t.config.localization,o=n.decimal,a=n.thousands,s="",l=0,c=0;c<i.length;c+=3){var u=i[c],d=e.substr(i[c+1],i[c+2]);if(u!==r.T_OPERATOR&&u!==r.T_SPACE||d!==o&&d!==a||i[c+3]!==r.T_NUMBER||i[c-3]!==r.T_NUMBER||(d=d===o?".":""),u!==r.T_TEXT&&u!==r.T_NAME)if(13!==u){if(u!==r.T_DATA&&u!==r.T_PAGE&&(s+=d),l&&(s+=--l?",":"}"),u===r.T_ERROR)return e}else l=i[c+1],s+="{";else s+=d.includes('"')?d:'"'.concat(d,'"')}return s}(g,_));try{this._page.setValue(+p,+v,g,0)}catch(e){}}else{var S=(0,s.getCleanValue)(g,b),I="number"==typeof S,k=b.id;this._page.setValue(+p,+v,S,"text"===k||"common"===k&&!I?1:0)}var O=(0,l.getCellInfo)(t,this._page).css,M=void 0===O?"":O,R=(dhx.css.get(M)||{}).multiline,A={};if(R){var P=this._page.getMeta();this._page_rows=o([],P.rows,!0),this._page_cols=o([],P.cols,!0),(0,a.setAutoHeightToRow)(t,this.config.grid,this._page,R)&&d.fire(c.SpreadsheetServiceEvents.updateGridState)}var T=(0,l.doesContainUrl)(g);T&&(A={css:(0,l.isURL)(g)?"dhx_spreadsheet_link ".concat(M):M,link:{href:T}}),g||(A={css:null==M?void 0:M.split("dhx_spreadsheet_link ").join(""),link:null}),"common"===b.id&&(b.$value="string"==typeof g&&!T&&g.startsWith("=")?null:(0,u.isDefined)(g)?"".concat(g):""),this._page.setCell(p,v,n({nextValue:void 0,edited:!1,format:b},A)),this._page.setMeta({inserted:!0}),i.fire(c.SpreadsheetEvents.afterValueChange,[this.config.cell,g])}},e.prototype.undo=function(){var e=this,t=this.config,i=t.cell,o=t.serviceEvents,r=(0,l.getCellIds)(i),a=r.row,s=r.col;this._page_rows&&(this._page.setMeta({rows:this._page_rows,cols:this._page_cols}),o.fire(c.SpreadsheetServiceEvents.updateGridState));var d=this._prevCell.value;setTimeout((function(){var t=e._page.getCell(a,s),i={};Object.keys(t).forEach((function(e){i[e]=void 0})),e._page.setCell(a,s,n(n(n({},i),e._prevCell),{value:(0,u.isDefined)(d)?d:"",nextValue:void 0,edited:!1,editorValue:void 0})),o.fire(c.SpreadsheetServiceEvents.redraw)}))},e}();t.SetCellValue=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Clear=void 0;var n=function(){function e(e){this.config=e}return e.prototype.do=function(){var e=this.config.spreadsheet;this._data=e.serialize(),e.parse([])},e.prototype.undo=function(){this.config.spreadsheet.parse(this._data)},e}();t.Clear=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClearSheet=void 0;var n=i(5),o=function(){function e(e){this.config=e,this._store=e.dataStore}return e.prototype.do=function(){var e=this.config,t=e.val,i=e.serviceEvents;this._page=this._store.getPage(t),this._data=this._page?this._page.serialize(!0):[],this._page.parse([]),i.fire(n.SpreadsheetServiceEvents.recalculate)},e.prototype.undo=function(){var e=this.config.serviceEvents;this._page.parse(this._data),this._store.getStore().recalculate(!0,this._page.getContext()),e.fire(n.SpreadsheetServiceEvents.recalculate)},e}();t.ClearSheet=o},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ResizeCol=void 0;var r=i(2),a=i(5),s=function(){function e(e){this.config=e}return e.prototype.do=function(){var e=this,t=this.config,i=t.grid,s=t.cell,l=t.mouseEvent,c=t.serviceEvents,u=t.events;if(this._colsAfterResize)i.setColumns(this._colsAfterResize);else{var d=l.clientX,h=s.split(":"),f=h[0],p=h[1],v=(0,r.getCellIds)(f),g=(0,r.getCellIds)(p||f);this._prevCols=i.config.columns.map((function(e){return n({},e)}));var _=o([],i.config.columns,!0),m=i.getRootNode();m.style.cursor="col-resize";for(var y=[],b=v.col+1;b<=g.col+1;b++){var w=_[b];w.$initWidth=i.config.columns[b].width,y.push(w)}var x=function(e){var t=e.clientX-d;y.forEach((function(e){var i=e.$initWidth+t/y.length;e.width=i<=20?20:i})),i.setColumns(_),c.fire(a.SpreadsheetServiceEvents.redraw)},C=function(t){document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",C),m.style.cursor="unset",e._colsAfterResize=_,u.fire(a.SpreadsheetEvents.afterAction,[a.Actions.resizeCol,(0,r.cleanActionConfig)(e.config)])};document.addEventListener("mousemove",x),document.addEventListener("mouseup",C),c.fire(a.SpreadsheetServiceEvents.redraw)}},e.prototype.undo=function(){var e=this.config,t=e.events;e.grid.setColumns(this._prevCols),t.fire(a.SpreadsheetEvents.afterAction,[a.Actions.resizeCol,(0,r.cleanActionConfig)(this.config)])},e}();t.ResizeCol=s},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ResizeRow=void 0;var r=i(2),a=i(5),s=function(){function e(e){this.config=e}return e.prototype.do=function(){var e=this,t=this.config,i=t.grid,s=t.cell,l=t.mouseEvent,c=t.serviceEvents,u=t.events;if(this._rowsAfterResize)this._rowsAfterResize.forEach((function(e){var t=e.id,n=e.height;i.data.update(t,{height:n,changedByUser:!0})}));else{var d=l.clientY,h=s.split(":"),f=h[0],p=h[1],v=(0,r.getCellIds)(f),g=(0,r.getCellIds)(p||f),_=o([],i.data.serialize(),!0),m=i.getRootNode();m.style.cursor="row-resize";for(var y=[],b=function(e){var t=_.find((function(t){return+t.id-1===e}));if(!t)return"continue";t.height||(t.height=i.config.rowHeight),y.push(t)},w=v.row;w<=g.row;w++)b(w);this._prevRows=y.map((function(e){return n({},e)})),this._rowsAfterResize=y.map((function(e){return n({},e)}));var x=function(t){var n=t.clientY-d;y.forEach((function(t){var o=t.height+n/y.length,r=o<=10?10:o;i.data.update(t.id,{height:r,changedByUser:!0}),e._rowsAfterResize.find((function(e){return e.id===t.id})).height=r})),c.fire(a.SpreadsheetServiceEvents.redraw)},C=function(t){document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",C),m.style.cursor="unset",u.fire(a.SpreadsheetEvents.afterAction,[a.Actions.resizeRow,(0,r.cleanActionConfig)(e.config)])};document.addEventListener("mousemove",x),document.addEventListener("mouseup",C),c.fire(a.SpreadsheetServiceEvents.redraw)}},e.prototype.undo=function(){var e=this.config,t=e.events,i=e.grid;this._prevRows.forEach((function(e){var t=e.id,n=e.height;null==i||i.data.update(t,{height:n,changedByUser:!0})})),t.fire(a.SpreadsheetEvents.afterAction,[a.Actions.resizeRow,(0,r.cleanActionConfig)(this.config)])},e}();t.ResizeRow=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SetValidation=void 0;var n=i(2),o=function(){function e(e){this.config=e,this._page=e.page,this._prevState={}}return e.prototype.do=function(){var e=this.config,t=e.val,i=e.cell,o=(0,n.getCellIds)(i),r=o.row,a=o.col,s=this._page.getCell(r,a);this._prevState[i]=(null==s?void 0:s.editor)||null,this._page.setCell(r,a,{editor:t?{type:"select",options:t}:null})},e.prototype.undo=function(){var e=this.config.cell,t=(0,n.getCellIds)(e),i=t.row,o=t.col;this._page.setCell(i,o,{editor:this._prevState[e]})},e}();t.SetValidation=o},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SortCells=void 0;var r=i(2),a=function(){function e(e){this.config=e,this._data={},this._rows=[]}return e.prototype.do=function(){var e=this,t=this.config,i=t.dir,a=t.cell,s=t.spreadsheet,l=t.page,c=t.dataStore,u=(t.grid,t.store),d=a.split(","),h=u.getPageMeta(l),f=h.filter,p=h.freezedRow,v=h.rows,g=(0,r.getCellIds)(null==f?void 0:f.cell).start;this._rows=v,d.forEach((function(t){var a=l,u=t;if(u.includes("!")){var d=u.split("!");if(u=d[1],!(a=c.getPage(d[0])))return}e._data[t]=a.serialize(!0);var h=a.getSize(),_=h[0],m=h[1],y=(0,r.getCellIds)(u);if(y.end){var b=y.start,w=y.end;f&&g.row===b.row&&(b.row=b.row+1);var x=p||b.row,C=_-1<w.row?_-1:w.row,E=a.getCellRange(x,b.col,C,b.col).map((function(e,t){return n(n({},e),{$row:t,$rowIndex:x+t})})),S=[],I=[];E.forEach((function(e){var t;(null===(t=v[e.$rowIndex])||void 0===t?void 0:t.hidden)?I.push(e):S.push(e)}));var k=S.sort((function(e,t){var n=null==e?void 0:e.value,o=null==t?void 0:t.value;return"string"==typeof n&&(n=n.toLowerCase()),"string"==typeof o&&(o=o.toLowerCase()),!n&&"number"!=typeof n&&o?1:!o&&"number"!=typeof o&&n?-1:"string"==typeof n&&"number"==typeof o?i:"number"==typeof n&&"string"==typeof o||n<o?-i:n>o?i:0}));I.forEach((function(e){k.splice(e.$row,0,e)}));for(var O=x,M=0,R=[],A=o([],v,!0);O<C+1;){var P=k[M].$row+x,T=[],D=e._rows[P];A[O]=D;for(var F=0;F<m;F++){var V=a.getCell(P,F)||{},L=a.getValue(P,F,!0);"string"==typeof L&&L.startsWith("=")&&(L=s._math.transposeMath(L,O-P,0,a.getContext())),T.push([O,F,n(n({},V),{value:L})])}R.push.apply(R,T),O++,M++}var N=a.serialize(!0).filter((function(e){return!R.find((function(t){return t[0]===e[0]&&t[1]===e[1]}))}));a.setMeta({rows:A}),a.parse(o(o([],N,!0),R,!0))}}))},e.prototype.undo=function(){var e=this,t=this.config,i=t.page,n=t.dataStore;i.setMeta({rows:this._rows}),Object.keys(this._data).forEach((function(t){var o=i;if(t.includes("!")){var r=t.split("!");if(!(o=n.getPage(r[0])))return}o.parse(e._data[t])}))},e}();t.SortCells=a},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.InsertLink=void 0;var o=i(13),r=i(2),a=function(){function e(e){this.config=e,this._page=e.page}return e.prototype.do=function(){var e=this.config,t=e.cell,i=e.val;if(t){var a=(0,r.getCellIds)(t),s=a.row,l=a.col,c=this.config.spreadsheet,u=(0,r.getCellInfo)(t,this._page);if(!(null==c?void 0:c.isLocked(t))&&(u.link||i)){var d=u.css,h=u.format;if(h||(h=(0,o.getDefaultFormats)().filter((function(e){return"common"===e.id}))[0]),this.config.prev=u,i){var f=i.text,p=i.href;f=null==f?void 0:f.trim(),this._page.setCell(s,l,{value:f||p,link:n(n({},i),{text:f}),css:"dhx_spreadsheet_link ".concat(d||""),format:h})}else this._page.setCell(s,l,{link:null,css:null==d?void 0:d.split("dhx_spreadsheet_link ").join(""),format:h})}}},e.prototype.undo=function(){var e=this.config,t=e.cell,i=e.groupAction;if(t){var n=(0,r.getCellIds)(t),o=n.row,a=n.col,s=this.config.prev,l=s.value,c=void 0===l?"":l,u=s.css,d=void 0===u?"":u,h=s.link,f=void 0===h?null:h;i?this._page.setCell(o,a,{link:f}):this._page.setCell(o,a,{value:c,css:d,link:f})}},e}();t.InsertLink=a},function(e,t,i){"use strict";var n=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.FitColumn=void 0;var o=i(2),r=i(0),a=i(13),s=function(){function e(e){this.config=e,this._page=e.page}return e.prototype.do=function(){var e=this,t=this.config.cell,i=(0,o.getCellIds)(t).col,s=this._page.getSize(),l=this._page.getMeta().filter,c=null;if(null==l?void 0:l.cell){var u=l.cell.split(":")[0],d=(0,o.getCellIds)(u);i===d.col&&(c=d.row)}var h=this._page.getRange(0,i,s[0],i),f=40;h.forEach((function(t,n){var o;if(t){var s=e._page.getCell(n,i),l=(0,r.getStringWidth)((0,a.getFormattedValue)("".concat(t),s.format));"select"!==(null===(o=s.editor)||void 0===o?void 0:o.type)&&n!==c||(l+=20),l>f&&(f=l)}}));var p=this._page.getMeta().cols;this._prev=n([],p,!0),f+=20;var v=p.slice(0,i),g=p.slice(i+1);this._page.setMeta({cols:n(n(n([],v,!0),[{width:f}],!1),g,!0)})},e.prototype.undo=function(){this._page.setMeta({cols:this._prev})},e}();t.FitColumn=s},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Filter=void 0;var o=i(2),r=i(5),a=i(12),s=function(){function e(e){this.config=e}return e.prototype.do=function(){var e=this.config,t=e.cell,i=e.page,s=e.val,l=e.spreadsheet,c=e.serviceEvents,u=e.store;this._prev=n({},i.getMeta().filter);var d=t;if(!s)return i.setMeta({filter:null}),void(i===u.activePage&&c.fire(r.SpreadsheetServiceEvents.applyFilter,[i]));var h=(0,o.getCellIds)(d);if(!h.end){var f=i.getSize(),p=f[0],v=f[1],g=u.getPageMeta(i),_=g.rows,m=g.cols;d="".concat((0,o.getCellNameById)(1,1),":").concat((0,o.getCellNameById)(p||_.length,v||m.length)),h=(0,o.getCellIds)(d),this.config.cell=d}if(l._spanControl.checkBeforeAction(this.config.cell,i,a.default.filter,this.config)){for(var y=h.start,b=h.end.col-y.col;s.length<b+1;)s.push({});null==i||i.setMeta({filter:{cell:d,rules:s}}),i===u.activePage&&c.fire(r.SpreadsheetServiceEvents.applyFilter,[i])}},e.prototype.undo=function(){var e,t,i=this.config,n=i.cell,o=i.val;this.config.val=null===(e=this._prev)||void 0===e?void 0:e.rules,this.config.cell=null===(t=this._prev)||void 0===t?void 0:t.cell,this.do(),this.config.cell=n,this.config.val=o},e}();t.Filter=s},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Merge=void 0;var o=i(2),r=i(0),a=function(){function e(e){this.config=e}return e.prototype.do=function(){var e,t=this.config,i=t.cell,a=t.page,s=t.store;if(i&&(0,o.isRangeId)(i)&&!(null==i?void 0:i.includes(","))){var l=(null==a?void 0:a.getMeta()).merged,c=(0,o.getCellsArray)(i),u=[];this._prevData=[],this._prevSpan=new Map(l),c.forEach((function(e){var t=s.getCell(e,a);l.get(null==t?void 0:t.spanId)&&l.delete(null==t?void 0:t.spanId)}));var d=c[0],h=c.at(-1),f=s.getCellIndex(d),p=f.row,v=f.col,g=s.getCellIndex(h),_={cell:{row:p,column:v},rowspan:g.row-p,colspan:g.col-v,id:(null===(e=u[0])||void 0===e?void 0:e.id)||(0,r.uid)()};u.length&&u.forEach((function(e){return l.delete(e.id)}));var m=[];c.forEach((function(e,t){var i=s.getCellIndex(e),o=i.row,r=i.col,l=n(n({},s.getCell(e,a)),{value:s.getValue(e,!0,a),spanId:_.id,isSpanStart:!t});m.push([o,r-1,l])})),l.set(_.id,_),a.setMeta({merged:new Map(l)}),a.parseBlock(m)}},e.prototype.undo=function(){var e=this.config,t=e.page;e.$autofill;t.setMeta({merged:this._prevSpan}),t.parseBlock(this._prevData)},e}();t.Merge=a},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Unmerge=void 0;var o=i(2),r=function(){function e(e){this.config=e}return e.prototype.do=function(){var e=this,t=this.config,i=t.cell,r=t.page,a=t.store;if(i&&!(null==i?void 0:i.includes(","))){this._prevData=[];var s=(null==r?void 0:r.getMeta()).merged;this._prevSpans=new Map(s);var l=(0,o.getCellsArray)(i),c=(0,o.isCellSpaned)((0,o.getCellInfo)(l[0],r),s);if(c){var u=(0,o.getCellNameByIndex)(c.cell.row,c.cell.column),d=(0,o.getCellNameByIndex)(c.cell.row+c.rowspan,c.cell.column+c.colspan);s.delete(c.id);var h=[];a.eachCell((function(t){var i=a.getCellIndex(t),o=i.row,s=i.col,l=a.getCell(t,r),c=a.getValue(t,!0,r);e._prevData.push([o,s-1,n(n({},l),{value:c})]),h.push([o,s-1,n(n({},l),{spanId:void 0,isSpanStart:void 0,value:u!==t?null:c})])}),"".concat(u,":").concat(d)),r.parseBlock(h)}}},e.prototype.undo=function(){var e=this.config.page;this._prevSpans&&(e.parseBlock(this._prevData),null==e||e.setMeta({merged:this._prevSpans}))},e}();t.Unmerge=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Freeze=void 0;var n=i(2),o=function(){function e(e){this.config=e,this._page=e.page}return e.prototype.do=function(){var e=this.config,t=e.target,i=e.type,o=e.store,r=e.page,a=this.config.cell.split(",").pop(),s=(0,n.isRangeId)(a)?o.getRangeIndexes(a).end:o.getCellIndex(a),l=s.col,c=s.row,u=o.getPageMeta(r),d=u.freezedCol,h=u.freezedRow;this._prevCols=d,this._prevRows=h;var f=h,p=d,v="unfreeze"===i;"col"===t?p=v?void 0:(0,n.getLetterFromNumber)(l):f=v?void 0:c+1,this._page.setMeta({freezedCol:p,freezedRow:f})},e.prototype.undo=function(){this._page.setMeta({freezedCol:this._prevCols,freezedRow:this._prevRows})},e}();t.Freeze=o},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Hide=void 0;var r=function(){function e(e){this.config=e,this._page=e.page}return e.prototype.do=function(){var e=this.config,t=e.cell,i=e.target,r=e.type,a=e.store,s=e.page,l=a.getPageMeta(s),c=l.cols,u=l.rows;this._prevCols=o([],c,!0),this._prevRows=o([],u,!0);var d=t.split(","),h=o([],c,!0),f=o([],u,!0),p="hide"===r;"col"===i?d.forEach((function(e){for(var t=a.getRangeIndexes(e),i=t.start,o=t.end,r=i.col;r<=o.col;r++)h[r-1]=n(n({},h[r-1]),{hidden:!!p||void 0})})):d.forEach((function(e){for(var t=a.getRangeIndexes(e),i=t.start,o=t.end,r=i.row;r<=o.row;r++)f[r]=n(n({},f[r]),{hidden:!!p||void 0})})),this._page.setMeta({cols:h,rows:f})},e.prototype.undo=function(){this._page.setMeta({cols:this._prevCols,rows:this._prevRows})},e}();t.Hide=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMenuStruct=void 0;var n=i(37),o=i(12);t.getMenuStruct=function(e){return[{id:"file",open:!0,value:o.default.file,items:[{id:"import",value:o.default.importAs,icon:"dxi dxi-file-import",items:[{id:"import-xlsx",value:"Microsoft Excel(.xlsx)",icon:"dxi dxi-file-excel"}]},{id:"download",value:o.default.downloadAs,icon:"dxi dxi-file-export",items:[{id:"export-xlsx",value:"Microsoft Excel(.xlsx)",icon:"dxi dxi-file-excel"}]}]},{id:"edit",value:o.default.edit,items:[{id:"undo",value:o.default.undo,icon:"dxi dxi-undo"},{id:"redo",value:o.default.redo,icon:"dxi dxi-redo"},{type:"separator"},{id:"freeze",value:o.default.freeze,icon:"dxi dxi-snowflake",items:[{id:"unfreeze-cols",value:o.default.unfreezeCols},{id:"freeze-cols",value:o.default.freezeToCol},{id:"freeze-sep",type:"separator"},{id:"unfreeze-rows",value:o.default.unfreezeRows},{id:"freeze-rows",value:o.default.freezeToRow}]},{id:"lock",value:o.default.lockCell,icon:"dxi dxi-key"},{type:"separator"},{id:"clear",value:o.default.clear,icon:"dxi dxi-eraser",items:[{id:"clear-value",value:o.default.clearValue},{id:"clear-styles",value:o.default.clearStyles},{id:"clear-all",value:o.default.clearAll}]}]},{id:"insert",value:o.default.insert,items:[{id:"columns",value:o.default.columns,icon:"dxi dxi-table-column",items:[{id:"add-col",value:o.default.addColumn,icon:"dxi dxi-table-column-plus-before"},{id:"remove-col",value:o.default.removeColumn,icon:"dxi dxi-table-column-remove"}]},{id:"rows",value:o.default.rows,icon:"dxi dxi-table-row",items:[{id:"add-row",value:o.default.addRow,icon:"dxi dxi-table-row-plus-before"},{id:"remove-row",value:o.default.removeRow,icon:"dxi dxi-table-row-remove"}]},{id:"link",type:"navItem",icon:"dxi dxi-link-variant",value:"".concat(o.default.insert," ").concat(o.default.link.toLowerCase())}]},{id:"configuration",value:o.default.format,items:[{id:"font-weight-bold",value:o.default.bold,icon:"dxi dxi-format-bold"},{id:"font-style-italic",value:o.default.italic,icon:"dxi dxi-format-italic"},{id:"text-decoration-underline",value:o.default.underline,icon:"dxi dxi-format-underline"},{id:"text-decoration-line-through",value:o.default.strikethrough,icon:"dxi dxi-format-strikethrough"},{type:"separator"},{id:"halign",value:o.default.halign,items:[{id:"halign-left",value:o.default.left,twoState:!0,group:"halign",icon:"dxi dxi-format-align-left"},{id:"halign-center",value:o.default.center,twoState:!0,group:"halign",icon:"dxi dxi-format-align-center"},{id:"halign-right",value:o.default.right,twoState:!0,group:"halign",icon:"dxi dxi-format-align-right"}]},{id:"valign",value:o.default.valign,items:[{id:"valign-top",value:o.default.top,twoState:!0,group:"valign",icon:"dxi dxi-format-vertical-align-top"},{id:"valign-center",value:o.default.center,twoState:!0,group:"valign",icon:"dxi dxi-format-vertical-align-center"},{id:"valign-bottom",value:o.default.bottom,twoState:!0,group:"valign",icon:"dxi dxi-format-vertical-align-bottom"}]},{id:"multiline",value:o.default.multiline,items:[{id:"multiline-clip",group:"multiline",twoState:!0,value:o.default.clip,icon:"dxi dxi-format-text-wrapping-clip"},{id:"multiline-wrap",group:"multiline",twoState:!0,value:o.default.wrap,icon:"dxi dxi-format-text-wrapping-wrap"}]},{id:"format",type:"navItem",value:o.default.format,items:(0,n.getFormatsDropdown)(e)},{id:"merge",type:"navItem",value:o.default.merge,tooltip:o.default.merge}]},{id:"data",value:o.default.data,items:[{id:"validation",value:o.default.validation,icon:"dxi dxi-table-check"},{id:"search",value:o.default.search,icon:"dxi dxi-magnify"},{id:"filter",value:o.default.filter,icon:"dxi dxi-filter-variant"},{id:"sort",value:o.default.sort,icon:"dxi dxi-format-line-spacing",items:[{id:"asc-sort",value:o.default.ascSort,icon:"dxi dxi-sort-variant dhx-sort-acs"},{id:"desc-sort",value:o.default.descSort,icon:"dxi dxi-sort-variant"}]}]},{id:"help",value:o.default.help}]}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.EditLine=void 0;var r=i(1),a=i(9),s=i(5),l=i(2),c=i(24),u=i(217),d=i(0),h=function(e){function t(t,i){void 0===i&&(i={});var n=e.call(this,t,i)||this;n._serviceEvents=i.serviceEvents,n._events=i.events,n._math=i.math,n._store=i.store,n._activePage=i.activePage,n._suggest=new u.default((function(e,t,i,o){return n.setAtCursor(e,t,i,o)}),n._store,n._serviceEvents),n._prevStyles=[],n._htmlEvents={oninput:function(e){n._isEdit||(e.target.value=n._value),n._value=e.target.value,n._isMath=n._value&&n._value.toString().startsWith("=")?n._parse(n._value):null,n._isMath&&n._suggest.show(n._value,e.target,n._isMath,n.config.grid.config.height),n._contextPage?n.setValue(n._value):n._events.fire(s.SpreadsheetEvents.editLineInput,[e.target.value])},onfocus:function(e){n._contextPage||(n._activeInput=e.target,n._events.fire(s.SpreadsheetEvents.editLineFocus,[e.target.value,e]))},onblur:function(e){n._contextPage?n.focus():n._events.fire(s.SpreadsheetEvents.editLineBlur,[e.target.value,e])},onclick:function(e){var t=n._input.selectionStart;t!==n._prevCursorPosition&&n._isMath&&(n._suggest.show(n._value,n._activeInput,n._isMath),n._prevCursorPosition=t)},onselectionchange:function(){var e,t=n.getRootView(),i=t&&t.refs&&t.refs.input_wrapper,o="0px";if(n._isEdit&&n._value&&n._input){var r=n._input.selectionStart,a=(0,d.getStringWidth)("".concat(n._value).substr(0,r))+12,s=n.getRootNode().offsetWidth;i&&s<a&&(o=s-a+"px")}i&&(i.el.style.left=o,n.paint());var l=n.isCellExpected("A1",!1,n._input),c=n._store.activePage;((null===(e=n._store.getPageMeta(c).contextPage)||void 0===e?void 0:e.page)||c).setMeta({editLinePos:l})}},document.addEventListener("selectionchange",n._htmlEvents.onselectionchange),n._events.on(s.SpreadsheetEvents.cellInput,(function(e,t,i){n._setValue(t),i&&(n._activeInput=i.target,n._isMath=n._value&&n._value.toString().startsWith("=")?n._parse(n._value):null,n._isMath&&n._suggest.show(n._value,i.target,n._isMath,n.config.grid.config.height))})),n._initHandlers();return n.mount(t,(0,r.create)({render:function(){return n._render()}})),n}return o(t,e),t.prototype._parse=function(e,t){return void 0===t&&(t=this._activePage.getContext()),this._math.parse(e,t)},t.prototype.navigate=function(e){return"enter"===e&&this._isMath&&(this._presedEnter=!0),this._contextPage&&this._presedEnter?(this.setCellMath(),!1):this._suggest.navigate(e)},t.prototype.setAtCursor=function(e,t,i,n){var o=this;if(this._activeInput){var r=this._value.substr(0,t)+e+this._value.substr(i);this._contextPage?this.setValue(r):this._events.fire(s.SpreadsheetEvents.editLineInput,[r]),this._prevCursorPosition=t+n,setTimeout((function(){o._activeInput.setSelectionRange(t+n,t+n)}),50)}},t.prototype.focus=function(){this._input&&this._input.focus()},t.prototype.blur=function(){this._input&&this._input.blur()},t.prototype.lock=function(){this._locked=!0,this.paint()},t.prototype.unlock=function(){this._locked=!1,this.paint()},t.prototype.setValueAtRedactor=function(e){var t=this._input&&this._input.selectionStart;this.setAtCursor(e,t,t,e.length)},t.prototype.setValue=function(e){this.unlock(),this._setValue(e)},t.prototype._setValue=function(e){if(this._value=e,this._isMath=this._value&&this._value.toString().startsWith("=")?this._parse(this._value):null,this._colored=this._parseColors(this._value),this._input&&(this._input.value=this._value),this._presedEnter=!1,this._htmlEvents.onselectionchange(),this._contextPage){var t=(0,l.getCellIds)(this._contextPage.cell),i=t.row,n=t.col;this._contextPage.page.setCell(i,n,{nextValue:this._value})}this.paint()},t.prototype.setCellMath=function(){if(this._contextPage){this._removeStyles();var e=(0,l.getCellIds)(this._contextPage.cell),t=e.row,i=e.col,n=this._contextPage.page;this._contextPage=null,n.setCell(t,i,{nextValue:this._value}),this._serviceEvents.fire(s.SpreadsheetServiceEvents.changeSheet,[n.getMeta().id]),this.blur(),this._presedEnter=!1}},t.prototype.getValue=function(){return this._value},t.prototype.clean=function(){var e=this;setTimeout((function(){e._setValue("")}),1)},t.prototype.destructor=function(){this._suggest.destructor(),document.removeEventListener("selectionchange",this._htmlEvents.onselectionchange)},t.prototype.getInput=function(){return this._input},t.prototype.setCursor=function(e){this._input&&this._input.setSelectionRange(e,e)},t.prototype.isCellExpected=function(e,t,i,n){if(!this._presedEnter){if(this._isMath&&this._isEdit){var o=this._value,r=e.lastIndexOf(","),a=e.lastIndexOf(":"),l=r>a?r:a,u=e.includes(",")||e.includes(":"),d=i?i.selectionStart:this._input?this._input.selectionStart:this._value.length,h=this._isMath.code,f=this.config.localization,p=f.decimal,v=f.thousands,g=","===p||","===v?";":",";if(l>-1&&e.includes(n)){var _=this._parse(this._isMath.source.substring(0,d)).code.reverse();e=(e=(12===_[2]?_[5]:_[2])!==c.T_OPERATOR?e.substring(l):e.substring(l+1)).split(",").join(g)}for(var m=0;m<h.length;m+=3){var y=h[m+1]+h[m+2]==d,b=h[m]===c.T_SPACE?h[m-3]:h[m];if(y&&(b==c.T_OPERATOR&&")"!==o[h[m+1]]||u||13===b)){if(t){var w=this._store.activePage.getMeta().name;this._contextPage&&this._contextPage.pageName!==w&&(e=e.includes(g)||e.startsWith(":")?"".concat(e.includes(g)?g:":").concat(e.startsWith(":")?"":"'".concat(w,"'!")).concat(e.substring(1)):"'".concat(w,"'!").concat(e));var x=o.substring(0,d),C=x+e+o.substring(d);return this._contextPage?(this.setValue(C),this.setCursor(x.length+e.length)):this._events.fire(s.SpreadsheetEvents.editLineInput,[C]),x.length+e.length}return d}}}return 0}this._presedEnter=!1},t.prototype._render=function(){var e=this;return(0,r.el)(".dhx_edit_line",{},[(0,r.el)(".input__wrapper",[(0,r.el)(".input_value",{_ref:"input_wrapper"},this._colored),(0,r.el)("input.dhx_edit_line_input",{_hooks:{didInsert:function(t){e._input=t.el},didUnmount:function(){document.removeEventListener("selectionchange",e._htmlEvents.onselectionchange)}},oninput:this._htmlEvents.oninput,onfocus:this._htmlEvents.onfocus,onblur:this._htmlEvents.onblur,onclick:this._htmlEvents.onclick,value:this._value||"",_ref:"input",disabled:this._locked}),(0,r.el)(".input-animation")])])},t.prototype._initHandlers=function(){var e=this;this._events.on(s.SpreadsheetEvents.afterSheetChange,(function(){e._activePage=e._store.activePage;var t=e._activePage.getMeta().contextPage,i=e._input&&e._input.selectionStart;if(!t)return e._contextPage=null,e._removeStyles(),void e._parseColors(e._value);e._contextPage=t,e._removeStyles(),e._setValue(e._value),e.focus(),e.setCursor(i),t.page===e._activePage&&(e._contextPage=null)})),this._events.on(s.SpreadsheetEvents.afterEditStart,(function(){e._isEdit=!0})),this._events.on(s.SpreadsheetEvents.afterEditEnd,(function(){e._isEdit=!1,e._suggest.hide(),e._suggest.hideDescription()})),this._serviceEvents.on(s.SpreadsheetServiceEvents.setCellMath,(function(){e.setCellMath()})),this._serviceEvents.on(s.SpreadsheetServiceEvents.editLineFocus,(function(t){e.focus(),e.setCursor(t)}))},t.prototype._parseColors=function(e){this._removeStyles();var t=1,i=[],n=function(e,t){return i.push((0,r.el)("span".concat(t?"."+t:""),{".innerText":e}))};if(e&&"="===e[0]){for(var o=this._parse(e).code,a=0,s=0,l=function(l){var d=e.substr(a,o[l+1]-a),h=e.substr(o[l+1],o[l+2]);switch(o[l]){case c.T_SPACE:for(var f=0;f<o[l+2];f++)i.push((0,r.el)("",{".innerHTML":"&nbsp;"})),a++;break;case c.T_ARG:case c.T_RANGE:var p=u._prevStyles.find((function(e){return e&&e.cell===h}));t=9===t?1:t,o[l+1]>a&&n(d),a=o[l+1]+o[l+2],n(h,"text_range_".concat(p?p.styleNum:t)),p||o[l-3]===c.T_ERROR||(u._setStyles(h,t),u._prevStyles.push({cell:h,styleNum:t}),++t);break;case 13:case c.T_DATA:case c.T_ERROR:break;case c.T_PAGE:o[l+3]!==c.T_ARG&&o[l+3]!==c.T_RANGE&&o[l+3]!==c.T_ERROR&&(o[l+1]!==a&&n(d),a=o[l+1]+o[l+2],n(h));break;default:o[l+1]>a&&n(d),a=o[l+1]+o[l+2],n(h)}s&&(s--,n(s?",":"}"))},u=this,d=0;d<o.length;d+=3)l(d);a!==e.length&&n(e.substr(a,e.length-a))}else n(e);return i},t.prototype._setStyles=function(e,t){e.includes("$")&&(e=e=e.split("$").join("")),e.includes("!")||(e="'".concat(this._contextPage?this._contextPage.pageName:this._store.activePage.getMeta().name,"'!").concat(e));var i=this.config.grid,n=this._parse(e).code;if((0,c.fromId)(n[7])[2]===this._activePage.getID())if(e.includes("!")&&(e=e.substr(e.indexOf("!")+1)),-1!==e.indexOf(":"))this._store.eachCell((function(e){var n=(0,l.getCellIds)(e),o=n.row,r=n.col;i.addCellCss("".concat(o+1),"".concat(r+1),"range_".concat(t))}),e);else{var o=(0,l.getCellIds)(e),r=o.row,a=o.col;i.addCellCss("".concat(r+1),"".concat(a+1),"range_".concat(t))}},t.prototype._removeStyles=function(){for(var e=function(e){if(!e)return{value:void 0};var i=t.config.grid,n=e.cell;if(n.includes("$")&&(n=n.split("$").join("")),n.includes("!")&&(n=n.substr(n.indexOf("!")+1)),n.includes(":"))t._store.eachCell((function(t){var n=(0,l.getCellIds)(t),o=n.row,r=n.col;i.removeCellCss("".concat(o+1),"".concat(r+1),"range_".concat(e.styleNum))}),n);else{var o=(0,l.getCellIds)(n),r=o.row,a=o.col;i.removeCellCss("".concat(r+1),"".concat(a+1),"range_".concat(e.styleNum))}},t=this,i=0,n=this._prevStyles;i<n.length;i++){var o=e(n[i]);if("object"==typeof o)return o.value}this._prevStyles=[]},t}(a.View);t.EditLine=h},function(e,t,i){"use strict";var n=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0});var o=i(10),r=i(28),a=i(24),s=i(218),l=i(12),c=i(5),u=function(){function e(e,t,i){this._suggestCallback=e,this._serviceEvents=i,this._store=t,this._cursorChangeListener&&(this._input.removeEventListener("selectionchange",this._cursorChangeListener),this._cursorChangeListener=null)}return e.prototype.isVisible=function(){return this._popup&&this._popup.isVisible()},e.prototype.hide=function(){this.isVisible()&&this._popup.hide()},e.prototype.destructor=function(){this._cursorChangeListener&&this._input&&(this._input.removeEventListener("selectionchange",this._cursorChangeListener),this._cursorChangeListener=null),this._popup&&this._popup.destructor(),this._descriptionPopup&&this._descriptionPopup.destructor(),this._list&&this._list.destructor(),this._descriptionLayout&&this._descriptionLayout.destructor()},e.prototype.navigate=function(e){if(!this.isVisible())return!1;var t=this._list,i=t.data.getLength();if(!i)return!1;if("arrowUp"===e||"arrowDown"===e){var n="arrowDown"===e?1:-1,o=t.data.getIndex(t.getFocus());return void 0===o&&(o=-1===n?i:-1),this._list.selection.add(t.data.getId((o+n+i)%i)),!0}var r=t.getFocusItem();if(!r){var a=this._list.data.getId(0);r=this._list.data.getItem(a)}return this._insertSuggest(r.value),!0},e.prototype.show=function(e,t,i,n,o){var r,s,l,c=this,u=o||t.selectionStart;this._input&&this._input.removeEventListener("selectionchange",this._cursorChangeListener),this._input=t,this._cursorChangeListener=this._handleCursorChange.bind(this),this._input.addEventListener("selectionchange",this._cursorChangeListener);for(var d=i.code,h=this._getPopup(n),f=function(i){if((d[i]==a.T_NAME||d[i]===a.T_METHOD)&&u==d[i+1]+d[i+2]){var n=e.substr(d[i+1],d[i+2]).toUpperCase();p._list.data.filter((function(e){return e.value.startsWith(n)})),p._list.data.getLength()||(h.hide(),null===(r=p._descriptionPopup)||void 0===r||r.hide()),p._cursorStart=u,p._startTrim=d[i+1];var o=!p.isVisible();p._addParenthesis="("!==e[d[i+4]],h.show(t,{centering:!1});var f=p._list.selection.getItem();if(!f||!f.value.startsWith(n))return null===(s=p._descriptionPopup)||void 0===s||s.hide(),{value:void 0};if(o||!(null===(l=p._descriptionPopup)||void 0===l?void 0:l.isVisible())){var v=p._list.getRootNode();setTimeout((function(){c.showDescription("".concat(f.id),v)}),100)}return{value:void 0}}},p=this,v=0;v<d.length;v+=3){var g=f(v);if("object"==typeof g)return g.value}h.hide()},e.prototype.showDescription=function(e,t){var i=this;this._descriptionPopup||(this._descriptionPopup=new o.Popup({css:"dhx_suggest_description"}));var r=l.formulas[e];if(!r)return this._descriptionPopup.hide();this._descriptionLayout&&this._descriptionLayout.destructor();var a=r.map((function(e){return{html:'<p class="dhx_formula_param_wrap"><span class="dhx_formula_param">'.concat(e[0],": </span> ").concat(e[1],"</p>")}}));this._descriptionLayout=new s.Layout(null,{type:"none",rows:n([{height:"content",align:"center",css:"dhx_formula_header",cols:[{html:'<h4 class="dhx_formula_name">'.concat(e,"</h4>")},{width:"content",html:"<i class='dxi dxi-close' />",on:{mousedown:function(e){i._descriptionPopup.hide(),e.preventDefault(),e.stopPropagation(),i._serviceEvents.fire(c.SpreadsheetServiceEvents.setGridWidgetFocus)},touchstart:function(e){i._descriptionPopup.hide(),e.preventDefault(),e.stopPropagation(),i._serviceEvents.fire(c.SpreadsheetServiceEvents.setGridWidgetFocus)}}}]}],a,!0)});var u=this.isVisible()?this._popup.getRootNode():t;this._descriptionPopup.attach(this._descriptionLayout),setTimeout((function(){i._descriptionPopup.show(u,{mode:i.isVisible()?"right":"bottom",indent:5,centering:!1})}),100)},e.prototype.hideDescription=function(){this._descriptionPopup&&this._descriptionPopup.hide()},e.prototype._insertSuggest=function(e){var t=e;this._addParenthesis&&(t+="("),this._suggestCallback(t,this._startTrim,this._cursorStart,t.length+1),this._popup.hide()},e.prototype._getPopup=function(e){var t=this;if(!this._popup){var i=(0,a.getMethods)().map((function(e){return{value:e,id:e}}));this._popup=new o.Popup({css:"dhx_suggest_list-wrapper"}),this._list=new r.List(null,{css:"dhx_suggest_list-list"}),this._list.data.parse(i),this._list.events.on("Click",(function(){var e=t._list.selection.getItem();t._insertSuggest(e.value),t._list.selection.remove(e.id)})),this._list.events.on(r.ListEvents.focusChange,(function(e,i){var n=t._list.getRootNode();t.showDescription(i,n)})),this._popup.attach(this._list),this._popup.events.on(o.PopupEvents.afterHide,(function(){t._addParenthesis=!1}))}var n=this._popup.getRootNode();return!n.style.maxHeight&&e&&(n.style.maxHeight="".concat(e,"px")),this._popup},e.prototype._handleCursorChange=function(e){for(var t,i=this._input.selectionStart,n=this._input.value,o=this._store.math.parse(n).code,r=function(e){if(o[e]===a.T_METHOD&&i>o[e+1]&&i<=o[e+1]+o[e+2]+1){var t=n.substring(o[e+1],o[e+1]+o[e+2]).toUpperCase(),r=s._list.data.find((function(e){return e.value.startsWith(t)}));return r&&!s.isVisible()&&s.showDescription(r.id,s._input),{value:void 0}}},s=this,l=0;l<o.length;l+=3){var c=r(l);if("object"==typeof c)return c.value}(null===(t=this._descriptionPopup)||void 0===t?void 0:t.isVisible())&&this._descriptionPopup.hide()},e}();t.default=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Layout=void 0,i(219);var n=i(75);Object.defineProperty(t,"Layout",{enumerable:!0,get:function(){return n.ProLayout}})},function(e,t,i){"use strict";i.r(t)},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferManager=void 0;var o=i(5),r=i(2),a=i(0),s=function(){function e(e,t,i,n){this._spreadsheet=e,this._serviceEvents=n,this._store=i,this._dataStore=i.dataStore,this._math=i.math,this._callAction=t,this._buffer={value:"",math:[],meta:[],styles:{},cell:"",cells:"",operation:"",inserted:!1,formats:[],html:"",spans:[]}}return e.prototype.store=function(e){var t=this,i=this._store.getFocusedCell(),n=this._store.activePage,s=(0,r.getCellInfo)(i,n),l=this._store.getSelectedCell();if(this._prevCopyPage&&this._prevCopyPage.setMeta({inserted:!0}),!s.edited){var c=(0,r.isRangeId)(l),u=[l];if(c&&l.includes(",")){var d=(u=l.split(","))[u.length-1];if(l.includes(":"))if(d.includes(":")){for(var h=void 0,f=void 0,p=void 0,v=void 0,g=void 0,_=0;_<u.length;_++){var m=u[_];if(m.includes(":")&&!h&&(h=m,v={start:(0,r.getCellIds)(h.split(":")[0]),end:(0,r.getCellIds)(h.split(":")[1])}),_){if(!m.includes(":")&&!f.includes(":"))if(v.start.row===v.end.row||v.start.col===v.end.col){var y=v.start.row===v.end.row?"row":"col",b=(0,r.getCellIds)(m)[y];v.start[y]===b[y]&&p.push(m)}else l=d,_=u.length,p=[l];if(m.includes(":")&&m!==h){var w=(0,r.getCellIds)(m.split(":")[0]),x=(0,r.getCellIds)(m.split(":")[1]),C=w.row===v.start.row||w.row===v.end.row||w.col===v.start.col||w.col===v.end.col,E=x.row===v.start.row||x.row===v.end.row||x.col===v.start.col||x.col===v.end.col,S=C&&E,I=w.row===v.start.row?"col":"row";g||(g=I),S&&g===I?p.push(m):(l=d,_=u.length,p=[l])}}else p=[m];f=m}(u=p).length>1&&(l=u.join())}else u=[l=d];else u=[l=d]}if(!(0,r.isRangeId)(l)||l.includes(":")){var k,O=[];if((0,r.isRangeId)(u[0])){var M=(0,r.getCellIds)(u[0].split(":")[0]).row,R=(0,r.getCellIds)(u[0].split(":")[1]).row,A=u[1]&&(0,r.getCellIds)(u[1].split(":")[0]).row;k=A&&(A===M||A===R)}var P=0,T=function(e){var t,i=0;P=k?0:P;var n=u[e];D._store.eachCell((function(e,n){if((0,a.isDefined)(n)||(n=" "),i){var o=(0,r.getCellIds)(t),s=(0,r.getCellIds)(e);o.row===s.row||P++,O[P]?O[P]+="\t"+n:O.push("".concat(n))}else O[P]?O[P]+="\t"+n:O.push("".concat(n));t=e,i++}),n),P++},D=this;for(_=0;_<u.length;_++)T(_);this._buffer.value=O.join("\n"),this._buffer.styles=this._spreadsheet.getStyle(l,!1);var F=n.getMeta().merged,V=[];if((0,r.isRangeId)(l)){var L=[];(0,r.getCellsArray)(l);this._store.eachCell((function(e){L.push(t._spreadsheet._getMath(e))}),l),this._buffer.math=L}else{var N=this._spreadsheet._getMath(l);this._buffer.math=[N];var H=(0,r.isCellSpaned)(l,F);H&&!V.includes(H)&&V.push(H)}this._buffer.spans=V,this._buffer.cells=l,this._buffer.meta=[],this._store.eachCell((function(e){var i=(0,r.getCellIds)(e),o=i.row,a=i.col;t._buffer.meta.push(n.getCell(o,a)||{})}),l);var j=this._spreadsheet.getFormat(l);this._buffer.formats=j instanceof Array?j:[j],this._buffer.cell=i,this._buffer.operation=e,n.setMeta({inserted:!1}),this._prevCopyPage=n,this._serviceEvents.fire(o.SpreadsheetServiceEvents.redraw)}else this._buffer.cell=null}},e.prototype.paste=function(){var e=this;if(this._buffer.cell){var t=this._store.activePage;t.setMeta({inserted:!0});var i=this._buffer.cell,a=this._buffer.formats,s=i,l=!1;if((0,r.isRangeId)(this._buffer.cells)){l=!0;var c=this._store.getRangeIndexes(this._buffer.cells),u=this._store.getCellIndex(i),d={row:c.end.row-c.start.row,col:c.end.col-c.start.col},h=(0,r.getCellNameByIndex)(u.row+d.row,u.col+d.col);if((0,r.isRangeId)(i))(0,r.getCellsArray)(this._buffer.cells).length>(0,r.getCellsArray)(i).length&&(s="".concat(i.split(":")[0],":").concat(h));else s+=":".concat(h)}var f=(0,r.isRangeId)(s),p=Array.isArray(this._buffer.styles)?this._buffer.styles.map((function(e){return dhx.css.add(e)})):dhx.css.add(this._buffer.styles),v=[];"cut"===this._buffer.operation&&(v.push({cell:this._buffer.cells,action:o.Actions.setCellFormat,groupAction:f?o.Actions.groupAction:null,val:"",page:t,dataStore:this._dataStore},{cell:this._buffer.cells,action:o.Actions.setCellValue,val:"",page:t,groupAction:l?o.Actions.groupAction:null,dataStore:this._dataStore},{cell:this._buffer.cells,action:o.Actions.setCellStyle,val:"",page:t,groupAction:l?o.Actions.groupAction:null,dataStore:this._dataStore},{cell:this._buffer.cells,action:o.Actions.setValidation,val:null,page:t,groupAction:l?o.Actions.groupAction:null,dataStore:this._dataStore},{cell:this._buffer.cells,action:o.Actions.insertLink,val:null,page:t,groupAction:l?o.Actions.groupAction:null,dataStore:this._dataStore},{action:o.Actions.unmerge,groupAction:o.Actions.groupAction,dataStore:this._dataStore,cell:this._buffer.cells,page:t}),this._buffer.operation="copy");var g,_,m=l?[].concat(this._buffer.value):this._buffer.value,y=this._buffer.math,b=this._buffer.meta.map((function(e){var t;return(null===(t=null==e?void 0:e.editor)||void 0===t?void 0:t.options)||null})),w=this._buffer.meta.map((function(e){return(null==e?void 0:e.link)||null})),x=m.length;if(l){var C=this._store.getRangeIndexes(this._buffer.cells);g=C.start,_=C.end.col-C.start.col+1}else g=this._store.getCellIndex(this._buffer.cells),_=1;var E=0,S=t.getMeta().merged;this._store.eachCell((function(t){var i=E%x,n=m[i],o=y[i];if(o){var r=i%_,a=(i-r)/_,s=e._store.getCellIndex(t);n="="+e._math.transposeMath(o.source,s.row-g.row-a,s.col-g.col-r)}m[E]=n,E++}),s),m=m.map((function(e,t){return(0,r.doesContainUrl)(e)||w[t]?(w[t]=n({text:e,href:e},w[t]||{}),""):(w[t]=null,e)})),v.push({cell:s,action:o.Actions.setCellFormat,groupAction:f?o.Actions.groupAction:null,val:a,page:t,dataStore:this._dataStore},{cell:s,action:o.Actions.setCellStyle,val:p,page:t,groupAction:f?o.Actions.groupAction:null,dataStore:this._dataStore},{cell:s,action:o.Actions.setCellValue,val:m,page:t,groupAction:o.Actions.groupAction,dataStore:this._dataStore},{cell:s,action:o.Actions.setValidation,val:b,page:t,groupAction:o.Actions.groupAction,dataStore:this._dataStore},{cell:s,action:o.Actions.insertLink,val:w,page:t,groupAction:o.Actions.groupAction,dataStore:this._dataStore});var I=0,k=(0,r.getCellsArray)(this._buffer.cell),O=this._spreadsheet.config,M=(O.leftSplit,O.topSplit,[]);this._store.eachCell((function(i){var n=e._buffer.spans[I],a=(0,r.isCellSpaned)(e._store.getCell(i),S);if(n){var s=(0,r.getCellNameByIndex)(n.cell.row,n.cell.column+1),l=(0,r.getCellNameByIndex)(n.cell.row+n.rowspan,n.cell.column+n.colspan+1),c="".concat(s,":").concat(l);v.push({action:o.Actions.merge,groupAction:o.Actions.merge,dataStore:e._dataStore,cell:c,page:t,$autofill:!0})}a&&!n&&M.includes(i)&&v.push({action:o.Actions.unmerge,groupAction:o.Actions.groupAction,dataStore:e._dataStore,cell:i,page:t}),I=I===k.length-1?0:++I}),s),this._store.eachCell((function(e){var i=(0,r.getCellIds)(e),n=i.row,o=i.col;t.setCell(+n,+o,{$toolbarAlign:!0})}),s),this._callAction(v);var R=(0,r.getCellIds)(s).end,A=this._store.activePage.getSize(),P=A[0],T=A[1];(P<(null==R?void 0:R.row)+1||T<=(null==R?void 0:R.col)+1)&&this._serviceEvents.fire(o.SpreadsheetServiceEvents.updateGridSizes),this._serviceEvents.fire(o.SpreadsheetServiceEvents.setSelectedCell,[s,!1])}},e.prototype.getStruct=function(){return this._buffer},e}();t.BufferManager=s},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.CustomCsvDriver=void 0;var r=i(11),a=i(2),s=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.toJsonArray=function(t){var i=e.prototype.toJsonArray.call(this,t).reduce((function(e,t,i){for(var n in t)e.push({value:t[n],cell:(0,a.getCellNameByIndex)(i,parseFloat(n))});return e}),[]);return i},t}(r.CsvDriver);t.CustomCsvDriver=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyManager=void 0;var n=i(16),o=i(3);function r(e){for(var t=e.toLowerCase().match(/\w+/g),i=0,n="",o=0;o<t.length;o++){var r=t[o];"ctrl"===r?i+=4:"shift"===r?i+=2:"alt"===r?i+=1:n=r}return i+n}var a={Up:"arrowUp",Down:"arrowDown",Right:"arrowRight",Left:"arrowLeft",Esc:"escape",Spacebar:"space"},s=function(){function e(e){var t=this;this._keysStorage={},this._initHandler=function(e){var i;if(e.which>=48&&e.which<=57||e.which>=65&&e.which<=90)i=String.fromCharCode(e.which);else{var r=32===e.which?e.code:e.key;i=(0,o.isIE)()&&a[r]||r}var s=t._keysStorage[(e.ctrlKey||e.metaKey?4:0)+(e.shiftKey?2:0)+(e.altKey?1:0)+(i&&i.toLowerCase())];if(s)for(var l=0;l<s.length;l++){if(t._beforeCall&&!1===t._beforeCall(e,n.focusManager.getFocusId()))return;s[l].handler(e)}},e&&(this._beforeCall=e),document.addEventListener("keydown",this._initHandler)}return e.prototype.destructor=function(){document.removeEventListener("keydown",this._initHandler),this.removeHotKey()},e.prototype.addHotKey=function(e,t){var i=r(e);this._keysStorage[i]||(this._keysStorage[i]=[]),this._keysStorage[i].push({handler:t})},e.prototype.removeHotKey=function(e,t){var i=this;if(e)if(e&&t){var n=r(e),o=function(e){return e.toString().replace(/\n/g,"").replace(/\s/g,"")};this._keysStorage[n].forEach((function(e,r){o(e.handler)===o(t)&&(delete i._keysStorage[n][r],i._keysStorage[n]=i._keysStorage[n].filter((function(e){return e})))}))}else{var a=r(e);delete this._keysStorage[a]}else this._keysStorage={}},e}();t.KeyManager=s},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Selection=void 0;var r=i(0),a=i(1),s=i(52),l=i(2),c=i(95),u=i(5),d=i(23),h=function(){function e(e,t,i,n,o){this._spreadsheet=e,this._grid=t,this._bufferManager=i,this._events=e.events,this._store=n,this._serviceEvents=o,this._setServiceHandlers(),e.config.readonly||this._setHandlers()}return e.prototype.setSelectedCell=function(e,t){var i=this;if(void 0===t&&(t=!0),e&&(this._selectedCols=[],this._selectedRows=[],this._events.fire(u.SpreadsheetEvents.beforeSelectionSet,[e]))){this._removeHeadersCss();var n=this._store.activePage.getMeta().merged,o=e.split(","),r=o.map((function(e){var t=e;if(!(null==n?void 0:n.size)||i._pressedArea&&"cell"!==i._pressedArea)return t;if((0,l.isRangeId)(e)){var o=(0,l.getRangeArray)(e),r=new Set;if(o.forEach((function(e){var t=(0,l.isCellSpaned)(i._store.getCell(e),n);t&&r.add(t)})),r.size){var a=i._store.getCellIndex(o[0]),s=i._store.getCellIndex(o.at(-1)),c=a.row,u=a.col,d=s.row,h=s.col;Array.from(r).forEach((function(e){var t=e.cell,i=e.colspan,n=e.rowspan,o=t.row+n,r=t.column+i;t.row<c&&(c=t.row),t.column<u&&(u=t.column),o>d&&(d=o),r>h&&(h=r)}));var f=(0,l.getCellNameByIndex)(c,u),p=(0,l.getCellNameByIndex)(d,h);t="".concat(f,":").concat(p)}}else{var v=(0,l.isCellSpaned)(i._store.getCell(e),n);v&&(t=(0,l.getCellNameByIndex)(v.cell.row,v.cell.column))}return t}));this._store.activePage.setMeta({selectedCells:r});var a=o[o.length-1];(0,l.isRangeId)(a)&&(a=a.split(":")[0]),this.setFocusedCell(a,t),this._setHeadersCss(),this._mousePressed?this._grid.paint():this._events.fire(u.SpreadsheetEvents.afterSelectionSet,[this.getSelectedCell()])}},e.prototype.getSelectedCell=function(){var e=this._store.activePage.getMeta().selectedCells;if(e&&e.length)return e.join(",")},e.prototype.getFocusedCell=function(){var e=this._store.activePage.getMeta().focusedCell;if(e&&e.cell)return e.cell},e.prototype.setFocusedCell=function(e,t){var i=this;if(void 0===t&&(t=!0),e&&(e=e.toUpperCase(),this._events.fire(u.SpreadsheetEvents.beforeFocusSet,[e]))){var n=(0,l.getCellIds)(e),o=n.row,r=n.col;this._store.activePage.setMeta({focusedCell:{row:o,col:r,cell:e,edit:!1}}),t&&(0,a.awaitRedraw)().then((function(){var t=(0,l.getCellIds)(e);i._grid.scrollTo("".concat(t.row+1),"".concat(t.col+1))})),this._events.fire(u.SpreadsheetEvents.afterFocusSet,[e])}},e.prototype.removeSelectedCell=function(e){var t=this.getSelectedCell();if(t){if(e){var i=t.split(","),n=e.split(","),o=[];n.forEach((function(e){(0,l.isRangeId)(e)?(0,l.getCellsArray)(e).forEach((function(e){o.push(e)})):o.push(e)}));var r=[];if(i.forEach((function(e){if((0,l.isRangeId)(e)){var t=(0,l.getCellsArray)(e);o.forEach((function(e){var i=t.indexOf(e);i>-1&&(t[i]=null)}));var i=null;t.forEach((function(e,n){i?(e||(r.push("".concat(i,":").concat(t[n-1])),i=null),e&&n===t.length-1&&r.push("".concat(i,":").concat(t[n]))):i=e}))}else o.includes(e)||r.push(e)})),r.length)return void this.setSelectedCell(r.join(","),!1);this._store.activePage.setMeta({selectedCells:null})}else this._store.activePage.setMeta({selectedCells:null});this._grid.paint()}},e.prototype._isInRange=function(e,t){if(!t||!e||!t.includes(":"))return!1;var i=this._store.getCellIndex(e),n=i.row,o=i.col,r=this._store.getRangeIndexes(t),a=r.start,s=r.end,l=function(e,t,i){return(e-t)*(e-i)<=0};return!(!a||!s)&&(l(n,a.row,s.row)&&l(o,a.col,s.col))},e.prototype._setSearchedCell=function(e){var t=this;if(this._searchedCells[e]){this._searchCell=this._searchedCells[e];var i=this._store.getCellIndex(this._searchCell,!0),n=i.row,o=i.col;(0,a.awaitRedraw)().then((function(){t._grid.scrollTo(n+1,o)}))}},e.prototype._setSearchedArray=function(e){this._searchedCells=e},e.prototype._removeSearchCell=function(){this._searchCell=null,this._searchedCells=[],this._grid.paint()},e.prototype._removeHeadersCss=function(){var e,t=this,i=this.getSelectedCell();if(null===(e=this._prevHeaderCss)||void 0===e||e.forEach((function(e){var i,n=t._store.getCellIndex(e),o="".concat(n.row+1);void 0!==o&&t._grid.data.getItem(o)&&t._grid.removeRowCss(o,"dhx_selected_row");var r=t._grid.config.columns[n.col];void 0===r||r.hidden||(r.header[0].css=null===(i=r.header[0].css)||void 0===i?void 0:i.replace(" dhx_selected_header",""))})),i){var n=this._store.activePage.getMeta().focusedCell;this._grid.data.exists(n.row)&&this._grid.removeRowCss(n.row,"dhx_selected_row")}this._filteredCells&&(this._spreadsheet.eachCell((function(e){var i=t._store.getCellIndex(e),n="".concat(i.row+1);void 0!==n&&t._grid.data.getItem(n)&&t._grid.removeRowCss(n,"dhx_filtered_row");var o=t._grid.config.columns[i.col];void 0!==o&&(o.header[0].css=o.header[0].css.replace(" dhx_filtered_header",""))}),this._filteredCells),this._filteredCells="")},e.prototype._setHeadersCss=function(){var e=this,t=this.getSelectedCell(),i=this._store.activePage.getMeta(),n=i.merged,o=i.filter;if(this._prevHeaderCss=[],t){var r=[];this._spreadsheet.eachCell((function(t){e._store.getCellIndex(t);var i=(0,l.isCellSpaned)(e._store.getCell(t),n),o=t;if(i&&!r.includes(i)&&"header"!==e._pressedArea&&"index"!==e._pressedArea){var a=i.cell,s=i.colspan,c=i.rowspan;o="".concat((0,l.getCellNameByIndex)(a.row,a.column),":").concat((0,l.getCellNameByIndex)(a.row+c,a.column+s)),r.push(i)}(0,l.isRangeId)(o)?e._spreadsheet.eachCell((function(t){return e._setCss(t)}),o):e._setCss(o)}))}o&&(this._spreadsheet.eachCell((function(t){var i=e._store.getCellIndex(t),n="".concat(i.row+1);void 0!==n&&e._grid.addRowCss(n,"dhx_filtered_row");var o=e._grid.config.columns[i.col];void 0===o||o.header[0].css.includes("dhx_filtered_header")||(o.header[0].css+=" dhx_filtered_header")}),o.cell),this._filteredCells=o.cell)},e.prototype._setCss=function(e){var t;this._prevHeaderCss.push(e);var i=this._store.getCellIndex(e),n="".concat(i.row+1);void 0!==n&&this._grid.addRowCss(n,"dhx_selected_row");var o=this._grid.config.columns[i.col];void 0===o||(null===(t=o.header[0].css)||void 0===t?void 0:t.includes("dhx_selected_header"))||(o.header[0].css+=" dhx_selected_header")},e.prototype._selectRow=function(e){var t;if(!(null===(t=this._selectedRows)||void 0===t?void 0:t.includes(e))){var i=this._grid.config.columns[1],n=this._grid.config.columns[this._grid.config.columns.length-1];this.setSelectedCell("".concat((0,l.getCellNameById)(e.id,i.id),":").concat((0,l.getCellNameById)(e.id,n.id)),!1),this._selectedRows=[e]}},e.prototype._selectColumn=function(e){var t;if(!(null===(t=this._selectedCols)||void 0===t?void 0:t.includes(e))){var i=this._grid.data.getId(0),n=this._grid.data.getId(this._grid.data.getLength()-1),o=this._grid.data.getItem(i),r=this._grid.data.getItem(n);this.setSelectedCell("".concat((0,l.getCellNameById)(o.id,e.id),":").concat((0,l.getCellNameById)(r.id,e.id)),!1),this._selectedCols=[e]}},e.prototype._setGroupSelectionHandlers=function(){var e=this;this._spreadsheet.config.readonly||(this._grid.events.on(s.GridEvents.cellMouseOver,(function(t,i,n){if(!(0,l.getCellInfo)(e.getFocusedCell(),e._store.activePage).edited){var r=e._store.activePage.getMeta(),a=r.focusedCell;if(e._mousePressed){if("index"!==e._pressedArea&&"$index"===i.id)return;if("header"===e._pressedArea&&"$index"!==i.id){var s=e._grid.data.getId(e._grid.data.getLength()-1),u=e._grid.data.getItem(s);return void e.setSelectedCell("".concat(a.cell,":").concat((0,l.getCellNameById)(u.id,i.id)),!1)}var d=e._grid.config.columns[e._grid.config.columns.length-1],h=(0,l.getCellNameById)(t.id,"index"===e._pressedArea?d.id:i.id),f=a.cell,p=o([],r.selectedCells,!0);if("fillHandle"===e._pressedArea){h=(0,c.getLastCopyingCell)(e._cellsToCopy,h,e._store);var v=e._isInRange(h,e._cellsToCopy);((0,l.isRangeId)(e._cellsToCopy)&&h===f||v)&&(h=e._cellsToCopy.split(":")[1])}var g=f===h?f:"".concat(f,":").concat(h);p[p.length-1]=g;var _=e.getFocusedCell();e.setSelectedCell(p.join(","),!1),e.setFocusedCell(_,!1)}}})),this._grid.events.on(s.GridEvents.headerCellMouseOver,(function(t,i){if("cell"!==e._pressedArea&&e._mousePressed&&"header"===e._pressedArea&&"$index"!==i.id){var n=e._grid.data.getId(e._grid.data.getLength()-1),o=e._grid.data.getItem(n),r=e._store.activePage.getMeta().focusedCell;e.setSelectedCell("".concat(r.cell,":").concat((0,l.getCellNameById)(o.id,i.id.toString())),!1)}})))},e.prototype._setServiceHandlers=function(){var e=this;this._serviceEvents.on(u.SpreadsheetServiceEvents.setSelectedCell,(function(t,i){e.setSelectedCell(t,i)})),this._serviceEvents.on(u.SpreadsheetServiceEvents.removeSearchCell,(function(){e._removeSearchCell()})),this._serviceEvents.on(u.SpreadsheetServiceEvents.setSearchedArray,(function(t){e._setSearchedArray(t)})),this._serviceEvents.on(u.SpreadsheetServiceEvents.setSearchedCell,(function(t){e._setSearchedCell(t)}))},e.prototype._setHandlers=function(){var e,t,i=this;(0,a.awaitRedraw)().then((function(){var t;e=null===(t=i._grid.getRootView().node)||void 0===t?void 0:t.el.getBoundingClientRect()}));var c=function(n){t&&clearTimeout(t);var o=i._grid.getScrollState();n.clientX>e.width+e.left-50&&i._grid.scroll(o.x+50,o.y),n.clientX<e.left+50&&i._grid.scroll(o.x-50,o.y),n.clientY>e.height+e.top-50&&i._grid.scroll(o.x,o.y+50),n.clientY<e.top+50&&i._grid.scroll(o.x,o.y-50),t=setTimeout((function(){c(n)}),100)};document.addEventListener("mouseup",(function(){if(i._mousePressed){i._mousePressed=!1;var e=i.getSelectedCell();"fillHandle"===i._pressedArea&&(e!==i._cellsToCopy&&i._events.fire(u.SpreadsheetEvents.groupFill,[i._cellsToCopy,e]),i._cellsToCopy=""),i._pressedArea=null,document.removeEventListener("mousemove",c),t&&clearTimeout(t),e&&i._events.fire(u.SpreadsheetEvents.afterSelectionSet,[i.getSelectedCell()]),i._grid.paint()}})),this._grid.events.on(s.GridEvents.cellMouseDown,(function(t,n,o){var r;if(!o.target.className.includes("dxi-chevron")){i._mousePressed=!0,e=i._grid.getRootView().node.el.getBoundingClientRect(),setTimeout((function(){i._mousePressed&&document.addEventListener("mousemove",c)}),100);var a=i._store.activePage.getMeta().selectedCells;if("$index"!==n.id){i._pressedArea="cell";var s=(0,l.getCellNameById)(t.id,n.id),d=(0,l.getCellInfo)(s,i._store.activePage);if(!(3===o.which&&i._isInRange(s,a[a.length-1])||d.edited)){var h=i.getFocusedCell();if(!o.shiftKey||o.ctrlKey||o.metaKey)if(o.shiftKey&&(o.ctrlKey||o.metaKey)){a.length&&a[a.length-1]===h&&a.pop();var f=i.getSelectedCell();i.setSelectedCell("".concat(f?f+",":"").concat(h,":").concat(s),!1)}else if(!o.ctrlKey&&!o.metaKey||o.shiftKey)i.setSelectedCell(s,!1);else{if(!(f=i.getSelectedCell()))return;if(f&&!(0,l.getCellsArray)(f).includes(s))return i.setSelectedCell("".concat(f,",").concat(s),!1);for(var p=f.split(","),v=0;v<p.length;v++){var g=p[v];(0,l.isRangeId)(g)||g!==s||i.setSelectedCell(p.filter((function(e){return e!==s})).join(","),!1)}}else i.setSelectedCell("".concat(h,":").concat((0,l.getCellNameById)(t.id,n.id)),!1)}}else{var _=o.target.getAttribute("data-dhx-id");if(o.shiftKey){var m=i.getSelectedCell(),y=[];(0,l.isRangeId)(m)&&(y=m.split(":"));var b=(0,l.getCellIds)(y[0]||m),w=i._grid.config.columns,x=(0,l.getCellNameById)(t.id,w[w.length-1].id),C=(0,l.getCellNameById)(b.row+1,1);i.setSelectedCell("".concat(C,":").concat(x),!1);var E=i._grid.data;return void(i._selectedRows=E._order.slice(E.getIndex("".concat(b.row+1)),E.getIndex(t.id)+1))}if(_){document.removeEventListener("mousemove",c),i._mousePressed=!1;var S=null===(r=i.getSelectedCell())||void 0===r?void 0:r.split(":"),I=S&&(0,l.getCellIds)(S[0]),k=S&&(0,l.getCellIds)(S[1]);if(!S||0!==I.col||k.col+2!==i._grid.config.columns.length||+_!==I.row&&+_!==k.row){var O=(0,l.getCellNameById)(+_+1,1);i._resizedRows=[O,O]}else i._resizedRows=S;i._serviceEvents.fire(u.SpreadsheetServiceEvents.callAction,[{cell:i._resizedRows.join(":"),action:u.Actions.resizeRow,groupAction:u.Actions.resizeRow,mouseEvent:o}])}else i._pressedArea="index",i._selectRow(t),i._mousePressed=!0}}})),this._grid.events.on(s.GridEvents.headerCellMouseDown,(function(e,t,n){var o,r=n.target.getAttribute("data-dhx-id");if(!n.target.className.includes("dxi-chevron"))if(n.shiftKey){var a=i.getSelectedCell(),s=[];(0,l.isRangeId)(a)&&(s=a.split(":"));var c=(0,l.getCellIds)(s[0]||a),d=(0,l.getCellNameById)(i._grid.data.getId(0),c.col+1),h=(0,l.getCellNameById)(i._grid.data.getLength(),t.id);i.setSelectedCell("".concat(d,":").concat(h),!1);var f=i._grid.config.columns;i._selectedCols=f.slice(f.findIndex((function(e){return e.id==="".concat(c.col+1)})),f.findIndex((function(e){return e.id===t.id}))+1)}else{var p=n.target.className.includes("dhx_header_icon");if(p)return i._pressedArea="header",void i._selectColumn(t);if("$index"!==t.id&&"$index"!==r)if(!r||p)i._pressedArea="header",i._selectColumn(t),i._mousePressed=!0;else{g=(a=null===(o=i.getSelectedCell())||void 0===o?void 0:o.split(":"))&&(0,l.getCellIds)(a[0]),_=a&&(0,l.getCellIds)(a[1]);if(!a||0!==g.row||_.row+1!==i._grid.data.getLength()||+r!==g.col+1&&+r!==_.col+1){var v=(0,l.getCellNameByIndex)(0,+r);i._resizedColumns=[v,v]}else i._resizedColumns=a;i._serviceEvents.fire(u.SpreadsheetServiceEvents.callAction,[{cell:i._resizedColumns.join(":"),action:u.Actions.resizeCol,groupAction:u.Actions.resizeCol,mouseEvent:n}])}else{var g=(0,l.getCellNameByIndex)(0,1),_=(0,l.getCellNameByIndex)(i._grid.data.getLength()-1,i._grid.config.columns.length-1);i.setSelectedCell("".concat(g,":").concat(_),!1)}}})),this._setGroupSelectionHandlers(),this._grid.events.on(s.GridEvents.cellDblClick,(function(e,t,n){n.ctrlKey||n.metaKey?i._grid.events.fire(s.GridEvents.cellClick,[e,t,n]):"$index"!==t.id&&i._serviceEvents.fire(u.SpreadsheetServiceEvents.startEdit,[(0,l.getCellNameById)(e.id,t.id)])})),this._grid.events.on(s.GridEvents.headerCellDblClick,(function(e,t,n){if(n.target.getAttribute("data-dhx-id")){var o=(0,l.getCellNameByIndex)(0,+t.id);i._serviceEvents.fire(u.SpreadsheetServiceEvents.fitColumn,[o])}})),this._events.on(u.SpreadsheetEvents.afterSheetChange,(function(){i._removeHeadersCss();var e=i._store.activePage.getMeta();i.setSelectedCell(e.selectedCells?e.selectedCells.join(","):null,!1),i.setFocusedCell(e.focusedCell?e.focusedCell.cell:null,!1)})),this._events.on(u.SpreadsheetEvents.afterAction,(function(e,t){switch(e){case u.Actions.resizeCol:i._resizedColumns=null,i._grid.paint();break;case u.Actions.resizeRow:i._resizedRows=null,i._grid.paint()}})),this._events.on(u.SpreadsheetEvents.gridRedraw,(function(e){var t,s=i._store.getPageMeta(),u=s.focusedCell,h=s.merged,f=void 0===h?[]:h,p=s.filter,v=s.inserted,g=s.freezedCol,_=void 0===g?"":g,m=s.freezedRow,y=void 0===m?0:m,b=s.selectedCells,w=null==u?void 0:u.cell;if(b&&(w||(null===(t=i._searchedCells)||void 0===t?void 0:t.length))){var x=i._grid.data._pull,C=i._grid.config.columns,E=[];b.forEach((function(e){if(e.includes(":")){var t=(0,l.getCellsArray)(e).some((function(e){var t=i._store.getCellIndex(e);return!C[t.col].hidden&&!x[t.row+1].hidden}));t&&E.push(e)}else{var n=i._store.getCellIndex(e);if(C[n.col].hidden||x[n.row+1].hidden)return;E.push(e)}})),(w&&C[u.col+1].hidden||x[u.row+1].hidden)&&(w=""),b=E;var S,I=function(e){var t=i._grid.data.getIndex("".concat(e.row+1)),n=i._grid.data.getItem("".concat(e.row+1)),o=i._grid.config.columns[e.col];return n?{x:i._grid.config.columns.slice(0,e.col).reduce((function(e,t){return t.hidden||(e+=t.$width),e}),0),y:e.row?i._grid.data.mapRange(0,t-1,(function(e){return e})).reduce((function(e,t){return t.hidden||(e+=t.height||t.$height),e}),0):0,width:(o&&!o.hidden?o.$width:0)+1,height:(n.hidden?0:n.height||n.$height)+1}:{x:0,y:0,width:0,height:0}},k=function(e){var t=I(e.start),i=I(e.end);return{x:t.x,y:t.y,width:i.x-t.x+(i.width||0),height:i.y-t.y+i.height}},O=_?(0,l.getNumberFromLetter)(_):0,M=i._grid.getScrollState(),R=I({row:y,col:O}),A=function(e){void 0===e&&(e="A1");var t=(0,l.isCellFixed)(e,O,y),n=t.isLeftFixed,o=t.isTopFixed,r=(0,l.isCellSpaned)(i._store.getCell(e),f);if(r){var a=r.cell,s=a.row,c=a.column;e=(0,l.getCellNameByIndex)(s,c)}var u=I(i._store.getCellIndex(e)),h=u.x,p=u.y,v=u.width,g=void 0===v?0:v,_=u.height,m=R.x+M.x+(R.width||0)-1,b=R.y+M.y,w=n?g:null,x=o?_:null,C=Math.abs(h-m<0&&!n?h-m:0),E=Math.abs(p-b<0&&!o?p-b:0),S=n?h+M.x:h,A=o?p+M.y:p;if(r){var P=r,T=P.cell,D=P.rowspan,F=P.colspan,V=I({row:T.row+D,col:+T.column+F}),L=D?V.y-A+V.height-_:0;g+=F?V.x-S+V.width-g:0,_+=L;var N=k({start:{row:T.row,col:T.column},end:{row:T.row+D,col:T.column+F}});n&&(w=N.width),o&&(x=N.height)}var H=g-C,j=_-E;return{width:w&&w>H?w:H,height:x&&x>j?x:j,top:A+E,left:S+C,borderLeft:!n&&g>H+d.BORDERS?"none":null,borderRight:!n&&H<=0?"none":null,borderTop:!o&&_>j?"none":null,borderBottom:!o&&j<=0?"none":null,position:"absolute",pointerEvents:"none",zIndex:12,minWidth:w,minHeight:x}},P=function(e,t){void 0===t&&(t=!1);var n=i._store.getRangeIndexes(e,t),o=k(n),r=o.x,a=o.y,s=o.width,l=o.height,c=n.start,u=n.end,d=c.col<=O,h=c.row<y;if(d||h){var f=R.x+M.x+R.width,p=R.y+M.y,v=k({start:{row:c.row,col:c.col},end:{row:y&&u.row>=y?y-1:u.row,col:O&&u.col>O?O:u.col}}),g=d?v.width:null,_=h?v.height:null,m=d?r+M.x:r,b=h?a+M.y:a,w=Math.abs(r-f<0&&!d?r-f:0),x=Math.abs(a-p<0&&!h?a-p:0),C=s-w,E=l-x;return d&&(C-=M.x),h&&(E-=M.y),{top:b+x,left:m+w,width:C,minWidth:g,height:E,borderLeft:!d&&s>C?"none":null,borderRight:!d&&C<=0?"none":null,borderTop:!h&&l>E?"none":null,borderBottom:!h&&E<=0?"none":null,minHeight:_,zIndex:12}}return{top:a,left:r,width:s,height:l,zIndex:10}},T=b.map((function(e){return(0,l.isRangeId)(e)?(0,a.el)(".dhx_group_selection",{style:P(e)}):1!==b.length?(0,a.el)(".dhx_group_selection",{style:A(e)}):void 0})),D=b[b.length-1],F=w?(0,a.el)(".dhx_selected_cell",{style:A(w)}):void 0;i._searchCell&&(S=i._searchedCells.map((function(e){console.log(e);var t=i._store.getCellIndex(e);if(!x[t.row+1].hidden&&!C[t.col].hidden)return(0,a.el)(".dhx_search_group".concat(e===i._searchCell?".dhx_search_cell":""),{style:A(e)})})));var V,L,N,H=[],j=i._bufferManager.getStruct();if(j.cell&&void 0!==v&&!v)H=(j.cells.includes(",")?j.cells.split(","):[j.cells]).map((function(e){var t=(0,l.isRangeId)(e)?P(e):A(e),i=t.width,o=t.left,r=t.height,s=t.top;return(0,a.el)(".dhx_copy_selection",{style:n(n({},t),{width:i+(o>40?1:0),left:o-(o>40?1:0),height:r+(s>0?1:0),top:s-(s>0?1:0)})})}));if(i._resizedColumns){var z=(0,l.getCellIds)(i._resizedColumns[1]),$=(0,r.findIndex)(i._grid.config.columns,(function(e){return e.id==z.col+1})),B=I({row:0,col:$}),q=i._grid.config.$totalHeight;V=(0,a.el)(".resize_line",{style:{top:B.y,left:B.x+B.width-1.5,height:q}})}if(i._resizedRows){var W=i._store.getCellIndex(i._resizedRows[1]);B=I({row:W.row,col:0});V=(0,a.el)(".resize_line",{style:{top:B.y+B.height-2,left:0,width:i._grid.config.$totalWidth,height:"2px"}})}if((0,l.isRangeId)(D)){var G=(0,l.getRangeArray)(D);D=G[G.length-1]}if(p){var U=(0,l.getCellsArray)(p.cell).reverse(),X=U.find((function(e){return!i._grid.isRowHidden((0,l.getCellIds)(e).row+1)}));L=(0,a.el)(".dhx_filtered_cells",{style:P("".concat(U[U.length-1],":").concat(X),!0)})}if(E.length&&!(0,l.getCellInfo)(w,i._store.activePage).edited){var Y=A((0,l.isRangeId)(E.join(","))?D:w),K=Y.top,J=Y.left,Z=Y.width,Q=Y.height,ee=Y.minWidth;K+=(Y.minHeight||Q)-6,J+=(ee||Z)-6;var te=(0,l.isCellFixed)(D,O,y),ie=te.isLeftFixed,ne=te.isTopFixed;N=w?(0,a.el)(".dhx_selection_grip",{"data-dhx-id":"selection_grip",style:{position:"absolute",left:J,top:K,zIndex:!ne&&!ie||ne&&Z<=0||ie&&Q<=0?10:12},onmousedown:function(){i._mousePressed=!0,document.addEventListener("mousemove",c),i._pressedArea="fillHandle";var e=i.getSelectedCell().split(","),t=e[e.length-1];i.setSelectedCell(t,!1);var n=(0,l.getCellsArray)(t),o=(0,l.isCellSpaned)(i._store.getCell(n[n.length-1]),f);if(i._cellsToCopy=t,o){var r=o.cell,a=o.colspan,s=o.rowspan,u=(0,l.getCellNameByIndex)(r.row+s,r.column+a);i._cellsToCopy="".concat(n[0],":").concat(u)}}}):void 0}e.refs.selection.patch((0,a.el)(".dhx_grid_selection",o(o(o(o([],H,!0),[F],!1),T,!0),[S,V,L,N],!1)))}}))},e}();t.Selection=h},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.DateEditor=void 0;var o=i(1),r=i(41),a=i(10),s=i(29),l=i(13),c=i(5),u=i(21),d=function(){function e(e,t,i){var n=this;this._dateFormat=t,this._calendar=new r.Calendar(null,{dateFormat:t}),this._popup=new a.Popup({css:"dhx_editor-popup"}),this._popup.attach(this._calendar),this._events=i,this._endEdit=e,this._popup.events.on(a.PopupEvents.afterShow,(function(){n._calendar.getRootNode().querySelector(".dhx_calendar__days").addEventListener("click",n.endEdit.bind(n),{once:!0})})),this._initHandlers()}return e.prototype.endEdit=function(){var e=this;this.edit&&((0,o.awaitRedraw)().then((function(){e._events.fire(c.SpreadsheetEvents.cellInput,[e._config.oninput[1],e._calendar.getValue()]),e._endEdit(),e._popup.hide()})),this.edit=!1)},e.prototype.setValue=function(e){var t;if(""===e)return this._calendar.setValue(new Date),void this._calendar.clear();if((0,l.isNumeric)(e))t=(0,s.excelDateToJSDate)(e);else{if(!(0,u.stringToDate)(e,this._dateFormat,!0))return;t=(0,u.stringToDate)(e,this._dateFormat)}this._calendar.setValue(t)},e.prototype.hidePopup=function(){this._popup.isVisible()&&this._popup.hide()},e.prototype.toHTML=function(e){var t=this;return this._config=e,this.setValue(e.value),this.edit=!0,document.addEventListener("mousedown",this._handlers.onOuterClick),(0,o.el)("input.dhx_cell_input",n(n({},e),{onkeydown:function(e){"Enter"===e.code&&t._popup.hide()},oninput:this._handlers.oninput,_hooks:n(n({},e._hooks),{didInsert:this._handlers.didInsert})}))},e.prototype._showPopup=function(){this._input.value.startsWith("=")||this._popup.show(this._input,{centering:!0,mode:"bottom"})},e.prototype._initHandlers=function(){var e=this;this._handlers={onFocus:function(){(0,o.awaitRedraw)().then((function(){e._showPopup()}))},onOuterClick:function(t){if(t.target instanceof Node){var i=e._input&&e._input.contains(t.target),n=e._popup&&e._popup.getRootNode()&&e._popup.getRootNode().contains(t.target);i||n||e._popup.hide()}},oninput:function(t){t.target.value||e._showPopup(),t.target.value.startsWith("=")&&e._popup.isVisible()&&e._popup.hide();var i=e._config.oninput;(0,i[0])(i[1],t)},didInsert:function(t){var i=t.el;e._input=i,e._input.addEventListener("focus",e._handlers.onFocus),e._config._hooks.didInsert(t)}}},e}();t.DateEditor=d},function(e,t,i){"use strict";(function(e){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Exporter=void 0;var r=i(0),a=i(13),s=i(2),l=function(){function t(e){this._spreadsheet=e}return t.prototype.xlsx=function(e){var t=this;if(void 0===e&&(e="data"),!(0,s.isWasmSupported)())throw new Error("WebAssembly is not supported by your browser");var i=[{id:""}],l=this._spreadsheet.serialize(),c=(0,a.getDefaultFormats)(),u=[];l.sheets.forEach((function(e){for(var a=t._spreadsheet._dataStore.getPage(e.name),l=a.getSize(),d=(a.getMeta().merged,[]),h=[],f=0;f<l[1];f++)d.push(null);for(f=0;f<l[0];f++)h.push(o([],d,!0));e.data.forEach((function(e){var t=null,o=(0,s.getCellIds)(e.cell),a=o.row,l=o.col,u=c.find((function(t){return t.id===e.format})),d=u?u.mask:"",f=e.css||"",p=d+f;if(-1===(t=(0,r.findIndex)(i,(function(e){return e.id===p})))){var v={"text-align":"align","font-size":"fontSize","font-weight":"fontWeight","font-style":"fontStyle","text-decoration":"textDecoration","vertical-align":"verticalAlign","border-left":"borderLeft","border-top":"borderTop","border-right":"borderRight","border-bottom":"borderBottom"},g=f.split(" "),_={};g.forEach((function(e){var t=dhx.css.get(e)||{},i=Object.keys(t).reduce((function(e,i){return e[v[i]||i]=t[i].replace(" !important",""),e}),{});_=n(n({},_),i)})),i.push(n(n({format:d},_),{id:p})),t=i.length-1}var m={v:(0,r.isDefined)(e.value)?"".concat(e.value):"",s:t};h[a][l]=m})),u.push({name:e.name,cells:h,cols:e.cols,rows:e.rows})}));var d={data:u,styles:i},h=this._spreadsheet.config.exportModulePath;this._getXlsxWorker(e,h).then((function(e){return e.postMessage({type:"convert",data:d})}))},t.prototype.json=function(){return(0,r.downloadFile)(JSON.stringify(this._spreadsheet.serialize()),"data.json","text/json")},t.prototype._getXlsxWorker=function(t,i){if(!this._xlsxWorker){var n=window.URL.createObjectURL(new Blob(["importScripts('".concat(i,"');")],{type:"text/javascript"}));this._xlsxWorker=new e((function(e){var i=new Worker(n);i.addEventListener("message",(function(n){if("init"===n.data.type)e(i);else if("ready"===n.data.type){var o=document.createElement("a");o.href=URL.createObjectURL(n.data.blob),o.download="".concat(t,".xlsx"),document.body.appendChild(o),o.click(),document.body.removeChild(o)}}))}))}return this._xlsxWorker},t}();t.Exporter=l}).call(this,i(15))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XlsxDriver=void 0;var n=i(2),o=function(){function e(){}return e.prototype.toJsonArray=function(e,t){var i=[],o=[],r={};return e.styles.forEach((function(e,t){var i=["background","color","textAlign","align","verticalAlign","textDecoration","fontWeight","fontStyle","borderLeft","borderTop","borderRight","borderBottom","border"].reduce((function(t,i){return e[i]&&(t[i]=e[i]),"align"===i&&(t.textAlign=e[i]),t}),{});o.push(e.format),r["imported_class"+t]=i})),e.data.forEach((function(e){var t=[];e.cells.forEach((function(e,i){e.forEach((function(e,r){if(e){var a={cell:(0,n.getCellNameByIndex)(i,r+1),value:e.v,css:["imported_class"+e.s],format:o[e.s]};t.push(a)}}))})),i.push({name:e.name,data:t,cols:e.cols,rows:e.rows,merged:e.merged})})),{sheets:i,styles:r}},e}();t.XlsxDriver=o},function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.FileProxy=void 0;var n=i(2),o=function(){function t(e){this._modulePath=e}return t.prototype.load=function(t,i){var n=this;return void 0===t&&(t="xlsx"),new e((function(e){n._getFile(t,i).then((function(i){if("json"===t)return e(i);i instanceof ArrayBuffer&&(i=new Uint8Array(i));var o=n._modulePath;n._getXlsxWorker(o).then((function(t){t.postMessage({type:"convert",data:i,formulas:!0}),t.onmessage=function(t){"ready"===t.data.type&&e(t.data)}}))}))}))},t.prototype._getXlsxWorker=function(t){if(!this._xlsxWorker){var i=window.URL.createObjectURL(new Blob(["importScripts('".concat(t,"');")],{type:"text/javascript"}));this._xlsxWorker=new e((function(e){var t=new Worker(i);t.addEventListener("message",(function(i){"init"===i.data.type&&e(t)}))}))}return this._xlsxWorker},t.prototype._getFile=function(t,i){return void 0===t&&(t="xlsx"),new e((function(e){if(i)return(0,n.fetchFile)(i,"GET","arraybuffer").then((function(t){e(t)}));var o=document.createElement("input");o.type="file",o.accept=".".concat(t),o.click(),o.addEventListener("change",(function(i){var n=new FileReader;n.onload=function(){var i=n.result;e("json"===t?i:new Uint8Array(i))},"json"===t?n.readAsText(i.target.files[0]):n.readAsArrayBuffer(i.target.files[0])}))}))},t}();t.FileProxy=o}).call(this,i(15))},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.getKeysHandlers=t.getHtmlData=t.isPrintableKey=void 0;var o=i(5),r=i(2),a=i(37),s=i(16),l=i(24),c=i(0),u=i(13),d={General:"common",Fixed:"number","Short Date":"date"};function h(e){if(e.ctrlKey||e.altKey||e.metaKey||e.shiftKey&&32===e.keyCode)return!1;var t=e.which||e.keyCode;return t>=65&&t<=90||t>=48&&t<=57||t>=96&&t<=105||!!{32:" ",106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[t]||!1}function f(e,t){var i,n=e.selection.getSelectedCell(),o=t.activePage,a=o.getMeta(),s=a.merged,l=a.filteredRows,u=void 0===l?[]:l;if(n.includes(",")){var d=n.split(",");n=d[d.length-1]}var h=(i=(0,r.isRangeId)(n)?(0,r.getRangeMatrix)(n,e._store):[[n]]).reduce((function(i,n){var r=n[0],a=t.getCellIndex(r).row;if(u[a])return"".concat(i);var l=n.reduce((function(i,n){var r=t.getCellIndex(n),a=r.row,l=r.col,u=t.getCell(n,o),d=u.spanId,h=u.link,f=s.get(d),p=1,v=1;if((null==f?void 0:f.cell.column)===l&&(null==f?void 0:f.cell.row)===a)p+=f.rowspan,v+=f.colspan;else if(f)return i;var g=e.getValue(n),_=(0,c.isDefined)(g)?g:" ",m=e.getStyle(n)||{},y=Object.keys(m).reduce((function(e,t){return"".concat(e).concat(t,":").concat(m[t],";")}),""),b="".concat(i,' <td style="').concat(y,'" rowSpan="').concat(p,'" colSpan="').concat(v,'">');return h&&(b+='<a href="'.concat(h.href,'" target="_blank">')),b+="".concat(_),h&&(b+="</a>"),b+="</td>"}),"");return"".concat(i,'<tr style="box-sizing: inherit;">').concat(l,"</tr>")}),"");return'\n\t\x3c!--StartFragment--\x3e\n\t\t<table id="customers">\n\t\t<col span="'.concat(i[0].length,'">\n\t\t\t<tbody style="box-sizing: inherit;">\n\t\t\t\t').concat(h,"\n\t\t\t</tbody>\n\t\t</table>\n\t\x3c!--EndFragment--\x3e")}function p(e,t){var i=e.getPageMeta(),n=i.rows,o=i.cols;return"row"===t?{min:0,max:n.length-1}:{min:0,max:o.length-1}}function v(e,t,i,n,o){var a,s=t.getFocusedCell(),l=(0,r.getCellInfo)(s,t.activePage);if(!l.edited){var c=t.getCellIndex(s,!0);c.col-=1;var u=p(t,o),d=t.getPageMeta(),h=d.rows,f=d.cols,v=d.filteredRows,g=void 0===v?[]:v,_="col"===o?f:h,m=c[o];do{(m+=n)<u.min&&(m=u.max);_[m];m>u.max&&(m=u.min),c[o]=m||0}while(g[m]||(null===(a=_[m])||void 0===a?void 0:a.hidden));c.col+=1;for(var y=(0,r.getCellNameByIndex)(c.row,c.col),b=t.getPageMeta().merged,w=t.getCell(y),x=b.get(l.spanId);x;)c[o]+=n,y=(0,r.getCellNameByIndex)(c.row,c.col),w=t.getCell(y),x=b.get(w.spanId);e.selection.setSelectedCell(y,!0)}}function g(e,t,i,o,a){var s=e.selection.getFocusedCell();if(!(0,r.getCellInfo)(s,a).edited){var l,c,u=t.getCellIndex(s),d=e.selection.getSelectedCell().split(",")[0];if(d.includes(":")){var h=t.getRangeIndexes(d);h.end[o]>u[o]?(l=n({},h.end),c=h.start):(l=n({},h.start),c=h.end)}else l=n({},u),c=u;var f=p(t,o);if(l[o]+i>=f.min&&l[o]+i<=f.max){l[o]+=i;var v=(0,r.getCellNameByIndex)(l.row,l.col||1);if(v===(c=(0,r.getCellNameByIndex)(c.row,c.col)))return void e.selection.setSelectedCell(v,!1);e.selection.setSelectedCell("".concat(v,":").concat(c),!1),e.selection.setFocusedCell(s,!1)}}}t.isPrintableKey=h,t.getHtmlData=f,t.getKeysHandlers=function(e,t,i,p,_){var m;e.events.on(o.SpreadsheetEvents.afterEditStart,(function(e){m=e})),e.events.on(o.SpreadsheetEvents.afterEditEnd,(function(){m=null})),document.addEventListener("keydown",(function(i){if(h(i)&&(s.focusManager.getFocusId()===e._uid||s.focusManager.getFocusId()===t._uid)){var n=e.selection.getFocusedCell();n&&n!==m&&(i.preventDefault(),e.startEdit(n,i.key))}}));var y=function(t,o){var a,s=i.getStruct(),h=e.selection.getSelectedCell(),f=_.getCellIndex(h),p=(0,r.getCellNameByIndex)(f.row+t.rowsCount-1,f.col+t.colsCount-1),v=(0,r.isRangeId)(h)?h:"".concat(h,":").concat(p),g=(0,l.str2pos)(h),m=g[0],y=g[1],b=null===(a=t.spans)||void 0===a?void 0:a.map((function(e){if(!e)return null;var t=e.cell;return n(n({},e),{cell:{row:t.row+m,column:t.column+y}})}));if(t.styles?s.styles=t.styles:s.styles=e.getStyle(v,!1),o&&(!o.includes(s.html)||!s.html)){if(s.cells="",s.math=[],t.formats.length){for(var w=e.config.formats,x=[],C=function(t){var i=null==w?void 0:w.find((function(e){return e.mask===t||d[t]===e.id||!t&&"common"===e.id||t.toLowerCase().includes(e.id.toLowerCase())}));i||(i=(0,u.addNewFormat)(t,e.toolbar.data,w)),x.push(null==i?void 0:i.id)},E=0,S=t.formats;E<S.length;E++){C(S[E])}s.formats=x}s.meta=t.meta}var I=s.value;s.value=t.values.map((function(e,t){return"text"!==s.formats[t]&&(0,c.isNumeric)(e)?+e:e})),s.cell=v,s.spans=b||[],i.paste(),s.value=I},b={};function w(i){i.preventDefault();var n=e.selection.getSelectedCell(),o=(0,a.getToggledValue)(_.activePage,n,"text-decoration","line-through",t);e.setStyle(e.selection.getSelectedCell(),{"text-decoration":o})}function x(t,i){i.preventDefault(),e.setStyle(e.selection.getSelectedCell(),{"text-align":t})}function C(t,i){i.preventDefault();var n=e._sheets,o=e.getActiveSheet().id,r=n.getIndex(o),a=n.getLength()-1,s=r+t,l="add-sheet"===n.getId(0)?1:0;s<l&&(s=a),s>a&&(s=l),e.setActiveSheet(n.getId(s))}function E(i,n){n.preventDefault();var o=e.selection.getFocusedCell(),a=(0,r.getCellIds)(o),s=a.row,l=a.col,c=(0,r.getCellNameById)(i?t.data.getLength():s+1,i?l+1:t.config.columns.length-1),u=(0,r.getCellNameById)(i?1:s+1,i?l+1:1);e.selection.setSelectedCell("".concat(u,":").concat(c),!1),e.selection.setFocusedCell(o,!1)}return window.clipboardData?b={"ctrl+c":function(){if(!m&&(i.store("copy"),window.clipboardData)){var t=f(e,_);window.clipboardData.setData("text/html",t),window.clipboardData.setData("text/plain",i.getStruct().value),window.preventDefault(),i.getStruct().html=t}},"ctrl+x":function(){m||(i.store("cut"),window.clipboardData&&(window.clipboardData.setData("text/html",f(e,_)),window.clipboardData.setData("text/plain",i.getStruct().value),window.preventDefault(),i.getStruct().html=window.clipboardData.getData("text/html")))},"ctrl+v":function(){if(!m&&window.clipboardData){var e=(0,r.parseFromText)(window.clipboardData.getData("text")),t=window.clipboardData.getData("text/html");t&&t.includes("<table")&&(e=(0,r.parseHtmlTable)(t)),y(e,t||"")}}}:(document.addEventListener("cut",(function(n){m||s.focusManager.getFocusId()!==e._uid&&s.focusManager.getFocusId()!==t._uid||(i.store("cut"),n.clipboardData.setData("text/html",f(e,_)),n.clipboardData.setData("text/plain",i.getStruct().value),n.preventDefault(),i.getStruct().html=n.clipboardData.getData("text/html"))})),document.addEventListener("copy",(function(n){if(!m&&(s.focusManager.getFocusId()===e._uid||s.focusManager.getFocusId()===t._uid)){i.store("copy");var o=f(e,_);n.clipboardData.setData("text/html",o),n.clipboardData.setData("text/plain",i.getStruct().value),n.preventDefault(),i.getStruct().html=o}})),document.addEventListener("paste",(function(i){if(!m&&(s.focusManager.getFocusId()===e._uid||s.focusManager.getFocusId()===t._uid)){i.preventDefault();var n=i.clipboardData.getData("text/html"),o=(0,r.parseFromText)(i.clipboardData.getData("text"));n&&n.includes("<table")&&(o=(0,r.parseHtmlTable)(n)),y(o,n||"")}}))),n(n({},b),{escape:function(){var n=e.selection.getSelectedCell(),o=(0,r.getCellInfo)(n,_.activePage);i.getStruct().inserted=!0,o.edited&&(e.endEdit(!0),t.paint())},delete:function(){if(!m){var i=e.selection.getSelectedCell();i&&e.setValue(i,""),t.paint()}},enter:function(){var t=e.selection.getSelectedCell(),i=e.selection.getFocusedCell(),n=e._editMode;if(!p.navigate("enter"))if(m||n&&n.cell){var o=_.getCellIndex(m||n.cell),a=_.activePage.getSize()[0];o.row=o.row+1===a?o.row:o.row+1,e.selection.setSelectedCell((0,r.getCellNameByIndex)(o.row,o.col),!1),m="",(0,r.isRangeId)(t)&&!n&&(e.selection.setSelectedCell(t,!1),e.selection.setFocusedCell((0,r.getNextRangeCell)(t,i,"col"),!1))}else{if((0,r.isRangeId)(t))return e.endEdit(),e.selection.setSelectedCell(t,!1),void e.selection.setFocusedCell((0,r.getNextRangeCell)(t,i,"col"),!1);e.startEdit(t)}},f2:function(){e.startEdit(e.selection.getSelectedCell())},pageUp:function(e){e.preventDefault();var i=t.getRootView().refs.grid_body;i.el.scrollTop-=i.el.clientHeight},pageDown:function(e){e.preventDefault();var i=t.getRootView().refs.grid_body;i.el.scrollTop+=i.el.clientHeight-t.config.rowHeight},"ctrl+a":function(i){if(!m){i.preventDefault();var n=(0,r.getCellNameByIndex)(0,1),o=(0,r.getCellNameByIndex)(t.data.getLength()-1,t.config.columns.length-1);e.selection.setSelectedCell("".concat(n,":").concat(o),!1)}},"shift+arrowLeft":function(){g(e,_,-1,"col",_.activePage)},"shift+arrowRight":function(){g(e,_,1,"col",_.activePage)},"shift+arrowDown":function(){g(e,_,1,"row",_.activePage)},"shift+arrowUp":function(){g(e,_,-1,"row",_.activePage)},"ctrl+enter":function(){e.endEdit()},"shift+enter":function(){var t=e.selection.getSelectedCell();if((0,r.isRangeId)(t)){var i=e.selection.getFocusedCell();return e.endEdit(),e.selection.setSelectedCell(t,!1),void e.selection.setFocusedCell((0,r.getPrevRangeCell)(t,i,"col"),!1)}v(e,_,0,-1,"row")},tab:function(t){t.preventDefault();var i=e.selection.getSelectedCell();if(m&&e.endEdit(),(0,r.isRangeId)(i)){var n=e.selection.getFocusedCell();return e.endEdit(),e.selection.setSelectedCell(i,!1),void e.selection.setFocusedCell((0,r.getNextRangeCell)(i,n),!1)}v(e,_,0,1,"col")},"shift+tab":function(t){t.preventDefault(),m&&e.endEdit();var i=e.selection.getSelectedCell();if((0,r.isRangeId)(i)){var n=e.selection.getFocusedCell();return e.endEdit(),e.selection.setSelectedCell(i,!1),void e.selection.setFocusedCell((0,r.getPrevRangeCell)(i,n),!1)}v(e,_,0,-1,"col")},arrowLeft:function(t){m||(t.preventDefault(),v(e,_,0,-1,"col"))},arrowRight:function(t){m||(t.preventDefault(),v(e,_,0,1,"col"))},arrowDown:function(t){t.preventDefault(),p.navigate("arrowDown")||m||v(e,_,0,1,"row")},arrowUp:function(t){t.preventDefault(),p.navigate("arrowUp")||m||v(e,_,0,-1,"row")},"ctrl+arrowLeft":function(){v(e,_,0,null,"col")},"ctrl+arrowRight":function(){v(e,_,_.activePage.getSize[1],null,"col")},"ctrl+arrowDown":function(){v(e,_,_.activePage.getSize[0],null,"row")},"ctrl+arrowUp":function(){v(e,_,0,null,"row")},home:function(t){m||(t.preventDefault(),v(e,_,0,null,"col"))},end:function(t){m||(t.preventDefault(),v(e,_,_.activePage.getSize[1],null,"col"))},"ctrl+home":function(){v(e,_,0,null,"row"),v(e,_,0,null,"col")},"ctrl+end":function(){v(e,_,_.activePage.getSize[0],null,"row"),v(e,_,_.activePage.getSize[1],null,"col")},"ctrl+z":function(t){var i=e.selection.getFocusedCell(),n=(0,r.getCellInfo)(i,_.activePage);i&&n.edited||t.preventDefault(),e.undo()},"ctrl+y":function(t){t.preventDefault(),e.redo()},"ctrl+shift+z":function(){e.redo()},"ctrl+b":function(){var i=e.selection.getSelectedCell(),n=(0,a.getToggledValue)(_.activePage,i,"font-weight","bold",t);e.setStyle(e.selection.getSelectedCell(),{"font-weight":n})},"ctrl+i":function(){var i=e.selection.getSelectedCell(),n=(0,a.getToggledValue)(_.activePage,i,"font-style","italic",t);e.setStyle(e.selection.getSelectedCell(),{"font-style":n})},"ctrl+u":function(i){i.preventDefault();var n=e.selection.getSelectedCell(),o=(0,a.getToggledValue)(_.activePage,n,"text-decoration","underline",t);e.setStyle(e.selection.getSelectedCell(),{"text-decoration":o})},"ctrl+f":function(t){t.preventDefault(),e.search("",!0)},"alt+shift+5":function(e){(0,r.isMac)()||w(e)},"ctrl+shift+x":function(e){(0,r.isMac)()&&w(e)},"ctrl+shift+e":function(e){x("center",e)},"ctrl+shift+l":function(e){x("left",e)},"ctrl+shift+r":function(e){x("right",e)},"shift + F11":function(t){t.preventDefault(),e.addSheet()},"alt + arrowUp":function(e){C(1,e)},"alt + arrowDown":function(e){C(-1,e)},"ctrl + space":function(e){E(!0,e)},"shift + space":function(e){E(!1,e)},"ctrl+k":function(t){t.preventDefault();var i=e.selection.getFocusedCell();e._showLinkPopup(i)},backspace:function(){m||e.setValue(e.selection.getSelectedCell(),"")}})}},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectEditor=void 0;var o=i(1),r=i(10),a=i(5),s=i(28),l=i(16),c=i(13),u=function(){function e(e,t){this._list=new s.List(null,{keyNavigation:!0,css:"dhx_editor-list"}),this._data=this._list.data,this._popup=new r.Popup({css:"dhx_editor-popup"}),this._popup.attach(this._list),this._events=t,this._endEdit=e,this._initHandlers()}return e.prototype.endEdit=function(){var e=this;this.edit&&((0,o.awaitRedraw)().then((function(){var t;e._events.fire(a.SpreadsheetEvents.cellInput,[e._config.oninput[1],(null===(t=e._list.selection.getItem())||void 0===t?void 0:t.value)||e._input.value]),e._endEdit(),e._popup.hide()})),this.edit=!1)},e.prototype.setValue=function(e){var t=e.filter((function(e){return e||(0,c.isNumeric)(e)})).map((function(e){return(null==e?void 0:e.toString().trim())||""})),i=new Set(t);this._data.parse(Array.from(i).map((function(e){return{value:e}})))},e.prototype.toHTML=function(e){var t=this;return this._config=e,this.edit=!0,document.addEventListener("mousedown",this._handlers.onOuterClick),[(0,o.el)("input.dhx_cell_input",n(n({},e),{onkeydown:function(e){"Enter"===e.code&&t._popup.hide(),"ArrowDown"!==e.code&&"ArrowUp"!==e.code||l.focusManager.setFocusId(t._list._uid)},oninput:this._handlers.oninput,_hooks:n(n({},e._hooks),{didInsert:this._handlers.didInsert,didRemove:function(){return document.removeEventListener("mousedown",t._handlers.onOuterClick)}})})),(0,o.el)(".dxi.dxi-menu-up.dhx_spreadsheet_cell_icon",{onclick:function(){return t.endEdit()}})]},e.prototype._filter=function(e){this._list.data.filter((function(t){return e?t.value.includes(e):t}))},e.prototype._showPopup=function(){var e,t=this;this._popup.show(this._input,{centering:!0,mode:"bottom"}),this._list.selection.add((null===(e=this._list.data.find((function(e){return e.value===t._input.value})))||void 0===e?void 0:e.id)||"")},e.prototype._initHandlers=function(){var e=this;this._handlers={onFocus:function(){(0,o.awaitRedraw)().then((function(){e._showPopup()}))},onOuterClick:function(t){if(t.target instanceof Node){var i=e._input&&e._input.contains(t.target),n=e._popup&&e._popup.getRootNode()&&e._popup.getRootNode().contains(t.target);i||n||e._popup.hide()}},oninput:function(t){var i=t.target.value;i||e._showPopup(),i.startsWith("=")&&e._popup.isVisible()&&e._popup.hide(),e._filter(i);var n=e._config.oninput;(0,n[0])(n[1],t)},didInsert:function(t){var i=t.el;e._input=i,e._input.addEventListener("focus",e._handlers.onFocus),e._config._hooks.didInsert(t)}},this._list.events.on(s.ListEvents.click,(function(){e.endEdit()})),this._events.on(a.SpreadsheetEvents.afterEditEnd,(function(){e._popup.hide()})),this._popup.events.on(r.PopupEvents.afterShow,(function(){var t=e._list.getFocus();e._list.data.getItem(t)||e._list.setFocus(e._list.data.getId(0))}))},e}();t.SelectEditor=u},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.TimeEditor=void 0;var o=i(1),r=i(53),a=i(10),s=i(5),l=i(13),c=i(29),u=function(){function e(e,t,i){var n=t.toLocaleLowerCase().includes("%a")?12:24;this._timepicker=new r.Timepicker(null,{timeFormat:n}),this._popup=new a.Popup({css:"dhx_editor_popup"}),this._popup.attach(this._timepicker),this._events=i,this._initHandlers()}return e.prototype.endEdit=function(){},e.prototype.setValue=function(e){if(this._isFromSet=!0,""!==e){this._initialDate&&(0,l.isNumeric)(e)&&(this._initialDate=(0,c.excelDateToJSDate)(e));var t=(0,l.isNumeric)(e)?(0,c.excelDateToJSDate)(e):(0,c.timeStringToJS)(e);t!==e&&this._timepicker.setValue(t)}else this._timepicker.setValue(new Date)},e.prototype.hidePopup=function(){this._popup.isVisible()&&this._popup.hide()},e.prototype.toHTML=function(e){var t=this;return this._config=e,this.setValue(e.value),this._initialDate=e.initValue,document.addEventListener("mousedown",this._handlers.onOuterClick),(0,o.el)("input.dhx_cell_input",n(n({},e),{"data-skip-restore-focus":"true",onkeydown:function(e){"Enter"===e.code&&t._popup.hide()},oninput:this._handlers.oninput,_hooks:n(n({},e._hooks),{didInsert:this._handlers.didInsert,didRemove:this._handlers.didRemove})}))},e.prototype._showPopup=function(){this._input.value.startsWith("=")||this._popup.show(this._input,{centering:!0,mode:"bottom"})},e.prototype._initHandlers=function(){var e=this;this._handlers={onFocus:function(){(0,o.awaitRedraw)().then((function(){e._showPopup()}))},onOuterClick:function(t){if(t.target instanceof Node){var i=e._input&&e._input.contains(t.target),n=e._popup&&e._popup.getRootNode()&&e._popup.getRootNode().contains(t.target);i||n||e._popup.hide()}},oninput:function(t){var i=t.target.value;i||e._showPopup(),i.startsWith("=")&&e._popup.isVisible()&&e._popup.hide();var n=e._config.oninput,o=n[0],r=n[1];e.setValue(i),o(r,t)},didInsert:function(t){var i=t.el;e._input=i,e._input.addEventListener("focus",e._handlers.onFocus),e._config._hooks.didInsert(t),e._initTimePickerEvents()},didRemove:function(){document.removeEventListener("mousedown",e._handlers.onOuterClick)}}},e.prototype._initTimePickerEvents=function(){var e=this;this._timepicker.events.on(r.TimepickerEvents.change,(function(t){e._isFromSet?(0,o.awaitRedraw)().then((function(){e._isFromSet=!1})):e._events.fire(s.SpreadsheetEvents.cellInput,[e._config.oninput[1],(0,l.getFormattedValue)((0,c.getExcelDateFromJs)((0,c.timeStringToJS)(t)),e._config.format)])}))},e}();t.TimeEditor=u},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationForm=void 0;var o=i(59),r=i(5),a=i(47),s=i(12),l=i(10),c=i(2),u=i(110),d=function(){function e(e,t){this._set=t,this._modal=new a.Window({title:s.default.validation,movable:!0,closable:!0,css:"dhx-spreadsheet-form-validation",height:250,width:600}),this._form=new o.Form(null,{rows:[{name:"cell",type:"input",label:"Cell range:",labelPosition:"left",labelWidth:70,width:270,placeholder:"Enter cell range"},{cols:[{name:"criteria",type:"combo",label:"Criteria:",labelPosition:"left",labelWidth:70,width:270,readonly:!0,multiselection:!1,data:[{value:"List of items",id:"items"},{value:"List from a range",id:"range"}]},{labelWidth:3,width:260,labelPosition:"left",name:"target",type:"input",validation:this.formValidation.bind(this),errorMessage:"Invalid cell range",placeholder:"Enter cell range"}]},{align:"end",cols:[{type:"button",text:s.default.cancel,id:"cancel",view:"link"},{type:"button",text:s.default.removeValidation,id:"remove",view:"link"},{type:"button",text:s.default.save,id:"save"}]}]}),this._modal.attach(this._form),this._events=e,this._initHandlers()}return e.prototype.hide=function(){this._modal.isVisible()&&this._modal.hide(),this._events.fire(r.SpreadsheetEvents.afterPopupHide)},e.prototype.formValidation=function(e){if(!e)return!0;if("range"===this._form.getItem("criteria").getValue()){var t=(0,c.getCellIds)(e),i=t.row,n=t.start;return i||n}return!0},e.prototype.show=function(e,t){this._modal.isVisible()||this._modal.show();var i=n({},t);if(t.editor){var o=t.editor.options;i.target="string"==typeof o?o:o.join(","),i.criteria="string"==typeof o?"range":"items"}this._form.setValue(n({cell:e,criteria:"items",target:""},i))},e.prototype._save=function(e){var t=this._form.getValue(),i=t.target,n=t.cell,o=t.criteria;if(i=u.sanitize(i),this._form.validate()){if(!e||i){var r="range"===o;r&&!(0,c.getCellIds)(i).start&&(i+=":".concat(i)),this.hide();var a=r?i:i.split(",").map((function(e){return e.trim()}));this._set(n,e?a:null)}}else this._form.blur("target")},e.prototype._initHandlers=function(){var e=this;this._form.events.on(o.FormEvents.focus,(function(t){e._focus=t})),this._modal.events.on(l.PopupEvents.afterShow,(function(){e._form.setFocus("target")})),this._form.events.on(o.FormEvents.click,(function(t){switch(t){case"save":e._save(!0);break;case"remove":e._save(!1);break;default:e.hide()}})),this._form.getItem("criteria").events.on(o.FormEvents.change,(function(t){var i="Enter ".concat("range"===t?"cell range":" items separated by a comma");e._form.getItem("target").setProperties({placeholder:i}),e._form.setFocus("target")})),this._events.on(r.SpreadsheetEvents.afterSelectionSet,(function(t){"cell"===e._focus&&(e._form.setValue({cell:t}),e._form.setFocus("cell")),"target"===e._focus&&"range"===e._form.getItem("criteria").getValue()&&(e._form.setValue({target:t}),e._form.setFocus("target"))}))},e}();t.ValidationForm=d},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.DatePicker=void 0;var a=i(41),s=i(21),l=i(4),c=i(1),u=i(0),d=i(14),h=i(10),f=i(6),p=i(7),v=i(25),g=function(e){function t(t,i){var n=e.call(this,null,i)||this;n.events=new l.EventSystem,n._popupIsFocus=!1,n._propsItem=["required","validation","valueFormat","icon","placeholder","editable","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],n._propsCalendar=["mode","mark","disabledDates","weekStart","weekNumbers","timePicker","dateFormat","timeFormat","thisMonthOnly"],n._props=r(r(r([],p.baseProps,!0),n._propsItem,!0),n._propsCalendar,!0),n._keyManager=new v.KeyManager((function(){var e,t,i,o=document.activeElement;return(null===(i=null===(t=null===(e=n.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.input)||void 0===i?void 0:i.el)===o||n._popup.isVisible()})),n._initView(i),n._initHandlers(),n._initHotkeys();return n.mount(t,(0,c.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype.destructor=function(){this._popup&&this._popup.destructor(),this._keyManager&&this._keyManager.destructor(),this.events&&this.events.clear(),this.unmount(),e.prototype._destructor.call(this),this.calendar&&this.calendar.destructor(),this.events=this._uid=this._propsCalendar=this._propsItem=this._props=this._keyManager=null},t.prototype.setProperties=function(e){if(e&&!(0,u.isEmptyObj)(e)&&this.events.fire(f.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t],this._propsCalendar.includes(t)&&(this.calendar.config[t]=e[t]));this.events.fire(f.ItemEvent.afterChangeProperties,[this.getProperties()]),this.calendar.paint(),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(f.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(f.ItemEvent.afterShow,[t]))},t.prototype.hide=function(e){var t=this.config,i=t.value;t.hidden&&!e||!this.events.fire(f.ItemEvent.beforeHide,[i,e])||(this.config.hidden=!0,this.events.fire(f.ItemEvent.afterHide,[i,e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.disable=function(){this.config.disabled=!0,this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return!!this.config.disabled},t.prototype.validate=function(e){var t;void 0===e&&(e=!1);for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var o=i.length?i[0]:this.getValue(),r="date"===(null===(t=this.config.valueFormat)||void 0===t?void 0:t.toLowerCase())?o instanceof Date:(0,s.stringToDate)(o,this.calendar.config.dateFormat,!0);if(!e&&!this.events.fire(f.ItemEvent.beforeValidate,[o]))return!1;var a=!0;return(this.config.required||i.length)&&(a=!!r),"function"==typeof this.config.validation&&(a=this.config.validation(o)),e||(this.setValidationStatus(a?"success":"error"),this.events.fire(f.ItemEvent.afterValidate,[o,a]),this.paint()),a},t.prototype.clearValidate=function(){this.setValidationStatus(),this.paint()},t.prototype.setValue=function(e){void 0!==e&&e!==this.config.value&&this.calendar.setValue(e)},t.prototype.getValue=function(e){var t;return this.calendar.getValue("date"===(null===(t=this.config.valueFormat)||void 0===t?void 0:t.toLowerCase())||e)||""},t.prototype.focus=function(){var e=this;(0,c.awaitRedraw)().then((function(){e.getRootView().refs.input.el.focus()}))},t.prototype.blur=function(){var e=this;(0,c.awaitRedraw)().then((function(){e._popup.hide(),e.getRootView().refs.input.el.blur()}))},t.prototype.clear=function(){""!==this.config.value&&this.calendar.clear()},t.prototype.getWidget=function(){return this.calendar},t.prototype._initView=function(e){if((0,u.isEmptyObj)(e))throw new Error("Check the configuration is correct");for(var t in this.calendar&&this.calendar.destructor(),this._popup&&this._popup.destructor(),this.config={type:e.type,id:e.id,name:e.name,disabled:!1,editable:!1,hidden:!1,value:"",mode:"calendar",weekStart:"sunday",weekNumbers:!1,timePicker:!1,dateFormat:"%d/%m/%y",timeFormat:24,thisMonthOnly:!1,valueFormat:"string",required:!1,icon:"",placeholder:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},e)"id"!==t&&"type"!==t&&"name"!==t&&(this.config[t]=e[t]);this._popup=new h.Popup,this.calendar=new a.Calendar(null,(0,p.widgetConfig)(e)),this._popup.attach(this.calendar)},t.prototype._initHandlers=function(){var e=this;this.calendar.events.on(a.CalendarEvents.beforeChange,(function(t){var i;return""!==t&&"date"!==(null===(i=e.config.valueFormat)||void 0===i?void 0:i.toLowerCase())&&(t=(0,s.getFormattedDate)(e.calendar.config.dateFormat,t)),e.events.fire(f.ItemEvent.beforeChange,[t])})),this.calendar.events.on(a.CalendarEvents.change,(function(t,i,n,o){var r;e.config.value=e.calendar.getValue("date"===(null===(r=e.config.valueFormat)||void 0===r?void 0:r.toLowerCase())),e.events.fire(f.ItemEvent.change,[e.config.value]),(0,p.isVerify)(e.config)&&("clear"===o?e.setValidationStatus(e.validate(!0)?"success":"error"):e.validate()),e._popup.hide(),e.paint()})),this.events.on(f.ItemEvent.blur,(function(){e._popupIsFocus=!1,e.paint()})),this._popup.events.on(h.PopupEvents.afterHide,(function(){document.activeElement!==e.getRootView().refs.input.el&&e.events.fire(f.ItemEvent.blur,[e.getValue()]),e.paint()}))},t.prototype._getHandlers=function(){var e=this;return{onblur:function(){e._popup.isVisible()?e.paint():e.events.fire(f.ItemEvent.blur,[e.getValue()])},onfocus:function(){if(!e._popup.isVisible()){var t=e.getRootView().refs.input.el;e._popup.show(t,{theme:t}),e.events.fire(f.ItemEvent.focus,[e.getValue()]),e.paint()}},oninput:function(t){var i=t.target.value;e.events.fire(f.ItemEvent.input,[i])},onchange:function(t){var i=t.target.value;e.config.editable&&(0,s.stringToDate)(i,e.calendar.config.dateFormat,!0)?e.setValue(i):""===i&&e.clear()},onkeydown:function(t){var i,n,o,r=document.activeElement;((null===(o=null===(n=null===(i=e.getRootView())||void 0===i?void 0:i.refs)||void 0===n?void 0:n.input)||void 0===o?void 0:o.el)===r||e._popup.isVisible())&&e.events.fire(f.ItemEvent.keydown,[t])},onmousedown:function(){e._popup.getContainer()!==document.activeElement&&(e._popupIsFocus=!1)}}},t.prototype._initHotkeys=function(){var e=this,t={"shift+tab":function(){e._applyTab()},tab:function(){e._applyTab()},escape:function(){e._popup.isVisible()&&e.getRootView().refs.input.el.focus(),e._popup.hide()},enter:function(t){if(t.preventDefault(),!e._popup.isVisible()){var i=e.getRootView().refs.input.el;e._popup.show(i,{theme:i})}},arrowRight:function(t){var i=e._popup.getContainer();e._popup.isVisible()&&!e._popupIsFocus&&(t.preventDefault(),i.focus(),e._popupIsFocus=!0)}};for(var i in t)this._keyManager.addHotKey(i,t[i])},t.prototype._draw=function(){var e,t,i,n=this.config,o=n.icon,r=n.required,a=n.disabled,s=n.placeholder,l=n.name,u=n.id,d=n.editable,h=n.label,f=n.helpMessage,v=this.calendar.getValue(),g=this._popup.isVisible()||(null===(i=null===(t=null===(e=this.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.input)||void 0===i?void 0:i.el)===document.activeElement;return(0,c.el)("div.dhx_form-group",{class:(0,p.getFormItemCss)(this.config,(0,p.isVerify)(this.config),g)},[this._drawLabel(),(0,c.el)(".dhx_input__wrapper",[(0,c.el)("div.dhx_input__container",{},[(0,c.el)(".dhx_input__icon",{class:o||"dxi dxi-calendar-today"}),(0,c.el)("input.dhx_input.dhx_input--icon-padding",{tabindex:0,"data-dhx-id":l||u,_key:this._uid,_ref:"input",value:v,type:"text",required:r,disabled:a,class:g&&"dhx_input--focus",placeholder:s||"",name:l||"",id:u||this._uid,onfocus:this._handlers.onfocus,oninput:this._handlers.oninput,onchange:this._handlers.onchange,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,onmousedown:this._handlers.onmousedown,autocomplete:"off",readOnly:!d,"aria-label":h||"".concat(d?"type or":""," select date"),"aria-describedby":f?"dhx_label__help_".concat(u||this._uid):null})]),(0,p.getValidationMessage)(this.config)&&(0,c.el)("span.dhx_input__caption",{},(0,p.getValidationMessage)(this.config))])])},t.prototype._applyTab=function(){var e,t,i;document.activeElement===(null===(i=null===(t=null===(e=this._popup.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.content)||void 0===i?void 0:i.el)||this._popupIsFocus||this._popup.hide()},t}(d.Label);t.DatePicker=g},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;var s=i(1),l=i(9),c=i(6),u=i(4),d=i(0),h=i(7),f=function(e){function t(t,i){var n=e.call(this,t,r({disabled:!1,hidden:!1,submit:!1,full:!1,circle:!1,loading:!1,view:"flat",size:"medium",color:"primary",height:"content",url:"",text:"",icon:""},i))||this;n._propsItem=["submit","url","text","icon","view","size","color","full","circle","loading"],n._props=a(a([],h.baseProps,!0),n._propsItem,!0),n.config.text=n.config.text||n.config.value||"",n.events=new u.EventSystem,n._handlers={onclick:function(e){return n.events.fire(c.ItemEvent.click,[e])},onblur:function(){return n.events.fire(c.ItemEvent.blur,[n.config.text])},onfocus:function(){return n.events.fire(c.ItemEvent.focus,[n.config.text])},onkeydown:function(e){return n.events.fire(c.ItemEvent.keydown,[e])}};return n.mount(t,(0,s.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype.destructor=function(){this.events&&this.events.clear(),this.unmount(),this.config=this._propsItem=this._props=this.events=this._handlers=this._uid=null},t.prototype.setProperties=function(e){if(e&&!(0,d.isEmptyObj)(e)&&this.events.fire(c.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.config.text=this.config.text||this.config.value,this.events.fire(c.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.show=function(){var e=this.config,t=e.text,i=void 0===t?"":t;e.hidden&&this.events.fire(c.ItemEvent.beforeShow,[i])&&(this.config.hidden=!1,this.events.fire(c.ItemEvent.afterShow,[i]))},t.prototype.hide=function(e){void 0===e&&(e=!1);var t=this.config,i=t.text,n=void 0===i?"":i;t.hidden&&!e||!this.events.fire(c.ItemEvent.beforeHide,[n,e])||(this.config.hidden=!0,this.events.fire(c.ItemEvent.afterHide,[n,e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.disable=function(){this.config.disabled=!0,this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return!!this.config.disabled},t.prototype.focus=function(){var e=this;(0,s.awaitRedraw)().then((function(){e.getRootView().refs.button.el.focus()}))},t.prototype.blur=function(){var e=this;(0,s.awaitRedraw)().then((function(){e.getRootView().refs.button.el.blur()}))},t.prototype._draw=function(){var e=this.config,t=e.color,i=e.size,n=e.view,o=e.loading,r=e.circle,a=e.icon,l=e.text,c=e.disabled,u=e.submit,d=e.id,h=e.name,f=e.full,p={danger:" dhx_button--color_danger",secondary:" dhx_button--color_secondary",primary:" dhx_button--color_primary",success:" dhx_button--color_success"}[t]||" dhx_button--color_primary",v={small:" dhx_button--size_small",medium:" dhx_button--size_medium"}[i]||" dhx_button--size_medium",g={flat:" dhx_button--view_flat",link:" dhx_button--view_link"}[n]||" dhx_button--view_flat",_=f?" dhx_button--width_full":"",m=r?" dhx_button--circle":"",y=o?" dhx_button--loading":"",b=a&&!l?" dhx_button--icon":"";return(0,s.el)("button",{disabled:c,id:d,"data-dhx-id":h||d,onclick:this._handlers.onclick,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,type:u?"submit":"button",class:"dhx_button "+p+v+g+m+_+y+b,_ref:"button"},[a&&(0,s.el)("span.dhx_button__icon",{class:a}),l&&(0,s.el)("span.dhx_button__text",l),o&&(0,s.el)("span.dhx_button__loading",[(0,s.el)("span.dhx_button__loading-icon.dxi.dxi-loading")])])},t}(l.View);t.Button=f},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.CheckboxGroup=void 0;var s=i(1),l=i(18),c=i(4),u=i(97),d=i(14),h=i(6),f=i(0),p=i(7),v=i(10),g=function(e){function t(t,i){var n=e.call(this,null,i)||this;n.events=new c.EventSystem,n._buttons=[],n._propsItem=["required","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage","options"],n._props=a(a([],p.baseProps,!0),n._propsItem,!0),n._initView(i),n._initHandlers();return n.mount(t,(0,s.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype.destructor=function(){this.events&&this.events.clear(),this.layout&&this.layout.destructor(),this.events=this._uid=this._propsItem=this._props=this._buttons=null,e.prototype._destructor.call(this),this.unmount()},t.prototype.setProperties=function(e,t){if(void 0!==e&&this.events.fire(h.ItemEvent.beforeChangeProperties,[this.getProperties()])){if("object"==typeof e&&!(0,f.isEmptyObj)(e)){for(var i in e)this._props.includes(i)&&(this.config[i]=e[i]);e.hasOwnProperty("options")&&(this._initView(this.config),this._initHandlers())}if("string"==typeof e&&t&&!(0,f.isEmptyObj)(t)){var n=this._buttons.find((function(t){return t.config.id===e}));n&&n.setProperties(t,!0)}this.events.fire(h.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(e){if(void 0===e){var t={};for(var i in this.config)this._props.includes(i)&&(t[i]=this.config[i]);return t}return this._buttons.find((function(t){return t.config.id===e})).getProperties()},t.prototype.getValue=function(e){if(void 0===e){var t={};return this._buttons.forEach((function(e){t[e.config.id]=e.getValue()})),t}var i=this._buttons.find((function(t){return t.config.id===e}));if(e&&i)return i.getValue()},t.prototype.setValue=function(e){if(void 0!==e&&!(0,f.isEmptyObj)(e)){for(var t=this.getValue(),i=r({},t),n=function(e,t){var n=o._buttons.find((function(t){return t.config.id===e}));if(n){var r=n.config.value;i[e]="string"==typeof r?t&&r||"":!!t}},o=this,a=0,s=Object.entries(e);a<s.length;a++){var l=s[a];n(l[0],l[1])}if(!(0,f.compare)(t,i)&&this.events.fire(h.ItemEvent.beforeChange,[i])){for(var c=function(e,t){var i=u._buttons.find((function(t){return t.config.id===e}));i&&i.setValue(!!t,!0)},u=this,d=0,v=Object.entries(e);d<v.length;d++){var g=v[d];c(g[0],g[1])}this.events.fire(h.ItemEvent.change,[this.getValue()]),(0,p.isVerify)(this.config)&&this.validate()}}},t.prototype.isChecked=function(e){if(void 0===e){var t={};return this._buttons.forEach((function(e){t[e.config.id]=e.isChecked()})),t}var i=this._buttons.find((function(t){return t.config.id===e}));if(e&&i)return i.isChecked()},t.prototype.focus=function(e){var t=this;(0,s.awaitRedraw)().then((function(){if(t._buttons.length){if(!e)return t._buttons[0].focus();var i=t._buttons.find((function(t){return t.config.id===e}));i&&i.focus()}}))},t.prototype.blur=function(){var e=this;(0,s.awaitRedraw)().then((function(){e._buttons.length&&e._buttons.forEach((function(e){e.blur()}))}))},t.prototype.show=function(e){var t,i=e&&this._buttons.find((function(t){return t.config.id===e}));(0,f.isDefined)(e)&&!i||(!i&&(this.config.hidden||this._buttons.some((function(e){return e.config.hidden})))||(null===(t=null==i?void 0:i.config)||void 0===t?void 0:t.hidden))&&this.events.fire(h.ItemEvent.beforeShow,[this.getValue(),e])&&(i?null==i||i.show():this._buttons.forEach((function(e){return e.show()})),this.config.hidden=!1,this.events.fire(h.ItemEvent.afterShow,[this.getValue(),e]))},t.prototype.hide=function(e,t){var i,n=e&&this._buttons.find((function(t){return t.config.id===e}));(0,f.isDefined)(e)&&!n||((!n&&this.config.hidden||(null===(i=null==n?void 0:n.config)||void 0===i?void 0:i.hidden))&&!t||!this.events.fire(h.ItemEvent.beforeHide,[this.getValue(),e,t])||(n?(null==n||n.hide(),this.config.hidden=this._buttons.every((function(e){return e.config.hidden}))):(this._buttons.forEach((function(e){return e.hide()})),this.config.hidden=!0),this.events.fire(h.ItemEvent.afterHide,[this.getValue(),e,t])))},t.prototype.isVisible=function(e){var t,i=this._buttons.find((function(t){return t.config.id===e}));return!(this.config.hidden||(0,f.isDefined)(e)&&(null===(t=null==i?void 0:i.config)||void 0===t?void 0:t.hidden))},t.prototype.enable=function(e){var t,i,n=e&&this._buttons.find((function(t){return t.config.id===e}));(0,f.isDefined)(e)&&!n||(!n&&(this.config.disabled||this._buttons.some((function(e){return e.config.disabled})))||(null===(t=null==n?void 0:n.config)||void 0===t?void 0:t.disabled))&&(n?null==n||n.enable():this._buttons.forEach((function(e){return e.enable()})),this.config.disabled=!1,(null===(i=this.parent)||void 0===i?void 0:i.isDisabled())&&this.parent.enable(),this.paint())},t.prototype.disable=function(e,t){var i,n=e&&this._buttons.find((function(t){return t.config.id===e}));(0,f.isDefined)(e)&&!n||((!n&&this.config.disabled||(null===(i=null==n?void 0:n.config)||void 0===i?void 0:i.disabled))&&!t||(n?(null==n||n.disable(),this.config.disabled=this._buttons.every((function(e){return e.config.disabled}))):(this._buttons.forEach((function(e){return e.disable()})),this.config.disabled=!0),this.paint()))},t.prototype.isDisabled=function(e){var t,i=this._buttons.find((function(t){return t.config.id===e}));return Boolean(this.config.disabled||(0,f.isDefined)(e)&&(null===(t=null==i?void 0:i.config)||void 0===t?void 0:t.disabled))},t.prototype.clear=function(){if(this._buttons.some((function(e){return e.isChecked()}))){var e={};if(this._buttons.forEach((function(t){e[t.config.id]="string"==typeof t.config.value&&""})),!this.events.fire(h.ItemEvent.beforeChange,[e]))return;this._buttons.forEach((function(e){e.clear(!0)})),this.events.fire(h.ItemEvent.change,[e]),(0,p.isVerify)(this.config)&&this.setValidationStatus(this.validate(!0)?"success":"error")}},t.prototype.validate=function(e){void 0===e&&(e=!1);var t=this.getValue();if(!e&&!this.events.fire(h.ItemEvent.beforeValidate,[t]))return!1;var i=!0;return this.config.required&&(i=this._buttons.some((function(e){return e.config.$required&&!!e.config.checked}))),e||(this._buttons.forEach((function(e){e.setValidationStatus(i?"success":"error")})),this.setValidationStatus(i?"success":"error"),this.events.fire(h.ItemEvent.afterValidate,[t,i]),this.paint()),i},t.prototype.clearValidate=function(){this.setValidationStatus(),this._buttons.forEach((function(e){e.clearValidate()})),this.paint()},t.prototype._initView=function(e){var t=this;if((0,f.isEmptyObj)(e)||!e.options||(0,f.isEmptyObj)(e.options))throw new Error("Check the configuration is correct");for(var i in this.layout&&this.layout.destructor(),this._buttons.length&&(this._buttons.forEach((function(e){e.destructor()})),this._buttons=[]),this.config={type:e.type,id:e.id,name:e.name,disabled:!1,hidden:!1,options:{},required:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},e)"id"!==i&&"type"!==i&&"name"!==i&&(this.config[i]=e[i]);this.config.helpMessage&&(this._helper=new v.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"}),this._helper.attachHTML(this.config.helpMessage));var n=this.config.options.rows||this.config.options.cols;null==n||n.forEach((function(e){e.id=e.id||(0,f.uid)(),e.$group=!0})),this.layout=new l.Layout(null,this.config.options),null==n||n.forEach((function(i){var n=new u.Checkbox(null,r(r({},i),{disabled:e.disabled||i.disabled,name:e.name,$required:e.required}));t._buttons.push(n),t.layout.getCell(i.id).attach(n),n.events.on(h.ItemEvent.beforeChange,(function(e){var i,o=r(r({},t.getValue()),((i={})[n.config.id]=e,i));return t.events.fire(h.ItemEvent.beforeChange,[o])})),n.events.on(h.ItemEvent.change,(function(){t.events.fire(h.ItemEvent.change,[t.getValue()]),(0,p.isVerify)(t.config)&&t.validate()})),n.events.on(h.ItemEvent.focus,(function(e,i){t.events.fire(h.ItemEvent.focus,[t.getValue(),i])})),n.events.on(h.ItemEvent.blur,(function(e,i){t.events.fire(h.ItemEvent.blur,[t.getValue(),i])})),n.events.on(h.ItemEvent.keydown,(function(e,i){t.events.fire(h.ItemEvent.keydown,[e,i])})),n.events.on(h.ItemEvent.afterHide,(function(){(0,s.awaitRedraw)().then((function(){var e;null===(e=t.layout.getCell(n.config.id))||void 0===e||e.hide()}))})),n.events.on(h.ItemEvent.afterShow,(function(){var e;null===(e=t.layout.getCell(n.config.id))||void 0===e||e.show()}))})),this.config.value&&this.setValue(this.config.value),this.clearValidate(),!this.config.disabled&&this._buttons.length&&this._buttons.every((function(e){return e.config.disabled}))&&(this.config.disabled=!0)},t.prototype._initHandlers=function(){var e=this;this.events.on(h.ItemEvent.change,(function(){e.config.value=e.getValue(),e.paint()}))},t.prototype._draw=function(){var e=this.config.hidden?" dhx_form-group--hidden":"",t=this.config,i=t.label,n=t.labelWidth,o=t.helpMessage,r=t.required,a=t.name,l=t.id;return(0,s.el)("fieldset.dhx_form-group-fieldset",{},[(0,s.el)("div.dhx_form-group.dhx_form-group--checkbox-group",{class:(0,p.getFormItemCss)(this.config,(0,p.isVerify)(this.config))+e,"data-dhx-id":a||l,role:"radiogroup",_key:l||this._uid},[i||n||o||r?this._drawLabel():null,(0,s.el)("div.dhx_checkbox-group--container",{},[this.layout&&(0,s.inject)(this.layout.getRootView()),r&&(0,p.getValidationMessage)(this.config)&&(0,s.el)("span.dhx_input__caption",(0,p.getValidationMessage)(this.config))])])])},t}(d.Label);t.CheckboxGroup=g},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.RadioGroup=void 0;var s=i(1),l=i(0),c=i(18),u=i(10),d=i(4),h=i(236),f=i(7),p=i(14),v=i(6),g=function(e){function t(t,i){var n=e.call(this,null,i)||this;n.events=new d.EventSystem,n._buttons=[],n._propsItem=["required","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage","options"],n._props=a(a([],f.baseProps,!0),n._propsItem,!0),n._initView(i),n._initHandlers(),n.config.value&&n._setValue(n.config.value),n.clearValidate(),n.config.helpMessage&&(n._helper=new u.Popup({css:"dhx_tooltip dhx_tooltip--forced dhx_tooltip--light"}),n._helper.attachHTML(n.config.helpMessage));return n.mount(t,(0,s.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype.destructor=function(){this.events&&this.events.clear(),this.layout&&this.layout.destructor(),this.events=this._uid=this._propsItem=this._props=this._buttons=null,e.prototype._destructor.call(this),this.unmount()},t.prototype.setProperties=function(e,t){if(void 0!==e&&this.events.fire(v.ItemEvent.beforeChangeProperties,[this.getProperties()])){if("object"==typeof e&&!(0,l.isEmptyObj)(e)){for(var i in e)this._props.includes(i)&&(this.config[i]=e[i]);e.hasOwnProperty("options")&&(this._initView(this.config),this._initHandlers())}if("string"==typeof e&&t&&!(0,l.isEmptyObj)(t)){var n=this._buttons.find((function(t){return t.config.id===e}));n&&n.setProperties(t)}this.events.fire(v.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(e){if(void 0===e){var t={};for(var i in this.config)this._props.includes(i)&&(t[i]=this.config[i]);return t}return this._buttons.find((function(t){return t.config.id===e})).getProperties()},t.prototype.getValue=function(){var e=this;return this._buttons.forEach((function(t){t.getValue()&&(e.config.value=t.getValue()||"")})),this.config.value||""},t.prototype.setValue=function(e){e!==this.config.value&&(this._setValue(e),this.events.fire(v.ItemEvent.change,[e]),(0,f.isVerify)(this.config)&&this.validate())},t.prototype.focus=function(e){var t=this;(0,s.awaitRedraw)().then((function(){if(t._buttons.length){if(!e)return t._buttons[0].focus();var i=t._buttons.find((function(t){return t.config.id===e}));if(i)return i.focus()}}))},t.prototype.blur=function(){var e=this;(0,s.awaitRedraw)().then((function(){e._buttons.length&&e._buttons.forEach((function(e){return e.blur()}))}))},t.prototype.show=function(e){var t,i=e&&this._buttons.find((function(t){return t.config.id===e}));(0,l.isDefined)(e)&&!i||(!i&&(this.config.hidden||this._buttons.some((function(e){return e.config.hidden})))||(null===(t=null==i?void 0:i.config)||void 0===t?void 0:t.hidden))&&this.events.fire(v.ItemEvent.beforeShow,[this.getValue(),e])&&(i?null==i||i.show():this._buttons.forEach((function(e){return e.show()})),this.config.hidden=!1,this.events.fire(v.ItemEvent.afterShow,[this.getValue(),e]))},t.prototype.hide=function(e,t){var i,n=e&&this._buttons.find((function(t){return t.config.id===e}));(0,l.isDefined)(e)&&!n||((!n&&this.config.hidden||(null===(i=null==n?void 0:n.config)||void 0===i?void 0:i.hidden))&&!t||!this.events.fire(v.ItemEvent.beforeHide,[this.getValue(),e,t])||(n?(null==n||n.hide(),this.config.hidden=this._buttons.every((function(e){return e.config.hidden}))):(this._buttons.forEach((function(e){return e.hide()})),this.config.hidden=!0),this.events.fire(v.ItemEvent.afterHide,[this.getValue(),e,t])))},t.prototype.isVisible=function(e){var t,i=this._buttons.find((function(t){return t.config.id===e}));return!(this.config.hidden||(0,l.isDefined)(e)&&(null===(t=null==i?void 0:i.config)||void 0===t?void 0:t.hidden))},t.prototype.enable=function(e){var t,i,n=e&&this._buttons.find((function(t){return t.config.id===e}));(0,l.isDefined)(e)&&!n||(!n&&(this.config.disabled||this._buttons.some((function(e){return e.config.disabled})))||(null===(t=null==n?void 0:n.config)||void 0===t?void 0:t.disabled))&&(n?null==n||n.enable():this._buttons.forEach((function(e){return e.enable()})),this.config.disabled=!1,(null===(i=this.parent)||void 0===i?void 0:i.isDisabled())&&this.parent.enable(),this.paint())},t.prototype.disable=function(e,t){var i,n=e&&this._buttons.find((function(t){return t.config.id===e}));(0,l.isDefined)(e)&&!n||((!n&&this.config.disabled||(null===(i=null==n?void 0:n.config)||void 0===i?void 0:i.disabled))&&!t||(n?(null==n||n.disable(),this.config.disabled=this._buttons.every((function(e){return e.config.disabled}))):(this._buttons.forEach((function(e){return e.disable()})),this.config.disabled=!0),this.paint()))},t.prototype.isDisabled=function(e){var t,i=this._buttons.find((function(t){return t.config.id===e}));return Boolean(this.config.disabled||(0,l.isDefined)(e)&&(null===(t=null==i?void 0:i.config)||void 0===t?void 0:t.disabled))},t.prototype.clear=function(){""!==this.config.value&&(this._buttons.forEach((function(e){e.clear()})),this.config.value="",this.events.fire(v.ItemEvent.change,[this.config.value]),(0,f.isVerify)(this.config)&&this.setValidationStatus(this.validate(!0)?"success":"error"))},t.prototype.validate=function(e){var t=this;void 0===e&&(e=!1);var i=this.getValue();if(!e&&!this.events.fire(v.ItemEvent.beforeValidate,[i]))return!1;var n=!0;return this.config.required&&(n=this._buttons.some((function(e){return t.config.required&&!!e.config.checked}))),e||(this._buttons.forEach((function(e){e.setValidationStatus(n?"success":"error")})),this.setValidationStatus(n?"success":"error"),this.events.fire(v.ItemEvent.afterValidate,[i,n]),this.paint()),n},t.prototype.clearValidate=function(){this.setValidationStatus(),this._buttons.map((function(e){e.clearValidate()})),this.paint()},t.prototype._initView=function(e){var t=this;if((0,l.isEmptyObj)(e)||!e.options||(0,l.isEmptyObj)(e.options))throw new Error("Check the configuration is correct");for(var i in this.layout&&this.layout.destructor(),this._buttons.length&&(this._buttons.forEach((function(e){e.destructor()})),this._buttons=[]),this.config={type:e.type,id:e.id,name:e.name,value:"",disabled:!1,hidden:!1,options:{},required:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},e)"id"!==i&&"type"!==i&&"name"!==i&&(this.config[i]=e[i]);var n=this.config.options.rows||this.config.options.cols;null==n||n.forEach((function(e){e.id=e.id||(0,l.uid)()})),this.layout=new c.Layout(null,this.config.options),null==n||n.forEach((function(i){var n=new h.RadioButton(null,r(r({},i),{disabled:e.disabled||i.disabled,$name:e.name,$required:e.required}));t._buttons.push(n),t.layout.getCell(i.id).attach(n),n.events.on(h.RadioButtonEvents.beforeChange,(function(){return t.events.fire(v.ItemEvent.beforeChange,[n.config.value||""])})),n.events.on(h.RadioButtonEvents.change,(function(){t._buttons.map((function(e){e.config.id!==n.config.id&&e.setValue(!1)})),t.events.fire(v.ItemEvent.change,[t.getValue()]),(0,f.isVerify)(t.config)&&t.validate()})),n.events.on(h.RadioButtonEvents.focus,(function(e,i){t.events.fire(v.ItemEvent.focus,[e,i])})),n.events.on(h.RadioButtonEvents.blur,(function(e,i){t.events.fire(v.ItemEvent.blur,[e,i])})),n.events.on(h.RadioButtonEvents.keydown,(function(e,i){t.events.fire(v.ItemEvent.keydown,[e,i])})),n.events.on(v.ItemEvent.afterHide,(function(){(0,s.awaitRedraw)().then((function(){t.layout.getCell(n.config.id).hide()}))})),n.events.on(v.ItemEvent.afterShow,(function(){t.layout.getCell(n.config.id).show()}))})),!this.config.disabled&&this._buttons.length&&this._buttons.every((function(e){return e.config.disabled}))&&(this.config.disabled=!0)},t.prototype._initHandlers=function(){var e=this;this.events.on(v.ItemEvent.beforeChange,(function(){return e.paint()})),this.events.on(v.ItemEvent.change,(function(){e.config.value=e.getValue(),e.paint()}))},t.prototype._draw=function(){var e=this.config,t=e.label,i=e.labelWidth,n=e.helpMessage,o=e.required,r=e.hidden,a=e.name,l=e.id,c=r?" dhx_form-group--hidden":"";return(0,s.el)("fieldset.dhx_form-group-fieldset",{},[(0,s.el)("div.dhx_form-group.dhx_form-group--radio-group",{class:(0,f.getFormItemCss)(this.config,(0,f.isVerify)(this.config))+c,"data-dhx-id":a||l,_key:l||this._uid},[t||i||n||o?this._drawLabel():null,(0,s.el)("div.dhx_radio-group--container",{},[this.layout&&(0,s.inject)(this.layout.getRootView()),o&&(0,f.getValidationMessage)(this.config)&&(0,s.el)("span.dhx_input__caption",(0,f.getValidationMessage)(this.config))])])])},t.prototype._setValue=function(e){void 0!==e&&-1!==this._buttons.findIndex((function(t){return t.config.value===e}))&&this._buttons.forEach((function(t){t.setValue(e===t.config.value)}))},t}(p.Label);t.RadioGroup=g},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.RadioButton=t.RadioButtonEvents=void 0;var s,l=i(0),c=i(1),u=i(4),d=i(7),h=i(14);!function(e){e.beforeChange="beforeChange",e.change="change",e.focus="focus",e.blur="blur",e.keydown="keydown",e.beforeHide="beforeHide",e.afterHide="afterHide",e.beforeShow="beforeShow",e.afterShow="afterShow"}(s||(t.RadioButtonEvents=s={}));var f=function(e){function t(t,i){void 0===i&&(i={});var n=e.call(this,t,r({text:"",width:"content",height:"content",checked:!1},i))||this;n._propsItem=["text"],n._props=a(a([],d.baseProps,!0),n._propsItem,!0),n._handlers={onchange:function(e){var t=e.target.checked;n.events.fire(s.beforeChange,[t])&&(n.config.checked=t,n.events.fire(s.change,[t]))},onfocus:function(){return n.events.fire(s.focus,[n.getValue()||"",n.config.id])},onblur:function(){var e;return null===(e=n.events)||void 0===e?void 0:e.fire(s.blur,[n.getValue()||"",n.config.id])},onkeydown:function(e){n.events.fire(s.keydown,[e,n.config.id])}},n.events=new u.EventSystem;return n.mount(t,(0,c.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype.destructor=function(){this.events&&this.events.clear(),this.config=this.events=this._handlers=this._uid=this._props=this._propsItem=null,this.unmount()},t.prototype.setProperties=function(e){if(e&&!(0,l.isEmptyObj)(e)){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.getValue=function(){if(this.config.checked)return this.config.value},t.prototype.setValue=function(e){this.config.checked=e,this.paint()},t.prototype.show=function(){this.config.hidden&&this.events.fire(s.beforeShow,[])&&(this.config.hidden=!1,this.events.fire(s.afterShow,[]))},t.prototype.hide=function(){!this.config.hidden&&this.events.fire(s.beforeHide,[])&&(this.config.hidden=!0,this.events.fire(s.afterHide,[]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.focus=function(){var e=this;(0,c.awaitRedraw)().then((function(){e.getRootView().refs.input.el.focus()}))},t.prototype.blur=function(){var e=this;(0,c.awaitRedraw)().then((function(){e.getRootView().refs.input.el.blur()}))},t.prototype.disable=function(){this.config.disabled=!0,this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return!!this.config.disabled},t.prototype.clear=function(){this.config.checked=!1,this.setValidationStatus(this.validate()?"success":"error"),this.paint()},t.prototype.validate=function(){var e=!!this.config.checked;return this.setValidationStatus(e?"success":"error"),this.paint(),e},t.prototype.clearValidate=function(){this.setValidationStatus(),this.paint()},t.prototype._draw=function(){var e=this.config,t=e.id,i=e.value,n=e.checked,o=e.disabled,r=e.$name,a=e.$required,s=e.text;return(0,c.el)("label.dhx_radiobutton.dhx_form-group",{class:(0,d.getFormItemCss)(this.config,!!a)},[(0,c.el)("input.dhx_radiobutton__input",{type:"radio",id:t,_key:t||this._uid,value:i||"",name:r||"",disabled:o,checked:n,onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,required:a,_ref:"input"}),(0,c.el)("span.dhx_radiobutton__visual-input"),(0,c.el)("span.dhx_text",[s])])},t}(h.Label);t.RadioButton=f},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Select=void 0;var s=i(1),l=i(0),c=i(14),u=i(7),d=i(4),h=i(6),f=function(e){function t(t,i){var n=e.call(this,null,i)||this;return n.events=new d.EventSystem,n._propsItem=["required","validation","icon","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],n._props=a(a([],u.baseProps,!0),n._propsItem,!0),n._initView(i),n}return o(t,e),t.prototype.destructor=function(){this.events&&this.events.clear(),this.events=this._uid=this._propsItem=this._props=null,e.prototype._destructor.call(this),this.unmount()},t.prototype.setProperties=function(e){if(e&&!(0,l.isEmptyObj)(e)&&this.events.fire(h.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.events.fire(h.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.show=function(){this.config.hidden&&this.events.fire(h.ItemEvent.beforeShow,[this.getValue()])&&(this.config.hidden=!1,this.events.fire(h.ItemEvent.afterShow,[this.getValue()]))},t.prototype.hide=function(e){this.config.hidden&&!e||!this.events.fire(h.ItemEvent.beforeHide,[this.getValue(),!!e])||(this.config.hidden=!0,this.events.fire(h.ItemEvent.afterHide,[this.getValue(),!!e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.disable=function(e){var t=(0,l.isDefined)(e)&&this.config.options.find((function(t){return t.value===e}));(0,l.isDefined)(e)&&!t||(!t&&this.config.disabled||(null==t?void 0:t.disabled)||(t?(t.disabled=!0,this.config.disabled=this.config.options.every((function(e){return e.disabled}))):(this.config.options=this.config.options.map((function(e){return r(r({},e),{disabled:!0})})),this.config.disabled=!0),this.paint()))},t.prototype.enable=function(e){var t,i=(0,l.isDefined)(e)&&this.config.options.find((function(t){return t.value===e}));(0,l.isDefined)(e)&&!i||(!i&&(this.config.disabled||this.config.options.some((function(e){return e.disabled})))||(null==i?void 0:i.disabled))&&(i?i.disabled=!1:this.config.options=this.config.options.map((function(e){return r(r({},e),{disabled:!1})})),this.config.disabled=!1,(null===(t=this.parent)||void 0===t?void 0:t.isDisabled())&&this.parent.enable(),this.paint())},t.prototype.isDisabled=function(e){var t=this.config.options.find((function(t){return t.value===e}));return Boolean(this.config.disabled||(0,l.isDefined)(e)&&(null==t?void 0:t.disabled))},t.prototype.validate=function(e){void 0===e&&(e=!1);var t=this.getValue();if(!e&&!this.events.fire(h.ItemEvent.beforeValidate,[t]))return!1;var i=!0;return this.config.required&&(i=(0,l.isDefined)(t)),"function"==typeof this.config.validation&&(i=this.config.validation(t)),e||(this.setValidationStatus(i?"success":"error"),this.events.fire(h.ItemEvent.afterValidate,[t,i]),this.paint()),i},t.prototype.clearValidate=function(){this.setValidationStatus(),this.paint()},t.prototype.clear=function(){var e,t,i=null===(t=null===(e=this.config)||void 0===e?void 0:e.options[0])||void 0===t?void 0:t.value;this.config.value!==i&&this.events.fire(h.ItemEvent.beforeChange,[i])&&(this.config.value=i,this.events.fire(h.ItemEvent.change,[i]),(0,u.isVerify)(this.config)&&this.setValidationStatus(this.validate(!0)?"success":"error"),this.paint())},t.prototype.setValue=function(e){void 0!==e&&e!==this.config.value&&-1!==this.config.options.findIndex((function(t){return t.value===e}))&&this.events.fire(h.ItemEvent.beforeChange,[e])&&(this.config.value=e,this.events.fire(h.ItemEvent.change,[e]),(0,u.isVerify)(this.config)&&this.validate(),this.paint())},t.prototype.focus=function(){var e=this;(0,s.awaitRedraw)().then((function(){e.getRootView().refs.select.el.focus()}))},t.prototype.blur=function(){var e=this;(0,s.awaitRedraw)().then((function(){e.getRootView().refs.select.el.blur()}))},t.prototype.getValue=function(){return this.config.value},t.prototype.setOptions=function(e){if(!e||!e.length)throw new Error("Function argument cannot be empty, for more info check documentation https://docs.dhtmlx.com/suite/form__select.html#addingselect");this.events.fire(h.ItemEvent.beforeChangeOptions,[a([],e,!0)])&&(this._checkOptions(e),this.config.options=a([],e,!0),this.events.fire(h.ItemEvent.changeOptions,[a([],e,!0)]),this.setValue(this.config.options[0].value),this.paint())},t.prototype.getOptions=function(){return this.config.options},t.prototype._initView=function(e){if((0,l.isEmptyObj)(e))throw new Error("Check the configuration is correct");for(var t in this._checkOptions(e.options),this.config={type:e.type,id:e.id,name:e.name,disabled:!1,hidden:!1,required:!1,icon:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content",options:e.options,value:e.options[0].value},e)"id"!==t&&"type"!==t&&"name"!==t&&(this.config[t]=e[t]);!this.config.disabled&&this.config.options.length&&this.config.options.every((function(e){return e.disabled}))&&(this.config.disabled=!0),this.paint()},t.prototype._getHandlers=function(){var e=this;return{onchange:function(t){var i=e.config.options.map((function(e){return e.value})).find((function(e){return e==t.target.value}));e.events.fire(h.ItemEvent.beforeChange,[i])&&(e.config.value=i,e.events.fire(h.ItemEvent.change,[i]),(0,u.isVerify)(e.config)&&e.validate(),e.paint())},onblur:function(){e._uid&&(e.events.fire(h.ItemEvent.blur,[e.getValue()]),e.paint())},onfocus:function(){e.events.fire(h.ItemEvent.focus,[e.getValue()]),e.paint()}}},t.prototype._draw=function(){var e,t,i,n=this.config,o=n.id,r=n.options,a=n.icon,l=n.value,c=n.label,d=n.labelWidth,h=n.helpMessage,f=n.required,p=n.name,v=(null===(i=null===(t=null===(e=this.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.select)||void 0===i?void 0:i.el)===document.activeElement;return(0,s.el)(".dhx_form-group",{class:(0,u.getFormItemCss)(this.config,(0,u.isVerify)(this.config),v)},[(c||d||h)&&this._drawLabel(),(0,s.el)(".dhx_input__wrapper",{},[(0,s.el)("div.dhx_input__container",{},[(0,s.el)(".dhx_input__icon",{class:a||"dxi dxi-menu-down"}),(0,s.el)("select.dhx_select.dhx_input",{id:o,_key:o||this._uid,"data-dhx-id":p||o,tabindex:0,class:v&&"dhx_input--focus",onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,_ref:"select",required:f},r.length&&r.map((function(e){return(0,s.el)("option",{value:e.value,disabled:e.disabled,selected:l===e.value},e.content)})))]),(0,u.getValidationMessage)(this.config)&&(0,s.el)("span.dhx_input__caption",(0,u.getValidationMessage)(this.config))])])},t.prototype._checkOptions=function(e){if(0===e.length)throw new Error("Property options* cannot be empty, for more info check documentation https://docs.dhtmlx.com/suite/form__select.html#addingselect");e.forEach((function(e){if(!e.hasOwnProperty("value")||!e.hasOwnProperty("content"))throw new Error("The object must contain two required properties value and content, for more info check documentation https://docs.dhtmlx.com/suite/form__select.html#addingselect")}))},t}(c.Label);t.Select=f},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Textarea=void 0;var a=i(1),s=i(7),l=i(44),c=i(6),u=i(0),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._propsItem=["required","validation","placeholder","readOnly","maxlength","minlength","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage","numberMask","patternMask"],t._props=r(r([],s.baseProps,!0),t._propsItem,!0),t}return o(t,e),t.prototype.getValue=function(){var e;return String(null!==(e=this.config.value)&&void 0!==e?e:"")},t.prototype.setProperties=function(e){if(e&&!(0,u.isEmptyObj)(e)&&this.events.fire(c.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.events.fire(c.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype._initView=function(e){if((0,u.isEmptyObj)(e))throw new Error("Check the configuration is correct");for(var t in this.config={type:e.type,id:e.id,name:e.name,disabled:!1,hidden:!1,required:!1,validation:void 0,placeholder:"",readOnly:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content",numberMask:!1,value:""},e)"id"!==t&&"type"!==t&&"name"!==t&&(this.config[t]=e[t]);this._value=this.config.value,this.paint()},t.prototype._draw=function(){var e=this,t=this.config,i=t.id,n=t.disabled,o=t.name,r=t.placeholder,l=t.required,c=t.resizable,d=t.readOnly,h=t.maxlength,f=t.minlength,p=t.label,v=t.helpMessage,g=t.height,_=this._applyValuePattern(this._value,null,!0);return(0,a.el)("div.dhx_form-group.dhx_form-group--textarea",{class:(0,s.getFormItemCss)(this.config,(0,s.isVerify)(this.config),this.isFocused())},[this._drawLabel(),(0,a.el)(".dhx_input__wrapper",[(0,a.el)("textarea.dhx_input.dhx_input--textarea",{type:"text",id:i,"data-dhx-id":o||i,placeholder:r||"",value:_,name:o||"",disabled:n,required:l,readOnly:d,maxlength:h,minlength:f,onblur:this._handlers.onblur,oninput:this._handlers.oninput,onchange:this._handlers.onchange,onfocus:this._handlers.onfocus,onkeydown:this._handlers.onkeydown,_hooks:{didRecycle:function(t,i){e.isFocused()&&(0,u.isDefined)(e._value)&&e._applyValuePattern(e._value,i.el)},didInsert:function(t){if("content"===g){var i=t.el;i.style.height=i.scrollHeight+"px"}e._input=t.el,e._input.addEventListener("compositionend",e._handlers.oninput)}},style:{resize:c?"both":"none"},_ref:"input","aria-label":p||"".concat(d?_:""," type text"),"aria-describedby":v?"dhx_label__help_".concat(i||this._uid):null}),(0,s.getValidationMessage)(this.config)&&(0,a.el)("span.dhx_input__caption",{},(0,s.getValidationMessage)(this.config))])])},t}(l.Input);t.Textarea=d},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Text=void 0;var a=i(1),s=i(0),l=i(7),c=i(44),u=i(6),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._propsItem=["inputType","label","labelWidth","labelPosition","hiddenLabel","helpMessage"],t._props=r(r([],l.baseProps,!0),t._propsItem,!0),t}return o(t,e),t.prototype.setProperties=function(e){if(e&&!(0,s.isEmptyObj)(e)&&this.events.fire(u.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.events.fire(u.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype._initView=function(e){if((0,s.isEmptyObj)(e))throw new Error("Check the configuration is correct");for(var t in this.config={type:e.type,id:e.id,name:e.name,disabled:!1,hidden:!1,value:"",inputType:"text",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",width:"content",height:"content"},e)"id"!==t&&"type"!==t&&"name"!==t&&(this.config[t]=e[t]);this.paint()},t.prototype._draw=function(){var e=this.config,t=e.id,i=e.value,n=e.name,o=e.inputType,r=e.label,s=(null!=i?i:"").toString().length;return(0,a.el)("div.dhx_form-group.dhx_form-group--textinput",{class:(0,l.getFormItemCss)(this.config)},[this._drawLabel(),(0,a.el)(".dhx_input__wrapper",[(0,a.el)("input.dhx_input.dhx_input--textinput",{type:["text","number","password"].includes(o)?o:"text",readOnly:!0,id:t,"data-dhx-id":n||t,value:null!=i?i:"",name:n,_ref:"input",tabindex:-1,role:"presentation","aria-label":r||i,size:s>20?s:20,onkeydown:this._handlers.onkeydown})])])},t}(c.Input);t.Text=d},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Combo=void 0;var a=i(1),s=i(0),l=i(7),c=i(56),u=i(4),d=i(14),h=i(6),f=i(11),p=function(e){function t(t,i){var n=e.call(this,null,i)||this;return n.events=new u.EventSystem,n._propsItem=["required","validation","placeholder","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage","readonly","readOnly"],n._propsCombo=["template","filter","multiselection","selectAllButton","itemsCount","itemHeight","virtual","listHeight"],n._props=r(r(r([],l.baseProps,!0),n._propsItem,!0),n._propsCombo,!0),n._isClear=!1,n._initView(i),n._initHandlers(),n}return o(t,e),t.prototype.destructor=function(){this.events&&this.events.clear(),this.combobox&&this.combobox.destructor(),this.events=this._uid=this._propsCombo=this._propsItem=this._props=null,e.prototype._destructor.call(this),this.unmount()},t.prototype.setProperties=function(e){var t=this;(0,a.awaitRedraw)().then((function(){if(e&&!(0,s.isEmptyObj)(e)&&t.events.fire(h.ItemEvent.beforeChangeProperties,[t.getProperties()])){for(var i in e)t._props.includes(i)&&(t.config[i]=e[i]);var n=[];t.getWidget().data.forEach((function(e){return n.push(e)})),t.config.data=n,t._initView(t.config),t._initHandlers(),t.events.fire(h.ItemEvent.afterChangeProperties,[t.getProperties()])}}))},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(h.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(h.ItemEvent.afterShow,[t]))},t.prototype.hide=function(e){var t=this.config,i=t.value;t.hidden&&!e||!this.events.fire(h.ItemEvent.beforeHide,[i,e])||(this.config.hidden=!0,this.events.fire(h.ItemEvent.afterHide,[i,e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.disable=function(){this.config.disabled=!0,this.combobox.disable(),this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,this.combobox.enable(),(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return!!this.config.disabled},t.prototype.clear=function(){this._isValue(this.config.value)&&(this.config.value="",this._isClear=!0,this._isValue(this.getValue())&&this.combobox.clear())},t.prototype.getValue=function(){return this.config.multiselection?this.combobox.getValue(!0)||[]:this.combobox.getValue()||""},t.prototype.setValue=function(e){void 0!==e&&e.toString()!==this.config.value.toString()&&(this._isClear=!1,this.combobox.setValue(e))},t.prototype.validate=function(e){var t=this;void 0===e&&(e=!1);for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var o,r=i.length?i[0]:this.getValue();if(!e&&!this.events.fire(h.ItemEvent.beforeValidate,[r]))return!1;o=Array.isArray(r)?r.map((function(e){return t._getItemText(e)})):this._getItemText(r)||"";var a=!0;return(this.config.required||i.length)&&(a=this._existData(r)),"function"==typeof this.config.validation&&(a=this.config.validation(r,o)),e||(this.setValidationStatus(a?"success":"error"),this.config.required&&this._validationStatus(),this.events.fire(h.ItemEvent.afterValidate,[r,a]),this.paint()),a},t.prototype.clearValidate=function(){this.setValidationStatus(),this._validationStatus(),this.paint()},t.prototype.getWidget=function(){return this.combobox},t.prototype.focus=function(){var e=this;(0,a.awaitRedraw)().then((function(){e.combobox.focus()}))},t.prototype.blur=function(){var e=this;(0,a.awaitRedraw)().then((function(){e.combobox.blur()}))},t.prototype._initView=function(e){if((0,s.isEmptyObj)(e))throw new Error("Check the configuration is correct");this.combobox&&this.combobox.destructor(),this.config={type:e.type,id:e.id,name:e.name,disabled:!1,hidden:!1,value:"",readOnly:!1,multiselection:!1,selectAllButton:!1,itemHeight:32,virtual:!1,listHeight:224,required:!1,placeholder:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"};var t={};for(var i in e)"id"!==i&&"type"!==i&&"name"!==i&&(this.config[i]=e[i],"validation"!==i&&(t[i]=e[i]));this.combobox=new c.Combobox(null,t),this.paint()},t.prototype._initHandlers=function(){var e=this;this.combobox.events.on(c.ComboboxEvents.beforeChange,(function(t){return e.events.fire(h.ItemEvent.beforeChange,[t])})),this.combobox.events.on(c.ComboboxEvents.change,(function(){var t=e.config.value=e.getValue();e.events.fire(h.ItemEvent.change,[t]),(0,l.isVerify)(e.config)&&(e._isClear?(e.setValidationStatus(e.validate(!0)?"success":"error"),e._isClear=!1):e.validate()),e.paint()})),this.combobox.events.on(c.ComboboxEvents.focus,(function(){e.events.fire(h.ItemEvent.focus,[e.getValue()]),e.paint()})),this.combobox.events.on(c.ComboboxEvents.blur,(function(){e.events.fire(h.ItemEvent.blur,[e.getValue()]),e.paint()})),this.combobox.events.on(c.ComboboxEvents.keydown,(function(t,i){"Enter"===t.code&&t.preventDefault(),e.events.fire(h.ItemEvent.keydown,[t,i])})),[f.DataEvents.removeAll,f.DataEvents.load].forEach((function(t){e.combobox.data.events.on(t,(function(){e._isValue(e.config.value)&&(e.events.fire(h.ItemEvent.change,[""]),e.clear())}))}))},t.prototype._validationStatus=function(){var e,t,i;if(!(this.combobox.popup.isVisible()||(null===(i=null===(t=null===(e=this.combobox.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.input)||void 0===i?void 0:i.el)===document.activeElement))switch(this.config.$validationStatus){case h.ValidationStatus.success:return this.combobox.config.css=(this.config.css||"")+" dhx_form-group--state_success";case h.ValidationStatus.error:return this.combobox.config.css=(this.config.css||"")+" dhx_form-group--state_error";case h.ValidationStatus.pre:default:return this.combobox.config.css=this.config.css||""}return this.combobox.config.css=this.config.css||""},t.prototype._getRootView=function(){return this.combobox.getRootView()},t.prototype._draw=function(){var e=this.config,t=e.labelWidth,i=e.labelPosition,n=e.name,o=e.id;return(0,a.el)(".dhx_form-group.dhx_form-group--combobox",{"data-dhx-id":n||o},[(0,a.el)("div.dhx_form-combobox__container",[(0,a.inject)(this._getRootView())]),(0,a.el)("div.dhx_form-combobox__wrapper",{style:{"margin-left":"".concat(t&&"left"===i?"calc(".concat(t," + 16px)"):"")},class:this._validationStatus()},[(0,a.el)("span.dhx_input__caption",(0,l.getValidationMessage)(this.config))])])},t.prototype._existData=function(e){var t=this;return!!(0,s.isDefined)(e)&&(e instanceof Array?!!e.length&&e.every((function(e){return t.combobox.data.exists(e)})):this.combobox.data.exists(e))},t.prototype._getItemText=function(e){var t;return null===(t=this.combobox.data.getItem(e))||void 0===t?void 0:t.value},t.prototype._isValue=function(e){return!!(null==e?void 0:e.toString().length)},t}(d.Label);t.Combo=p},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SliderForm=void 0;var s=i(1),l=i(0),c=i(77),u=i(4),d=i(14),h=i(6),f=i(7),p=function(e){function t(t,i){var n=e.call(this,t,i)||this;n.events=new u.EventSystem,n._propsItem=["label","labelWidth","labelPosition","hiddenLabel","helpMessage"],n._propsSlider=["min","max","step","mode","range","inverse","tooltip","tick","tickTemplate","majorTick"],n._props=a(a(a([],f.baseProps,!0),n._propsItem,!0),n._propsSlider,!0),n._initView(i),n._initHandlers();return n.mount(t,(0,s.create)({render:function(){return n._drawSlider()}})),n}return o(t,e),t.prototype.destructor=function(){this.events&&this.events.clear(),this.slider&&this.slider.destructor(),this.events=this._uid=this._propsSlider=this._propsItem=this._props=null,e.prototype._destructor.call(this),this.unmount()},t.prototype.setProperties=function(e){if(e&&!(0,l.isEmptyObj)(e)&&this.events.fire(h.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this._initView(this.config),this._initHandlers(),this.events.fire(h.ItemEvent.afterChangeProperties,[this.getProperties()]),this.slider.paint(),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(h.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(h.ItemEvent.afterShow,[t]))},t.prototype.hide=function(e){var t=this.config,i=t.value;t.hidden&&!e||!this.events.fire(h.ItemEvent.beforeHide,[i,e])||(this.config.hidden=!0,this.events.fire(h.ItemEvent.afterHide,[i,e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.disable=function(){this.config.disabled=!0,this.slider.disable(),this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,this.slider.enable(),(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return!!this.config.disabled},t.prototype.clear=function(){var e=this.config,t=e.value,i=e.min;t[0]!==i&&this.slider.setValue(i)},t.prototype.getValue=function(){return this.slider.getValue()},t.prototype.setValue=function(e){void 0!==e&&e.toString()!==this.config.value.toString()&&this.slider.setValue(e)},t.prototype.getWidget=function(){return this.slider},t.prototype.focus=function(e){var t=this;(0,s.awaitRedraw)().then((function(){t.slider.focus(e)}))},t.prototype.blur=function(){var e=this;(0,s.awaitRedraw)().then((function(){e.slider.blur()}))},t.prototype._initView=function(e){if((0,l.isEmptyObj)(e))throw new Error("Check the configuration is correct");this.slider&&this.slider.destructor();var t={type:e.type,id:e.id,name:e.name,mode:"horizontal",min:0,max:100,step:1,range:!1,inverse:!1,tooltip:!0,disabled:!1,hidden:!1,label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",width:"content",height:"content"};for(var i in e)"id"!==i&&"type"!==i&&"name"!==i&&(t[i]=e[i]);this.config=r({type:this.config.type},t),this.slider=new c.Slider(null,t),this.config.disabled&&this.slider.disable(),this.config.value=this.slider.getValue()},t.prototype._initHandlers=function(){var e=this;this.slider.events.on(c.SliderEvents.beforeChange,(function(t,i,n){var o=[t];if(e.config.range){var r=e.getValue(),a=r[0],s=r[1];o=n?[a,t]:[t,s]}return e.events.fire(h.ItemEvent.beforeChange,[o])})),this.slider.events.on(c.SliderEvents.change,(function(){if(e._uid){var t=e.config.value=e.slider.getValue();e.events.fire(h.ItemEvent.change,[t]),e.paint()}})),this.slider.events.on(c.SliderEvents.focus,(function(){e.events.fire(h.ItemEvent.focus,[e.getValue()])})),this.slider.events.on(c.SliderEvents.blur,(function(){e.events.fire(h.ItemEvent.blur,[e.getValue()])})),this.slider.events.on(c.SliderEvents.keydown,(function(t){e.events.fire(h.ItemEvent.keydown,[t])}))},t.prototype._drawSlider=function(){var e=this.config,t=e.name,i=e.id;return(0,s.el)("div.dhx_form-group",{"data-dhx-id":t||i},[(0,s.inject)(this.slider.getRootView())])},t}(d.Label);t.SliderForm=p},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(99),t),o(i(243),t),o(i(38),t)},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Vault=void 0;var a=i(0),s=i(4),l=i(9),c=i(11),u=i(18),d=i(32),h=i(22),f=i(45),p=i(38),v=i(99),g=i(244),_=i(101),m=i(245),y=i(246),b=i(247),w=i(28),x=i(1),C=function(e){function t(t,i){void 0===i&&(i={});var n=e.call(this,null,(0,a.extend)({mode:p.VaultMode.list,modeControls:!0,toolbar:!0,updateFromResponse:!0,scaleFactor:4,customScroll:!0,uploader:{},progressBar:{},disablePreview:!1,editable:!0},i))||this;return n.config.toolbar||(n.config.uploader.autosend=!0),i.data?(n.data=i.data,n.events=i.data.events,n.events.context=n):(n.events=new s.EventSystem(n),n.data=new c.DataCollection({},n.events)),n.data.config.init=function(e){var t,i,o,r;return e.status=e.status||p.FileStatus.uploaded,e.file?(e.size=e.file.size,e.name=e.file.name,e.value=null===(t=e.file.name)||void 0===t?void 0:t.split(".").slice(0,-1).join("."),e.extension=null===(i=e.file.name)||void 0===i?void 0:i.split(".").pop(),e.preview=!n.config.disablePreview):(e.size=e.size||0,e.name=e.name||"",e.value=(null===(o=e.name)||void 0===o?void 0:o.split(".").slice(0,-1).join("."))||"",e.extension=null===(r=e.name)||void 0===r?void 0:r.split(".").pop(),e.preview=!n.config.disablePreview),e.file&&(0,_.isImage)(e)&&n._readStack.add(e,n.uploader.config.autosend||n.config.disablePreview),e},n._readStack=new y.ReadStackPreview(n.data),n.uploader=new v.Uploader(n.config.uploader,n.data,n.events),n._progressBar=new m.ProgressBar(n.events,n.config.progressBar),n.events.on(p.UploaderEvents.uploadProgress,(function(e,t,i){return n._progressBar.setState(e,{current:t,total:i})})),n._initUI(t),n._initEvents(),n}return o(t,e),t.prototype.destructor=function(){this.toolbar.destructor(),this._readStack.stop(),this.uploader.unlinkDropArea(),this.uploader.abort(),this.unmount()},t.prototype.getRootView=function(){return this._layout.getRootView()},t.prototype.paint=function(){var e=this._canDrop||!this.data.getLength();this._activeView=e?this._emptyField:this.config.mode===p.VaultMode.grid||this.toolbar&&this.toolbar.getState().mode===p.VaultMode.grid?this.grid:this.list,this._layout.getCell("vault").attach(this._activeView)},t.prototype._initUI=function(e){var t=this._layout=new u.Layout(e,{css:"dhx_vault",rows:[{id:"toolbar",css:"dhx_vault--toolbar",height:"content"},{id:"vault",css:"dhx_vault--container"}],on:this._getDragEvents()});this._initToolbar(),t.getCell("toolbar").attach(this.toolbar),this._initEmpty(),this._initList(),this._initGrid(e),this.config.toolbar||t.getCell("toolbar").hide(),this.paint()},t.prototype._initList=function(){var e=this,t="ontouchstart"in document.documentElement;this.list=new w.List(null,{data:this.data,dragMode:"both",multiselection:!!t||"ctrlClick",template:g.listTemplate,eventHandlers:(0,g.getContainersEvents)(this.data),keyNavigation:!0,editable:this.config.editable,itemHeight:49,hotkeys:{delete:function(){var t,i=null===(t=e.list.selection.getItem())||void 0===t?void 0:t.map((function(e){return e.id}));i.length&&e.data.remove(i)}}}),this.list.events.on("afterEditEnd",(function(t,i){var n=e.list.data.getItem(i);e.list.data.update(i,{name:"".concat(t,".").concat(n.extension)})}))},t.prototype._initGrid=function(e){var t=this,i="ontouchstart"in document.documentElement;this.grid=new b.DataView(null,{gap:8,itemsInRow:4,dragMode:"both",multiselection:!!i||"ctrlClick",data:this.data,template:g.gridTemplate,eventHandlers:(0,g.getContainersEvents)(this.data),keyNavigation:!0,editable:this.config.editable,hotkeys:{delete:function(){var e,i=null===(e=t.list.selection.getItem())||void 0===e?void 0:e.map((function(e){return e.id}));i.length&&t.data.remove(i)}}}),this.grid.selection=this.list.selection,e&&("string"==typeof e&&(e=document.getElementById(e)),this.grid.config.itemsInRow=Math.floor(e.offsetWidth/100))},t.prototype._initToolbar=function(){this.toolbar=new d.Toolbar(null,{css:"vault-toolbar"}),this.toolbar.data.parse([{id:"add",tooltip:f.default.add,type:"navItem",css:"dhx_toolbar-button--circle dhx_toolbar-button--icon",icon:"dxi dxi-plus"},{id:"mode-separator",type:"separator"},{id:"list",tooltip:f.default.list,type:"navItem",css:"dhx_toolbar-button--circle dhx_toolbar-button--icon",icon:"dxi dxi-view-sequential",active:this.config.mode===p.VaultMode.list,group:"mode"},{id:"grid",tooltip:f.default.grid,type:"navItem",css:"dhx_toolbar-button--circle dhx_toolbar-button--icon",icon:"dxi dxi-view-grid",active:this.config.mode===p.VaultMode.grid,group:"mode"},{id:"upload-separator",type:"separator"},{id:"upload",tooltip:f.default.upload,type:"navItem",css:"dhx_toolbar-button--circle dhx_toolbar-button--icon",icon:"dxi dxi-vault"},{id:"spacer",type:"spacer"},{id:"remove-all",tooltip:f.default.clearAll,type:"navItem",css:"dhx_toolbar-button--circle dhx_toolbar-button--icon",icon:"dxi dxi-delete-forever"}]),this.config.modeControls||this.toolbar.hide(["mode-separator","list","grid","upload-separator"]),this._hideAdditionalButtons()},t.prototype._initEmpty=function(){var e=this;return this._emptyField=(0,l.toViewLike)((0,x.create)({render:function(){return(0,x.el)(".dhx-dropable-area.drop-files-here",[(0,x.el)(".dhx-big-icon-block",[(0,x.el)(".dxi.dxi-vault")]),!e._canDrop&&(0,x.el)(".drop-area-bold-text",f.default.dragAndDrop),!e._canDrop&&(0,x.el)(".drop-area-bold-text",f.default.filesOrFoldersHere),!e._canDrop&&(0,x.el)(".drop-area-light-text",f.default.or),!e._canDrop&&(0,x.el)("button.dhx_button.dhx_button--view_flat.dhx_btn--small.dhx_button--color_primary.dhx_button--size_small",{onclick:function(){return e.uploader.selectFile()}},f.default.browse)])}}))},t.prototype._changeUI=function(e){this.config.mode=e,this._activeView=e===p.VaultMode.grid?this.grid:this.list,this.data.getLength()&&this.paint()},t.prototype._initEvents=function(){var e=this;this.data.events.on(c.DataEvents.change,(function(){e.data.getLength()?e._showAdditionalButtons():e._hideAdditionalButtons(),e.config.downloadURL&&e.data.forEach((function(t){t.downloadURL||(t.downloadURL=e.config.downloadURL)})),e.paint()})),this.events.on(p.UploaderEvents.uploadBegin,(function(){e.config.toolbar&&e._layout.getCell("toolbar").attach(e._progressBar)})),this.events.on(p.UploaderEvents.uploadComplete,(function(){e.config.toolbar&&e._layout.getCell("toolbar").attach(e.toolbar)})),this.toolbar.events.on(h.NavigationBarEvents.click,(function(t){switch(t){case"add":e.uploader.selectFile();break;case"remove-all":if(e.data.getLength()){var i=e._activeView.selection.getItem();i&&i.length>0?i.forEach((function(t){(0,_.removeItem)(e.data,t.id)})):e.data.removeAll()}break;case"list":case"grid":e._changeUI(t);break;case"upload":e.uploader.send()}})),this.events.on(p.ProgressBarEvents.cancel,(function(){e.uploader.abort(),e.paint()}))},t.prototype._getDragEvents=function(){var e=this,t={left:null,top:null,width:null,height:null};return{dragleave:function(i){e._canDrop&&(i.pageX>t.left+t.width-1||i.pageX<t.left||i.pageY>t.top+t.height-1||i.pageY<t.top)&&(e._canDrop=!1,e.config.toolbar&&e._layout.getCell("toolbar").show(),e._layout.config.css="dhx_vault",e.paint())},dragenter:function(i){if(i.preventDefault(),!e.uploader.isActive&&!e._canDrop){for(var n=0,o=i.dataTransfer.types;n<o.length;n++){var r=o[n];if("Files"!==r&&"application/x-moz-file"!==r)return void(e._canDrop=!1)}e._canDrop=!0;var a=e.getRootView().node.el.getBoundingClientRect();t.left=a.left+window.pageXOffset,t.top=a.top+window.pageYOffset,t.width=a.width,t.height=a.height,e._canDrop=!0,e.config.toolbar&&e._layout.getCell("toolbar").hide(),e._layout.config.css="dhx_vault dhx-dragin ".concat(e._canDrop?" drop-here":""),e.paint()}},dragover:function(e){e.preventDefault()},drop:function(t){if(t.preventDefault(),e._canDrop){var i=t.dataTransfer;e.uploader.parseFiles(i),e._canDrop=!1,e.config.toolbar&&e._layout.getCell("toolbar").show(),e._layout.config.css="dhx_vault",e.paint()}}}},t.prototype._hideAdditionalButtons=function(){var e=this,t=["upload",this.config.modeControls?"upload-separator":""];r(r(r([],["mode-separator","list","grid"],!0),t,!0),["remove-all"],!1).forEach((function(t){e.toolbar.data.getItem(t)&&!e.toolbar.data.getItem(t).hidden&&e.toolbar.hide(t)}))},t.prototype._showAdditionalButtons=function(){var e=this,t=this.config.modeControls?["mode-separator","list","grid"]:[],i=this.uploader.config.autosend?[]:["upload",this.config.modeControls?"upload-separator":""],n=r(r(r([],t,!0),i,!0),["remove-all"],!1);this.toolbar.data.update("remove-all",{tooltip:this._activeView.selection&&this._activeView.selection.getItem()?f.default.clearAllSelected:f.default.clearAll}),n.forEach((function(t){e.toolbar.data.getItem(t)&&e.toolbar.data.getItem(t).hidden&&e.toolbar.show(t)}))},t}(l.View);t.Vault=C},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getContainersEvents=t.listTemplate=t.gridTemplate=void 0;var n=i(3),o=i(19),r=i(101),a=i(38),s=i(45);t.gridTemplate=function(e){var t=e.status===a.FileStatus.inprogress,i=e.status===a.FileStatus.failed,n=e.status!==a.FileStatus.uploaded,o="dhx_dataview-item--file__";switch(e.status){case a.FileStatus.inprogress:o+="progress";break;case a.FileStatus.queue:o+="queue";break;case a.FileStatus.failed:o+="failed";break;default:o=""}var l="",c="";e.link&&(c=(l=(e.downloadURL||"")+e.link).split("/").pop().split("?")[0]);var u="";return/image/.exec((0,r.getFileClassName)(e))&&e.preview&&(e.image&&e.image.src?u="style=\"background:url('".concat(e.image.src,"') center center no-repeat;background-size:cover\""):e.link&&(u="style=\"background:url('".concat(l,"') center center no-repeat;background-size:cover\""))),'<div class="dhx_dataview-item--file '.concat(o,'">\n\t\t<div class="dhx_dataview-item--file-type ').concat((0,r.getFileClassName)(e),'" ').concat(u,"></div>\n\t\t").concat(t?'<div class="dhx_dataview-item--progress-block">\n\t\t\t\t\t<div class="dhx_dataview-item--progress-value">'.concat((100*e.progress).toFixed(1)+"%",'</div>\n\t\t\t\t\t<svg xmlns="http://www.w3.org/2000/svg" class="dhx_vault-item--progress-circle" viewBox="0 0 60 60">\n\t\t\t\t\t\t<circle cx="30" cy="30" r="28" stroke-width="4" class="dhx_vault-item--progress-bar-background"></circle>\n\t\t\t\t\t\t<circle cx="30" cy="30" r="28" stroke-width="4" stroke-dasharray="175.9 175.9" stroke-dashoffset="').concat(175.9*(1-e.progress),'" class="active-circle dhx_vault-item--progress-bar-active"></circle>\n\t\t\t\t\t</svg>\n\t\t\t\t</div>'):'<div class="dhx_dataview-item--default-block">\n\t\t\t\t\t'.concat(i?'<div class="dhx_dataview-item--error-mark dxi dxi-alert-circle"></div>':n?'<div class="dhx_dataview-item--error-mark dxi dxi-vault"></div>':'<div class="dhx_dataview-item--success-mark dxi dxi-checkbox-marked-circle"></div>','\n\t\t\t\t</div>\n\t\t\t\t<div class="dhx_dataview-item--hover-block">\n\t\t\t\t\t<div class="dhx_dataview-item--control-block ').concat(i||n||!e.link?"dhx_dataview-item--control-block__withoutLink":"",'">\n\t\t\t\t\t\t').concat(i||n||!e.link?'<div class="dhx_dataview-item--remove-btn dxi dxi-delete-forever"></div>':'<a href="'.concat(l,'" class="dhx_dataview-item--download-btn dxi dxi-download" download="').concat(c,'"></a>\n\t\t\t\t\t\t\t\t\t<div class="dhx_dataview-item--remove-btn dxi dxi-delete-forever"></div>'),"\n\t\t\t\t\t</div>\n\t\t\t\t\t").concat(i?'<div class="dhx_dataview-item--error-text">'.concat(s.default.error,"</div>"):'<div class="dhx_dataview-item--file-size">'.concat((0,r.getBasis)(e.size),"</div>"),"\n\t\t\t\t</div>"),'\n\t\t</div>\n\t<div class="dhx_dataview-item--file-name">').concat((0,r.truncateWord)(e.name),"</div>")};t.listTemplate=function(e){var t=e.status===a.FileStatus.failed,i=e.status===a.FileStatus.inprogress,n=e.status!==a.FileStatus.uploaded&&!t,o="",l="";return e.link&&(l=(o=(e.downloadURL||"")+e.link).split("/").pop().split("?")[0]),'<div class="dhx_list-item--icon '.concat(n?"dhx_list-item--queue":"",'">\n\t\t\t<div class="dhx_list-item--file-type ').concat((0,r.getFileClassName)(e),'"></div>\n\t\t</div>\n\t\t<div class="dhx_list-item--content">\n\t\t').concat(i?'<div class="dhx_list-item--name">'.concat(e.value,".").concat(e.extension,'\n\t\t\t\t\t<p class="dhx_item--progress-value">').concat((100*e.progress).toFixed(1)+"%","</p>\n\t\t\t\t</div>"):'<div class="dhx_list-item--name">'.concat(e.value,".").concat(e.extension,"</div>\n\t\t\t\t\t").concat(t?'<div class="dhx_list-item--error-info">'.concat(s.default.error,"</div>"):"",'\n\t\t\t\t\t<div class="dhx_list-item--size ').concat(t?"error":"",'">').concat((0,r.getBasis)(e.size),"</div>\t\n\t\t\t\t</div>"),"\n\t\t</div>\n\t\t").concat(i?'<div class="dhx_item--download-progress" style="width:'.concat((100*e.progress).toFixed(1),'%"></div>'):'<div class="dhx_item--info">\n\t\t\t\t\t'.concat(t?'<div class="dhx_item--error-mark dxi dxi-alert-circle"></div><div class="dhx_item--btn-remove dxi dxi-delete-forever"></div>':"".concat(n?'<div class="dhx_item--error-mark dxi dxi-vault"></div>':'<div class="dhx_item--success-mark dxi dxi-checkbox-marked-circle"></div>','\n\t\t\t\t\t\t\t<div class="dhx_item--hover-block">\n\t\t\t\t\t\t\t\t').concat(t||n||!e.link?"":'<a href="'.concat(o,'" class="dhx_item--download-btn dxi dxi-download" download="').concat(l,'"></a>'),'\n\t\t\t\t\t\t\t\t<div class="dhx_item--btn-remove dxi dxi-delete-forever"></div>\n\t\t\t\t\t\t\t</div>'),"\n\t\t\t\t</div>"))};t.getContainersEvents=function(e){var t=function(t){var i=(0,n.locate)(t);if(i){var r=e.getItem(i);(0,o.tooltip)(r.name,{node:t.target,position:o.Position.bottom})}};return{onclick:{"dxi-delete-forever":function(t){var i=(0,n.locate)(t);i&&(0,r.removeItem)(e,i)}},onmouseover:{"dxi-download":function(e){(0,o.tooltip)(s.default.download,{node:e.target,position:o.Position.bottom})},"dxi-delete-forever":function(e){(0,o.tooltip)(s.default.clear,{node:e.target,position:o.Position.bottom})},"dhx_list-item--name":t,"dhx_dataview-item--file-name":t}}}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressBar=void 0;var r=i(1),a=i(9),s=i(45),l=i(38),c=function(e){function t(t,i){var n=e.call(this,null,i)||this;n.events=t,n._progress=0;return n.mount(null,(0,r.create)({render:function(){return n._draw()}})),n._abortUpload=function(){n.events.fire(l.ProgressBarEvents.cancel)},n}return o(t,e),t.prototype.setState=function(e,t){this._progress=e,this.config.template?this._progressText=this.config.template(e,t):this._progressText=this._progress.toFixed(1)+"%",this.paint()},t.prototype._draw=function(){return(0,r.el)(".progress-bar",{_key:this._uid},[(0,r.el)(".progress-indicator",{style:{width:this._progress+"%"}}),(0,r.el)(".progress-text",{".innerHTML":this._progressText}),(0,r.el)("button",{class:"dhx_button dhx_button--color_primary dhx_button--size_small dhx_button--view_flat action-abort-all",onclick:this._abortUpload},s.default.cancel)])},t}(a.View);t.ProgressBar=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReadStackPreview=void 0;var n=function(){function e(e){this._readerStack=[],this._isActive=!1,this._data=e}return e.prototype.add=function(e,t){void 0===t&&(t=!1),this._readerStack.push(e),t||this.read()},e.prototype.read=function(){var e=this;if(this._readerStack.length&&!this._isActive){var t=this._readerStack.shift();this._isActive=!0;var i=new FileReader;i.readAsDataURL(t.file),i.onload=function(i){var n=new Image;n.src=i.target.result,n.onload=function(){e._data.exists(t.id)&&e._data.update(t.id,{image:n}),e._isActive=!1,e.read()}},i.onerror=function(){e._isActive=!1,e.read()}}},e.prototype.stop=function(){this._readerStack=[]},e}();t.ReadStackPreview=n},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(102),t),o(i(250),t),o(i(103),t)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEditor=void 0;var n=i(249);t.getEditor=function(e,t){return new n.InputEditor(e,t)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InputEditor=void 0;var n=i(1),o=i(103),r=function(){function e(e,t){var i=this;this._dataView=t,this._config=t.config,this._item=e,this._dataView.events.on(o.DataViewEvents.focusChange,(function(e,t){i._mode&&t!==i._item.id&&i.endEdit()})),this._initHandlers()}return e.prototype.endEdit=function(){if(this._input){var e=this._input.value;this._dataView.events.fire(o.DataViewEvents.beforeEditEnd,[e,this._item.id])?(this._input.removeEventListener("blur",this._handlers.onBlur),this._input.removeEventListener("change",this._handlers.onChange),this._input.removeEventListener("keydown",this._handlers.onKeyDown),this._handlers={},this._mode=!1,this._dataView.events.fire(o.DataViewEvents.afterEditEnd,[e,this._item.id])):this._input.focus()}},e.prototype.toHTML=function(e){this._mode=!0;var t=this._config,i=t.itemsInRow,o=t.gap,r=function(e){return parseFloat(e)};return(0,n.el)(".dhx_input__wrapper",{style:{width:"calc(".concat(100/i,"% - ").concat(r(o)," * ").concat((i-1)/i,"px)"),maxWidth:"calc(".concat(100/i,"% - ").concat(r(o)," * ").concat((i-1)/i,"px)"),marginRight:e?"":o},role:"presentation"},[(0,n.el)("div.dhx_input__container",{style:{height:"100%"},role:"presentation"},[(0,n.el)("input.dhx_input",{class:(this._item.css?" "+this._item.css:"")+(e?" dhx_dataview-item--last-item-in-row":""),style:{padding:"8px, 12px",width:"100%",height:"100%"},_hooks:{didInsert:this._handlers.didInsert},_key:this._item.id,"data-dhx-id":this._item.id})])])},e.prototype._initHandlers=function(){var e=this;this._handlers={onBlur:function(){e.endEdit()},onChange:function(){e.endEdit()},onKeyDown:function(t){"Enter"===t.key&&e._item.value===e._input.value&&e.endEdit(),"Escape"===t.key&&(e._input.value=e._item.value,e.endEdit())},didInsert:function(t){var i=t.el;e._input=i,i.focus(),i.value=e._item.value,i.setSelectionRange(0,i.value.length),i.addEventListener("change",e._handlers.onChange),i.addEventListener("blur",e._handlers.onBlur),i.addEventListener("keydown",e._handlers.onKeyDown)}}},e}();t.InputEditor=r},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ProDataView=void 0;var a=i(35),s=i(102),l=i(1),c=function(e){function t(t,i){void 0===i&&(i={});var n=e.call(this,t,i)||this;return n.scrollView=new a.ScrollView((function(){return n.getRootView()})),n.paint(),n}return o(t,e),t.prototype.destructor=function(){e.prototype.destructor.call(this),this.scrollView=null},t.prototype.scrollTo=function(e){var t,i,n=this.getRootView();if(n&&n.node&&n.node.el&&void 0!==e){var o=(null===(t=this.scrollView)||void 0===t?void 0:t.config.enable)?null===(i=this.getRootNode())||void 0===i?void 0:i.querySelector(".scroll-view"):this.getRootNode();this._scrollTo(e,o)}},t.prototype._renderList=function(){var e=this,t=this.data.getRawData(0,-1),i=this.config,n=i.itemsInRow,o=i.css,a=i.gap,s=0,c=t.reduce((function(t,i,o){return 0===s&&t.push([]),t[t.length-1].push(e._renderItem(i,o)),s=(s+1)%n,t}),[]),u=c.map((function(e,t){return(0,l.el)(".dhx_dataview-row",{style:{margin:a},"aria-label":"Row ".concat(t+1)},e)})),d=this.scrollView&&this.scrollView.config.enable,h=(o||"")+" dhx_widget dhx_dataview"+(this.config.multiselection&&this.selection.getItem()?" dhx_no-select--pointer":"")+(d?" dhx_dataview--scroll-view":"");return(0,l.el)("",r(r(r({},this._handlers),{"data-dhx-widget-id":this._uid,"data-dhx-drop-area":"row",class:h,style:{height:this.config.height}}),this.getDataViewAriaAttrs(this.config,this.data.getLength(),c.length,n)),d?[this.scrollView.render(u)]:u)},t}(s.DataView);t.ProDataView=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={simpleVaultText:"Drag & drop files or folders here or",simpleVaultLabel:"browse files"}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.TimePicker=void 0;var a=i(53),s=i(1),l=i(0),c=i(14),u=i(10),d=i(4),h=i(6),f=i(7),p=i(25),v=function(e){function t(t,i){var n=e.call(this,null,i)||this;n.events=new d.EventSystem,n._popupIsFocus=!1,n._propsItem=["required","validation","icon","placeholder","editable","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],n._propsTimepicker=["timeFormat","controls","valueFormat"],n._props=r(r(r([],f.baseProps,!0),n._propsItem,!0),n._propsTimepicker,!0),n._keyManager=new p.KeyManager((function(){var e,t,i,o=document.activeElement;return(null===(i=null===(t=null===(e=n.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.input)||void 0===i?void 0:i.el)===o||n._popup.isVisible()})),n._initView(i),n._initHandlers(),n._initHotkeys();return n.mount(t,(0,s.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype.destructor=function(){this.events&&this.events.clear(),this._keyManager&&this._keyManager.destructor(),this._popup&&this._popup.destructor(),this.unmount(),e.prototype._destructor.call(this),this.timepicker&&this.timepicker.destructor(),this.events=this._uid=this._propsItem=this._propsTimepicker=this._props=this._keyManager=null},t.prototype.setProperties=function(e){var t=this;(0,s.awaitRedraw)().then((function(){if(e&&!(0,l.isEmptyObj)(e)&&t.events.fire(h.ItemEvent.beforeChangeProperties,[t.getProperties()])){for(var i in e)t._props.includes(i)&&(t.config[i]=e[i]);t._initView(t.config),t._initHandlers(),t.events.fire(h.ItemEvent.afterChangeProperties,[t.getProperties()]),t.paint()}}))},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.show=function(){this.config.hidden&&this.events.fire(h.ItemEvent.beforeShow,[this.getValue("timeObject"===this.config.valueFormat)])&&(this.config.hidden=!1,this.events.fire(h.ItemEvent.afterShow,[this.getValue("timeObject"===this.config.valueFormat)]))},t.prototype.hide=function(e){this.config.hidden&&!e||!this.events.fire(h.ItemEvent.beforeHide,[this.getValue("timeObject"===this.config.valueFormat),e])||(this.config.hidden=!0,this.events.fire(h.ItemEvent.afterHide,[this.getValue("timeObject"===this.config.valueFormat),e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.disable=function(){this.config.disabled=!0,this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return!!this.config.disabled},t.prototype.validate=function(e){void 0===e&&(e=!1);for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=t.length?t[0]:this.getValue(this._isTimeObject());if(!e&&!this.events.fire(h.ItemEvent.beforeValidate,[n]))return!1;var o=!0;return(this.config.required||t.length)&&(o="string"==typeof n?(0,f.isTimeFormat)(n,this.config.timeFormat):(0,f.isTimeFormat)("".concat(n.hour,":").concat(n.minute).concat((0,l.isDefined)(n.AM)?n.AM?"AM":"PM":""),this.config.timeFormat)),"function"==typeof this.config.validation&&(o=this.config.validation(n)),e||(this.config.$validationStatus=o?h.ValidationStatus.success:h.ValidationStatus.error,this.events.fire(h.ItemEvent.afterValidate,[n,o]),this.paint()),o},t.prototype.clearValidate=function(){this.config.$validationStatus=h.ValidationStatus.pre,this.paint()},t.prototype.setValue=function(e){if(void 0!==e&&e!==this.config.value){if(this.timepicker.setValue(e),this.config.controls){var t=this.getValue(this._isTimeObject());if(!this.events.fire(h.ItemEvent.beforeChange,[t]))return;this.config.value=this.timepicker.getValue(),this.events.fire(h.ItemEvent.change,[t])}(0,f.isVerify)(this.config)&&this.validate(),this.paint()}},t.prototype.getValue=function(e){return e?this.timepicker.getValue(e):this.config.value||""},t.prototype.focus=function(){var e=this;(0,s.awaitRedraw)().then((function(){e.getRootView().refs.input.el.focus()}))},t.prototype.blur=function(){var e=this;(0,s.awaitRedraw)().then((function(){e._popup.hide(),e.getRootView().refs.input.el.blur()}))},t.prototype.clear=function(){""!==this.config.value&&this._clear()},t.prototype.getWidget=function(){return this.timepicker},t.prototype._initView=function(e){if((0,l.isEmptyObj)(e))throw new Error("Check the configuration is correct");for(var t in this.timepicker&&this.timepicker.destructor(),this._popup&&this._popup.destructor(),this.config={type:e.type,id:e.id,name:e.name,value:"",disabled:!1,editable:!1,hidden:!1,timeFormat:24,controls:!1,valueFormat:"string",required:!1,icon:"",placeholder:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},e)"id"!==t&&"type"!==t&&"name"!==t&&(this.config[t]=e[t]);this._popup=new u.Popup,this.timepicker=new a.Timepicker(null,(0,f.widgetConfig)(e)),this._popup.attach(this.timepicker),this.config.value&&(this.config.value=this.timepicker.getValue())},t.prototype._initHandlers=function(){var e=this;this.config.controls?(this.timepicker.events.on(a.TimepickerEvents.afterClose,(function(){e._popup.hide()})),this.timepicker.events.on(a.TimepickerEvents.afterApply,(function(){e._afterApply(!0)})),this._popup.events.on(u.PopupEvents.afterHide,(function(){e.config.value&&e.config.value!==e.timepicker.getValue()?e.timepicker.setValue(e.config.value):""!==e.config.value&&void 0!==e.config.value||e._clear(!0)}))):(this.timepicker.events.on(a.TimepickerEvents.beforeChange,(function(t){return e.events.fire(h.ItemEvent.beforeChange,[t])})),this.timepicker.events.on(a.TimepickerEvents.change,(function(t){var i=12===e.config.timeFormat?"12:00AM":"00:00",n=e.timepicker.getValue();""===e.config.value&&i===n||e.config.value===n||(e.config.value=e.timepicker.getValue(),e.events.fire(h.ItemEvent.change,[t]),(0,f.isVerify)(e.config)&&e.validate(),e.paint())}))),this._popup.events.on(u.PopupEvents.afterHide,(function(){document.activeElement!==e.getRootView().refs.input.el&&e.events.fire(h.ItemEvent.blur,[e.getValue()]),e.paint()})),this.events.on(h.ItemEvent.input,(function(t){var i=12===e.config.timeFormat?7:5;t.length>=i&&(0,f.isTimeFormat)(t,e.config.timeFormat)?e.timepicker.setValue(t):""!==t||e.config.controls||e._clear()})),this.events.on(h.ItemEvent.afterChangeProperties,(function(){e.config.value=e.timepicker.getValue(),e.paint()})),this.events.on(h.ItemEvent.blur,(function(){e._popupIsFocus=!1,e.paint()}))},t.prototype._getHandlers=function(){var e=this;return{onfocus:function(){if(!e._popup.isVisible()){var t=e.getRootView().refs.input.el;e._popup.show(t,{theme:t}),e.events.fire(h.ItemEvent.focus,[e.getValue()]),e.paint()}},onblur:function(){e._popup.isVisible()?e.paint():e.events.fire(h.ItemEvent.blur,[e.getValue()])},oninput:function(t){var i=t.target.value;e.events.fire(h.ItemEvent.input,[i])},onkeydown:function(t){var i,n,o,r=document.activeElement;((null===(o=null===(n=null===(i=e.getRootView())||void 0===i?void 0:i.refs)||void 0===n?void 0:n.input)||void 0===o?void 0:o.el)===r||e._popup.isVisible())&&e.events.fire(h.ItemEvent.keydown,[t])},onmousedown:function(){e._popup.getContainer()!==document.activeElement&&(e._popupIsFocus=!1)}}},t.prototype._initHotkeys=function(){var e=this,t={"shift+tab":function(){e._applyTab()},tab:function(){e._applyTab()},escape:function(){e._popup.isVisible()&&e.getRootView().refs.input.el.focus(),e._popup.hide()},enter:function(t){t.preventDefault();var i=e.getRootView().refs.input.el;e._popup.isVisible()||e._popup.show(i,{theme:i}),e._popupIsFocus&&e.config.controls?e._afterApply(!0):(e._popup.hide(),e.paint())},arrowRight:function(t){var i=e._popup.getContainer();e._popupIsFocus=i.contains(document.activeElement),e._popup.isVisible()&&!e._popupIsFocus&&(t.preventDefault(),i.focus(),e._popupIsFocus=!0)}};for(var i in t)this._keyManager.addHotKey(i,t[i])},t.prototype._draw=function(){var e,t,i,n=this.config,o=n.value,r=n.required,a=n.disabled,l=n.placeholder,c=n.name,u=n.id,d=n.editable,h=n.label,p=n.helpMessage,v=this._popup.isVisible()||(null===(i=null===(t=null===(e=this.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.input)||void 0===i?void 0:i.el)===document.activeElement;return(0,s.el)("div.dhx_form-group",{class:(0,f.getFormItemCss)(this.config,(0,f.isVerify)(this.config),v)},[this._drawLabel(),(0,s.el)(".dhx_input__wrapper",[(0,s.el)("div.dhx_input__container",{},[(0,s.el)(".dhx_input__icon.dxi.dxi-clock-outline"),(0,s.el)("input.dhx_input.dhx_input--icon-padding",{tabindex:0,"data-dhx-id":c||u,_key:this._uid,_ref:"input",value:o,type:"text",required:r,disabled:a,class:v&&"dhx_input--focus",placeholder:l||"",name:c||"",id:u||this._uid,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,oninput:this._handlers.oninput,onkeydown:this._handlers.onkeydown,onmousedown:this._handlers.onmousedown,autocomplete:"off",readOnly:!d,"aria-label":h||"".concat(d?"type or":""," select date"),"aria-describedby":p?"dhx_label__help_".concat(u||this._uid):null})]),(0,f.getValidationMessage)(this.config)&&(0,s.el)("span.dhx_input__caption",{},(0,f.getValidationMessage)(this.config))])])},t.prototype._clear=function(e){(e||this.events.fire(h.ItemEvent.beforeChange,[""]))&&(this.config.value="",this.timepicker.clear(),e||(this.events.fire(h.ItemEvent.change,[""]),(0,f.isVerify)(this.config)&&this.setValidationStatus(this.validate(!0)?"success":"error")),this.paint())},t.prototype._afterApply=function(e){if(void 0===e&&(e=!1),""!==this.getRootView().refs.input.el.value||e){var t=this.timepicker.getValue(this._isTimeObject());if(!this.events.fire(h.ItemEvent.beforeChange,[t]))return;this.config.value=this.timepicker.getValue(),this.events.fire(h.ItemEvent.change,[t]),(0,f.isVerify)(this.config)&&this.validate()}else this.clear();this._popup.hide(),this.paint()},t.prototype._applyTab=function(){var e,t,i;document.activeElement===(null===(i=null===(t=null===(e=this._popup.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.content)||void 0===i?void 0:i.el)||this._popupIsFocus||this._popup.hide()},t.prototype._isTimeObject=function(){var e;return"timeobject"===(null===(e=this.config.valueFormat)||void 0===e?void 0:e.toLowerCase())},t}(c.Label);t.TimePicker=v},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ColorPicker=void 0;var a=i(104),s=i(4),l=i(1),c=i(0),u=i(14),d=i(10),h=i(6),f=i(7),p=i(25),v=function(e){function t(t,i){var n=e.call(this,null,i)||this;n.events=new s.EventSystem,n._popupIsFocus=!1,n._propsItem=["required","validation","icon","placeholder","editable","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage"],n._propsColorpicker=["mode","grayShades","customColors","palette"],n._props=r(r(r([],f.baseProps,!0),n._propsItem,!0),n._propsColorpicker,!0),n._keyManager=new p.KeyManager((function(){var e,t,i,o=document.activeElement;return(null===(i=null===(t=null===(e=n.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.input)||void 0===i?void 0:i.el)===o||n._popup.isVisible()})),n._initView(i),n._initHandlers(),n._initHotkeys();return n.mount(t,(0,l.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype.destructor=function(){this.events&&this.events.clear(),this._popup&&this._popup.destructor(),this._keyManager&&this._keyManager.destructor(),e.prototype._destructor.call(this),this.unmount(),this.colorpicker&&this.colorpicker.destructor(),this.events=this._uid=this._propsColorpicker=this._propsItem=this._props=this._keyManager=null},t.prototype.setProperties=function(e){if(e&&!(0,c.isEmptyObj)(e)&&this.events.fire(h.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t],this._propsColorpicker.includes(t)&&(this.colorpicker.config[t]=e[t]));this.events.fire(h.ItemEvent.afterChangeProperties,[this.getProperties()]),this.colorpicker.paint(),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.show=function(){var e=this.config,t=e.value;e.hidden&&this.events.fire(h.ItemEvent.beforeShow,[t])&&(this.config.hidden=!1,this.events.fire(h.ItemEvent.afterShow,[t]))},t.prototype.hide=function(e){var t=this.config,i=t.value;t.hidden&&!e||!this.events.fire(h.ItemEvent.beforeHide,[i,e])||(this.config.hidden=!0,this.events.fire(h.ItemEvent.afterHide,[i,e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.disable=function(){this.config.disabled=!0,this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return!!this.config.disabled},t.prototype.validate=function(e){void 0===e&&(e=!1);for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=t.length?t[0]:this.getValue();if(!e&&!this.events.fire(h.ItemEvent.beforeValidate,[n]))return!1;var o=!0;return(this.config.required||t.length)&&(o=(0,a.isHex)(n)),"function"==typeof this.config.validation&&(o=this.config.validation(n)),e||(this.setValidationStatus(o?"success":"error"),this.events.fire(h.ItemEvent.afterValidate,[n,o]),this.paint()),o},t.prototype.clearValidate=function(){this.setValidationStatus(),this.paint()},t.prototype.setValue=function(e){void 0!==e&&e!==this.config.value&&this.colorpicker.setValue(e)},t.prototype.getValue=function(){return this.colorpicker.getValue()},t.prototype.clear=function(){""!==this.config.value&&this.colorpicker.clear()},t.prototype.getWidget=function(){return this.colorpicker},t.prototype.focus=function(){var e=this;(0,l.awaitRedraw)().then((function(){e.getRootView().refs.input.el.focus()}))},t.prototype.blur=function(){var e=this;(0,l.awaitRedraw)().then((function(){e._popup.hide(),e.getRootView().refs.input.el.blur()}))},t.prototype._initView=function(e){if((0,c.isEmptyObj)(e))throw new Error("Check the configuration is correct");for(var t in this.colorpicker&&this.colorpicker.destructor(),this._popup&&this._popup.destructor(),this.config={type:e.type,id:e.id,name:e.name,disabled:!1,editable:!1,hidden:!1,value:"",grayShades:!0,pickerOnly:!1,paletteOnly:!1,customColors:[],palette:a.palette,mode:"palette",required:!1,icon:"",placeholder:"",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:"",preMessage:"",successMessage:"",errorMessage:"",width:"content",height:"content"},e)"id"!==t&&"type"!==t&&"name"!==t&&(this.config[t]=e[t]);this._popup=new d.Popup,this.colorpicker=new a.Colorpicker(null,(0,f.widgetConfig)(e)),this.colorpicker.setValue(this.config.value),this._popup.attach(this.colorpicker)},t.prototype._initHandlers=function(){var e=this;this.colorpicker.events.on(a.ColorpickerEvents.beforeChange,(function(t){return e.events.fire(h.ItemEvent.beforeChange,[t])})),this.colorpicker.events.on(a.ColorpickerEvents.change,(function(t,i){e.config.value=e.colorpicker.getValue(),e.events.fire(h.ItemEvent.change,[e.config.value]),(0,f.isVerify)(e.config)&&("clear"===i?e.setValidationStatus(e.validate(!0)?"success":"error"):e.validate()),e._popup.hide(),e.paint()})),this._popup.events.on(d.PopupEvents.afterHide,(function(){document.activeElement!==e.getRootView().refs.input.el&&e.events.fire(h.ItemEvent.blur,[e.getValue()]),e.paint()})),this.events.on(h.ItemEvent.blur,(function(){e._popupIsFocus=!1,e.paint()}))},t.prototype._getHandlers=function(){var e=this;return{onblur:function(){e._popup.isVisible()?e.paint():e.events.fire(h.ItemEvent.blur,[e.getValue()])},onfocus:function(){if(!e._popup.isVisible()){""!==e.config.value&&e.clearValidate();var t=e.getRootView().refs.input.el;e._popup.show(t,{theme:t}),e.events.fire(h.ItemEvent.focus,[e.getValue()]),e.paint()}},oninput:function(t){var i=t.target.value;e.events.fire(h.ItemEvent.input,[i])},onchange:function(t){var i=t.target.value;e.config.editable&&(0,a.isHex)(i)?e.setValue(i):""===i&&e.clear()},onkeydown:function(t){var i,n,o,r=document.activeElement;((null===(o=null===(n=null===(i=e.getRootView())||void 0===i?void 0:i.refs)||void 0===n?void 0:n.input)||void 0===o?void 0:o.el)===r||e._popup.isVisible())&&e.events.fire(h.ItemEvent.keydown,[t])},onmousedown:function(){e._popup.getContainer()!==document.activeElement&&(e._popupIsFocus=!1)}}},t.prototype._initHotkeys=function(){var e=this,t={"shift+tab":function(){e._applyTab()},tab:function(){e._applyTab()},escape:function(){e._popup.isVisible()&&e.getRootView().refs.input.el.focus(),e._popup.hide()},enter:function(t){if(t.preventDefault(),!e._popup.isVisible()){var i=e.getRootView().refs.input.el;e._popup.show(i,{theme:i})}},arrowRight:function(t){var i=e._popup.getContainer();e._popup.isVisible()&&!e._popupIsFocus&&(t.preventDefault(),i.focus(),e._popupIsFocus=!0)},onkeydown:function(t){"Tab"===t.key&&e._popup.hide()}};for(var i in t)this._keyManager.addHotKey(i,t[i])},t.prototype._draw=function(){var e,t,i,n=this.config,o=n.required,r=n.value,a=n.icon,s=n.disabled,c=n.placeholder,u=n.name,d=n.id,h=n.editable,p=n.label,v=n.helpMessage,g=this._popup.isVisible()||(null===(i=null===(t=null===(e=this.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.input)||void 0===i?void 0:i.el)===document.activeElement;return(0,l.el)("div.dhx_form-group",{class:(0,f.getFormItemCss)(this.config,(0,f.isVerify)(this.config),g)},[this._drawLabel(),(0,l.el)(".dhx_input__wrapper",[(0,l.el)("div.dhx_input__container",{},[(0,l.el)(".dhx_input__icon",{class:a||"dxi dxi-eyedropper-variant"+(r?" dhx_input__icon--color-selected":""),style:{"background-color":r||"transparent"}}),(0,l.el)("input.dhx_input.dhx_input--icon-padding",{tabindex:0,"data-dhx-id":u||d,_key:this._uid,_ref:"input",value:r,type:"text",required:o,disabled:s,class:g&&"dhx_input--focus",placeholder:c||"",name:u||"",id:d||this._uid,onfocus:this._handlers.onfocus,oninput:this._handlers.oninput,onchange:this._handlers.onchange,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown,onmousedown:this._handlers.onmousedown,autocomplete:"off",readOnly:!h,"aria-label":p||"".concat(h?"type or":""," select color"),"aria-describedby":v?"dhx_label__help_".concat(d||this._uid):null})]),(0,f.getValidationMessage)(this.config)&&(0,l.el)("span.dhx_input__caption",{},(0,f.getValidationMessage)(this.config))])])},t.prototype._applyTab=function(){var e,t,i;document.activeElement===(null===(i=null===(t=null===(e=this._popup.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.content)||void 0===i?void 0:i.el)||this._popupIsFocus||this._popup.hide()},t}(u.Label);t.ColorPicker=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculatePaletteGrip=t.getPicker=void 0;var n=i(61),o=i(1),r=i(46);t.getPicker=function(e,t,i){var a=(0,n.HSVtoRGB)(t.hsv);t.background=(0,n.RGBToHex)(a);var s=t.background,l=t.hsv,c=t.customHex,u=t.alpha,d=(0,n.RGBToHex)((0,n.HSVtoRGB)({h:l.h,s:1,v:1})),h=e.getRootView(),f=h.refs?h.refs.picker_palette.el.getBoundingClientRect():{height:200,width:218,x:0,y:0},p=f.height-2,v=f.width-2,g=p-l.v*p-4,_=l.s*v-4,m=f.width-6,y=m-(360-l.h)/360*m,b=u*m,w=1!==u?(0,n.alphaToHex)(u):"",x=(0,n.isHex)(c)?c.replace("#",""):s.replace("#","")+w,C=Math.round(100*u),E=e.config.transparency;return(0,o.el)(".dhx_colorpicker-picker",{},[(0,o.el)(".dhx_colorpicker-picker__palette",{style:{height:132,background:d},onmousedown:i.mousedown,ontouchstart:i.touchstart,"data-dhx-id":"picker_palette",_ref:"picker_palette"},[(0,o.el)(".dhx_palette_grip",{style:{top:g,left:_},tabindex:0})]),(0,o.el)(".dhx_colorpicker-range.dhx_colorpicker-range--hue",{onmousedown:i.mousedown,ontouchstart:i.touchstart,"data-dhx-id":"hue_range",_key:"hue_range",_ref:"hue_range"},[(0,o.el)(".dhx_colorpicker-range__grip.dhx_colorpicker-range__grip--hue",{style:{left:y},tabindex:0})]),E?(0,o.el)(".dhx_colorpicker-range.dhx_colorpicker-range--alpha",{onmousedown:i.mousedown,ontouchstart:i.touchstart,"data-dhx-id":"alpha_range",_key:"alpha_range",_ref:"alpha_range"},[(0,o.el)(".dhx_colorpicker-range__substrate"),(0,o.el)(".dhx_colorpicker-range__background",{style:{backgroundImage:"linear-gradient(to right, transparent, ".concat(s,")")}}),(0,o.el)(".dhx_colorpicker-range__grip.dhx_colorpicker-range__grip--alpha",{style:{left:1!==u?b:null},tabindex:0})]):null,(0,o.el)(".dhx_colorpicker-value",[(0,o.el)(".dhx_colorpicker-value__color",{style:{background:s+(0,n.alphaToHex)(u)}}),(0,o.el)(".dhx_colorpicker-value__input-wrapper.dhx_colorpicker-value__input-wrapper--hex",[(0,o.el)("input",{class:"dhx_colorpicker-value__input dhx_colorpicker-value__input--hex",style:{width:E?112:100},value:x,oninput:i.oninput,maxlength:E?"9":"7",_key:"hex_input","data-dhx-id":"hex_input","aria-label":"type color in HEX format"})]),E?(0,o.el)(".dhx_colorpicker-value__input-wrapper.dhx_colorpicker-value__input-wrapper--alpha",[(0,o.el)("input",{class:"dhx_colorpicker-value__input dhx_colorpicker-value__input--alpha",value:C,oninput:i.oninput,maxlength:"3",_key:"alpha_input","data-dhx-id":"alpha_input","aria-label":"type opacity in percent"})]):null]),(0,o.el)(".dhx_colorpicker-picker__buttons",[!e.config.pickerOnly&&(0,o.el)("button",{class:"dhx_button dhx_button--size_medium dhx_button--view_link dhx_button--color_primary",onclick:[i.buttonsClick,"cancel"]},r.default.cancel),(0,o.el)("button",{class:"dhx_button dhx_button--size_medium dhx_button--view_flat dhx_button--color_primary",onclick:[i.buttonsClick,"apply"]},r.default.select)])])},t.calculatePaletteGrip=function(e,t,i){var n=e.refs.picker_palette.el.getBoundingClientRect(),o=n.height,r=n.width;t=t<0?0:t>o?o:t,i=i<0?0:i>r?r:i;var a=Math.round(i/(r/100)),s=100-Math.round(t/(o/100));this._pickerState.hsv.s=a/100,this._pickerState.hsv.v=s/100}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateRangeGrip=t.calculatePaletteGrip=void 0,t.calculatePaletteGrip=function(e,t,i){var n=e.height,o=e.width;return t=t<0?0:t>n?n:t,i=i<0?0:i>o?o:i,{s:Math.round(i/(o/100))/100,v:(100-Math.round(t/(n/100)))/100}},t.calculateRangeGrip=function(e,t){var i=e.width;return t=t<0?0:t>i?i:t,{h:Math.round(t/i*360),alpha:Number((t/i).toFixed(2)),rangeLeft:t}}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Spacer=void 0;var a=i(1),s=i(9),l=i(6),c=i(4),u=i(0),d=i(7),h=function(e){function t(t,i){var n=e.call(this,t,r({disabled:!1,hidden:!1,width:"content",height:"content"},i))||this;n.events=new c.EventSystem;return n.mount(t,(0,a.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype.destructor=function(){this.events&&this.events.clear(),this.config=this.events=null,this.unmount()},t.prototype.setProperties=function(e){if(e&&!(0,u.isEmptyObj)(e)&&this.events.fire(l.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)d.baseProps.includes(t)&&(this.config[t]=e[t]);this.events.fire(l.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=d.baseProps;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.show=function(){this.config.hidden&&this.events.fire(l.ItemEvent.beforeShow,[])&&(this.config.hidden=!1,this.events.fire(l.ItemEvent.afterShow,[]))},t.prototype.hide=function(e){this.config.hidden&&!e||!this.events.fire(l.ItemEvent.beforeHide,[!!e])||(this.config.hidden=!0,this.events.fire(l.ItemEvent.afterHide,[!!e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype._draw=function(){return(0,a.el)("div")},t}(s.View);t.Spacer=h},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Avatar=void 0;var s=i(1),l=i(0),c=i(4),u=i(14),d=i(6),h=i(7),f=i(98),p=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.events=new c.EventSystem,n._propsItem=["validation","required","readOnly","label","labelWidth","labelPosition","hiddenLabel","helpMessage","preMessage","successMessage","errorMessage","size","circle","alt","icon","placeholder","preview","accept","autosend","params","headerParams","fieldName","target","updateFromResponse","removeIcon"],n._props=a(a([],h.baseProps,!0),n._propsItem,!0),n._isUpload=!1,n._initView(i),n._initHandlers(),n}return o(t,e),t.prototype.send=function(e){var t=this,i=this.config,n=i.target,o=i.value,a=i.updateFromResponse,s=i.headerParams;if(!this._isUpload&&n&&(null==o?void 0:o.file)&&o.status!==f.FileStatus.uploaded&&this.events.fire(d.ItemEvent.beforeUploadFile,[o])){var l=this._createFormData(o,e),c=new XMLHttpRequest;if(this._isUpload=!0,this.config.value=r(r({},o),{status:f.FileStatus.inprogress,request:c}),this.events.fire(d.ItemEvent.uploadBegin,[this.config.value]),this.events.fire(d.ItemEvent.uploadProgress,[0,this.config.value]),c.open("POST",n),s)for(var u in s)c.setRequestHeader(u,s[u]);c.upload.onprogress=function(e){var i=e.loaded/e.total;t.config.value=r(r({},t.config.value),{progress:i}),t.events.fire(d.ItemEvent.uploadProgress,[100*i,t.config.value])},c.onloadend=function(){var e=200===c.status?f.FileStatus.uploaded:f.FileStatus.failed,i=200===c.status&&c.response?JSON.parse(c.response):null;t.config.value=r(r({},t.config.value),{status:e}),e===f.FileStatus.uploaded?(i&&a&&(t.config.value=r(r({},t.config.value),i)),t.events.fire(d.ItemEvent.uploadFile,[t.config.value,i])):t.events.fire(d.ItemEvent.uploadFail,[t.config.value]),t._isUpload=!1,t.events.fire(d.ItemEvent.uploadComplete,[t.config.value])},c.send(l)}},t.prototype.selectFile=function(){var e,t,i;null===(i=null===(t=null===(e=this.getRootView())||void 0===e?void 0:e.refs)||void 0===t?void 0:t.input)||void 0===i||i.el.click()},t.prototype.setValue=function(e){this._setValue(e),(0,h.isVerify)(this.config)&&this.validate()},t.prototype._setValue=function(e){this.events.fire(d.ItemEvent.beforeChange,[e])&&(this.config.value=!(0,l.isEmptyObj)(e)&&r({id:(0,l.uid)(),status:f.FileStatus.queue,progress:0,path:""},e)||{},this.events.fire(d.ItemEvent.change,[this.getValue()]))},t.prototype.getValue=function(){return this.config.value||{}},t.prototype.clear=function(){this._setValue({}),(0,h.isVerify)(this.config)&&this.setValidationStatus(this.validate(!0)?"success":"error")},t.prototype.disable=function(){this.config.disabled=!0,this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return!!this.config.disabled},t.prototype.show=function(){this.config.hidden&&this.events.fire(d.ItemEvent.beforeShow,[this.getValue()])&&(this.config.hidden=!1,this.events.fire(d.ItemEvent.afterShow,[this.getValue()]))},t.prototype.hide=function(e){void 0===e&&(e=!1),this.config.hidden&&!e||!this.events.fire(d.ItemEvent.beforeHide,[this.getValue(),e])||(this.config.hidden=!0,this.events.fire(d.ItemEvent.afterHide,[this.getValue(),e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.validate=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=this.getValue()),!e&&!this.events.fire(d.ItemEvent.beforeValidate,[t]))return!1;var i=!0;return this.config.required&&(i=!!t.src),"function"==typeof this.config.validation&&(i=this.config.validation(t)),e||(this.setValidationStatus(i?"success":"error"),this.events.fire(d.ItemEvent.afterValidate,[t,i]),this.paint()),i},t.prototype.clearValidate=function(){this.setValidationStatus(),this.paint()},t.prototype.setProperties=function(e){if(e&&!(0,l.isEmptyObj)(e)&&this.events.fire(d.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.events.fire(d.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype.focus=function(){var e=this;(0,s.awaitRedraw)().then((function(){var t,i,n;null===(n=null===(i=null===(t=e.getRootView())||void 0===t?void 0:t.refs)||void 0===i?void 0:i.input)||void 0===n||n.el.focus(),e.paint()}))},t.prototype.blur=function(){var e=this;(0,s.awaitRedraw)().then((function(){var t,i,n;null===(n=null===(i=null===(t=e.getRootView())||void 0===t?void 0:t.refs)||void 0===i?void 0:i.input)||void 0===n||n.el.blur(),e.paint()}))},t.prototype.destructor=function(){this.events&&this.events.clear(),this.unmount(),e.prototype._destructor.call(this)},t.prototype._initView=function(e){this.config=r({size:"medium",labelPosition:"top",width:"content",height:"content",accept:"image/*",fieldName:"file",target:"",alt:"",css:"",label:"",errorMessage:"",successMessage:"",helpMessage:"",icon:"",labelWidth:"",placeholder:"",preMessage:"",removeIcon:!0,circle:!1,readOnly:!1,hiddenLabel:!1,autosend:!1,updateFromResponse:!0},e),this.paint()},t.prototype._initHandlers=function(){var e=this;this._handlers=r({change:function(t){var i,n,o=null===(n=null===(i=t.target)||void 0===i?void 0:i.files)||void 0===n?void 0:n[0];if(!e.config.readOnly&&o){var r=URL.createObjectURL(o);e.setValue({file:o,src:r}),e.config.autosend&&e.validate(!0)&&e.send()}},drop:function(t){var i,n;t.preventDefault();var o=null===(n=null===(i=t.dataTransfer)||void 0===i?void 0:i.files)||void 0===n?void 0:n[0];if(!e.config.readOnly&&o){var r=URL.createObjectURL(o);e._dragover=!1,e.setValue({file:o,src:r}),e.config.autosend&&e.validate(!0)&&e.send()}},dragover:function(t){if(t.preventDefault(),!e.config.readOnly){for(var i=0,n=t.dataTransfer.types;i<n.length;i++){var o=n[i];if("Files"!==o&&"application/x-moz-file"!==o)return}e._dragoverTimeout?clearTimeout(e._dragoverTimeout):e.paint(),e._dragover=!0,e._dragoverTimeout=setTimeout((function(){e._dragover=!1,e._dragoverTimeout=null,e.paint()}),150)}},onfocus:function(){return e.events.fire(d.ItemEvent.focus,[e.getValue()])},onblur:function(){return e.events.fire(d.ItemEvent.blur,[e.getValue()])},onkeydown:function(t){return e.events.fire(d.ItemEvent.keydown,[t])}},this._handlers),this.events.on(d.ItemEvent.change,(function(){return e.paint()}))},t.prototype._draw=function(){var e=this.config,t=e.hidden,i=e.alt,n=e.circle,o=e.size,r=e.label,a=e.value,l=e.readOnly,c=t?" dhx_form-group--hidden":"",u="",d={};return this._dragover&&(u+="dhx_avatar--on-drag "),n&&(u+="dhx_avatar--circle "),o&&"string"!=typeof o?d.width=d.height=o:o&&["small","medium","large"].includes(o)?u+="dhx_avatar-size--".concat(o," "):u+="dhx_avatar-size--medium ",(0,s.el)("div.dhx_form-group.dhx_form-group--avatar",{"aria-label":i||r,role:"img",class:(0,h.getFormItemCss)(this.config,(0,h.isVerify)(this.config),!1)+c},[this._drawLabel(),(0,s.el)("div.dhx_avatar",{class:u,style:d,ondragover:this._handlers.dragover,ondrop:this._handlers.drop},[(null==a?void 0:a.src)?this._drawImage(this.config):this._drawPreview(this.config),!l&&this._drawCover(this.config)]),(0,h.getValidationMessage)(this.config)&&(0,s.el)("span.dhx_input__caption",(0,h.getValidationMessage)(this.config))])},t.prototype._drawImage=function(e){var t=e.alt,i=e.value;return(0,s.el)("img.dhx_avatar__image",{src:null==i?void 0:i.src,alt:t})},t.prototype._drawPreview=function(e){var t=e.icon,i=e.placeholder,n=e.preview,o=[];return t&&o.push((0,s.el)("div.dhx_avatar__preview-icon",{class:t})),i&&o.push((0,s.el)("div.dhx_avatar__preview-placeholder",{"aria-placeholder":i},i)),(0,s.el)("div.dhx_avatar__preview",{style:r({},n&&{"background-image":"url(".concat(n)}||{})},[].concat(o))},t.prototype._drawCover=function(e){var t=this,i=e.accept,n=e.id,o=e.value,r=e.removeIcon;return(0,s.el)("div.dhx_avatar__cover",[(0,s.el)("label.dhx_avatar__cover-upload",[(0,s.el)("input.dhx_avatar__cover-input",{_ref:"input",id:n,accept:i,type:"file",onchange:this._handlers.change,onfocus:this._handlers.onfocus,onblur:this._handlers.onblur,onkeydown:this._handlers.onkeydown}),(0,s.el)("i.dhx_avatar__cover-icon.dxi.dxi-vault")]),(null==o?void 0:o.src)&&r&&(0,s.el)("div.dhx_avatar__cover-remove",{onclick:function(){return t.clear()}},[(0,s.el)("i.dhx_avatar__cover-icon.dxi.dxi-delete-forever")])])},t.prototype._createFormData=function(e,t){var i=this.config.fieldName,n=this.config.params,o=new FormData;if(t)for(var r in t)o.append(r,t[r]);if(n)for(var r in n)o.append(r,n[r]);return o.append(i,e.file,e.file.name),o.append(i+"_fullname",e.path+e.file.name),o.append(i+"_id",e.id),o},t}(u.Label);t.Avatar=p},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Fieldset=void 0;var r=i(4),a=i(6),s=i(7),l=i(0),c=i(1),u=function(){function e(e){var t=this;this.events=new r.EventSystem,this.attachments=[],this.propsItem=["label","labelAlignment","align"],this.props=o(o([],s.baseProps,!0),this.propsItem,!0),this.config=n({disabled:!1,hidden:!1,width:"content",height:"content",labelAlignment:"left",label:"",css:""},e),(0,c.awaitRedraw)().then((function(){t.config.disabled&&t.disable()}))}return e.prototype.forEach=function(e,t){void 0===t&&(t=!1);for(var i=t?this.getTreeAttachments(this.getAttachments()):this.attachments,n=0;n<i.length;n++)e.call(this,i[n],n,i)},e.prototype.disable=function(){this.forEach((function(e){return"function"==typeof e.disable&&e.disable()})),this.config.disabled=this.cell.config.$disabled=!0,this.cell.paint()},e.prototype.enable=function(){var e;this.config.disabled=this.cell.config.$disabled=!1,this.attachments.every((function(e){return"function"!=typeof e.isDisabled||e.isDisabled()}))&&this.forEach((function(e){return"function"==typeof e.enable&&e.enable()})),(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.cell.paint()},e.prototype.isDisabled=function(){return!!this.config.disabled},e.prototype.show=function(){this.config.hidden&&(this.forEach((function(e){return"function"==typeof e.hide&&e.show()})),this.config.hidden=!1,this.cell.show())},e.prototype.hide=function(e){void 0===e&&(e=!1),this.config.hidden&&!e||(this.forEach((function(t){"function"==typeof t.hide&&("checkboxgroup"===t.config.type||"radiogroup"===t.config.type?t.hide(void 0,e):t.hide(e))})),this.config.hidden=!0,this.cell.hide())},e.prototype.isVisible=function(){return!this.config.hidden},e.prototype.setProperties=function(e){if(e&&!(0,l.isEmptyObj)(e)&&this.events.fire(a.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this.props.includes(t)&&(this.config[t]=e[t]);this.events.fire(a.ItemEvent.afterChangeProperties,[this.getProperties()])}},e.prototype.getProperties=function(){for(var e={},t=0,i=this.props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},e.prototype.destructor=function(){this.cell.hide(),this.events.clear(),this.attachments=[]},e.prototype.setCell=function(e){this.cell=e},e.prototype.getCell=function(){return this.cell},e.prototype.setAttachments=function(e){this.attachments=e},e.prototype.getAttachments=function(){return this.attachments},e.prototype.getTreeAttachments=function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];t.push(n),"fieldset"===n.config.type&&t.push.apply(t,n.getTreeAttachments(n.getAttachments()))}return t},e}();t.Fieldset=u},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ToggleGroup=void 0;var s=i(6),l=i(108),c=i(9),u=i(1),d=i(7),h=i(4),f=i(0),p=function(e){function t(t,i){var n=e.call(this,t,r({full:!1,multiselect:!1,disabled:!1,hidden:!1,width:"content",height:"content",gap:0,css:"",padding:"",items:[]},i))||this;n.events=new h.EventSystem,n.items=[],n.props=a(a([],d.baseProps,!0),["options","full","gap","multiselect"],!1),n.initView(),n.initHandlers();return n.mount(t,(0,u.create)({render:function(){return n.draw()}})),n}return o(t,e),t.prototype.setValue=function(e){var t;void 0===e&&(e={});var i=this.getValue(),n=Object.entries(e).every((function(e){var t=e[0];return!!e[1]==!!i[t]}));if(!n){if(!this.config.multiselection)for(var o=Object.entries(e).find((function(e){e[0];return e[1]})),a=this.getValue(),l=0,c=Object.entries(a);l<c.length;l++){var u=c[l],d=u[0],h=u[1],f=h;"string"==typeof h&&(f=""),"number"==typeof h&&(f=0),"boolean"==typeof h&&(f=!1),e[d]=o&&o[0]===d?o[1]:f}if(!this.events.fire(s.ItemEvent.beforeChange,[r(r({},this.getValue()),e)]))return!1;for(var p=function(e,i){null===(t=v.items.find((function(t){return t.config.id===e})))||void 0===t||t.setValue(!!i,!0)},v=this,g=0,_=Object.entries(e);g<_.length;g++){var m=_[g];p(m[0],m[1])}this.events.fire(s.ItemEvent.change,[this.getValue()])}},t.prototype.getValue=function(e){if(e){var t=this.items.find((function(t){return t.config.id===e}));if(t)return t.getValue()}var i={};return this.items.forEach((function(e){i[e.config.id]=e.getValue()})),i},t.prototype.isSelected=function(e){if(e){var t=this.items.find((function(t){return t.config.id===e}));if(t)return t.isSelected()}var i={};return this.items.forEach((function(e){i[e.config.id]=e.isSelected()})),i},t.prototype.show=function(e){var t=e&&this.items.find((function(t){return t.config.id===e}));t&&!t.config.hidden||!this.events.fire(s.ItemEvent.beforeShow,[this.getValue(),e])||(t?t.show():this.items.forEach((function(e){return e.show()})),this.config.hidden=!1,this.checkVisibleOrder(!!t),this.events.fire(s.ItemEvent.afterShow,[this.getValue(),e]))},t.prototype.hide=function(e,t){var i=e&&this.items.find((function(t){return t.config.id===e}));this.config.hidden&&!t||i&&i.config.hidden||!this.events.fire(s.ItemEvent.beforeHide,[this.getValue(),e,t])||(i?(i.hide(),this.config.hidden=this.items.every((function(e){return e.config.hidden}))):(this.items.forEach((function(e){return e.hide()})),this.config.hidden=!0),this.checkVisibleOrder(!!i),this.events.fire(s.ItemEvent.afterHide,[this.getValue(),e,t]))},t.prototype.isVisible=function(e){var t=this.items.find((function(t){return t.config.id===e}));return t?t.isVisible():!this.config.hidden},t.prototype.focus=function(e){var t=this;(0,u.awaitRedraw)().then((function(){var i=t.items.find((function(t){return t.config.id===e}))||t.items[0];i&&i.focus()}))},t.prototype.blur=function(){var e=this;(0,u.awaitRedraw)().then((function(){e.items.forEach((function(e){return e.blur()}))}))},t.prototype.disable=function(e){var t=e&&this.items.find((function(t){return t.config.id===e}));this.config.disabled||t&&t.config.disabled||(t?(t.disable(),this.config.disabled=this.items.every((function(e){return e.config.disabled}))):(this.items.forEach((function(e){return e.disable()})),this.config.disabled=!0),this.paint())},t.prototype.enable=function(e){var t,i=e&&this.items.find((function(t){return t.config.id===e}));!i&&!this.config.disabled||i&&!i.config.disabled||(i?null==i||i.enable():this.items.forEach((function(e){return e.enable()})),this.config.disabled=!1,(null===(t=this.parent)||void 0===t?void 0:t.isDisabled())&&this.parent.enable(),this.paint())},t.prototype.isDisabled=function(e){var t=this.items.find((function(t){return t.config.id===e}));return t?t.isDisabled():!!this.config.disabled},t.prototype.setProperties=function(e,t){var i=this.items.find((function(e){return e.config.id===t}));if(e&&!(0,f.isEmptyObj)(e)&&this.events.fire(s.ItemEvent.beforeChangeProperties,[r(r({},i?i.getProperties():this.getProperties()),e)])){if(i)i.setProperties(e);else for(var n in e)this.props.includes(n)&&(this.config[n]=e[n]);this.events.fire(s.ItemEvent.afterChangeProperties,[i?i.getProperties():this.getProperties()])}},t.prototype.getProperties=function(e){if(e){var t=this.items.find((function(t){return t.config.id===e}));if(t)return t.getProperties()}for(var i={},n=0,o=this.props;n<o.length;n++){var r=o[n];i[r]=this.config[r]}return i},t.prototype.destructor=function(){this.events.clear(),this.unmount()},t.prototype.initView=function(){var e,t=this;if(!(null===(e=this.config.options)||void 0===e?void 0:e.length))throw new Error("Check the configuration is correct");this.items=this.config.options.map((function(e,i){return e.id||(e.id=e.name||(0,f.uid)()),t.config.gap&&(e.$gap=i&&t.config.gap),new l.ToggleButton(null,r(r({},e),{$group:!0}))})),this.config.value&&this.setValue(this.config.value),this.checkVisibleOrder()},t.prototype.initHandlers=function(){var e=this;this.items.forEach((function(t){t.events.on(s.ItemEvent.keydown,(function(i){e.events.fire(s.ItemEvent.keydown,[i,t.config.id])})),t.events.on(s.ItemEvent.focus,(function(){e.events.fire(s.ItemEvent.focus,[e.getValue(),t.config.id])})),t.events.on(s.ItemEvent.blur,(function(){e.events.fire(s.ItemEvent.blur,[e.getValue(),t.config.id])})),t.events.on(s.ItemEvent.beforeChange,(function(i){var n;return"string"==typeof t.config.value&&(i=i?t.config.value:""),"number"==typeof t.config.value&&(i=i?t.config.value:0),e.setValue(((n={})[t.config.id]=i,n))}))}))},t.prototype.draw=function(){var e=this.config,t=e.hidden,i=e.id,n=e.name,o=e.full,r=e.gap,a=this.items.map((function(e){return(0,u.inject)(e.getRootView())}));return(0,u.el)("div.dhx_form-group.dhx_form-group--toggle-group.dhx_toggle-group",{"data-dhx-id":n||i,"aria-label":n||i,role:"group",class:(t?"dhx_form-group--hidden ":"")+(o?"dhx_toggle-group--full ":"")+(r?"dhx_toggle-group--segmented ":"")+(0,d.getFormItemCss)(this.config)},[].concat(a))},t.prototype.checkVisibleOrder=function(e){var t=this.items.map((function(e){return delete e.config.$extraCss,e})).filter((function(e){return!e.config.hidden}));if(t.length){var i=this.items.findIndex((function(e){return e.config.id===t[0].config.id})),n=this.items.findIndex((function(e){return e.config.id===t[t.length-1].config.id}));this.items[i].config.$extraCss="dhx_toggle--first ",this.items[n].config.$extraCss=this.items[n].config.$extraCss?this.items[n].config.$extraCss+"dhx_toggle--last ":"dhx_toggle--last "}e&&this.items.forEach((function(e){return e.paint()}))},t}(c.View);t.ToggleGroup=p},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ProForm=void 0;var r=i(96),a=i(6),s=i(18),l=i(261),c=i(7),u=function(e){function t(t,i){return e.call(this,t,i)||this}return o(t,e),t.prototype._initItemHandlers=function(t,i){var n=this;if(e.prototype._initItemHandlers.call(this,t,i),"container"===t.type){var o=this._attachments[i]=new l.Container(null,t);o.events.on(a.ItemEvent.beforeChangeProperties,(function(e){return n.events.fire(a.FormEvents.beforeChangeProperties,[i,e])})),o.events.on(a.ItemEvent.afterChangeProperties,(function(e){n._changeProps(i,e,o.config),n.events.fire(a.FormEvents.afterChangeProperties,[i,e]),n.layout.paint()})),o.events.on(a.ItemEvent.beforeHide,(function(e){if(!e)return n.events.fire(a.FormEvents.beforeHide,[i])})),o.events.on(a.ItemEvent.beforeShow,(function(){return n.events.fire(a.FormEvents.beforeShow,[i])})),o.events.on(a.ItemEvent.afterHide,(function(e){n.layout.getCell(i).hide(),!e&&n.events.fire(a.FormEvents.afterHide,[i])})),o.events.on(a.ItemEvent.afterShow,(function(){n.layout.getCell(i).show(),n.events.fire(a.FormEvents.afterShow,[i])}))}},t.prototype._initUI=function(e){var t=this._attachments={},i={padding:"8px"};this.config.css+=" dhx_form",this._createLayoutConfig(this.config,i),this.layout=new s.ProLayout(e,i),(0,c.setAttacments)(t,this.layout)},t}(r.Form);t.ProForm=u},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Container=void 0;var s=i(1),l=i(14),c=i(6),u=i(4),d=i(0),h=i(18),f=i(7),p=function(e){function t(t,i){var n=e.call(this,t,r({disabled:!1,hidden:!1,width:"content",height:"content",label:"",labelWidth:"",labelPosition:"top",hiddenLabel:!1,helpMessage:""},i))||this;if(n.events=new u.EventSystem,n._props=a(a([],f.baseProps,!0),["label","labelWidth","labelPosition","hiddenLabel","helpMessage"],!1),(0,d.isEmptyObj)(i))throw new Error("Check the configuration is correct");n.container&&n.container.destructor();var o={};for(var l in i)"id"!==l&&"type"!==l&&"name"!==l&&"width"!==l&&"height"!==l&&(n.config[l]=i[l],"validation"!==l&&(o[l]=i[l]));n.container=new h.Layout(null,{rows:[o]}),o.html&&n.container.attachHTML(o.html),n.paint();return n.mount(t,(0,s.create)({render:function(){return n._draw()}})),n}return o(t,e),t.prototype.destructor=function(){this.container.destructor()},t.prototype.attach=function(e){this.container.attach(e)},t.prototype.attachHTML=function(e){this.container.attachHTML(e)},t.prototype.show=function(){this.config.hidden&&this.events.fire(c.ItemEvent.beforeShow,[])&&(this.config.hidden=!1,this.events.fire(c.ItemEvent.afterShow,[]))},t.prototype.hide=function(e){void 0===e&&(e=!1),this.config.hidden&&!e||!this.events.fire(c.ItemEvent.beforeHide,[e])||(this.config.hidden=!0,this.events.fire(c.ItemEvent.afterHide,[e]))},t.prototype.isVisible=function(){return!this.config.hidden},t.prototype.disable=function(){this.config.disabled=!0,this.paint()},t.prototype.enable=function(){var e;this.config.disabled=!1,(null===(e=this.parent)||void 0===e?void 0:e.isDisabled())&&this.parent.enable(),this.paint()},t.prototype.isDisabled=function(){return!!this.config.disabled},t.prototype.setProperties=function(e){if(e&&!(0,d.isEmptyObj)(e)&&this.events.fire(c.ItemEvent.beforeChangeProperties,[this.getProperties()])){for(var t in e)this._props.includes(t)&&(this.config[t]=e[t]);this.events.fire(c.ItemEvent.afterChangeProperties,[this.getProperties()]),this.paint()}},t.prototype.getProperties=function(){for(var e={},t=0,i=this._props;t<i.length;t++){var n=i[t];e[n]=this.config[n]}return e},t.prototype._getRootView=function(){return this.container.getRootView()},t.prototype._draw=function(){var e=this.config,t=e.name,i=e.id;return(0,s.el)(".dhx_form-group.dhx_form-group--container",{class:(0,f.getFormItemCss)(this.config),"data-dhx-id":t||i},[this._drawLabel(),(0,s.inject)(this._getRootView())])},t}(l.Label);t.Container=p},function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.detectDrag=void 0,t.detectDrag=function(t){return new e((function(e){var i=function(){document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",i),e(!1)},n=setTimeout((function(){i()}),1e3),o=function(r){(Math.abs(r.pageX-t.pageX)>4||Math.abs(r.pageY-t.pageY)>4)&&(document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",i),clearTimeout(n),e({x:t.pageX,y:t.pageY}))};document.addEventListener("mousemove",o),document.addEventListener("mouseup",i)}))}}).call(this,i(15))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={popups:{},lastActive:null,freeCount:0,add:function(e,t){this.lastActive&&this.popups[this.lastActive].classList.remove("dhx_popup--window_active"),this.lastActive=e,t.classList.add("dhx_popup--window_active"),this.popups[e]=t},setActive:function(e){if(e!==this.lastActive){var t=this.popups[e];t&&(this.lastActive&&this.popups[this.lastActive].classList.remove("dhx_popup--window_active"),this.lastActive=e,t.classList.add("dhx_popup--window_active"))}},openFreeWindow:function(e){0===this.freeCount&&e.classList.add("dhx_window--no-scroll"),this.freeCount++},closeFreeWindow:function(e){this.freeCount--,0===this.freeCount&&e.classList.remove("dhx_window--no-scroll")}}},function(e,t,i){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ProWindow=void 0;var r=i(109),a=i(32),s=i(18),l=i(22),c=i(48),u=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype._startResize=function(e){var t,i,n=this,o=100|this.config.minWidth,r=100|this.config.minHeight,a=this._popup.offsetLeft,s=this._popup.offsetTop,l=this._popup.offsetWidth,u=this._popup.offsetHeight,d=this.getRootView().refs;switch(!0){case e.bottom&&e.left:i="dhx_window-body-pointer--bottom_left",t=d.bottomLeft;break;case e.bottom&&e.right:i="dhx_window-body-pointer--bottom_right",t=d.bottomLeft;break;case e.top&&e.left:i="dhx_window-body-pointer--top_left",t=d.bottomLeft;break;case e.top&&e.right:i="dhx_window-body-pointer--top-right",t=d.right;break;case e.top:i="dhx_window-body-pointer--top",t=d.bottomLeft;break;case e.bottom:i="dhx_window-body-pointer--bottom",t=d.bottomLeft;break;case e.left:i="dhx_window-body-pointer--left",t=d.bottomLeft;break;case e.right:i="dhx_window-body-pointer--right",t=d.right}t.el.classList.add("dhx_window-resizer--active"),this.config.node.classList.add("dhx_window--stop_selection"),this.config.node.classList.add(i);var h=function(t){var i=n._getContainerParams(),d=i.containerInnerWidth,h=i.containerInnerHeight,f=i.containerXOffset,p=i.containerYOffset,v={width:n._notInNode()?t.pageX-a:t.pageX-n.config.node.offsetLeft-a,height:n._notInNode()?t.pageY-s:t.pageY-n.config.node.offsetTop-s,left:n._notInNode()?t.pageX:t.pageX-n.config.node.offsetLeft,top:n._notInNode()?t.pageY:t.pageY-n.config.node.offsetTop};e.right&&(v.width<o?v.width=o:v.width>f+d-a&&(v.width=f+d-a),n._popup.style.width=v.width+"px"),e.bottom&&(v.height<r?v.height=r:v.height>p+h-s&&(v.height=p+h-s),n._popup.style.height=v.height+"px"),e.left&&(a+l-v.left<o&&(v.left=a+l-o),v.width=a+l-v.left,n.config.left=v.left,n._popup.style.left=v.left+"px",n._popup.style.width=v.width+"px"),e.top&&(v.top<p?v.top=p:s+u-v.top<r&&(v.top=s+u-r),v.height=s+u-v.top,n.config.top=v.top,n._popup.style.top=v.top+"px",n._popup.style.height=v.height+"px"),n.config.width=n._popup.offsetWidth,n.config.height=n._popup.offsetHeight,n.events.fire(c.WindowEvents.resize,[v,{left:a,top:s,height:u,width:l},e]),n.scrollView&&n.scrollView.update()},f=function(){document.removeEventListener("mouseup",f),document.removeEventListener("mousemove",h),n.config.node.classList.remove("dhx_window--stop_selection"),n.config.node.classList.remove(i),t.el.classList.remove("dhx_window-resizer--active")};document.addEventListener("mouseup",f),document.addEventListener("mousemove",h)},t.prototype._initUI=function(){var e=this,t=[],i=(this.config.header||this.config.title||this.config.closable||this.config.movable)&&!1!==this.config.header;i&&t.push({id:"header",height:"content",css:"dhx_window-header "+(this.config.movable?"dhx_window-header--movable":""),on:{mousedown:this.config.movable&&this._handlers.move,dblclick:this._handlers.headerDblClick}}),t.push({id:"content",css:i?"dhx_window-content":"dhx_window-content-without-header"}),this.config.footer&&t.push({id:"footer",height:"content",css:"dhx_window-footer"}),this.config.resizable&&t.push({id:"resizers",height:"content",css:"resizers"});var n=this._layout=new s.ProLayout(this._popup,{css:"dhx_window"+(this.config.modal?" dhx_window--modal":""),rows:t,on:{mousedown:this._handlers.setActive},id:this._uid}),o=this._layout.getCell("content");if(o&&o.scrollView&&(this.scrollView=o.scrollView),i){var r=this.header=new a.Toolbar;this.config.title&&(this.header.data.add({type:"title",value:this.config.title,id:"title",css:"title_max"}),this._popup.setAttribute("aria-label",this.config.title)),this.config.closable&&(this.header.data.add({type:"spacer"}),this.header.data.add({id:"close",type:"button",view:"link",size:"medium",color:"secondary",circle:!0,icon:"dxi dxi-close"}),r.events.on(l.NavigationBarEvents.click,(function(t,i){"close"===t&&e._hide(i)}))),n.getCell("header").attach(r)}if(this.config.footer){var c=this.footer=new a.Toolbar;n.getCell("footer").attach(c)}this.config.resizable&&n.getCell("resizers").attach((function(){return e._drawResizers()}))},t}(r.Window);t.ProWindow=u},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SearchForm=void 0;var o=i(47),r=i(32),a=i(5),s=i(22),l=i(0),c=i(2),u=i(1),d=i(48),h=i(13),f=function(){function e(e,t){this._events=e.events,this._spreadsheet=e,this._serviceEvents=t,this._grid=e._grid,this._modal=new o.Window({css:"dhx-spreadsheet-form-search-modal",height:56,left:window.innerWidth-385,viewportOverflow:!0,top:0,width:405}),this._toolbar=new r.Toolbar(null,{data:[{type:"input",value:"",placeholder:"Search",icon:"dxi dxi-magnify",id:"search",css:"search-input",width:200},{type:"title",value:"",id:"results"},{icon:"dxi dxi-chevron-up",id:"prev"},{icon:"dxi dxi-chevron-down",id:"next"},{type:"separator"},{icon:"dxi dxi-close",id:"close"}],css:"dhx-spreadsheet-form-search-form"}),this._modal.attach(this._toolbar),this._initHandlers()}return e.prototype.hide=function(){this._modal.isVisible()&&(this._modal.hide(),this._serviceEvents.fire(a.SpreadsheetServiceEvents.removeSearchCell))},e.prototype.research=function(e){e!==this._page&&(this._page=e),this._data=this._page.serialize().map((function(e){var t=e[0],i=e[1],o=e[2],r=o.value,a=o.format;return[t,i,n(n({},o),{value:(0,h.getFormattedValue)(r,a)})]})),this.search(this._searchText)},e.prototype.show=function(e){this.research(e),this._modal.show(),this._toolbar.setState({search:""}),this._toolbar.disable(["next","prev"])},e.prototype.isVisible=function(){return this._modal.isVisible()},e.prototype.search=function(e,t){var i=this;t&&this._page!==t&&this.research(t),this._toolbar.getState().search!==e&&(this._searchText=e,this._toolbar.setState({search:e})),this._filtered=[],e&&(this._filtered=this._data.filter((function(t){var n=t[0],o=(t[1],t[2].value);return!i._grid.isRowHidden(n+1)&&(!e||(0,l.isDefined)(o)&&"".concat(o).toLowerCase().includes(e.toLowerCase()))})));var n=this._filtered.map((function(e){return(0,c.getCellNameById)(e[0]+1,e[1]+1)}));return this._modal.isVisible()?(n.length?this._serviceEvents.fire(a.SpreadsheetServiceEvents.setSearchedArray,[n]):this._serviceEvents.fire(a.SpreadsheetServiceEvents.removeSearchCell),this._stepIndex=0,this.next(),e?this._toolbar.enable(["next","prev"]):(this._toolbar.disable(["next","prev"]),this._serviceEvents.fire(a.SpreadsheetServiceEvents.removeSearchCell)),n):n},e.prototype.next=function(){var e=this._filtered.length;this._toolbar.data.update("results",{value:"".concat(e?this._stepIndex+1:0,"/").concat(e)}),this._updateWindowPos(),e&&(this._stepIndex++,this._stepIndex>=e&&(this._stepIndex=0),this._serviceEvents.fire(a.SpreadsheetServiceEvents.setSearchedCell,[this._stepIndex]))},e.prototype.prev=function(){var e=this._filtered.length;this._toolbar.data.update("results",{value:"".concat(e?this._stepIndex+1:0,"/").concat(e)}),this._updateWindowPos(),e&&(this._stepIndex--,this._stepIndex<0&&(this._stepIndex=e-1),this._toolbar.data.update("results",{value:"".concat(this._stepIndex+1,"/").concat(e)}),this._serviceEvents.fire(a.SpreadsheetServiceEvents.setSearchedCell,[this._stepIndex]))},e.prototype.destructor=function(){document.removeEventListener("keydown",this._keyHandler)},e.prototype._updateWindowPos=function(){var e=this;(0,u.awaitRedraw)().then((function(){var t=e._modal.getSize();e._modal.setPosition(window.innerWidth-t.width-1,0)}))},e.prototype._keyHandler=function(e){if("Escape"===e.code&&(e.preventDefault(),this.hide()),"KeyG"===e.code){var t=e.ctrlKey||e.metaKey;t&&!e.shiftKey&&(e.preventDefault(),this.next()),t&&e.shiftKey&&(e.preventDefault(),this.prev())}},e.prototype._initHandlers=function(){var e=this;this._toolbar.events.on(s.NavigationBarEvents.click,(function(t){switch(t){case"prev":e.prev();break;case"close":e.hide();break;case"next":e.next()}})),this._toolbar.events.on(s.NavigationBarEvents.input,(function(t,i){e._searchText=i,e.search(i)})),this._modal.events.on(d.WindowEvents.afterShow,(function(){(0,u.awaitRedraw)().then((function(){var t=e._toolbar.getRootNode().querySelector("input");null==t||t.focus(),null==t||t.setAttribute("autocomplete","off"),e._toolbar.select("search")}))})),document.addEventListener("keydown",this._keyHandler.bind(this)),this._events.on(a.SpreadsheetEvents.afterSheetChange,(function(){e.isVisible()&&e.research(e._spreadsheet._activePage)})),this._events.on(a.SpreadsheetEvents.afterAction,(function(){e.isVisible()&&e.research(e._spreadsheet._activePage)}))},e}();t.SearchForm=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkForm=void 0;var n=i(59),o=i(47),r=i(12),a=i(10),s=i(5),l=i(32),c=i(2),u=i(22),d=i(19),h=i(1),f=i(110),p=function(){function e(e,t,i,s){this._set=t,this._events=i,this._store=s,this._grid=e,this._modal=new o.Window({title:"".concat(r.default.insert," ").concat(r.default.link.toLowerCase()),movable:!0,closable:!0,css:"dhx-spreadsheet-form-link",height:300,width:300}),this._form=new n.Form("",{padding:15,rows:[{name:"text",type:"input",label:r.default.text,labelPosition:"top",width:270,placeholder:r.default.text},{name:"href",type:"input",label:r.default.link,labelPosition:"top",width:270,placeholder:r.default.link},{align:"end",css:"dhx-button-wrapper",cols:[{type:"button",text:r.default.cancel,id:"cancel",view:"link"},{type:"button",text:r.default.save,id:"save"}]}]}),this._popup=new a.Popup({css:"dhx-spreadsheet-form-link dhx_editor-popup"}),this._toolbar=new l.Toolbar(void 0,{css:"dhx_link-toolbar",data:[{type:"customHTML",html:"",css:"dhx_spreadsheet_link href-link",id:"link"},{icon:"dxi dxi-file-outline",tooltip:r.default.copy.toLowerCase(),circle:!0,id:"copy"},{icon:"dxi dxi-pencil",tooltip:r.default.edit.toLowerCase(),circle:!0,id:"edit"},{icon:"dxi dxi-link-variant-off",tooltip:"".concat(r.default.remove," ").concat(r.default.link).toLowerCase(),circle:!0,id:"unlink"}]}),this._modal.attach(this._form),this._popup.attach(this._toolbar),this._initHandlers()}return e.prototype.hide=function(){this._modal.isVisible()&&this._modal.hide(),this._debounds=!1,this._events.fire(s.SpreadsheetEvents.afterPopupHide)},e.prototype.isVisible=function(){return this._modal.isVisible()},e.prototype.destructor=function(){var e,t,i,n;null===(e=this._modal)||void 0===e||e.destructor(),null===(t=this._form)||void 0===t||t.destructor(),null===(i=this._popup)||void 0===i||i.destructor(),null===(n=this._toolbar)||void 0===n||n.destructor()},e.prototype.show=function(e,t){var i=this;this._modal.isVisible()||this._modal.show(),this._cell=e;var n=t.value,o=t.link||{},r=o.href,a=o.text,s=!r&&(0,c.isURL)(n)?n:r;this._form.setValue({text:a||n||"",href:s||""}),this.toogleSaveButton((null==s?void 0:s.toString())||""),(0,h.awaitRedraw)().then((function(){i.hideInfo()}))},e.prototype.showInfo=function(e,t){if(!this._popup.isVisible()){this._cell=e,this._cellMeta=t;var i=t.link,n=t.value,o=t.locked,r=void 0!==o&&o,a=null==i?void 0:i.href;if(!a)a="".concat(n).split(" ").find((function(e){return(0,c.isURL)(e)}));this.toogleLocked(r),a&&(this._toolbarLink=a,this._toolbar.data.update("link",{html:'<a href="'.concat(a,'" target="blank">').concat(a,"</a>")}),this._popup.show((0,c.getCellNode)(e,this._grid,this._store,!0)))}},e.prototype.hideInfo=function(){this._popup.isVisible()&&(this._popup.hide(),this._toolbarLink=null,this._cellMeta=null,this._events.fire(s.SpreadsheetEvents.afterPopupHide))},e.prototype._keyHandler=function(e){var t=this;"Escape"===e.code&&(e.preventDefault(),this.hide()),"Enter"===e.code&&(e.preventDefault(),this._form.blur("href"),this._form.blur("text"),this._debounds||(this._debounds=setTimeout((function(){t._save(),t._debounds=!1}),200)))},e.prototype._save=function(){var e=this._form.getValue(),t=e.text,i=e.href;(i=f.sanitize(i)).startsWith("http")||(i="http://".concat(i),this._form.setValue({href:i})),this._form.validate()?(this._set(this._cell,i?{text:t,href:i}:void 0),this.hide()):this._form.setFocus("href")},e.prototype.toogleSaveButton=function(e){var t=this._form.getItem("save");e?t.enable():t.disable()},e.prototype.toogleLocked=function(e){e?this._toolbar.disable(["edit","unlink"]):this._toolbar.enable(["edit","unlink"])},e.prototype._initHandlers=function(){var e=this;this._modal.events.on(a.PopupEvents.afterShow,(function(){e._form.setFocus("href")})),this._form.events.on(n.FormEvents.click,(function(t){if("save"===t)e._save();else e.hide()})),this._form.events.on("keydown",function(e){this._keyHandler(e)}.bind(this)),this._form.getItem("href").events.on("input",(function(t){e.toogleSaveButton(t)})),this._toolbar.events.on(u.NavigationBarEvents.click,(function(t){switch(t){case"copy":window.clipboardData?window.clipboardData.setData("text/plain",e._toolbarLink):navigator.clipboard.writeText(e._toolbarLink),(0,d.message)({text:r.default.linkCopied,css:"dhx_message--success",expire:2e3});break;case"edit":e.show(e._cell,e._cellMeta);break;case"unlink":e._set(e._cell)}e.hideInfo()}))},e}();t.LinkForm=p},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.FilterForm=void 0;var r=i(59),a=i(5),s=i(12),l=i(10),c=i(2),u=i(3),d=i(29),h=i(0),f=i(13),p=i(1),v=function(){function e(e,t,i,n){this._grid=e,this._set=t,this._store=n,this._serviceEvents=i,this._popup=new l.Popup({css:"dhx_editor-popup dhx_filter-popup"}),this._initServiceHandlers()}return e.prototype.hide=function(){var e=this;this._popup.isVisible()&&(this._popup.hide(),(0,p.awaitRedraw)().then((function(){return e._form.destructor()})))},e.prototype.show=function(e,t,i,r){var a=this,l=(0,u.locateNode)(t,"data-dhx-col-id");this._initForm();var f=i.cell,p=i.rules,v=(0,c.getCellIds)(f),g=v.start,_=v.end,m=(0,c.getCellIds)(e),y=m.row,b=m.col;this._filter=n(n({},i),{rules:o([],i.rules,!0)}),this._ruleIndex=b-g.col;var w=p[this._ruleIndex],x=y+1,C=r.getCellRange(x,b,_.row,b).map((function(e,t){e=e||{};var i=(0,h.isDefined)(e.value)?(0,c.getCellNameByIndex)(x+t,b+1):"empty";return n(n({value:s.default.blank,isEmpty:!(0,h.isNumeric)(e.value)&&!e.value},e),{id:i})})),E=this._store.getPageMeta(r).filteredRows,S={};this._hidden=[],this._data=[];var I=[],k=w.condition,O=w.exclude;C.forEach((function(e,t){var i=E[t+x],o=e||{id:"empty"},r=o.value,s=o.id,l=o.format,c=(0,h.isDefined)(O)&&(null==O?void 0:O.some((function(t){return(null==l?void 0:l.id)&&(t="object"==typeof t?(0,d.getExcelDateFromJs)(t):(0,d.getExcelDateFromString)(t,l)),t===r||null===t&&e.isEmpty})));if(i&&!c||I.includes(r))r&&a._hidden.push(e);else{var u=!c;I.push(r),S[s]=u,a._data.push(n(n({},e),{checked:u}))}})),this._setCheckboxes();var M=this._controls,R=M.input,A=M.condition,P=M.checkboxes,T=M.search;if(P.setValue(S),this._checkboxesState=P.getValue(),R.hide(),R.setValue(""),T.setValue(""),null==k?void 0:k.factor){var D=k.factor,F=k.value;this._updateStateByCondition(D,F)}else A.setValue("1"),R.hide();this._popup.show(l),this._initValue=this._form.getValue()},e.prototype.apply=function(){var e,t=this,i=this._form.getValue(),n=i.condition,o=i.value,r=i.max,s=[];Object.values(this._checkboxesState).findIndex((function(e){return!e}))>-1&&Object.keys(this._checkboxesState).forEach((function(e){if(!t._checkboxesState[e]){var i=t._data.find((function(t){return t.id==e})).value;s.push("empty"!==e&&(0,h.isDefined)(i)?i:null)}}));var l=o;if(1!==n){switch(n){case a.FilterConditions.tdc:o||(l=null);break;case a.FilterConditions.d:case a.FilterConditions.da:case a.FilterConditions.db:var c=this._controls.datepicker.getValue(!0);c&&(l=(0,d.getExcelDateFromJs)(c));break;case a.FilterConditions.ib:case a.FilterConditions.inb:"number"==typeof o&&"number"==typeof r&&(l=[Math.min(o,r),Math.max(o,r)]);break;case a.FilterConditions.e:case a.FilterConditions.ne:l=!0;break;default:l=o}(0,h.isDefined)(l)&&(e={factor:n,value:l})}(0,h.compare)(this._initValue,i)||(this._filter.rules[this._ruleIndex]={condition:e,exclude:s},this._set(this._filter.cell,this._filter.rules)),this.hide()},e.prototype._initForm=function(){this._form=new r.Form("",{css:"dhx_spreadsheet_filter-popup",rows:[{name:"condition",type:"combo",label:"".concat(s.default.condition,":"),labelPosition:"top",readonly:!0,height:70,data:o([{value:s.default.none,id:1}],Object.keys(a.FilterConditions).map((function(e){return{value:s.default[e],id:e}})),!0)},{name:"value",type:"input",placeholder:s.default.value,height:32},{name:"date",type:"datepicker",placeholder:s.default.date,height:32},{type:"text",name:"and",value:s.default.and,height:32},{name:"max",type:"input",inputType:"number",height:32,placeholder:s.default.value},{type:"spacer",height:10},{type:"text",css:"dhx-filter-label",height:32,value:"".concat(s.default.values,":")},{type:"button",name:"unselect",view:"flat",full:!0,css:"filter-unselect",text:s.default.unselectAll},{type:"button",name:"select",view:"flat",full:!0,hidden:!0,text:s.default.selectAll},{type:"spacer",height:5},{type:"input",name:"search",height:50,icon:"dxi dxi-magnify",autocomplite:!0},{css:"dhx-filter-checkbox-group",rows:[{name:"checkboxes",type:"checkboxGroup",options:{rows:[]}}]},{type:"spacer",height:15},{css:"buttons-wrapper",cols:[{name:"cancel",type:"button",view:"link",text:s.default.cancel},{name:"apply",type:"button",view:"flat",text:s.default.apply}]}]});var e=this._form.getItem("select"),t=this._form.getItem("unselect"),i=this._form.getItem("checkboxes"),n=this._form.getItem("condition"),l=this._form.getItem("value"),c=this._form.getItem("search"),u=this._form.getItem("date");this._controls={unselect:t,select:e,checkboxes:i,condition:n,input:l,search:c,datepicker:u},this._checkboxesState={},this._popup.attach(this._form),this._initHandlers()},e.prototype._updateStateByCondition=function(e,t){var i=this._controls,n=i.input,o=i.condition,r=i.datepicker;o.setValue(e);var s=this._form.getItem("max"),l=this._form.getItem("and");switch(s.hide(),l.hide(),r.hide(),n.setValue(t),e){case a.FilterConditions.d:case a.FilterConditions.da:case a.FilterConditions.db:r.show(),r.setValue((0,h.isNumeric)(t)?(0,d.excelDateToJSDate)(t):""),n.hide();break;case a.FilterConditions.e:case a.FilterConditions.ne:n.hide();break;case a.FilterConditions.tc:case a.FilterConditions.tdc:case a.FilterConditions.ts:case a.FilterConditions.te:case a.FilterConditions.tex:n.setProperties({inputType:"text"}),n.setValue(t),n.show();break;case a.FilterConditions.ib:case a.FilterConditions.inb:l.show(),s.setValue(null==t?void 0:t[1]),s.show();case a.FilterConditions.gt:case a.FilterConditions.geq:case a.FilterConditions.lt:case a.FilterConditions.leq:case a.FilterConditions.eq:case a.FilterConditions.neq:n.setProperties({inputType:"number"}),n.setValue(t instanceof Array?t[0]:t),n.show();break;default:n.hide()}},e.prototype.applyFilter=function(e){var t=this,i=e.getMeta(),o=i.filter,r=i.filteredRows,s=[];if((void 0===r?[]:r).forEach((function(e,i){e&&t._showRow(i)})),!o)return e.setMeta({filteredRows:[]}),this._updateGridData(s),void this._grid.paint();for(var l=o.cell,u=o.rules,p=(0,c.getCellIds)(l),v=p.start,g=p.end,_=0,m=g.col,y=g.row,b=v.row+1,w=function(i){var o=u[_],r=o.exclude,l=o.condition;_++;var c=e.getCellRange(b,i,y,i).map((function(e,t){var i=t+b+1;return n(n({},e),{rowId:i})}));if(r&&(c=c.filter((function(e,i){var o=n(n({},e),{value:(0,h.isDefined)(null==e?void 0:e.value)?e.value:null}),a=o.format,l=r.some((function(e){return"date"===(null==a?void 0:a.id)&&(e="object"==typeof e?(0,d.getExcelDateFromJs)(e):(0,d.getExcelDateFromString)(e,a)),o.value===e})),c=i+b+1;return l&&(t._hideRow(c),s[c-1]=!0),!l}))),l){var p=l.factor,v=l.value;c.forEach((function(e){var i,n=e||{},o=n.value,r=n.format,l=n.rowId,c=(0,f.getFormattedValue)(o,r);switch(p){case a.FilterConditions.d:case a.FilterConditions.da:case a.FilterConditions.db:v="object"==typeof v?(0,d.getExcelDateFromJs)(v):(0,d.getExcelDateFromString)(v,r),c=o}switch(p){case a.FilterConditions.e:i=(0,h.isDefined)(o);break;case a.FilterConditions.ne:i=!(0,h.isDefined)(o);break;case a.FilterConditions.tc:i=v&&!o||o&&!"".concat(c).toLowerCase().includes(v.toLowerCase());break;case a.FilterConditions.tdc:i=o&&"".concat(c).toLowerCase().includes(v.toLowerCase());break;case a.FilterConditions.ts:i=o&&!"".concat(c).toLowerCase().startsWith(v.toLowerCase());break;case a.FilterConditions.te:i=o&&!"".concat(c).toLowerCase().endsWith(v.toLowerCase());break;case a.FilterConditions.tex:i=(0,h.isNumeric)(c)||"".concat(c)!==v;break;case a.FilterConditions.d:i=!(0,h.isDefined)(o)||!(0,h.isNumeric)(o)||Math.trunc(o)!==Math.trunc(v);break;case a.FilterConditions.db:i=!(0,h.isDefined)(o)||!(0,h.isNumeric)(o)||Math.trunc(o)>=Math.trunc(v);break;case a.FilterConditions.da:i=!(0,h.isDefined)(o)||!(0,h.isNumeric)(o)||Math.trunc(o)<=Math.trunc(v);break;case a.FilterConditions.gt:i=!(0,h.isDefined)(o)||!(0,h.isNumeric)(o)||o<=v;break;case a.FilterConditions.lt:i=!(0,h.isDefined)(o)||!(0,h.isNumeric)(o)||o>=v;break;case a.FilterConditions.geq:i=!(0,h.isDefined)(o)||!(0,h.isNumeric)(o)||o<v;break;case a.FilterConditions.leq:i=!(0,h.isDefined)(o)||!(0,h.isNumeric)(o)||o>v;break;case a.FilterConditions.eq:i=!(0,h.isDefined)(o)||!(0,h.isNumeric)(o)||o!==v;break;case a.FilterConditions.neq:i=!(0,h.isDefined)(o)||!(0,h.isNumeric)(o)||o===v;break;case a.FilterConditions.ib:i=!(0,h.isDefined)(o)||!(0,h.isNumeric)(o)||o<v[0]||o>v[1];break;case a.FilterConditions.inb:i=!(0,h.isDefined)(o)||!(0,h.isNumeric)(o)||o>=v[0]&&o<=v[1]}i&&!t._grid.isRowHidden(l)&&(t._hideRow(l),s[l-1]=!0)}))}},x=v.col;x<=m;x++)w(x);e.setMeta({filteredRows:s}),this._updateGridData(s),this._grid.paint()},e.prototype._showRow=function(e){this._store.getPageMeta().rows[e].hidden||this._grid.data.update("".concat(e+1),{hidden:!1},!0)},e.prototype._hideRow=function(e){this._store.getPageMeta().rows[e-1].hidden||this._grid.data.update(e,{hidden:!0},!0)},e.prototype._updateGridData=function(e){this._grid.data.filter((function(t){return!e[t.id-1]}))},e.prototype._updateButton=function(e){var t=this._controls,i=t.select,n=t.unselect;(0,p.awaitRedraw)().then((function(){e?(n.show(),i.hide()):(n.hide(),i.show())}))},e.prototype._setCheckboxes=function(e){void 0===e&&(e="");var t=this._data.filter((function(t){var i=t.value,n=t.format;return!e||"".concat((0,f.getFormattedValue)(i,n)).toLocaleLowerCase().includes(e.toLocaleLowerCase())})).map((function(e){var t=e.value,i=e.checked,n=e.id,o=e.format;return{type:"checkbox",text:(0,f.getFormattedValue)(t,o),id:n,checked:i}}));this._form.getItem("checkboxes").setProperties({options:{rows:o([],t,!0)}})},e.prototype._selectAll=function(e){var t=this,i=this._controls.checkboxes;Object.keys(this._checkboxesState).forEach((function(i){return t._checkboxesState[i]=e})),i.setValue(this._checkboxesState),this._updateButton(e)},e.prototype._initHandlers=function(){var e=this,t=this._controls,i=t.condition,o=t.search,a=t.checkboxes,s=t.datepicker,c=i.getWidget();this._form.events.on(r.FormEvents.change,(function(t,i){switch(t){case"condition":e._updateStateByCondition(i);break;case"checkboxes":e._checkboxesState=n(n({},e._checkboxesState),i);var o=Object.values(e._checkboxesState).findIndex((function(e){return!e}));e._updateButton(o<0)}})),o.events.on("input",(function(t){e._setCheckboxes("".concat(t)),a.setValue(e._checkboxesState)})),this._form.events.on(r.FormEvents.click,(function(t){switch(t){case"unselect":case"select":e._selectAll("select"===t);break;case"apply":e.apply();break;case"cancel":e.hide()}}));var u=c.popup.getContainer(),d=s._popup.getContainer();this._popup.events.on(l.PopupEvents.beforeHide,(function(e,t){if(e){var i=(null==t?void 0:t.target).closest(".dhx_popup-content");if(e&&(i===u||i===d))return!1}}))},e.prototype._initServiceHandlers=function(){var e=this;this._serviceEvents.on(a.SpreadsheetServiceEvents.applyFilter,(function(t){e.applyFilter(t)}))},e}();t.FilterForm=v},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Merge=void 0;var n=i(5),o=i(2),r=i(12),a=function(){function e(e,t,i){this._callAction=e,this._isLocked=i,this._store=t}return e.prototype.doAction=function(e,t){if(this.checkBeforeMerge(e,t)){var i=n.Actions[t?"unmerge":"merge"];this._callAction({action:i,groupAction:i,cell:e})}},e.prototype.checkBeforeMerge=function(e,t){var i=this;if(!(0,o.isRangeId)(e)&&!t)return!1;var n=this._store.getPageMeta(),a=n.freezedCol,s=n.freezedRow,l=n.filteredRows,c=void 0===l?[]:l;if((a||s)&&!(0,o.checkSpanByNames)(e,a,s))return(0,o.showAlert)(r.default.spanMergeAlert),!1;var u=(0,o.getCellsArray)(e);if(u.find(this._isLocked))return(0,o.showAlert)(r.default[t?"spanUnmergeLockedError":"spanMergeLockedError"]),!1;if(c.length){var d=u.find((function(e){var t=i._store.getCellIndex(e).row;return c[t]}));if(d)return(0,o.showAlert)(r.default.spanOverFilteredRow),!1}return!0},e.prototype.checkBeforeAction=function(e,t,i,a){var s=t.getMeta(),l=s.merged,c=s.rows,u=s.cols,d=e;if(a.action===n.Actions.toggleFreeze&&!(0,o.isRangeId)(e)){var h=this._store.getCellIndex(e),f=h.row,p=h.col,v=(0,o.getCellNameByIndex)("row"===a.target?f:0,"row"===a.target?1:p),g=(0,o.getCellNameByIndex)("row"===a.target?f:c.length-1,"row"===a.target?u.length:p);d="".concat(v,":").concat(g)}var _=(0,o.getCellsArray)(d),m=new Set;if(_.forEach((function(e){var i=(0,o.getCellInfo)(e,t),n=(0,o.isCellSpaned)(i,l);n&&m.add(n)})),m.size&&a.action!==n.Actions.toggleFreeze){var y=r.default.mergeAlertMessage.split("$action");return(0,o.showAlert)("".concat(y[0]," ").concat(i.toLowerCase()," ").concat(y[1]||"")),!1}if(m.size&&a.action===n.Actions.toggleFreeze){var b=a.target,w=this._store.getRangeIndexes(e).end,x=Array.from(m).find((function(e){var t=e.cell,i=t.row,n=t.column,o=e.rowspan,r=e.colspan;return"row"===b?i+o>w.row:"col"===b?n+r>w.col:void 0}));if(x){y=r.default.mergeAlertMessage.split("$action");return(0,o.showAlert)("".concat(y[0]," ").concat(i.toLowerCase()," ").concat(y[1]||"")),!1}}return!0},e}();t.Merge=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Store=void 0;var n=i(24),o=i(2),r=function(){function e(){this.dataStore=new n.DataStore({strict:!1}),this.dataStore.addPage("sheet1"),this.math=this.dataStore.getStore(),this.activePage=this.dataStore.getPage("sheet1")}return e.prototype.getValue=function(e,t,i){if(void 0===t&&(t=!1),!e)return"";var n=this._getPageAndCell(e),r=n[0],a=n[1],s=i||r;if((0,o.isRangeId)(a)){var l=[];return this.eachCell((function(e){var i=(0,o.getCellIds)(e);l.push(s.getValue(i.row,i.col,t))}),a),l}var c=(0,o.getCellIds)(a);return s.getValue(c.row,c.col,t)},e.prototype.getCell=function(e,t){var i=this._getPageAndCell(e);t=t||i[0];var n=i[1];if(!(0,o.isRangeId)(n)){var r=(0,o.getCellIds)(n),a=r.row,s=r.col;return t.getCell(a,s)||{}}},e.prototype.getPage=function(e){return this.dataStore.getPage(e)||this.activePage},e.prototype.getPageMeta=function(e){return void 0===e&&(e=this.activePage),e.getMeta()},e.prototype.setActivePage=function(e){this.activePage=this.dataStore.getPage(e)},e.prototype.getSelectedCell=function(e){void 0===e&&(e=this.activePage);var t=e.getMeta().selectedCells;if(t&&t.length)return t.join(",")},e.prototype.getFocusedCell=function(e){void 0===e&&(e=this.activePage);var t=e.getMeta().focusedCell;if(t&&t.cell)return t.cell},e.prototype.serialize=function(){},e.prototype.eachCell=function(e,t){if(t)for(var i=0,n=(0,o.getCellsArray)(t);i<n.length;i++){var r=n[i],a=(0,o.getCellIds)(r),s=a.row,l=a.col;e(r,this.activePage.getValue(s,l))}},e.prototype.getCellIndex=function(e,t){void 0===t&&(t=!1);var i=e.match(/([a-zA-Z]*)(\d*)/);if(i&&i[1]&&i[2]){var n=parseInt(i[2],10)-1;return{col:(0,o.getNumberFromLetter)(i[1]),row:t?n:this._findCellIndexWithHiddenRows(n)}}},e.prototype.getRangeIndexes=function(e,t){var i,n=this;return void 0===t&&(t=!1),(i=e.includes(":")?e.split(":").map((function(e){return n.getCellIndex(e,t)})):e.split(",").map((function(e){return n.getCellIndex(e,t)})))[1]||(i[1]=i[0]),{start:{row:Math.min(i[0].row,i[1].row),col:Math.min(i[0].col,i[1].col)},end:{row:Math.max(i[0].row,i[1].row),col:Math.max(i[0].col,i[1].col)}}},e.prototype._findCellIndexWithHiddenRows=function(e){for(var t,i=0,n=0;i<e;){(null===(t=this.activePage.getRowMeta(i))||void 0===t?void 0:t.hidden)||n++,i++}return n},e.prototype._getPageAndCell=function(e){var t=this.activePage,i=e;if(e.includes("!")){var n=e.split("!");i=n[1],t=this.dataStore.getPage(n[0])}return[t,i.toUpperCase()]},e}();t.Store=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sheets=void 0;var n=i(47),o=i(5),r=i(0),a=i(271),s=i(22),l=i(12),c=i(3),u=i(93),d=i(94),h=i(2),f=i(1),p=i(16),v=i(48),g=function(){function e(e){var t=e.store,i=e.events,n=e.serviceEvents,o=e.config;this._store=t,this.events=i,this._dataStore=t.dataStore,this._serviceEvents=n;var s=o.multiSheets,l=o.readonly;this._multiSheets=s,this.readonly=l,this.tabbar=new a.Toolbar(null,{css:"dhx-sheets-toolbar"}),this.sheets=this.tabbar.data,s&&!l&&this.sheets.add({icon:"dxi dxi-plus",id:"add-sheet"},0),this.sheets.add({id:(0,r.uid)(),value:"sheet1"}),this.contextMenu=new u.ContextMenu,this.contextMenu.data.parse((0,d.getSheetsContextMenuStruct)(s)),this._initHandlers()}return e.prototype.parseSheets=function(e){var t=this;this.sheets.forEach((function(e){"add-sheet"!==e.id&&(t._dataStore.removePage(e.value),t.sheets.remove(e.id))})),e.forEach((function(e){var i=e.name||t._generateNewSheetName(),n=t._dataStore.addPage(i),o=t.sheets.add({id:e.id,value:i});n.setMeta({name:i,id:o,merged:new Map})}))},e.prototype.add=function(e){var t;if(this._multiSheets){var i=e;if(i||(i=this._generateNewSheetName()),this.events.fire(o.SpreadsheetEvents.beforeSheetAdd,[i]))return this._serviceEvents.fire(o.SpreadsheetServiceEvents.callAction,[{val:i,action:o.Actions.addSheet,groupAction:o.Actions.groupAction,sheets:this.sheets,prev:this.tabbar.getSelected()[0]}]),null===(t=this.sheets.find((function(e){return e.value===i})))||void 0===t?void 0:t.id}},e.prototype.remove=function(e){var t=this.get(e);!t||!this._multiSheets||this._multiSheets&&2===this.sheets.getLength()||this.events.fire(o.SpreadsheetEvents.beforeSheetRemove,[t])&&(this._serviceEvents.fire(o.SpreadsheetServiceEvents.callAction,[{action:o.Actions.deleteSheet,groupAction:o.Actions.groupAction,sheets:this.sheets,prev:t.id,val:t.name}]),this.events.fire(o.SpreadsheetEvents.afterSheetRemove,[t]))},e.prototype.getAll=function(){var e=[];return this.sheets.forEach((function(t){"add-sheet"!==t.id&&e.push({name:t.value,id:t.id})})),e},e.prototype.getActive=function(){return this._activeSheet},e.prototype.clear=function(e){var t=(0,r.isDefined)(e)?this.get(e):this.getActive();this.events.fire(o.SpreadsheetEvents.beforeSheetClear,[t])&&(this._serviceEvents.fire(o.SpreadsheetServiceEvents.callAction,[{val:t.name,action:o.Actions.clearSheet,groupAction:o.Actions.groupAction}]),this.events.fire(o.SpreadsheetEvents.afterSheetClear,[t]))},e.prototype.setActive=function(e){var t,i=this,n=this.sheets.getItem(e);if(n&&this.events.fire(o.SpreadsheetEvents.beforeSheetChange,[this._activeSheet])){var r=this._store.activePage;null==r||r.setMeta({scroll:scroll});var a=this._store.getPageMeta(r),s=(null===(t=a.contextPage)||void 0===t?void 0:t.page)?this._store.getPageMeta(a.contextPage.page).editLinePos:a.editLinePos,l=this._activeSheet?this._activeSheet.name:null,c=this._store.getFocusedCell(),u=(0,h.getCellInfo)(c,r);u&&u.edited&&!s&&this._endEdit(),this._store.setActivePage(n.value);var d=this._store.activePage;this._activeSheet={name:n.value,id:e},this.tabbar.select(e),d&&!a.id&&d.setMeta({id:e});var p=r.getMeta().contextPage;s&&!p||s&&p.page!==d?(p=p||{page:r,cell:c,pageName:l},r.setMeta({contextPage:null}),d.setMeta({selectedCells:null,focusedCell:null,contextPage:p})):s&&p&&p.page===d?(r.setMeta({contextPage:null}),(0,f.awaitRedraw)().then((function(){i._serviceEvents.fire(o.SpreadsheetServiceEvents.editLineFocus,[s])}))):(this._serviceEvents.fire(o.SpreadsheetServiceEvents.setCellMath),p=null,r.setMeta({contextPage:p})),(null==r?void 0:r.getMeta().filter)!==this._store.getPageMeta(d).filter&&this._serviceEvents.fire(o.SpreadsheetServiceEvents.applyFilter,[d]),this.events.fire(o.SpreadsheetEvents.afterSheetChange,[this._activeSheet]),this._serviceEvents.fire(o.SpreadsheetServiceEvents.redraw),(0,f.awaitRedraw)().then((function(){i._serviceEvents.fire(o.SpreadsheetServiceEvents.updateGridSizes),i._serviceEvents.fire(o.SpreadsheetServiceEvents.updateGridState),i._store.getSelectedCell()||p||i._serviceEvents.fire(o.SpreadsheetServiceEvents.setSelectedCell,["A1"]),i._serviceEvents.fire(o.SpreadsheetServiceEvents.resetFocus)}))}},e.prototype.get=function(e){return this.getAll().find((function(t){return t.id===e}))},e.prototype.destructor=function(){this.tabbar.destructor(),this.contextMenu.destructor()},e.prototype._generateNewSheetName=function(){var e=this.sheets.findAll((function(e){return e.value&&e.value.startsWith("sheet")}));return e.length?(e=e.map((function(e){return+e.value.split("sheet")[1]})).filter((function(e){return!!e})),"sheet".concat(Math.max.apply(Math,e)+1)):"sheet1"},e.prototype._endEdit=function(){this._serviceEvents.fire(o.SpreadsheetServiceEvents.endEdit)},e.prototype._getErrorWindow=function(){return this._errorAlert||(this._errorAlert=new n.Window({footer:!0,modal:!0,closable:!0,width:350,height:240,title:l.default.alertTitle}),this._errorAlert.footer.data.parse([{type:"button",view:"flat",size:"medium",color:"primary",value:l.default.ok,id:"ok"}])),this._errorAlert},e.prototype._renameSheet=function(e,t){var i=this.sheets.getItem(e);i&&t&&i.prevValue!==t&&this.events.fire(o.SpreadsheetEvents.beforeSheetRename,[{name:i.value,id:i.id},t])&&(this._serviceEvents.fire(o.SpreadsheetServiceEvents.callAction,[{val:t,action:o.Actions.renameSheet,groupAction:o.Actions.groupAction,sheets:this.sheets,prev:e}]),this.events.fire(o.SpreadsheetEvents.afterSheetRename,[{name:i.value,id:i.id}]))},e.prototype._initHandlers=function(){var e=this;this.tabbar.events.on(s.NavigationBarEvents.click,(function(t){"add-sheet"===t?e.add():e.setActive(t)})),this.tabbar.events.on(s.NavigationBarEvents.inputFocus,(function(t){var i=e.sheets.getItem(t);e.sheets.update(t,{prevValue:i.value})})),this.tabbar.events.on(s.NavigationBarEvents.inputBlur,(function(t){var i=e.sheets.getItem(t),n=i.value;if(e.sheets.find((function(e){return e.value===n&&e.id!==i.id}))){e._getErrorWindow();var o=l.default.renameSheetAlert.split("$name"),r=o[0],a=o[1];return e._errorAlert.attachHTML("<p>".concat(r,"<b>").concat(n,"</b>").concat(a,"</p>")),e._errorAlert.show(),e._errorAlert.footer.events.on(s.NavigationBarEvents.click,(function(){return e._errorAlert.hide()})),e._errorAlert.events.on(v.WindowEvents.afterHide,(function(){e.sheets.update(i.id,{value:i.prevValue}),e.tabbar.getRootNode().querySelector("input").focus()})),!1}e.sheets.update(t,{type:"navItem",value:i.prevValue}),e._renameSheet(t,n)})),this.contextMenu.events.on(s.NavigationBarEvents.click,(function(t){if("delete"===t)e.remove(e._focusedSheet);else{var i=e.tabbar.data.getItem(e._focusedSheet);e.tabbar.data.update(i.id,{type:"input"}),(0,f.awaitRedraw)().then((function(){var t=e.tabbar.getRootNode().querySelector("input");t.focus(),t.onkeyup=function(n){"Enter"===n.key&&t.blur(),"Escape"===n.key&&e.sheets.update(i.id,{type:"navItem",value:i.prevValue})}}))}})),this.contextMenu.events.on(s.NavigationBarEvents.afterHide,(function(){e._focusedSheet=null}));var t=this.tabbar.getRootView();t.hooks=t.hooks||{};var i=function(t){t.node.el.addEventListener("contextmenu",(function(t){e._endEdit();var i=(0,c.locate)(t);if(i&&"add-sheet"!==i&&!e.readonly){var n=e.sheets.getLength(),o=e.contextMenu.data;e._multiSheets&&2===n?o.update("delete",{disabled:!0}):e._multiSheets&&n>2&&o.getItem("delete").disabled&&o.update("delete",{disabled:!1}),e.contextMenu.showAt(t.target,"right"),e._focusedSheet=i,t.preventDefault()}}))};t.hooks.didMount=function(t){t.node&&t.node.el&&t.node.el.addEventListener("dblclick",(function(t){var i=(0,c.locate)(t);i&&"add-sheet"!==i&&!e.readonly&&(t.preventDefault(),e._focusedSheet=i,e.contextMenu.events.fire(s.NavigationBarEvents.click,["rename",t]),(0,f.awaitRedraw)().then((function(){return p.focusManager.setFocusId(null)})))})),i(t)},t.hooks.didRedraw=function(e){return i(e)}},e}();t.Sheets=g},function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.Toolbar=void 0,o(i(272),t);var r=i(100);Object.defineProperty(t,"Toolbar",{enumerable:!0,get:function(){return r.ProToolbar}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Toolbar=t.TreeCollection=void 0,i(273),i(274);var n=i(11);Object.defineProperty(t,"TreeCollection",{enumerable:!0,get:function(){return n.TreeCollection}});var o=i(60);Object.defineProperty(t,"Toolbar",{enumerable:!0,get:function(){return o.Toolbar}})},function(e,t,i){"use strict";i.r(t)},function(e,t,i){"use strict";i.r(t)},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SpreadsheetToolbar=void 0;var o=i(104),r=i(276),a=i(32),s=i(278),l=i(5),c=i(13),u=i(2),d=i(37),h=i(16),f=i(0),p=i(3),v=i(22),g=i(12),_=i(28),m=function(){function e(e){var t=e.config,i=e.store,n=e.uid,l=e.serviceEvents;this.toolbar=new a.Toolbar,this._store=i,this._suid=n;var c=(0,s.getToolbarStruct)(t.toolbarBlocks,t);this.toolbar.data.parse(c),this._popup=new r.Popup,this._colorpicker=new o.Colorpicker(null),this._popup.attach(this._colorpicker),this._borderPopup=new r.Popup,this._serviceEvents=l,this._borderColor="#4C4C4C",this._borderPopup=new r.Popup({css:"dhx_menu"}),this._borderToolbar=new a.Toolbar(null,{css:"dhx-spreadsheet-borders-toolbar",data:[{id:"all",type:"navItem",icon:"dxi dxi-border-all",tooltip:g.default.border_all},{id:"inner",type:"navItem",icon:"dxi dxi-border-inside",tooltip:g.default.border_inner},{id:"horizontal",type:"navItem",icon:"dxi dxi-border-horizontal",tooltip:g.default.border_horizontal},{id:"vertical",type:"navItem",icon:"dxi dxi-border-vertical",tooltip:g.default.border_vertical},{id:"outer",type:"navItem",icon:"dxi dxi-border-outside",tooltip:g.default.border_outer},{id:"border-color",css:"dhx_button-toolbar-colorPicker",type:"HTMLButton",html:(0,d.getColorpickerTemplate)("#4C4C4C","pencil"),tooltip:g.default.border_color},{id:"left",type:"navItem",icon:"dxi dxi-border-left",tooltip:g.default.border_left},{id:"top",type:"navItem",icon:"dxi dxi-border-top",tooltip:g.default.border_top},{id:"right",type:"navItem",icon:"dxi dxi-border-right",tooltip:g.default.border_right},{id:"bottom",type:"navItem",icon:"dxi dxi-border-bottom",tooltip:g.default.border_bottom},{id:"none",type:"navItem",icon:"dxi dxi-border-none",tooltip:g.default.border_clear},{id:"border-style",type:"navItem",icon:"dxi dxi-format-line-style",tooltip:g.default.border_style}]}),this._borderPopup.attach(this._borderToolbar),this._borderStyleList=new _.List(null,{css:"dhx_menu",template:this._listTemplate.bind(this),data:[{id:"one-px",style:"1px solid"},{id:"two-px",style:"2px solid"},{id:"three-px",style:"3px solid"},{id:"dashed",style:"1px dashed"},{id:"dotted",style:"1px dotted"},{id:"double",style:"3px double"}]}),this._borderStyleList.selection.add("one-px"),this.initEvent()}return e.prototype.updateToolbar=function(){var e,t=this,i=this._store.activePage,o=this.toolbar,r=i.getMeta(),a=r.merged,s=r.focusedCell,l=r.selectedCells;if(l&&s){var h=l.join(","),f=n({locked:!1,format:(0,c.getFormat)("common")},(0,u.getCellInfo)(s.cell,i)),p=[],v=!!(0,u.getCellsArray)(h).find((function(e){return!(0,u.isCellSpaned)((0,u.getCellInfo)(e,i),a)}));f.css&&(p="string"==typeof f.css?f.css.split(" "):f.css);for(var _={},m=0,y=p;m<y.length;m++){var b=y[m];_=n(n({},_),dhx.css.get(b))}var w=n({color:"#4C4C4C",background:"#FFF","text-align":"left","vertical-align":"center","font-style":"","font-weight":"","text-decoration":"",multiline:"clip"},_),x=g.default[v?"merge":"unmerge"],C="dxi dxi-table-".concat(v?"merge":"split","-cell").concat(v?"s":"");o.data.update("merge",{active:!v,icon:C,tooltip:x}),function(e){var i=function(i){switch(i){case"color":t.toolbar.data.update(i,{html:(0,d.getColorpickerTemplate)(e[i]||"#4C4C4C","format-color-text")});break;case"background":case"background-color":o.data.update("background",{html:(0,d.getColorpickerTemplate)(e[i]||"#FFF","format-color-fill")});break;case"text-align":var n="halign-".concat(e[i]);if(!o.data.exists("halign")||!o.data.exists(n))return{value:void 0};o.data.update("halign",{icon:o.data.getItem(n).icon});var r={};o.data.getItem("halign").items.forEach((function(e){r[e.id]=!1})),r[n]=!0,o.setState(r);break;case"vertical-align":var a="valign-".concat(e[i]);if(!o.data.exists("valign")||!o.data.exists(a))return{value:void 0};var s={};o.data.getItem("valign").items.forEach((function(e){s[e.id]=!1})),s[a]=!0,o.setState(s),o.data.update("valign",{icon:o.data.getItem(a).icon});break;case"multiline":if(!o.data.exists("multiline"))return{value:void 0};var l="multiline-".concat(e[i]),c={};o.data.getItem("multiline").items.forEach((function(e){c[e.id]=!1})),c[l]=!0,o.setState(c),o.data.update("multiline",{icon:o.data.getItem(l).icon});break;case"font-weight":o.data.update("font-weight-bold",{active:"bold"==e[i]||"700"==e[i]});break;case"font-style":o.data.update("font-style-italic",{active:"italic"===e[i]});break;case"text-decoration":var u={active:e[i].includes("underline")};o.data.update("text-decoration-underline",u);var h={active:e[i].includes("line-through")};o.data.update("text-decoration-line-through",h)}};for(var n in e){var r=i(n);if("object"==typeof r)return r.value}}(w);var E=o.data.getItem("format");for(var S in E&&E.items.map((function(e){return e.active=!1})),f)switch(S){case"locked":o.data.getItem("lock")&&o.data.update("lock",{active:f[S]});break;case"format":var I=(0,c.getDefaultFormatsMap)()[null===(e=f[S])||void 0===e?void 0:e.mask]||"common",k=o.data.getItem(I);o.data.getItem("format")&&o.data.update("format",{value:k?(0,c.getFormat)(I).name:o.data.getItem("custom_format").value}),k&&o.data.update(I,{active:!0}),o.data.update("custom_format",{hidden:!!k,active:!k})}for(var S in i)if("filter"===S)o.data.getItem("filter")&&o.data.update("filter",{active:i[S]})}},e.prototype.initEvent=function(){var e=this;this._colorpicker.events.on(o.ColorpickerEvents.change,(function(t){var i;if(e._popup.hide(),requestAnimationFrame((function(){h.focusManager.setFocusId(e._suid),e._activeInput&&(e._activeInput.focus(),e._activeInput=null)})),"border-color"===e.colorpickerTarget)return e._borderColor=t,e._borderToolbar.data.update("border-color",{html:(0,d.getColorpickerTemplate)(t||"#4C4C4C","pencil")}),void(e._selectedBorder&&e._applyBorders("".concat(e._selectedBorder)));var n=e._store.getSelectedCell();e._silencedColorChange||e._serviceEvents.fire(l.SpreadsheetServiceEvents.applyStyles,[n,(i={},i[e.colorpickerTarget]=t,i)]),e._silencedColorChange=!1})),this._borderToolbar.events.on(v.NavigationBarEvents.click,(function(t,i){return"border-color"===t?(e.colorpickerTarget="border-color",e._popup.attach(e._colorpicker),void e._popup.show(i.target)):"border-style"===t?(e._popup.attach(e._borderStyleList),void(e._popup.isVisible()?e._popup.hide():e._popup.show(i.target))):(e._selectedBorder=t,void e._applyBorders("".concat(e._selectedBorder)))})),this._borderStyleList.events.on("click",(function(){e._selectedBorder&&e._applyBorders("".concat(e._selectedBorder))}))},e.prototype.showColorpicker=function(e,t){var i=this._store.getSelectedCell();this.colorpickerTarget=e;var n=(0,u.getCellInfo)(i,this._store.activePage),o=(0,u.getStylesObject)(n.css)[e]||{background:"#FFFFFF",color:"#4C4C4C"}[e];this._silencedColorChange=!0,this._colorpicker.setValue("white"===o?"#FFFFFF":(0,f.rgbToHex)(o));var r=(0,p.locateNode)(t,"data-dhx-id");this._popup.attach(this._colorpicker),this._popup.show(r)},e.prototype.showBorderPopup=function(e){var t=(0,p.locateNode)(e,"data-dhx-id");this._selectedBorder=null,this._borderPopup.show(t)},e.prototype._listTemplate=function(e){return'<div class="dhx-border-style-item-wrapper">\n                    <div class="dhx-border-style-item '.concat(e.id,'"> </div>\n                </div>')},e.prototype._applyBorders=function(e){var t,i,n=this._store.getSelectedCell(),o=(0,u.isRangeId)(n);if(o||!["inner","horizontal","vertical"].includes(e)){var r=(null===(i=this._borderStyleList.selection.getItem())||void 0===i?void 0:i.style)||"1px solid",a=this._borderColor;if(r="".concat(r," ").concat(a),o){for(var s=[],c=this._store.getRangeIndexes(n),d=c.start.row,h=c.end.row,f=c.start.col,p=c.end.col,v=d;v<=h;v++)for(var g=f;g<=p;g++){var _={};"all"===e&&(v===d&&(_["border-top"]=r),_["border-bottom"]=r,g===f&&(_["border-left"]=r),_["border-right"]=r,g===p&&(_["border-right"]=r)),"outer"===e&&(v===d&&(_["border-top"]=r),v===h&&(_["border-bottom"]=r),g===f&&(_["border-left"]=r),g===p&&(_["border-right"]=r)),"inner"===e&&(v<h&&(_["border-bottom"]=r),g<p&&(_["border-right"]=r)),"horizontal"===e&&v<h&&(_["border-bottom"]=r),"vertical"===e&&g<p&&(_["border-right"]=r),"top"===e&&v===d&&(_["border-top"]=r),"bottom"===e&&v===h&&(_["border-bottom"]=r),"left"===e&&g===f&&(_["border-left"]=r),"right"===e&&g===p&&(_["border-right"]=r),"none"===e&&(_["border-left"]=void 0,_["border-top"]=void 0,_["border-right"]=void 0,_["border-bottom"]=void 0),Object.keys(_).length>0&&s.push({cell:(0,u.getCellNameByIndex)(v,g),page:this._store.activePage,val:_,action:l.Actions.setCellStyle})}this._serviceEvents.fire(l.SpreadsheetServiceEvents.callAction,[s])}else{var m=["all","outer","none"].includes(e)?"border":"border-".concat(e),y={cell:n,page:this._store.activePage,val:(t={},t[m]="none"===e?"".concat(e):r,t),action:l.Actions.setCellStyle};this._serviceEvents.fire(l.SpreadsheetServiceEvents.callAction,[y])}}},e}();t.SpreadsheetToolbar=m},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.i18n=t.Colorpicker=t.Popup=void 0;var n=i(62);i(277);var o=i(46),r=window.dhx=window.dhx||{},a=i(10);Object.defineProperty(t,"Popup",{enumerable:!0,get:function(){return a.Popup}});var s=i(105);Object.defineProperty(t,"Colorpicker",{enumerable:!0,get:function(){return s.Colorpicker}}),t.i18n=r.i18n||{},t.i18n.setLocale=n.setLocale,t.i18n.colorpicker=t.i18n.colorpicker||o.default},function(e,t,i){"use strict";i.r(t)},function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.getToolbarStruct=t.getHotKey=void 0;var r=i(2),a=i(37),s=i(12),l={undo:"z",redo:"y",bold:"b",italic:"i",underline:"u",link:"k","align-left":"l","align-center":"e","align-right":"r"},c={"line-through":"shift+5"},u=n(n(n({},l),c),{"line-through":"shift+x"});function d(e){return(0,r.isMac)()?"+".concat(u[e]):l[e]?"ctrl+".concat(l[e]):"alt+".concat(c[e])}t.getHotKey=d,t.getToolbarStruct=function(e,t){var i={undo:[{id:"undo",type:"navItem",icon:"dxi dxi-undo",tooltip:"".concat(s.default.undo," (").concat(d("undo"),")")},{id:"redo",type:"navItem",icon:"dxi dxi-redo",tooltip:"".concat(s.default.redo," (").concat(d("redo"),")")}],colors:[{id:"color",css:"dhx_button-toolbar-colorPicker",type:"HTMLButton",html:(0,a.getColorpickerTemplate)("#4C4C4C","format-color-text"),tooltip:s.default.textColor},{id:"background",css:"dhx_button-toolbar-colorPicker",type:"HTMLButton",html:(0,a.getColorpickerTemplate)("#FFF","format-color-fill"),tooltip:s.default.backgroundColor}],lock:[{id:"lock",type:"navItem",icon:"dxi dxi-key",tooltip:s.default.lockCell}],file:[{id:"export",type:"navItem",icon:"dxi dxi-file-export",tooltip:s.default.export,items:[{id:"export-xlsx",value:"Microsoft Excel(.xlsx)",icon:"dxi dxi-file-excel"}]},{id:"import",type:"navItem",icon:"dxi dxi-file-import",tooltip:s.default.import,items:[{id:"import-xlsx",value:"Microsoft Excel(.xlsx)",icon:"dxi dxi-file-excel"}]}],columns:[{id:"columns",type:"navItem",icon:"dxi dxi-table-column",tooltip:s.default.columns,items:[{id:"add-col",value:s.default.addColumn},{id:"remove-col",value:s.default.removeColumn},{id:"fit-col",value:s.default.fitToData,hidden:!0},{type:"separator"},{id:"unfreeze-cols",value:s.default.unfreezeCols},{id:"freeze-cols",value:s.default.freezeToCol},{id:"show-cols",value:s.default.showCols},{id:"hide-cols",value:s.default.hideCols}]}],rows:[{id:"rows",type:"navItem",icon:"dxi dxi-table-row",tooltip:s.default.rows,items:[{id:"add-row",value:s.default.addRow},{id:"remove-row",value:s.default.removeRow},{type:"separator"},{id:"unfreeze-rows",value:s.default.unfreezeRows},{id:"freeze-rows",value:s.default.freezeToRow},{id:"show-rows",value:s.default.showRows},{id:"hide-rows",value:s.default.hideRows}]}],clear:[{type:"navItem",icon:"dxi dxi-eraser",id:"clear-group",tooltip:s.default.clear,items:[{id:"clear-value",value:s.default.clearValue},{id:"clear-styles",value:s.default.clearStyles},{id:"clear-all",value:s.default.clearAll}]}],align:[{id:"halign",type:"navItem",icon:"dxi dxi-format-align-left",tooltip:s.default.halign,items:[{id:"halign-left",type:"navItem",value:s.default.left,icon:"dxi dxi-format-align-left",group:"halign",tooltip:"".concat(s.default.left," (").concat(d("align-left"),")")},{id:"halign-center",type:"navItem",value:s.default.center,icon:"dxi dxi-format-align-center",group:"halign",tooltip:"".concat(s.default.center," (").concat(d("align-center"),")")},{id:"halign-right",type:"navItem",value:s.default.right,icon:"dxi dxi-format-align-right",group:"halign",tooltip:"".concat(s.default.right," (").concat(d("align-right"),")")}]},{id:"valign",type:"navItem",icon:"dxi dxi-format-align-left",tooltip:s.default.valign,items:[{id:"valign-top",type:"navItem",group:"valign",value:s.default.top,icon:"dxi dxi-format-vertical-align-top"},{id:"valign-center",type:"navItem",group:"valign",value:s.default.center,icon:"dxi dxi-format-vertical-align-center"},{id:"valign-bottom",type:"navItem",group:"valign",value:s.default.bottom,icon:"dxi dxi-format-vertical-align-bottom"}]},{id:"multiline",type:"navItem",icon:"dxi dxi-format-align-left",tooltip:s.default.multiline,items:[{id:"multiline-clip",type:"navItem",group:"multiline",value:s.default.clip,icon:"dxi dxi-format-text-wrapping-clip"},{id:"multiline-wrap",type:"navItem",group:"multiline",value:s.default.wrap,icon:"dxi dxi-format-text-wrapping-wrap"}]}],cell:[{id:"border",type:"navItem",icon:"dxi dxi-border-all",tooltip:s.default.border},{id:"merge",type:"navItem",icon:"dxi dxi-table-merge-cells",tooltip:s.default.merge}],decoration:[{id:"font-weight-bold",type:"navItem",icon:"dxi dxi-format-bold",tooltip:"".concat(s.default.bold," (").concat(d("bold"),")")},{id:"font-style-italic",type:"navItem",icon:"dxi dxi-format-italic",tooltip:"".concat(s.default.italic," (").concat(d("italic"),")")},{id:"text-decoration-underline",type:"navItem",icon:"dxi dxi-format-underline",tooltip:"".concat(s.default.underline," (").concat(d("underline"),")")},{id:"text-decoration-line-through",type:"navItem",icon:"dxi dxi-format-strikethrough",tooltip:"".concat(s.default.strikethrough," (").concat(d("line-through"),")")}],help:[{id:"help",type:"navItem",icon:"dxi dxi-help-circle-outline",tooltip:s.default.help}],format:[{id:"format",type:"navItem",tooltip:s.default.format,css:"dhx_format-dropdown",items:(0,a.getFormatsDropdown)(t)}],actions:[{id:"filter",type:"navItem",tooltip:s.default.filter,icon:"dxi dxi-filter-variant"},{id:"link",type:"navItem",icon:"dxi dxi-link-variant",tooltip:"".concat(s.default.insert," ").concat(s.default.link.toLowerCase()," (").concat(d("link"),")")}]},n=["undo","colors","decoration","align","cell","format","actions"],r=(e=e||n).indexOf("default");return-1!==r&&e.splice.apply(e,o([r,1],n,!1)),(e=e.filter((function(e,t,i){return i.indexOf(e)===t}))).reduce((function(e,t,n,o){return i[t]&&(e.push.apply(e,i[t]),n!==o.length-1&&e.push({type:"separator"})),e}),[])}}])})),window.dhx_legacy){if(window.dhx)for(var key in dhx)if("i18n"===key)for(var lang in dhx[key])window.dhx_legacy[key][lang]=dhx[key][lang];else dhx_legacy[key]=dhx[key];window.dhx=dhx_legacy,delete window.dhx_legacy}